import{m as V,y as T,c as C,z as se,B as re,C as je,D as be,p as ve,E as oe,d as R,G as $e,a as h,o as m,_ as q,g as K,e as w,u as x,b as A,t as I,q as le,F as P,h as Y,l as z,i as H,A as U,w as W,H as J,I as ne,J as ie,v as Se,K as Ce}from"./index-DRXBIH1a.js";import{s as he,e as Ke,c as Pe}from"./reviews-ShNZGkIO.js";import{u as Be,d as ye}from"./db-CSQ4qy-K.js";import{d as Ie}from"./decks-CfOZF5PQ.js";import{a as Me}from"./fsrs-DGjdKZ7y.js";import{f as fe}from"./formats-CxjEYhKc.js";import{v as Ae,W as Ve}from"./WordListItem-R2_LxMq-.js";const pe="http://kanjivg.tagaini.net",ee=Symbol("kanjivg"),Ee=new DOMParser;function Ne(e){var a;const n=[];let t=e.closest("[data-position]");for(;t instanceof SVGElement;)n.push(t.dataset.position),t=((a=t.parentElement)==null?void 0:a.closest("[data-position]"))??null;return n}function en(e){const n=V(null),t=V(null),a=V(!1);T(()=>re(e),async i=>{if(i){a.value=!0;try{const c=await(await fetch(`/kanjivg/kanji/${i}.svg`)).text(),d=Ee.parseFromString(c,"image/svg+xml");if(d.documentElement instanceof SVGSVGElement){const{x:o,y:p,width:k,height:g}=d.documentElement.viewBox.baseVal;t.value=`${o},${p},${k},${g}`}const l=d.getElementById(`kvg:${i}`);if(l){for(const o of[...l==null?void 0:l.querySelectorAll("*"),l])if(o instanceof SVGElement){for(const p of[...o.attributes])p.namespaceURI===pe&&(o.dataset[p.localName]=p.value,o.removeAttributeNS(pe,p.localName));o.removeAttribute("xmlns:kvg")}}n.value=l}finally{a.value=!1}}},{immediate:!0});const s=C(()=>{const i=n.value;if(!i)return new Map;const r=new Map,c={};function d(o){if(o.dataset.part&&Number.parseInt(o.dataset.part)>1)return;const p=o.dataset.element,k={element:p,original:o.dataset.original??null,position:Ne(o),radical:o.dataset.radical??null};let g=r.get(p);g?g.push(k):(g=[k],r.set(p,g)),k.radical&&(c[k.radical]=p)}i.dataset.radical&&d(i);for(const o of i.querySelectorAll("g[data-element]"))d(o);const l=new Map;for(const o of["general","tradit","nelson"]){const p=c[o],k=r.get(p);k&&(l.set(p,k),r.delete(p))}for(const[o,p]of r)l.set(o,p);return l});je(ee,{strokesEl:n,viewBox:t,components:s,syncing:a})}function ke(){const e=se(ee,null);return C(()=>{var t;return((t=e==null?void 0:e.strokesEl.value)==null?void 0:t.cloneNode(!0))??null})}function ge(){const e=se(ee,null);return C(()=>(e==null?void 0:e.viewBox.value)??"0,0,109,109")}function De(){const e=se(ee,null);return C(()=>(e==null?void 0:e.components.value)??new Map)}function Le(){const e=se(ee,null);return C(()=>(e==null?void 0:e.syncing.value)??!1)}function*Ge(e){for(const n of e.split(`
`)){const[t,a,s,i,r]=n.split(",");if(!a)continue;const c={id:Number.parseInt(t),literal:a.at(0)??"",strokes:Number.parseInt(s),meaning:i,reading:r};for(const d of a)yield[d,c]}}const Re=be("radicals",()=>{const e=V(!1),n=V(null),t=oe(new Map);async function a(){if(!e.value){e.value=!0,n.value=null;try{const r=await(await fetch("/data/radicals.csv")).text();for(const[c,d]of Ge(r))t.set(c,d)}catch(i){n.value=i}finally{e.value=!1}}}async function s(i){const r=i.codePointAt(0);if(!r)return;const c=r==null?void 0:r.toString(16).padStart(5,"0"),l=await(await fetch(`/data/kanji-v1/${c}.json`)).json(),o=l.kunYomi.find(p=>!/[.-]/.test(p))??l.kunYomi.at(0)??"";t.set(i,{id:r,literal:i,strokes:l.strokeCount,meaning:l.meanings.at(0)??"",reading:o})}return a(),{radicals:t,sync:a,syncing:e,tryKanji:s}});function qe(e){const n=Re();return ve(()=>{const t=re(e);t&&!n.syncing&&!n.radicals.has(t)&&n.tryKanji(t)}),C(()=>{const t=re(e);return t?n.radicals.get(t)??null:null})}const Oe=R({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(e){const n=e,t=V(null);function a(){var s;(s=t.value)==null||s.replaceChildren(n.strokes??"")}return T(()=>n.strokes,a),$e(()=>{a()}),(s,i)=>(m(),h("g",{ref_key:"container",ref:t,class:"kanji-strokes"},null,512))}}),_e=q(Oe,[["__scopeId","data-v-53c78976"]]),Te={class:"kanji-component-item"},Ye=["viewBox"],ze={class:"component-info"},Xe={class:"literal"},He={class:"meaning"},We={key:0,lang:"ja"},Fe=R({__name:"KanjiComponentItem",props:{literal:{},parts:{}},setup(e){const n=e,t=ke(),a=ge(),s=C(()=>{for(const c of n.parts)if(c.radical)return c.radical;return null}),i=qe(()=>n.literal);function r(c){return`oklch(from var(--accent-color) l c ${c+3})`}return ve(()=>{const c=t.value;if(!c)return;c.dataset.element===n.literal&&(c.dataset.radical==="general"||c.dataset.radical==="tradit"?c.style.color="var(--green)":c.dataset.radical==="nelson"?c.style.color="var(--orange)":c.style.color=r(180));let d=-1;for(const l of c.querySelectorAll(`g[data-element="${n.literal}"]`)){if(l.dataset.radical==="general"||l.dataset.radical==="tradit"){l.style.color="var(--green)";continue}if(l.dataset.radical==="nelson"){l.style.color="var(--orange)";continue}(!l.dataset.part||l.dataset.part==="1")&&(d+=1),l.style.color=r(240+63*d)}}),(c,d)=>{var l,o;return m(),h("div",Te,[x(t)?(m(),h("svg",{key:0,viewBox:x(a),class:"kanji-component-strokes"},[A(_e,{class:"strokes-group",strokes:x(t)},null,8,["strokes"])],8,Ye)):K("",!0),w("div",ze,[w("span",Xe,I(c.literal),1),w("p",He,[w("strong",null,I((l=x(i))==null?void 0:l.meaning),1),(o=x(i))!=null&&o.reading?(m(),h("span",We," ("+I(x(i).reading)+")",1)):K("",!0)]),s.value?(m(),h("span",{key:0,class:le(["is-radical",{"is-nelson":s.value==="nelson"}])},[s.value==="nelson"?(m(),h(P,{key:0},[Y("Nelson radical")],64)):(m(),h(P,{key:1},[Y("Radical")],64))],2)):K("",!0)])])}}}),Ue=q(Fe,[["__scopeId","data-v-ce0ca725"]]),Je={class:"component-list"},Qe=R({__name:"KanjiComponents",setup(e){const n=De();return(t,a)=>(m(),h("section",null,[w("h2",null,[a[0]||(a[0]=Y(" Components ")),x(n).size>0?(m(),h(P,{key:0},[Y(" ("+I(x(n).size)+")",1)],64)):K("",!0)]),w("ul",Je,[(m(!0),h(P,null,z(x(n),([s,i])=>(m(),h("li",{key:s},[A(Ue,{literal:s,parts:i},null,8,["literal","parts"])]))),128))])]))}}),tn=q(Qe,[["__scopeId","data-v-6768574a"]]),Ze={class:"kanji-readings"},et={class:"dd-items"},tt={class:"dd-items"},nt=R({__name:"KanjiReadings",props:{kanji:{}},setup(e){return(n,t)=>(m(),h("section",null,[t[2]||(t[2]=w("h2",null,"Readings",-1)),w("dl",Ze,[t[0]||(t[0]=w("dt",null,"Kun",-1)),w("div",et,[(m(!0),h(P,null,z(n.kanji.kunYomi,a=>(m(),h("dd",null,I(a),1))),256))]),t[1]||(t[1]=w("dt",null,"On",-1)),w("div",tt,[(m(!0),h(P,null,z(n.kanji.onYomi,a=>(m(),h("dd",null,I(a),1))),256))])])]))}}),nn=q(nt,[["__scopeId","data-v-f6c59d96"]]),at={class:"kanji-strokes-background"},ot=["x","y","width","height"],st=["x1","y1","x2","y2"],it=["x1","y1","x2","y2"],rt=["x1","y1","x2","y2"],lt=["x1","y1","x2","y2"],ct=["x1","y1","x2","y2"],ut=["x1","y1","x2","y2"],dt=R({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(e){const n=e,t=C(()=>{const[i,r,c,d]=n.viewBox.split(",");return{x:Number.parseInt(i),y:Number.parseInt(r),width:Number.parseInt(c),height:Number.parseInt(d)}}),a=C(()=>{const{x:i,width:r}=t.value;return i+r/2}),s=C(()=>{const{y:i,height:r}=t.value;return i+r/2});return(i,r)=>(m(),h("g",at,[w("rect",{class:"background",x:t.value.x,y:t.value.y,width:t.value.width,height:t.value.width,rx:"5"},null,8,ot),w("line",{class:"midline",x1:t.value.x+1,y1:s.value,x2:t.value.x+t.value.width-1,y2:s.value},null,8,st),w("line",{class:"midline",x1:a.value,y1:t.value.y+1,x2:a.value,y2:t.value.y+t.value.height-1},null,8,it),w("line",{class:"quartline",x1:a.value/2,y1:t.value.y+1,x2:a.value/2,y2:t.value.y+t.value.height-1},null,8,rt),w("line",{class:"quartline",x1:3*a.value/2,y1:t.value.y+1,x2:3*a.value/2,y2:t.value.y+t.value.height-1},null,8,lt),w("line",{class:"quartline",x1:t.value.x+1,y1:s.value/2,x2:t.value.x+t.value.width-1,y2:s.value/2},null,8,ct),w("line",{class:"quartline",x1:t.value.x+1,y1:3*s.value/2,x2:t.value.x+t.value.width-1,y2:3*s.value/2},null,8,ut)]))}}),ft=q(dt,[["__scopeId","data-v-1b492e2c"]]),pt=1e-12,mt=112e-18,vt=e=>e>=-112e-18&&e<=mt,xe=(e,n)=>Math.sqrt(e*e+n*n),Q=(e,n)=>({x:e,y:n}),ht=e=>xe(e.x,e.y),yt=e=>Q(-e.x,-e.y),Z=(e,n)=>Q(e.x+n.x,e.y+n.y),E=(e,n)=>Q(e.x-n.x,e.y-n.y),F=(e,n)=>Q(e.x*n,e.y*n),D=(e,n)=>e.x*n.x+e.y*n.y,ue=(e,n)=>xe(e.x-n.x,e.y-n.y),O=(e,n=1)=>F(e,n/(ht(e)||1/0)),we=(e,n)=>({p:e,i:n}),kt=(e,n,t)=>{n&&(e.unshift(e[e.length-1]),e.push(e[1]));const a=e.length;if(a===0)return[];const s=[we(e[0])];return ce(e,s,t,0,a-1,E(e[1],e[0]),E(e[a-2],e[a-1])),n&&(s.shift(),s.pop()),s},ce=(e,n,t,a,s,i,r)=>{if(s-a===1){const k=e[a],g=e[s],u=ue(k,g)/3;me(n,[k,Z(k,O(i,u)),Z(g,O(r,u)),g]);return}const c=wt(e,a,s);let d=Math.max(t,t*t),l,o=!0;for(let k=0;k<=4;k++){const g=gt(e,a,s,c,i,r),u=jt(e,a,s,g,c);if(u.error<t&&o){me(n,g);return}if(l=u.index,u.error>=d)break;o=_t(e,a,s,c,g),d=u.error}const p=E(e[l-1],e[l+1]);ce(e,n,t,a,l,i,p),ce(e,n,t,l,s,yt(p),r)},me=(e,n)=>{const t=e[e.length-1];t.o=E(n[1],n[0]),e.push(we(n[3],E(n[2],n[3])))},gt=(e,n,t,a,s,i)=>{const r=pt,c=Math.abs,d=e[n],l=e[t],o=[[0,0],[0,0]],p=[0,0];for(let _=0,$=t-n+1;_<$;_++){const N=a[_],M=1-N,X=3*N*M,L=M*M*M,G=X*M,te=X*N,y=N*N*N,v=O(s,G),S=O(i,te),de=E(E(e[n+_],F(d,L+G)),F(l,te+y));o[0][0]+=D(v,v),o[0][1]+=D(v,S),o[1][0]=o[0][1],o[1][1]+=D(S,S),p[0]+=D(v,de),p[1]+=D(S,de)}const k=o[0][0]*o[1][1]-o[1][0]*o[0][1];let g,u;if(c(k)>r){const _=o[0][0]*p[1]-o[1][0]*p[0];g=(p[0]*o[1][1]-p[1]*o[0][1])/k,u=_/k}else{const _=o[0][0]+o[0][1],$=o[1][0]+o[1][1];g=u=c(_)>r?p[0]/_:c($)>r?p[1]/$:0}const b=ue(l,d),B=r*b;let f,j;if(g<B||u<B)g=u=b/3;else{const _=E(l,d);f=O(s,g),j=O(i,u),D(f,_)-D(j,_)>b*b&&(g=u=b/3,f=j=null)}return[d,Z(d,f||O(s,g)),Z(l,j||O(i,u)),l]},_t=(e,n,t,a,s)=>{for(let i=n;i<=t;i++)a[i-n]=xt(s,e[i],a[i-n]);for(let i=1,r=a.length;i<r;i++)if(a[i]<=a[i-1])return!1;return!0},xt=(e,n,t)=>{const a=[],s=[];for(let o=0;o<=2;o++)a[o]=F(E(e[o+1],e[o]),3);for(let o=0;o<=1;o++)s[o]=F(E(a[o+1],a[o]),2);const i=ae(3,e,t),r=ae(2,a,t),c=ae(1,s,t),d=E(i,n),l=D(r,r)+D(d,c);return vt(l)?t:t-D(d,r)/l},ae=(e,n,t)=>{const a=n.slice();for(let s=1;s<=e;s++)for(let i=0;i<=e-s;i++)a[i]=Z(F(a[i],1-t),F(a[i+1],t));return a[0]},wt=(e,n,t)=>{const a=[0];for(let s=n+1;s<=t;s++)a[s-n]=a[s-n-1]+ue(e[s],e[s-1]);for(let s=1,i=t-n;s<=i;s++)a[s]/=a[i];return a},jt=(e,n,t,a,s)=>{let i=Math.floor((t-n+1)/2),r=0;for(let c=n+1;c<t;c++){const d=ae(3,a,s[c-n]),l=E(d,e[c]),o=l.x*l.x+l.y*l.y;o>=r&&(r=o,i=c)}return{error:r,index:i}},bt=(e,n,t)=>{const a=e.length,s=10**t,i=t<16?u=>Math.round(u*s)/s:u=>u,r=(u,b)=>i(u)+","+i(b);let c=!0,d,l,o,p;const k=[],g=(u,b)=>{var j,_,$,N;const B=u.p.x,f=u.p.y;if(c)k.push("M"+r(B,f)),c=!1;else{const M=B+(((j=u.i)==null?void 0:j.x)??0),X=f+(((_=u.i)==null?void 0:_.y)??0);if(M===B&&X===f&&o===d&&p===l){if(!b){const L=B-d,G=f-l;k.push(L===0?"v"+i(G):G===0?"h"+i(L):"l"+r(L,G))}}else k.push("c"+r(o-d,p-l)+" "+r(M-d,X-l)+" "+r(B-d,f-l))}d=B,l=f,o=B+((($=u.o)==null?void 0:$.x)??0),p=f+(((N=u.o)==null?void 0:N.y)??0)};if(!a)return"";for(let u=0;u<a;u++)g(e[u]);return n&&a>0&&(g(e[0],!0),k.push("z")),k.join("")},$t=(e,n={})=>e.length===0?"":bt(kt(e.map(typeof e[0].x=="number"?t=>Q(t.x,t.y):t=>Q(t[0],t[1])),n.closed,n.tolerance??2.5),n.closed,n.precision??5),St=["x","y","width","height"],Ct={class:"practice-strokes"},Kt=["d"],Pt=["points"],Bt=R({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(e,{emit:n}){const t=e,a=n,s=V(null),i=C(()=>{var f;return(f=s.value)==null?void 0:f.closest("svg")}),r=C(()=>{var f;return(f=i.value)==null?void 0:f.viewBox.baseVal}),c=oe([]);function d(f){var $;if(!i.value)return{x:f.x,y:f.y};const j=i.value.createSVGPoint();j.x=f.x,j.y=f.y;const _=j.matrixTransform(($=i.value.getScreenCTM())==null?void 0:$.inverse());return{x:_.x,y:_.y}}function l(f){var j;f.isPrimary&&(f.preventDefault(),(j=s.value)==null||j.setPointerCapture(f.pointerId),c.push(d(f)))}function o(f){c.length===0||!f.isPrimary||c.push(d(f))}function p(f){var j,_,$;f.isPrimary&&(c.length>1&&a("stroke",$t(c)),(j=s.value)==null||j.releasePointerCapture(f.pointerId),c.splice(0,c.length),($=(_=i.value)==null?void 0:_.parentElement)==null||$.click())}function k(f){const j=f.getTotalLength();return[{strokeDasharray:j,strokeDashoffset:j},{strokeDasharray:j,strokeDashoffset:0}]}const g={duration:500,easing:"ease-in-out"},u=[];function b(){var f;if(s.value){for(const j of(f=s.value)==null?void 0:f.querySelectorAll("path.stroke")){const _=j.animate(k(j),g);_.pause(),u.push(_)}B()}}async function B(){let f=u.at(0);for(;f;)f.play(),await f.finished,u.shift(),f=u.at(0),f&&await he(100)}return T(()=>t.animate,f=>{f&&b()}),T(()=>t.animatePause,f=>{var j,_;f?(j=u.at(0))==null||j.pause():(_=u.at(0))==null||_.play()}),(f,j)=>(m(),h("g",{ref_key:"el",ref:s,class:"kanji-strokes-practice-canvas canvas",onPointerdown:l,onPointermove:o,onPointerup:p},[r.value?(m(),h("rect",{key:0,class:"background",x:r.value.x,y:r.value.y,width:r.value.width,height:r.value.height},null,8,St)):K("",!0),w("g",Ct,[(m(!0),h(P,null,z(f.practiceStrokes,(_,$)=>(m(),h("path",{class:"stroke practice-stroke",key:$,d:_},null,8,Kt))),128))]),w("polyline",{class:"stroke current-stroke",points:x(c).map(({x:_,y:$})=>`${_},${$}`).join(" ")},null,8,Pt)],544))}}),It=q(Bt,[["__scopeId","data-v-afa29600"]]),Mt={class:"strokes-figure"},At=["viewBox"],Vt={class:"controls"},Et=R({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean,default:!1},practiceMode:{type:Boolean,default:!1}},emits:["practiceDone"],setup(e,{expose:n,emit:t}){const a=e,s=t,i=V(null),r=ke(),c=ge(),d=Le(),l=C(()=>{var y;return((y=r.value)==null?void 0:y.querySelectorAll("path"))??[]}),o=oe([]),p=C(()=>o.length>0),k=V(!1),g=V(!1),u=V(!1),b=oe([]);function B(y){const v=y.getTotalLength();return[{strokeDasharray:v,strokeDashoffset:v},{strokeDasharray:v,strokeDashoffset:0}]}const f={duration:500,easing:"ease-in-out"};function j(){for(const y of l.value){const v=y.animate(B(y),f);v.pause(),o.push(v)}_()}async function _(){let y=o.at(0);for(;y;)y.play(),await y.finished,o.shift(),y=o.at(0),y&&await he(100)}function $(){var y;(y=o.at(0))==null||y.pause(),k.value=!0}function N(){var y;(y=o.at(0))==null||y.play(),k.value=!1}function M(y=b.length){const v=l.value[y];if(!v)return;v.style.display="block";const S=v.animate(B(v),f);S.play(),S.finished.then(()=>{v.style.removeProperty("display")})}function X(y){b.push(y),a.practiceMode&&b.length===l.value.length&&s("practiceDone"),a.practiceMode&&a.autoHint&&b.length<l.value.length&&M()}function L(){g.value=!1,b.splice(0,b.length)}function G(){for(const y of o)y.cancel();o.splice(0,o.length),k.value=!1;for(const y of l.value)for(const v of y.getAnimations())v.cancel()}function te(){if(b.length===0){u.value=!1;return}b.length<l.value.length&&(g.value=!0)}return T(u,y=>{g.value=!1,y?G():L()}),T(()=>a.autoHint,y=>{y&&requestAnimationFrame(async()=>{await Ke(d).toBe(!1),M(0)})},{immediate:!0}),T(()=>a.kanji.codepoint,(y,v)=>{y!==v&&(L(),G(),g.value=!1,u.value!==a.practiceMode&&(u.value=a.practiceMode))},{immediate:!0}),n({clearPracticeStrokes:L,maybeShowAnswer:te}),(y,v)=>(m(),h("section",null,[w("h2",null,[v[8]||(v[8]=Y(" Strokes ")),!y.practiceMode&&l.value.length>0?(m(),h(P,{key:0},[Y(" ("+I(l.value.length)+") ",1)],64)):K("",!0)]),w("figure",Mt,[x(r)?(m(),h("svg",{key:0,ref_key:"svgEl",ref:i,class:le(["svg",{practicing:u.value}]),viewBox:x(c),onTouchstart:v[1]||(v[1]=S=>{u.value&&S.preventDefault()})},[A(ft,{viewBox:x(c)},null,8,["viewBox"]),A(_e,{strokes:x(r),class:le(["strokes",{comparing:p.value||g.value||l.value.length<=x(b).length,practicing:u.value}])},null,8,["strokes","class"]),u.value?(m(),H(It,{key:0,"practice-strokes":x(b),animate:p.value,"animate-pause":k.value,onStroke:v[0]||(v[0]=S=>X(S))},null,8,["practice-strokes","animate","animate-pause"])):K("",!0)],42,At)):K("",!0),w("figcaption",Vt,[p.value?(m(),h(P,{key:0},[k.value?(m(),H(U,{key:0,"aria-label":"Play",onClick:v[2]||(v[2]=S=>N())},{default:W(()=>[A(J,{icon:"play"})]),_:1})):(m(),H(U,{key:1,"aria-label":"Pause",onClick:v[3]||(v[3]=S=>$())},{default:W(()=>[A(J,{icon:"pause"})]),_:1}))],64)):(m(),h(P,{key:1},[u.value&&x(b).length<l.value.length?(m(),H(U,{key:0,"aria-label":"Show Hint",onClick:v[4]||(v[4]=S=>M())},{default:W(()=>[A(J,{icon:"help-circle"})]),_:1})):(m(),H(U,{key:1,"aria-label":"Animate Stroke Order",onClick:v[5]||(v[5]=S=>j())},{default:W(()=>[A(J,{icon:"play"})]),_:1}))],64)),y.practiceMode?K("",!0):(m(),H(U,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${u.value}`,filled:u.value,onClick:v[6]||(v[6]=S=>u.value=!u.value)},{default:W(()=>[A(J,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),u.value?(m(),h(P,{key:3},[v[9]||(v[9]=w("hr",{class:"rule"},null,-1)),A(U,{"aria-label":"Undo",onClick:v[7]||(v[7]=S=>x(b).pop())},{default:W(()=>[A(J,{icon:"rotate-left"})]),_:1})],64)):K("",!0)])])]))}}),an=q(Et,[["__scopeId","data-v-9ce5a873"]]),Nt={class:"kanji-title"},Dt={class:"main-meaning meaning"},Lt={class:"labels"},Gt={key:0,class:"label freq"},Rt=["data-r"],qt=["data-r"],Ot={key:0,class:"additional-meanings"},Tt={class:"meaning"},Yt=R({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const n=e,t=C(()=>{const{freq:r}=n.kanji;if(!r)return null;if(r<=50)return 50;if(r<=100)return 100;if(r<=200)return 200;if(r<=500)return 500;if(r<=1e3)return 1e3}),{result:a}=Be(C(()=>{const r=n.kanji.codepoint;return async()=>(await ye).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(r))})),s=Me(()=>n.kanji.codepoint);function i(r){return r>.9?"good":r>.7?"fair":"poor"}return(r,c)=>{var l,o,p,k,g;const d=Se("RouterLink");return m(),h("header",Nt,[ne(w("h2",{class:"literal",lang:"ja"},I(r.kanji.literal),513),[[ie,!r.hideLiteral]]),ne(w("p",Dt,[w("strong",null,I((l=r.kanji.meanings)==null?void 0:l.at(0)),1)],512),[[ie,!r.hideMeaning]]),w("aside",Lt,[t.value&&!((o=x(a))!=null&&o.some(({name:u})=>u===`news-top-${t.value}`))?(m(),h("span",Gt," Top "+I(t.value),1)):K("",!0),x(a)?(m(!0),h(P,{key:1},z(x(a),u=>(m(),H(d,{to:{name:x(Ce),query:{deck:u.name}},key:u.name,class:"label deck"},{default:W(()=>[Y(I(x(Ie)(u)),1)]),_:2},1032,["to"]))),128)):K("",!0),(p=x(s))!=null&&p.write?(m(),h("span",{key:2,class:"label retrievability",title:"Writing Retrievability","data-r":i(x(s).write)}," 書 "+I(x(fe)(x(s).write)),9,Rt)):K("",!0),(k=x(s))!=null&&k.read?(m(),h("span",{key:3,class:"label retrievability",title:"Reading Retrievability","data-r":i(x(s).read)}," 読 "+I(x(fe)(x(s).read)),9,qt)):K("",!0)]),((g=r.kanji.meanings)==null?void 0:g.length)>1?ne((m(),h("ul",Ot,[(m(!0),h(P,null,z(r.kanji.meanings.slice(1),u=>(m(),h("li",Tt,I(u),1))),256))],512)),[[ie,!r.hideMeaning]]):K("",!0)])}}}),on=q(Yt,[["__scopeId","data-v-0758661b"]]),zt={class:"kanji-word-list"},Xt=R({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const n=e,t=Pe(async()=>{const{words:c}=n.kanjiVocab,d=[],l=[],{store:o}=(await ye).transaction("bookmarked-words");for(const p of c)await o.count(p)?d.push(p):l.push(p);return{bookmarked:d,rest:l}},null),a=V(20),s=C(()=>{const c=a.value;if(t.value){const{bookmarked:d,rest:l}=t.value;return[d,l.slice(0,c)]}return[n.kanjiVocab.words.slice(0,c)]});function i(){a.value+=20}function r([{isIntersecting:c}]){c&&i()}return T(()=>n.kanjiVocab.codepoint,(c,d)=>{c!==d&&(a.value=20)}),(c,d)=>(m(),h("section",null,[w("h2",null,"Words ("+I(c.kanjiVocab.words.length)+")",1),w("ul",zt,[(m(!0),h(P,null,z(s.value,l=>(m(),h(P,null,[(m(!0),h(P,null,z(l,o=>(m(),h("li",{key:o},[A(Ve,{word:o,kanji:c.kanjiVocab.literal,"hide-kanji":c.hideKanji,"hide-reading":c.hideReading,"hide-meaning":c.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),a.value<c.kanjiVocab.words.length?ne((m(),h("button",{key:0,class:"next-page-button",onClick:d[0]||(d[0]=l=>i())},d[1]||(d[1]=[Y(" Load More ")]))),[[x(Ae),r]]):K("",!0)]))}}),sn=q(Xt,[["__scopeId","data-v-db833710"]]);export{on as K,nn as a,an as b,tn as c,sn as d,en as p};
