import{c as u,C as P,d as D,i as A,x as V,u as n,v as Q,w as b,h as v,t as m,o as s,_ as j,a,F as x,l as K,b as w,m as Y,p as T,E as z,N as G,e as k,g as f,f as C,A as E}from"./index-C4O8d0Wk.js";import{g as H}from"./decks-3_dyRDXy.js";import{u as $,d as F}from"./db-D-l1LJxU.js";import{u as M}from"./fsrs-C9LDqAL5.js";import{d as J}from"./decks-CfOZF5PQ.js";import{f as S}from"./formats-CxjEYhKc.js";import{S as R}from"./index-CZZIk45U.js";import"./reviews-Cd2z_uA7.js";function O(){return $(async()=>(await(await F).transaction("decks").store.index("category+priority").getAll()).filter(({active:t})=>t)).result}function U(l){const t=M(),o=u(()=>{const i=P(l);return()=>H(i,t.value)}),{result:e}=$(o);return e}const W=D({__name:"DeckKanjiCardItem",props:{codepoint:{}},setup(l){const t=l,o=u(()=>String.fromCodePoint(t.codepoint)),{result:e}=$(async()=>{const{codepoint:r}=t,_=(await F).transaction("progress").store,d=await _.get([r,"kanji-read"]),L=await _.get([r,"kanji-write"]);return{read:d,write:L}}),i=M();function p(r){return r?r.state===R.New?"new":r.state===R.Learning||r.state===R.Relearning||r.due<new Date?"due":i.value.get_retrievability(r,new Date,!1)>.99?"know":"review":null}const y=u(()=>p(e.value?.read?.fsrs)),g=u(()=>p(e.value?.write?.fsrs));return(r,_)=>{const d=V("RouterLink");return s(),A(d,{to:n(Q)(o.value),class:"kanji","data-read":y.value,"data-write":g.value},{default:b(()=>[v(m(o.value),1)]),_:1},8,["to","data-read","data-write"])}}}),X=j(W,[["__scopeId","data-v-16014247"]]),Z={class:"kanji-list"},ee=D({__name:"DeckKanjiCards",props:{kanji:{}},setup(l){return(t,o)=>(s(),a("ol",Z,[(s(!0),a(x,null,K(t.kanji,e=>(s(),a("li",{key:e,class:"kanji"},[w(X,{codepoint:e},null,8,["codepoint"])]))),128))]))}}),te=j(ee,[["__scopeId","data-v-4bbb3e6d"]]),se=["aria-labelledby"],ne=["id"],ae={class:"status"},oe={class:"count total-count"},re={key:0,class:"count know-count"},ce={key:1,class:"count review-count"},ue={key:2,class:"count due-count"},ie={key:3,class:"count new-count"},le=D({__name:"DeckListItem",props:{deck:{}},setup(l){const t=l,o=Y(null),e=G(),i=T(),p=u(()=>J(t.deck)),y=u(()=>i.query.deck?typeof i.query.deck=="string"?[i.query.deck]:i.query.deck:[]),g=u(()=>y.value.includes(t.deck.name)),r=u(()=>{const{name:c}=t.deck,I=g.value?y.value.filter(h=>h!==c):[...y.value,c];return{query:{...i.query,deck:I}}}),_=U(()=>t.deck.name);function d(c){if(!_.value)return 0;const{"kanji-read":I,"kanji-write":h}=_.value;return(I[c]+h[c])/2}const L=u(()=>d("new")),q=u(()=>d("due")),N=u(()=>d("review")),B=u(()=>d("know"));return z(()=>{g.value&&y.value.length===1&&o.value?.scrollIntoView({block:"start"})}),(c,I)=>{const h=V("RouterLink");return s(),a("article",{ref_key:"el",ref:o,class:"deck-list-item","aria-labelledby":n(e)},[k("strong",{id:n(e),class:"label"},[w(h,{to:r.value,"aria-pressed":g.value,replace:""},{default:b(()=>[v(m(p.value),1)]),_:1},8,["to","aria-pressed"])],8,ne),k("div",ae,[k("span",oe,m(c.deck.cards.length)+" cards",1),n(_)?(s(),a(x,{key:0},[B.value>0?(s(),a("span",re,m(n(S)(B.value/c.deck.cards.length))+" know ",1)):f("",!0),N.value>0?(s(),a("span",ce,m(n(S)(N.value/c.deck.cards.length))+" reviewed ",1)):f("",!0),q.value>0?(s(),a("span",ue,m(n(S)(q.value/c.deck.cards.length))+" due ",1)):f("",!0),L.value>0?(s(),a("span",ie,m(n(S)(L.value/c.deck.cards.length))+" remaining ",1)):f("",!0)],64)):f("",!0)]),g.value?(s(),A(te,{key:0,kanji:c.deck.cards,class:"cards"},null,8,["kanji"])):f("",!0)],8,se)}}}),de=j(le,[["__scopeId","data-v-33452db6"]]),ke={key:0,class:"deck-list"},pe=D({__name:"DeckList",setup(l){const t=O();return(o,e)=>{const i=V("RouterLink");return s(),a("section",null,[e[4]||(e[4]=k("p",null," Decks allow you do keep track of your practice, such that you know which kanji you already know, which you should learn next, and which you need to review. ",-1)),n(t)&&n(t).length>0?(s(),a("ol",ke,[(s(!0),a(x,null,K(n(t),p=>(s(),a("li",{key:p.name,class:"deck-list-item"},[w(de,{deck:p},null,8,["deck"])]))),128))])):n(t)?(s(),a(x,{key:1},[k("p",null,[e[1]||(e[1]=v(" You donâ€˜t have any decks. ")),w(i,{to:n(C)},{default:b(()=>e[0]||(e[0]=[v(" Add your first deck ")])),_:1,__:[0]},8,["to"]),e[2]||(e[2]=v(" by clicking the button below. "))]),w(E,{to:n(C),"prefix-icon":"plus"},{default:b(()=>e[3]||(e[3]=[v(" Add Deck ")])),_:1,__:[3]},8,["to"])],64)):f("",!0)])}}}),_e=j(pe,[["__scopeId","data-v-d7bb3716"]]),me={class:"article-header"},fe={class:"actions"},ve=D({__name:"DecksView",setup(l){return(t,o)=>(s(),a("article",null,[k("header",me,[o[1]||(o[1]=k("h2",{class:"title"},"Your Decks",-1)),k("div",fe,[w(E,{to:n(C),"prefix-icon":"draw"},{default:b(()=>o[0]||(o[0]=[v(" Manage Decks ")])),_:1,__:[0]},8,["to"])])]),w(_e)]))}}),Ie=j(ve,[["__scopeId","data-v-45d5f815"]]);export{Ie as default};
