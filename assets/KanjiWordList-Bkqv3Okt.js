import{p as je,s as ke}from"./reviews-BZy-Kf2y.js";import{u as pe}from"./kanji-components-CdOEBGxo.js";import{m as L,C as Y,c as C,z as ae,M as $e,B as Se,d as G,N as Ce,a as v,o as d,_ as q,s as Pe,i as z,w as E,g as P,e as j,u as _,b as M,t as B,v as le,F as S,h as I,O as Be,x as ye,l as R,P as ce,A as O,E as T,Q as Ke,S as te,U as ie,D as Me,V as Ie,n as Ae}from"./index-BM2Ra3on.js";import{d as Ve}from"./decks-SO1bh7uj.js";import{a as De,f as fe}from"./decks-Bhp3y8Gp.js";import{b as Ee}from"./fsrs-B_IQ2BK6.js";import{v as Ne}from"./index-BaBsQMEA.js";import{d as Le}from"./db-MrKA-e94.js";import{W as Re}from"./WordListItem-CxTWrGoe.js";function Ge(e){return t=>{const n=new Map;for(const a of t){const o=e(a);let r=n.get(o);r||(r=[],n.set(o,r)),r.push(a)}return n}}const ve="http://kanjivg.tagaini.net",ee=Symbol("kanjivg"),re=["general","tradit","nelson"],qe=new DOMParser;function Oe(e){const t=[];let n=e.closest("[data-position]");for(;n instanceof SVGElement;)t.push(n.dataset.position),n=n.parentElement?.closest("[data-position]")??null;return t}function rn(e){const t=L(null),n=L(null),a=L(!1);Y(()=>$e(e),async r=>{if(r){a.value=!0;try{const c=await(await fetch(`/kanjivg/kanji/${r}.svg`)).text(),p=qe.parseFromString(c,"image/svg+xml");if(p.documentElement instanceof SVGSVGElement){const{x:s,y:m,width:x,height:y}=p.documentElement.viewBox.baseVal;n.value=`${s},${m},${x},${y}`}const l=p.getElementById(`kvg:${r}`);if(l){for(const s of[...l.querySelectorAll("*"),l])if(s instanceof SVGElement){for(const m of[...s.attributes])m.namespaceURI===ve&&(s.dataset[m.localName]=m.value,s.removeAttributeNS(ve,m.localName));s.removeAttribute("xmlns:kvg")}}t.value=l}finally{a.value=!1}}},{immediate:!0});const o=C(()=>{const r=t.value;if(!r)return new Map;const i=new Map,c={};function p(s){if(s.dataset.part&&Number.parseInt(s.dataset.part)>1)return;const m=s.dataset.element,x={element:m,original:s.dataset.original??null,position:Oe(s),radical:s.dataset.radical??null,phon:s.dataset.phon??null};let y=i.get(m);y?y.push(x):(y=[x],i.set(m,y)),x.radical&&(c[x.radical]=m)}r.dataset.radical&&p(r);for(const s of r.querySelectorAll("g[data-element]"))p(s);const l=new Map;for(const s of re){const m=c[s],x=i.get(m);x&&(x.sort((y,u)=>y.radical?u.radical?re.indexOf(y.radical)-re.indexOf(u.radical):-1:u.radical?-1:0),l.set(m,x),i.delete(m))}for(const[s,m]of i)l.set(s,m);return l});Se(ee,{strokesEl:t,viewBox:n,components:o,syncing:a})}function ge(){const e=ae(ee,null);return C(()=>e?.strokesEl.value?.cloneNode(!0)??null)}function _e(){const e=ae(ee,null);return C(()=>e?.viewBox.value??"0,0,109,109")}function Te(){const e=ae(ee,null);return C(()=>e?.components.value??new Map)}function ze(){const e=ae(ee,null);return C(()=>e?.syncing.value??!1)}const Xe=G({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(e){const t=e,n=L(null);function a(){n.value?.replaceChildren(t.strokes??"")}return Y(()=>t.strokes,a),Ce(()=>{a()}),(o,r)=>(d(),v("g",{ref_key:"container",ref:n,class:"kanji-strokes"},null,512))}}),xe=q(Xe,[["__scopeId","data-v-53c78976"]]),Ye=["viewBox"],We={class:"component-info"},He={key:0,class:"literal"},Fe={class:"meaning"},Je={key:0,class:"original",lang:"ja"},Ue={key:1,lang:"ja"},Qe={class:"tags"},Ze={key:1,class:"is-phonetic"},et=G({__name:"KanjiComponentItem",props:{literal:{},original:{},parts:{}},setup(e){const t=e,n=ge(),a=_e(),o=C(()=>{for(const k of t.parts)if(k.radical)return k.radical;return null}),r=C(()=>{for(const k of t.parts)if(k.phon)return k.phon;return null}),i=pe(()=>t.literal),c=C(()=>t.parts.at(0)?.original),p=pe(c),l=C(()=>p.value?.radical?.en??p.value?.meaning??i.value?.radical?.en??i?.value?.meaning),s=C(()=>p.value?.radical?.jp??p.value?.reading??i.value?.radical?.jp??i?.value?.reading),m=C(()=>p.value?.radical?.number??i.value?.radical?.number),x=C(()=>t.literal.startsWith("CDP-")),y=[["彐","⺕"],["犭","⺨"],["阝","⻖"]];function u(k){for(const[f,g]of y)if(k===f)return g;return k}function w(k){return`oklch(from var(--accent-color) l c ${k+3})`}return Pe(()=>{const k=n.value;if(!k)return;k.dataset.element===t.literal&&(!t.original||t.original===k.dataset.original)&&(k.dataset.radical==="general"||k.dataset.radical==="tradit"?k.style.color="var(--green)":k.dataset.radical==="nelson"||k.dataset.radical==="jis"?k.style.color="var(--bluegreen)":k.dataset.phon===t.literal?k.style.color="var(--gold)":k.style.color=w(180));let f=-1;for(const g of k.querySelectorAll(`g[data-element="${t.literal}"]`))if(!(t.original&&t.original!==g.dataset.original)){if(g.dataset.radical==="general"||g.dataset.radical==="tradit"){g.style.color="var(--green)";continue}if(g.dataset.radical==="nelson"||g.dataset.radical==="jis"){g.style.color="var(--bluegreen)";continue}if(g.dataset.phon){g.style.color="var(--gold)";continue}(!g.dataset.part||g.dataset.part==="1")&&(f+=1),g.style.color=w(240+63*f)}}),(k,f)=>{const g=ye("RouterLink");return d(),z(g,{to:_(Be)(u(k.literal)),class:"kanji-component-item"},{default:E(()=>[_(n)?(d(),v("svg",{key:0,viewBox:_(a),class:"kanji-component-strokes"},[M(xe,{class:"strokes-group",strokes:_(n)},null,8,["strokes"])],8,Ye)):P("",!0),j("div",We,[x.value?P("",!0):(d(),v("span",He,B(k.literal),1)),j("p",Fe,[j("strong",null,B(l.value),1),c.value?(d(),v("span",Je,B(c.value),1)):P("",!0),s.value?(d(),v("span",Ue," ("+B(s.value)+")",1)):P("",!0)]),j("div",Qe,[o.value?(d(),v("span",{key:0,class:le(["is-radical",{"is-nelson":o.value==="nelson","is-jis":o.value==="jis"}])},[o.value==="nelson"?(d(),v(S,{key:0},[I("Nelson radical")],64)):o.value==="jis"?(d(),v(S,{key:1},[I("JIS radical")],64)):(d(),v(S,{key:2},[I("Radical")],64)),m.value?(d(),v(S,{key:3},[I(" "+B(m.value),1)],64)):P("",!0)],2)):P("",!0),r.value?(d(),v("span",Ze,"Phonetic")):P("",!0)])])]),_:1},8,["to"])}}}),tt=q(et,[["__scopeId","data-v-d58bba66"]]),nt={class:"component-list"},at=G({__name:"KanjiComponents",setup(e){const t=Te();function n(a){return je(a,Ge(o=>o.original||null))}return(a,o)=>(d(),v("section",null,[j("h2",null,[o[0]||(o[0]=I(" Components ",-1)),_(t).size>0?(d(),v(S,{key:0},[I(" ("+B(_(t).size)+") ",1)],64)):P("",!0)]),j("ul",nt,[(d(!0),v(S,null,R(_(t),([r,i])=>(d(),v(S,{key:r},[(d(!0),v(S,null,R(n(i),([c,p])=>(d(),v("li",{key:c??0},[M(tt,{literal:r,parts:p,original:c},null,8,["literal","parts","original"])]))),128))],64))),128))])]))}}),ln=q(at,[["__scopeId","data-v-57344291"]]),ot={class:"kanji-readings"},st={class:"dd-items"},it={class:"dd-items"},rt=G({__name:"KanjiReadings",props:{kanji:{}},setup(e){return(t,n)=>(d(),v("section",null,[n[2]||(n[2]=j("h2",null,"Readings",-1)),j("dl",ot,[n[0]||(n[0]=j("dt",null,"Kun",-1)),j("div",st,[(d(!0),v(S,null,R(t.kanji.kunYomi,a=>(d(),v("dd",{key:a},B(a),1))),128))]),n[1]||(n[1]=j("dt",null,"On",-1)),j("div",it,[(d(!0),v(S,null,R(t.kanji.onYomi,a=>(d(),v("dd",{key:a},B(a),1))),128))])])]))}}),cn=q(rt,[["__scopeId","data-v-9a0b4580"]]),lt={class:"kanji-strokes-background"},ct=["x","y","width","height"],ut=["x1","y1","x2","y2"],dt=["x1","y1","x2","y2"],pt=["x1","y1","x2","y2"],ft=["x1","y1","x2","y2"],vt=["x1","y1","x2","y2"],mt=["x1","y1","x2","y2"],ht=G({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(e){const t=e,n=C(()=>{const[r,i,c,p]=t.viewBox.split(",");return{x:Number.parseInt(r),y:Number.parseInt(i),width:Number.parseInt(c),height:Number.parseInt(p)}}),a=C(()=>{const{x:r,width:i}=n.value;return r+i/2}),o=C(()=>{const{y:r,height:i}=n.value;return r+i/2});return(r,i)=>(d(),v("g",lt,[j("rect",{class:"background",x:n.value.x,y:n.value.y,width:n.value.width,height:n.value.width,rx:"5"},null,8,ct),j("line",{class:"midline",x1:n.value.x+1,y1:o.value,x2:n.value.x+n.value.width-1,y2:o.value},null,8,ut),j("line",{class:"midline",x1:a.value,y1:n.value.y+1,x2:a.value,y2:n.value.y+n.value.height-1},null,8,dt),j("line",{class:"quartline",x1:a.value/2,y1:n.value.y+1,x2:a.value/2,y2:n.value.y+n.value.height-1},null,8,pt),j("line",{class:"quartline",x1:3*a.value/2,y1:n.value.y+1,x2:3*a.value/2,y2:n.value.y+n.value.height-1},null,8,ft),j("line",{class:"quartline",x1:n.value.x+1,y1:o.value/2,x2:n.value.x+n.value.width-1,y2:o.value/2},null,8,vt),j("line",{class:"quartline",x1:n.value.x+1,y1:3*o.value/2,x2:n.value.x+n.value.width-1,y2:3*o.value/2},null,8,mt)]))}}),kt=q(ht,[["__scopeId","data-v-78045927"]]),yt=1e-12,me=112e-18,gt=e=>e>=-me&&e<=me,be=(e,t)=>Math.sqrt(e*e+t*t),U=(e,t)=>({x:e,y:t}),_t=e=>be(e.x,e.y),xt=e=>U(-e.x,-e.y),Z=(e,t)=>U(e.x+t.x,e.y+t.y),D=(e,t)=>U(e.x-t.x,e.y-t.y),H=(e,t)=>U(e.x*t,e.y*t),N=(e,t)=>e.x*t.x+e.y*t.y,de=(e,t)=>be(e.x-t.x,e.y-t.y),X=(e,t=1)=>H(e,t/(_t(e)||1/0)),we=(e,t)=>({p:e,i:t}),bt=(e,t,n)=>{t&&(e.unshift(e[e.length-1]),e.push(e[1]));const a=e.length;if(a===0)return[];const o=[we(e[0])];return ue(e,o,n,0,a-1,D(e[1],e[0]),D(e[a-2],e[a-1])),t&&(o.shift(),o.pop()),o},ue=(e,t,n,a,o,r,i)=>{if(o-a===1){const x=e[a],y=e[o],u=de(x,y)/3;he(t,[x,Z(x,X(r,u)),Z(y,X(i,u)),y]);return}const c=St(e,a,o);let p=Math.max(n,n*n),l,s=!0;for(let x=0;x<=4;x++){const y=wt(e,a,o,c,r,i),u=Ct(e,a,o,y,c);if(u.error<n&&s){he(t,y);return}if(l=u.index,u.error>=p)break;s=jt(e,a,o,c,y),p=u.error}const m=D(e[l-1],e[l+1]);ue(e,t,n,a,l,r,m),ue(e,t,n,l,o,xt(m),i)},he=(e,t)=>{const n=e[e.length-1];n.o=D(t[1],t[0]),e.push(we(t[3],D(t[2],t[3])))},wt=(e,t,n,a,o,r)=>{const i=yt,c=Math.abs,p=e[t],l=e[n],s=[[0,0],[0,0]],m=[0,0];for(let $=0,A=n-t+1;$<A;$++){const V=a[$],W=1-V,F=3*V*W,oe=W*W*W,J=F*W,Q=F*V,se=V*V*V,b=X(o,J),h=X(r,Q),K=D(D(e[t+$],H(p,oe+J)),H(l,Q+se));s[0][0]+=N(b,b),s[0][1]+=N(b,h),s[1][0]=s[0][1],s[1][1]+=N(h,h),m[0]+=N(b,K),m[1]+=N(h,K)}const x=s[0][0]*s[1][1]-s[1][0]*s[0][1];let y,u;if(c(x)>i){const $=s[0][0]*m[1]-s[1][0]*m[0];y=(m[0]*s[1][1]-m[1]*s[0][1])/x,u=$/x}else{const $=s[0][0]+s[0][1],A=s[1][0]+s[1][1];y=u=c($)>i?m[0]/$:c(A)>i?m[1]/A:0}const w=de(l,p),k=i*w;let f,g;if(y<k||u<k)y=u=w/3;else{const $=D(l,p);f=X(o,y),g=X(r,u),N(f,$)-N(g,$)>w*w&&(y=u=w/3,f=g=null)}return[p,Z(p,f||X(o,y)),Z(l,g||X(r,u)),l]},jt=(e,t,n,a,o)=>{for(let r=t;r<=n;r++)a[r-t]=$t(o,e[r],a[r-t]);for(let r=1,i=a.length;r<i;r++)if(a[r]<=a[r-1])return!1;return!0},$t=(e,t,n)=>{const a=[],o=[];for(let s=0;s<=2;s++)a[s]=H(D(e[s+1],e[s]),3);for(let s=0;s<=1;s++)o[s]=H(D(a[s+1],a[s]),2);const r=ne(3,e,n),i=ne(2,a,n),c=ne(1,o,n),p=D(r,t),l=N(i,i)+N(p,c);return gt(l)?n:n-N(p,i)/l},ne=(e,t,n)=>{const a=t.slice();for(let o=1;o<=e;o++)for(let r=0;r<=e-o;r++)a[r]=Z(H(a[r],1-n),H(a[r+1],n));return a[0]},St=(e,t,n)=>{const a=[0];for(let o=t+1;o<=n;o++)a[o-t]=a[o-t-1]+de(e[o],e[o-1]);for(let o=1,r=n-t;o<=r;o++)a[o]/=a[r];return a},Ct=(e,t,n,a,o)=>{let r=Math.floor((n-t+1)/2),i=0;for(let c=t+1;c<n;c++){const p=ne(3,a,o[c-t]),l=D(p,e[c]),s=l.x*l.x+l.y*l.y;s>=i&&(i=s,r=c)}return{error:i,index:r}},Pt=(e,t,n)=>{const a=e.length,o=10**n,r=n<16?u=>Math.round(u*o)/o:u=>u,i=(u,w)=>r(u)+","+r(w);let c=!0,p,l,s,m;const x=[],y=(u,w)=>{const k=u.p.x,f=u.p.y;if(c)x.push("M"+i(k,f)),c=!1;else{const g=k+(u.i?.x??0),$=f+(u.i?.y??0);if(g===k&&$===f&&s===p&&m===l){if(!w){const A=k-p,V=f-l;x.push(A===0?"v"+r(V):V===0?"h"+r(A):"l"+i(A,V))}}else x.push("c"+i(s-p,m-l)+" "+i(g-p,$-l)+" "+i(k-p,f-l))}p=k,l=f,s=k+(u.o?.x??0),m=f+(u.o?.y??0)};if(!a)return"";for(let u=0;u<a;u++)y(e[u]);return t&&a>0&&(y(e[0],!0),x.push("z")),x.join("")},Bt=(e,t={})=>e.length===0?"":Pt(bt(e.map(typeof e[0].x=="number"?n=>U(n.x,n.y):n=>U(n[0],n[1])),t.closed,t.tolerance??2.5),t.closed,t.precision??5),Kt=["x","y","width","height"],Mt={class:"practice-strokes"},It=["d"],At=["points"],Vt=G({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(e,{emit:t}){const n=e,a=t,o=L(null),r=C(()=>o.value?.closest("svg")),i=C(()=>r.value?.viewBox.baseVal),c=ce([]);function p(f){if(!r.value)return{x:f.x,y:f.y};const g=r.value.createSVGPoint();g.x=f.x,g.y=f.y;const $=g.matrixTransform(r.value.getScreenCTM()?.inverse());return{x:$.x,y:$.y}}function l(f){f.isPrimary&&(f.preventDefault(),o.value?.setPointerCapture(f.pointerId),c.push(p(f)))}function s(f){c.length===0||!f.isPrimary||c.push(p(f))}function m(f){f.isPrimary&&(c.length>1&&a("stroke",Bt(c)),o.value?.releasePointerCapture(f.pointerId),c.splice(0,c.length),r.value?.parentElement?.click())}function x(f){const g=f.getTotalLength();return[{strokeDasharray:g,strokeDashoffset:g},{strokeDasharray:g,strokeDashoffset:0}]}const y={duration:500,easing:"ease-in-out"},u=[];function w(){if(o.value){for(const f of o.value.querySelectorAll("path.stroke")){const g=f.animate(x(f),y);g.pause(),u.push(g)}k()}}async function k(){let f=u.at(0);for(;f;)f.play(),await f.finished,u.shift(),f=u.at(0),f&&await ke(100)}return Y(()=>n.animate,f=>{f&&w()}),Y(()=>n.animatePause,f=>{f?u.at(0)?.pause():u.at(0)?.play()}),(f,g)=>(d(),v("g",{ref_key:"el",ref:o,class:"kanji-strokes-practice-canvas canvas",onPointerdown:l,onPointermove:s,onPointerup:m},[i.value?(d(),v("rect",{key:0,class:"background",x:i.value.x,y:i.value.y,width:i.value.width,height:i.value.height},null,8,Kt)):P("",!0),j("g",Mt,[(d(!0),v(S,null,R(f.practiceStrokes,($,A)=>(d(),v("path",{key:A,class:"stroke practice-stroke",d:$},null,8,It))),128))]),j("polyline",{class:"stroke current-stroke",points:_(c).map(({x:$,y:A})=>`${$},${A}`).join(" ")},null,8,At)],544))}}),Dt=q(Vt,[["__scopeId","data-v-5df6291b"]]),Et={class:"strokes-figure"},Nt=["viewBox"],Lt={class:"controls"},Rt=G({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean,default:!1},practiceMode:{type:Boolean,default:!1}},emits:["practiceDone"],setup(e,{expose:t,emit:n}){const a=e,o=n,r=L(null),i=ge(),c=_e(),p=ze(),l=C(()=>i.value?.querySelectorAll("path")??[]),s=ce([]),m=C(()=>s.length>0),x=L(!1),y=L(!1),u=L(!1),w=ce([]);function k(b){const h=b.getTotalLength();return[{strokeDasharray:h,strokeDashoffset:h},{strokeDasharray:h,strokeDashoffset:0}]}const f={duration:500,easing:"ease-in-out"};function g(){for(const b of l.value){const h=b.animate(k(b),f);h.pause(),s.push(h)}$()}async function $(){let b=s.at(0);for(;b;)b.play(),await b.finished,s.shift(),b=s.at(0),b&&await ke(100)}function A(){s.at(0)?.pause(),x.value=!0}function V(){s.at(0)?.play(),x.value=!1}function W(){const b=l.value[w.length]?.getAttribute("d");b&&w.push(b)}function F(b=w.length){const h=l.value[b];if(!h)return;h.style.display="block";const K=h.animate(k(h),f);K.play(),K.finished.then(()=>{h.style.removeProperty("display")})}function oe(b){w.push(b),a.practiceMode&&w.length===l.value.length&&o("practiceDone"),a.practiceMode&&a.autoHint&&w.length<l.value.length&&F()}function J(){y.value=!1,w.splice(0,w.length)}function Q(){for(const b of s)b.cancel();s.splice(0,s.length),x.value=!1;for(const b of l.value)for(const h of b.getAnimations())h.cancel()}function se(){if(w.length===0){u.value=!1;return}w.length<l.value.length&&(y.value=!0)}return Y(u,b=>{y.value=!1,b?Q():J()}),Y(()=>a.autoHint,b=>{b&&requestAnimationFrame(async()=>{await Ke(p).toBe(!1),F(0)})},{immediate:!0}),Y(()=>a.kanji.codepoint,(b,h)=>{b!==h&&(J(),Q(),y.value=!1,u.value!==a.practiceMode&&(u.value=a.practiceMode))},{immediate:!0}),t({clearPracticeStrokes:J,maybeShowAnswer:se}),(b,h)=>(d(),v("section",null,[j("h2",null,[h[10]||(h[10]=I(" Strokes ",-1)),!b.practiceMode&&l.value.length>0?(d(),v(S,{key:0},[I(" ("+B(l.value.length)+") ",1)],64)):P("",!0)]),j("figure",Et,[_(i)?(d(),v("svg",{key:0,ref_key:"svgEl",ref:r,class:le(["svg",{practicing:u.value}]),viewBox:_(c),onTouchstart:h[1]||(h[1]=K=>{u.value&&K.preventDefault()})},[M(kt,{viewBox:_(c)},null,8,["viewBox"]),M(xe,{strokes:_(i),class:le(["strokes",{comparing:m.value||y.value||l.value.length<=_(w).length,practicing:u.value}])},null,8,["strokes","class"]),u.value?(d(),z(Dt,{key:0,"practice-strokes":_(w),animate:m.value,"animate-pause":x.value,onStroke:h[0]||(h[0]=K=>oe(K))},null,8,["practice-strokes","animate","animate-pause"])):P("",!0)],42,Nt)):P("",!0),j("figcaption",Lt,[m.value?(d(),v(S,{key:0},[x.value?(d(),z(O,{key:0,"aria-label":"Play",onClick:h[2]||(h[2]=K=>V())},{default:E(()=>[M(T,{icon:"play"})]),_:1})):(d(),z(O,{key:1,"aria-label":"Pause",onClick:h[3]||(h[3]=K=>A())},{default:E(()=>[M(T,{icon:"pause"})]),_:1}))],64)):(d(),v(S,{key:1},[u.value&&_(w).length<l.value.length?(d(),z(O,{key:0,"aria-label":"Show Hint",onClick:h[4]||(h[4]=K=>F())},{default:E(()=>[M(T,{icon:"help-circle"})]),_:1})):(d(),z(O,{key:1,"aria-label":"Animate Stroke Order",onClick:h[5]||(h[5]=K=>g())},{default:E(()=>[M(T,{icon:"play"})]),_:1}))],64)),b.practiceMode?P("",!0):(d(),z(O,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${u.value}`,filled:u.value,onClick:h[6]||(h[6]=K=>u.value=!u.value)},{default:E(()=>[M(T,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),u.value?(d(),v(S,{key:3},[h[11]||(h[11]=j("hr",{class:"rule"},null,-1)),M(O,{"aria-label":"Start Over",disabled:_(w).length===0,onClick:h[7]||(h[7]=K=>_(w).splice(0,_(w).length))},{default:E(()=>[M(T,{icon:"rotate-left"})]),_:1},8,["disabled"]),M(O,{"aria-label":"Skip Backward",disabled:_(w).length===0,onClick:h[8]||(h[8]=K=>_(w).pop())},{default:E(()=>[M(T,{icon:"skip-backward"})]),_:1},8,["disabled"]),M(O,{"aria-label":"Skip Backward",disabled:_(w).length===l.value.length,onClick:h[9]||(h[9]=K=>W())},{default:E(()=>[M(T,{icon:"skip-forward"})]),_:1},8,["disabled"])],64)):P("",!0)])])]))}}),un=q(Rt,[["__scopeId","data-v-7dda416c"]]),Gt={class:"kanji-title"},qt={class:"main-meaning meaning"},Ot={class:"labels"},Tt={key:0,class:"label freq"},zt=["data-r"],Xt=["data-r"],Yt={key:0,class:"additional-meanings"},Wt={key:1,class:"actions"},Ht=G({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1},actions:{default:"explore"}},setup(e){const t=e,n=C(()=>{const{freq:i}=t.kanji;return i?i<=50?50:i<=100?100:i<=200?200:i<=500?500:i<=1e3?1e3:null:null}),a=De(()=>t.kanji.codepoint),o=Ee(()=>t.kanji.codepoint);function r(i){return typeof i=="string"?"poor":i>.9?"good":i>.7?"fair":"poor"}return(i,c)=>{const p=ye("RouterLink");return d(),v("header",Gt,[te(j("h2",{class:"literal",lang:"ja"},B(i.kanji.literal),513),[[ie,!i.hideLiteral]]),te(j("p",qt,[j("strong",null,B(i.kanji.meanings?.at(0)),1)],512),[[ie,!i.hideMeaning]]),j("aside",Ot,[n.value&&!_(a).some(({name:l})=>l===`news-top-${n.value}`)?(d(),v("span",Tt," Top "+B(n.value),1)):P("",!0),(d(!0),v(S,null,R(_(a),l=>(d(),z(p,{key:l.name,to:{name:_(Ie),query:{deck:l.name}},class:"label deck"},{default:E(()=>[I(B(_(Ve)(l)),1)]),_:2},1032,["to"]))),128)),_(o)?.write?(d(),v("span",{key:1,class:"label retrievability",title:"Writing Retrievability","data-r":r(_(o).write)},[c[0]||(c[0]=I(" 書 ",-1)),typeof _(o).write=="string"?(d(),v(S,{key:0},[I(B(_(o).write),1)],64)):(d(),v(S,{key:1},[I(B(_(fe)(_(o).write)),1)],64))],8,zt)):P("",!0),_(o)?.read?(d(),v("span",{key:2,class:"label retrievability",title:"Reading Retrievability","data-r":r(_(o).read)},[c[1]||(c[1]=I(" 読 ",-1)),typeof _(o).read=="string"?(d(),v(S,{key:0},[I(B(_(o).read),1)],64)):(d(),v(S,{key:1},[I(B(_(fe)(_(o).read)),1)],64))],8,Xt)):P("",!0)]),i.kanji.meanings?.length>1?te((d(),v("ul",Yt,[(d(!0),v(S,null,R(i.kanji.meanings.slice(1),l=>(d(),v("li",{key:l,class:"meaning"},B(l),1))),128))],512)),[[ie,!i.hideMeaning]]):P("",!0),i.$slots.actions?(d(),v("nav",Wt,[Me(i.$slots,"actions",{},void 0,!0)])):P("",!0)])}}}),dn=q(Ht,[["__scopeId","data-v-cdbb1b9f"]]),Ft={class:"kanji-word-list"},Jt=G({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const t=e,n=Ae(async()=>{const{words:c}=t.kanjiVocab,p=[],l=[],{store:s}=(await Le).transaction("bookmarked-words");for(const m of c)await s.count(m)?p.push(m):l.push(m);return{bookmarked:p,rest:l}},null),a=L(20),o=C(()=>{const c=a.value;if(n.value){const{bookmarked:p,rest:l}=n.value;return[p,l.slice(0,c)]}return[t.kanjiVocab.words.slice(0,c)]});function r(){a.value+=20}function i([{isIntersecting:c}]){c&&r()}return Y(()=>t.kanjiVocab.codepoint,(c,p)=>{c!==p&&(a.value=20)}),(c,p)=>(d(),v("section",null,[j("h2",null,"Words ("+B(c.kanjiVocab.words.length)+")",1),j("ul",Ft,[(d(!0),v(S,null,R(o.value,l=>(d(),v(S,null,[(d(!0),v(S,null,R(l,s=>(d(),v("li",{key:s},[M(Re,{word:s,kanji:c.kanjiVocab.literal,"hide-kanji":c.hideKanji,"hide-reading":c.hideReading,"hide-meaning":c.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),a.value<c.kanjiVocab.words.length?te((d(),v("button",{key:0,class:"next-page-button",onClick:p[0]||(p[0]=l=>r())},[...p[1]||(p[1]=[I(" Load More ",-1)])])),[[_(Ne),i]]):P("",!0)]))}}),pn=q(Jt,[["__scopeId","data-v-0daae353"]]);export{dn as K,cn as a,un as b,ln as c,pn as d,Ge as g,rn as p};
//# sourceMappingURL=KanjiWordList-Bkqv3Okt.js.map
