{"version":3,"file":"WordView-BJjMKDwS.js","sources":["../../src/components/WordKanjiList.vue","../../src/components/WordSentencesList.vue","../../src/views/WordView.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\nimport { isKanji } from \"../helpers/text.ts\";\nimport { Word } from \"../types.ts\";\nimport WordKanjiListItem from \"./WordKanjiListItem.vue\";\n\nconst props = defineProps<{\n  word: Word;\n}>();\n\nconst kanjiInWord = computed<Set<string>>(() => {\n  const kanji = new Set<string>();\n\n  if (!props.word.writings) {\n    return kanji;\n  }\n\n  for (const writing of props.word.writings) {\n    if (writing.irregular || writing.outdated || writing.searchOnly) {\n      continue;\n    }\n\n    for (const char of writing.text) {\n      if (isKanji(char)) {\n        kanji.add(char);\n      }\n    }\n  }\n\n  return kanji;\n});\n</script>\n\n<template>\n  <section v-if=\"kanjiInWord.size > 0\">\n    <h3>Kanji ({{ kanjiInWord.size }})</h3>\n\n    <ul class=\"kanji-list\">\n      <li v-for=\"kanji of kanjiInWord\" :key=\"kanji\">\n        <WordKanjiListItem :kanji=\"kanji\" />\n      </li>\n    </ul>\n  </section>\n</template>\n\n<style scoped>\n.kanji-list {\n  display: grid;\n  gap: 1.5em 1em;\n  grid-template-columns: repeat(3, 1fr);\n  list-style: none;\n  margin: 0;\n  padding: 0;\n\n  @media screen and (max-width: 60ch) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  @media screen and (max-width: 45ch) {\n    display: flex;\n    flex-direction: column;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useWordSetenceIds } from \"../helpers/words.ts\";\nimport VocabularySentence from \"./VocabularySentence.vue\";\n\nconst props = defineProps<{\n  wordId: number;\n}>();\n\nconst sentenceIds = useWordSetenceIds(() => props.wordId);\n</script>\n\n<template>\n  <section v-if=\"sentenceIds.length > 0\">\n    <h3 class=\"title\">Sentences ({{ sentenceIds.length }})</h3>\n\n    <ul class=\"sentence-list\">\n      <li\n        v-for=\"sentenceId of sentenceIds\"\n        :key=\"sentenceId\"\n        class=\"sentence-item\"\n      >\n        <VocabularySentence :sentence-id=\"sentenceId\" />\n      </li>\n    </ul>\n  </section>\n</template>\n\n<style scoped>\n.sentence-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.title {\n  margin-block: 0 1ex;\n}\n\n.sentence-item:not(:first-child) {\n  margin-block-start: 1em;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, ref, watch } from \"vue\";\nimport { useRoute } from \"vue-router\";\n\nimport BookmarkWordButton from \"../components/BookmarkWordButton.vue\";\nimport VocabularyWordFurigana from \"../components/VocabularyWordFurigana.vue\";\nimport VocabularyWordMeaning from \"../components/VocabularyWordMeaning.vue\";\nimport WordKanjiList from \"../components/WordKanjiList.vue\";\nimport WordSentencesList from \"../components/WordSentencesList.vue\";\nimport WordWritingSelect from \"../components/WordWritingSelect.vue\";\nimport { useWord, useWordFurigana } from \"../helpers/words.ts\";\nimport { Furigana } from \"../types.ts\";\n\nconst route = useRoute();\nconst wordId = computed(() => {\n  const value = route.params.wordId;\n\n  if (typeof value !== \"string\") {\n    return null;\n  }\n\n  const id = Number.parseInt(value);\n\n  if (!Number.isFinite(id)) {\n    return null;\n  }\n\n  return id;\n});\n\nconst word = useWord(wordId);\nconst preferredFurigana = useWordFurigana(word);\nconst selectedFurigana = ref<Furigana | string | null>(null);\n\nwatch(wordId, (newId, oldId) => {\n  if (newId !== oldId) {\n    selectedFurigana.value = null;\n  }\n});\n</script>\n\n<template>\n  <article v-if=\"word\" class=\"world-view-article\">\n    <header class=\"header\">\n      <h2 class=\"title\">\n        <template v-if=\"typeof selectedFurigana === 'string'\">\n          {{ selectedFurigana }}\n        </template>\n\n        <VocabularyWordFurigana\n          v-else\n          :furigana=\"selectedFurigana || preferredFurigana\"\n          link-kanji\n        />\n      </h2>\n\n      <div class=\"actions\">\n        <BookmarkWordButton\n          :word-id=\"word.id\"\n          :reading=\"word.readings?.at(0)?.text\"\n        />\n\n        <WordWritingSelect\n          v-model=\"selectedFurigana\"\n          :word=\"word\"\n          :default-furigana=\"preferredFurigana\"\n          class=\"section\"\n        />\n      </div>\n    </header>\n\n    <section v-if=\"word.meanings && word.meanings.length > 0\" class=\"section\">\n      <ul class=\"meaning-list\">\n        <li v-for=\"(meaning, i) of word.meanings\" :key=\"i\">\n          <VocabularyWordMeaning :meaning=\"meaning\" />\n        </li>\n      </ul>\n    </section>\n\n    <WordKanjiList v-if=\"word\" :word=\"word\" class=\"section\" />\n    <WordSentencesList v-if=\"wordId\" :word-id=\"wordId\" class=\"section\" />\n  </article>\n</template>\n\n<style scoped>\n.header {\n  align-items: start;\n  column-gap: 1em;\n  display: flex;\n\n  & .title {\n    font-size: 4em;\n    font-weight: 500;\n    margin: 0;\n    max-inline-size: calc(100vw - 1.5em);\n  }\n\n  & .actions {\n    align-items: end;\n    display: flex;\n    flex-direction: column;\n    margin-inline-start: auto;\n    row-gap: 1ex;\n  }\n}\n\n.world-view-article > .section {\n  margin-block: 1em 1.5em;\n}\n\n.meaning-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n\n  & > li:not(:first-child) {\n    margin-block-start: 1ex;\n  }\n}\n</style>\n"],"names":["props","__props","kanjiInWord","computed","kanji","writing","char","isKanji","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","_hoisted_2","_Fragment","_renderList","_createVNode","WordKanjiListItem","sentenceIds","useWordSetenceIds","_unref","_hoisted_3","sentenceId","VocabularySentence","route","useRoute","wordId","value","id","word","useWord","preferredFurigana","useWordFurigana","selectedFurigana","ref","watch","newId","oldId","_openBlock","_createBlock","VocabularyWordFurigana","_hoisted_4","BookmarkWordButton","WordWritingSelect","$event","_hoisted_5","_hoisted_6","meaning","i","VocabularyWordMeaning","WordKanjiList","WordSentencesList"],"mappings":"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"}