import{u as x,A as V}from"./index-Cva3TYWK.js";import{d as j,c as i,p as $,o as n,f as q,w as D,g as _,t as k,u as o,q as F,_ as b,a as r,F as R,j as N,e as m,H as E,m as P,b as l,h as p,i as C}from"./index-B5Dql4fu.js";import{u as Q,a as Y}from"./decks-Dtrttax1.js";import{d as H}from"./decks-GrwULuka.js";import{u as T,d as z}from"./db-Cg6DtNz6.js";import{u as G}from"./fsrs-CHxvAwVH.js";import{f as I}from"./formats-CxjEYhKc.js";const J=j({__name:"DeckKanjiCardItem",props:{codepoint:{}},setup(f){const a=f,u=i(()=>String.fromCodePoint(a.codepoint)),{result:e}=T(async()=>{const{codepoint:t}=a,c=(await z).transaction("progress").store,w=await c.get([t,"kanji-read"]),L=await c.get([t,"kanji-write"]);return{read:w,write:L}}),v=G();function d(t){return t?t.state===x.New?"new":t.state===x.Learning||t.state===x.Relearning||t.due<new Date?"due":v.value.get_retrievability(t,new Date,!1)>.99?"know":"review":null}const y=i(()=>{var t,c;return d((c=(t=e.value)==null?void 0:t.read)==null?void 0:c.fsrs)}),S=i(()=>{var t,c;return d((c=(t=e.value)==null?void 0:t.write)==null?void 0:c.fsrs)});return(t,c)=>{const w=$("RouterLink");return n(),q(w,{to:o(F)(u.value),class:"kanji","data-read":y.value,"data-write":S.value},{default:D(()=>[_(k(u.value),1)]),_:1},8,["to","data-read","data-write"])}}}),M=b(J,[["__scopeId","data-v-f91bac39"]]),O={class:"kanji-list"},U=j({__name:"DeckKanjiCards",props:{kanji:{}},setup(f){return(a,u)=>(n(),r("ol",O,[(n(!0),r(R,null,N(a.kanji,e=>(n(),r("li",{key:e,class:"kanji"},[m(M,{codepoint:e},null,8,["codepoint"])]))),128))]))}}),W=b(U,[["__scopeId","data-v-951da1ce"]]),X=["aria-labelledby"],Z=["id"],ee={class:"status"},te={class:"count total-count"},se={key:0,class:"count know-count"},ne={key:1,class:"count review-count"},ae={key:2,class:"count due-count"},oe={key:3,class:"count new-count"},re=j({__name:"DeckListItem",props:{deck:{}},setup(f){const a=f,u=E(),e=P(),v=i(()=>H(a.deck));function d(s){return s?typeof s=="string"?[s]:s:[]}const y=i(()=>d(e.query.deck).includes(a.deck.name)),S=i(()=>{const{name:s}=a.deck,h=d(e.query.deck),g=y.value?h.filter(K=>K!==s):[...h,s];return{query:{...e.query,deck:g}}}),t=Q(()=>a.deck.name);function c(s){if(!t.value)return 0;const{"kanji-read":h,"kanji-write":g}=t.value;return(h[s]+g[s])/2}const w=i(()=>c("new")),L=i(()=>c("due")),A=i(()=>c("review")),B=i(()=>c("know"));return(s,h)=>{const g=$("RouterLink");return n(),r("article",{class:"deck-list-item","aria-labelledby":o(u)},[l("strong",{id:o(u),class:"label"},[m(g,{to:S.value,"aria-pressed":y.value,replace:""},{default:D(()=>[_(k(v.value),1)]),_:1},8,["to","aria-pressed"])],8,Z),l("div",ee,[l("span",te,k(s.deck.cards.length)+" cards",1),o(t)?(n(),r(R,{key:0},[B.value>0?(n(),r("span",se,k(o(I)(B.value/s.deck.cards.length))+" know ",1)):p("",!0),A.value>0?(n(),r("span",ne,k(o(I)(A.value/s.deck.cards.length))+" reviewed ",1)):p("",!0),L.value>0?(n(),r("span",ae,k(o(I)(L.value/s.deck.cards.length))+" due ",1)):p("",!0),w.value>0?(n(),r("span",oe,k(o(I)(w.value/s.deck.cards.length))+" remaining ",1)):p("",!0)],64)):p("",!0)]),y.value?(n(),q(W,{key:0,kanji:s.deck.cards,class:"cards"},null,8,["kanji"])):p("",!0)],8,X)}}}),ce=b(re,[["__scopeId","data-v-4239f183"]]),ue={key:0,class:"deck-list"},ie=j({__name:"DeckList",setup(f){const a=Y();return(u,e)=>{const v=$("RouterLink");return n(),r("section",null,[e[4]||(e[4]=l("p",null," Decks allow you do keep track of your practice, such that you know which kanji you already know, which you should learn next, and which you need to review. ",-1)),o(a)&&o(a).length>0?(n(),r("ol",ue,[(n(!0),r(R,null,N(o(a),d=>(n(),r("li",{key:d.name,class:"deck-list-item"},[m(ce,{deck:d},null,8,["deck"])]))),128))])):o(a)?(n(),r(R,{key:1},[l("p",null,[e[1]||(e[1]=_(" You donâ€˜t have any decks. ")),m(v,{to:o(C)},{default:D(()=>e[0]||(e[0]=[_("Add your first deck")])),_:1},8,["to"]),e[2]||(e[2]=_(" by clicking the button below. "))]),m(V,{to:o(C),"prefix-icon":"plus"},{default:D(()=>e[3]||(e[3]=[_("Add Deck")])),_:1},8,["to"])],64)):p("",!0)])}}}),de=b(ie,[["__scopeId","data-v-ebf17603"]]),le={class:"article-header"},ke={class:"actions"},pe=j({__name:"DecksView",setup(f){return(a,u)=>(n(),r("article",null,[l("header",le,[u[1]||(u[1]=l("h2",{class:"title"},"Your Decks",-1)),l("div",ke,[m(V,{to:o(C),"prefix-icon":"plus"},{default:D(()=>u[0]||(u[0]=[_(" Add another deck ")])),_:1},8,["to"])])]),m(de)]))}}),ge=b(pe,[["__scopeId","data-v-bfa8fe01"]]);export{ge as default};
