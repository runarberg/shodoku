import{d as b,c as u,m as F,x as P,i as q,z as B,w as R,a,g as k,h as m,u as c,F as w,t as v,o as t,_ as x,l as N,b as _,q as W,s as Q,S as z,K as T,e as p,f as V,A as E}from"./index-BwH_6V5R.js";import{b as G,f as S,a as H}from"./formats-ShPvKoGD.js";import{d as J}from"./decks-BkI394ym.js";import{S as K,k as O,e as U,W as X}from"./reviews-ZTc-DdEf.js";import{u as Z,d as ee}from"./db-CQLy7j3d.js";import{u as te}from"./fsrs-C4FfuluP.js";import{i as A,r as ae}from"./kana-CqZLc_0o.js";import"./decks-BTy-t6_V.js";const ne=b({__name:"DeckKanjiCardItem",props:{codepoint:{},type:{}},setup(n){const s=n,r=u(()=>String.fromCodePoint(s.codepoint)),{result:e}=Z(async()=>{const{codepoint:o}=s,i=(await ee).transaction("progress").store,d=await i.get([o,`${s.type}-read`]),h=await i.get([o,`${s.type}-write`]);return{read:d,write:h}}),l=u(()=>s.type==="kanji"?F(r.value):A(r.value)?P(ae(r.value)):P(r.value)),y=te();function g(o){const i=new Date,d=O.value/100,h=new Date(Date.now()+U.value*X);return y.value.get_retrievability(o,i,!1)>d&&o.due>h}function f(o){return o?o.state===K.New?"new":o.state===K.Learning||o.state===K.Relearning||o.due<new Date?"due":g(o)?"know":"review":null}const $=u(()=>f(e.value?.read?.fsrs)),j=u(()=>f(e.value?.write?.fsrs));return(o,i)=>{const d=B("RouterLink");return t(),q(d,{to:l.value,class:"kanji","data-read":$.value,"data-write":j.value},{default:R(()=>[c(A)(r.value)?(t(),a(w,{key:0},[m("◌")],64)):k("",!0),m(" "+v(r.value),1)]),_:1},8,["to","data-read","data-write"])}}}),M=x(ne,[["__scopeId","data-v-054806ca"]]),se=["data-deck-name"],oe=["data-literal"],re=b({__name:"DeckKanaCards",props:{name:{},kana:{}},setup(n){return(s,r)=>(t(),a("ol",{class:"kana-list","data-deck-name":n.name},[(t(!0),a(w,null,N(n.kana,e=>(t(),a("li",{key:e,"data-literal":String.fromCodePoint(e),class:"kana"},[_(M,{type:"kana",codepoint:e},null,8,["codepoint"])],8,oe))),128))],8,se))}}),ce=x(re,[["__scopeId","data-v-0e3fffd0"]]),ue={class:"kanji-list"},le=b({__name:"DeckKanjiCards",props:{kanji:{}},setup(n){return(s,r)=>(t(),a("ol",ue,[(t(!0),a(w,null,N(n.kanji,e=>(t(),a("li",{key:e,class:"kanji"},[_(M,{type:"kanji",codepoint:e},null,8,["codepoint"])]))),128))]))}}),ie=x(le,[["__scopeId","data-v-f728d4e9"]]),de=["aria-labelledby"],ke=["id"],me={class:"status"},_e={class:"count total-count"},pe={key:0,class:"count know-count"},fe={key:1,class:"count review-count"},ve={key:2,class:"count due-count"},we={key:3,class:"count new-count"},ye=b({__name:"DeckListItem",props:{deck:{}},setup(n){const s=n,r=W(null),e=T(),l=Q(),y=u(()=>J(s.deck)),g=u(()=>l.query.deck?typeof l.query.deck=="string"?[l.query.deck]:l.query.deck:[]),f=u(()=>g.value.includes(s.deck.name)),$=u(()=>{const{name:L}=s.deck,I=f.value?g.value.filter(D=>D!==L):[...g.value,L];return{query:{...l.query,deck:I}}}),j=G(()=>s.deck.name);function o(L){if(!j.value)return 0;let I=0,D=0;for(const[,Y]of j.value)I+=Y[L],D+=1;return I/D}const i=u(()=>o("new")),d=u(()=>o("due")),h=u(()=>o("review")),C=u(()=>o("know"));return z(()=>{f.value&&g.value.length===1&&r.value?.scrollIntoView({block:"start"})}),(L,I)=>{const D=B("RouterLink");return t(),a("article",{ref_key:"el",ref:r,class:"deck-list-item","aria-labelledby":c(e)},[p("strong",{id:c(e),class:"label"},[_(D,{to:$.value,"aria-pressed":f.value,replace:""},{default:R(()=>[m(v(y.value),1)]),_:1},8,["to","aria-pressed"])],8,ke),p("div",me,[p("span",_e,v(n.deck.cards.length)+" cards",1),c(j)?(t(),a(w,{key:0},[C.value>0?(t(),a("span",pe,v(c(S)(C.value/n.deck.cards.length))+" know ",1)):k("",!0),h.value>0?(t(),a("span",fe,v(c(S)(h.value/n.deck.cards.length))+" reviewed ",1)):k("",!0),d.value>0?(t(),a("span",ve,v(c(S)(d.value/n.deck.cards.length))+" due ",1)):k("",!0),i.value>0?(t(),a("span",we,v(c(S)(i.value/n.deck.cards.length))+" remaining ",1)):k("",!0)],64)):k("",!0)]),f.value?(t(),a(w,{key:0},[n.deck.category==="kana"?(t(),q(ce,{key:0,name:n.deck.name,kana:n.deck.cards,class:"cards"},null,8,["name","kana"])):(t(),q(ie,{key:1,kanji:n.deck.cards,class:"cards"},null,8,["kanji"]))],64)):k("",!0)],8,de)}}}),ge=x(ye,[["__scopeId","data-v-5682f40c"]]),he={key:0,class:"deck-list"},De=b({__name:"DeckList",setup(n){const s=H();return(r,e)=>{const l=B("RouterLink");return t(),a("section",null,[e[4]||(e[4]=p("p",null," Decks allow you do keep track of your practice, such that you know which kanji you already know, which you should learn next, and which you need to review. ",-1)),c(s)&&c(s).length>0?(t(),a("ol",he,[(t(!0),a(w,null,N(c(s),y=>(t(),a("li",{key:y.name,class:"deck-list-item"},[_(ge,{deck:y},null,8,["deck"])]))),128))])):c(s)?(t(),a(w,{key:1},[p("p",null,[e[1]||(e[1]=m(" You don‘t have any decks. ",-1)),_(l,{to:c(V)},{default:R(()=>[...e[0]||(e[0]=[m(" Add your first deck ",-1)])]),_:1},8,["to"]),e[2]||(e[2]=m(" by clicking the button below. ",-1))]),_(E,{to:c(V),"prefix-icon":"plus"},{default:R(()=>[...e[3]||(e[3]=[m(" Add Deck ",-1)])]),_:1},8,["to"])],64)):k("",!0)])}}}),be=x(De,[["__scopeId","data-v-d7bb3716"]]),xe={class:"article-header"},je={class:"actions"},Le=b({__name:"DecksView",setup(n){return(s,r)=>(t(),a("article",null,[p("header",xe,[r[1]||(r[1]=p("h2",{class:"title"},"Your Decks",-1)),p("div",je,[_(E,{to:c(V),"prefix-icon":"draw"},{default:R(()=>[...r[0]||(r[0]=[m(" Manage Decks ",-1)])]),_:1},8,["to"])])]),_(be)]))}}),Be=x(Le,[["__scopeId","data-v-45d5f815"]]);export{Be as default};
//# sourceMappingURL=DecksView-6riD3fq2.js.map
