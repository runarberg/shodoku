import{W as p,b as d}from"./index-Cva3TYWK.js";import{u as w,d as u}from"./db-Cg6DtNz6.js";import{c,x as f,B as g,l as j}from"./index-B5Dql4fu.js";const m=new RegExp("\\p{Script=Han}","u"),K=new RegExp("^\\p{Script=Han}$","u"),v=/[\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Han}\u{2e80}-\u{2fd5}\u{3000}-\u{303f}\u{31f0}-\u{31ff}\u{3220}-\u{3243}\u{3280}-\u{337f}\u{ff5f}-\u{ff9f}\u{ff01}-\u{ff5e}]/u;function k(t){return v.test(t)}function H(t){return m.test(t)}function b(t){return K.test(t)}function l(){return c(()=>{const t=d();return p(t)})}function E(t){const n=l(),{result:s}=w(c(()=>{const r=f(t);return async()=>{const i=(await u).transaction("progress").store,a=await i.get([r,"kanji-read"]),o=await i.get([r,"kanji-write"]),e=new Date;return{read:a?n.value.get_retrievability(a.fsrs,e,!1):null,write:o?n.value.get_retrievability(o.fsrs,e,!1):null}}}));return s}function _(t){const n=l(),s=g(new Set);return j(()=>f(t),async r=>{if(!r)return;const i=new Date;for(const a of r)if(b(a)){const o=a.codePointAt(0)??0,e=await(await u).get("progress",[o,"kanji-read"]);e&&n.value.get_retrievability(e.fsrs,i,!1)>.99&&s.add(a)}},{immediate:!0}),s}export{E as a,k as b,m as c,_ as d,H as h,b as i,l as u};
