import{p as H}from"./reviews-ZTc-DdEf.js";import{g as J}from"./WordWritingSelect-BFSJbFJ-.js";import{u as W,a as q,b as U,c as Y,S as G,A as N,C as P}from"./CardRetrievabilityLabel-DcVkJHze.js";import{d as w,q as A,I as M,S as X,a,o as e,_ as B,c as y,v as Z,i as $,w as V,g as f,e as m,u,b as K,t as g,y as Q,F as v,h as j,U as ee,z,l as _,A as ae,V as x,W as S,D as ne,E as te,n as se}from"./index-BwH_6V5R.js";import{u as E}from"./kanji-components-C9vw1jIf.js";import{d as oe}from"./decks-BkI394ym.js";import{a as ie}from"./fsrs-C4FfuluP.js";import{u as re}from"./formats-ShPvKoGD.js";import{v as le}from"./index-CM-pleP9.js";import{d as ce}from"./db-CQLy7j3d.js";import{W as ue}from"./WordListItem-BqCKT_Ty.js";const de=w({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(n){const t=n,o=A(null);function l(){o.value?.replaceChildren(t.strokes??"")}return M(()=>t.strokes,l),X(()=>{l()}),(d,i)=>(e(),a("g",{ref_key:"container",ref:o,class:"kanji-strokes"},null,512))}}),ke=B(de,[["__scopeId","data-v-53c78976"]]),me=["viewBox"],pe={class:"component-info"},fe={key:0,class:"literal"},ge={class:"meaning"},ve={key:0,class:"original",lang:"ja"},he={key:1,lang:"ja"},je={class:"tags"},ye={key:1,class:"is-phonetic"},be=w({__name:"KanjiComponentItem",props:{literal:{},original:{},parts:{}},setup(n){const t=n,o=W(),l=q(),d=y(()=>{for(const r of t.parts)if(r.radical)return r.radical;return null}),i=y(()=>{for(const r of t.parts)if(r.phon)return r.phon;return null}),k=E(()=>t.literal),c=y(()=>t.parts.at(0)?.original),s=E(c),h=y(()=>s.value?.radical?.en??s.value?.meaning??k.value?.radical?.en??k?.value?.meaning),b=y(()=>s.value?.radical?.jp??s.value?.reading??k.value?.radical?.jp??k?.value?.reading),C=y(()=>s.value?.radical?.number??k.value?.radical?.number),O=y(()=>t.literal.startsWith("CDP-")),T=[["彐","⺕"],["犭","⺨"],["阝","⻖"]];function F(r){for(const[R,p]of T)if(r===R)return p;return r}function D(r){return`oklch(from var(--accent-color) l c ${r+3})`}return Z(()=>{const r=o.value;if(!r)return;r.dataset.element===t.literal&&(!t.original||t.original===r.dataset.original)&&(r.dataset.radical==="general"||r.dataset.radical==="tradit"?r.style.color="var(--green)":r.dataset.radical==="nelson"||r.dataset.radical==="jis"?r.style.color="var(--bluegreen)":r.dataset.phon===t.literal?r.style.color="var(--gold)":r.style.color=D(180));let R=-1;for(const p of r.querySelectorAll(`g[data-element="${t.literal}"]`))if(!(t.original&&t.original!==p.dataset.original)){if(p.dataset.radical==="general"||p.dataset.radical==="tradit"){p.style.color="var(--green)";continue}if(p.dataset.radical==="nelson"||p.dataset.radical==="jis"){p.style.color="var(--bluegreen)";continue}if(p.dataset.phon){p.style.color="var(--gold)";continue}(!p.dataset.part||p.dataset.part==="1")&&(R+=1),p.style.color=D(240+63*R)}}),(r,R)=>{const p=z("RouterLink");return e(),$(p,{to:u(ee)(F(n.literal)),class:"kanji-component-item"},{default:V(()=>[u(o)?(e(),a("svg",{key:0,viewBox:u(l),class:"kanji-component-strokes"},[K(ke,{class:"strokes-group",strokes:u(o)},null,8,["strokes"])],8,me)):f("",!0),m("div",pe,[O.value?f("",!0):(e(),a("span",fe,g(n.literal),1)),m("p",ge,[m("strong",null,g(h.value),1),c.value?(e(),a("span",ve,g(c.value),1)):f("",!0),b.value?(e(),a("span",he," ("+g(b.value)+")",1)):f("",!0)]),m("div",je,[d.value?(e(),a("span",{key:0,class:Q(["is-radical",{"is-nelson":d.value==="nelson","is-jis":d.value==="jis"}])},[d.value==="nelson"?(e(),a(v,{key:0},[j("Nelson radical")],64)):d.value==="jis"?(e(),a(v,{key:1},[j("JIS radical")],64)):(e(),a(v,{key:2},[j("Radical")],64)),C.value?(e(),a(v,{key:3},[j(" "+g(C.value),1)],64)):f("",!0)],2)):f("",!0),i.value?(e(),a("span",ye,"Phonetic")):f("",!0)])])]),_:1},8,["to"])}}}),_e=B(be,[["__scopeId","data-v-d58bba66"]]),we={key:0,class:"hidden-info"},Ce={key:1,class:"component-list"},L=4,Ke=w({__name:"KanjiComponents",props:{hide:{type:Boolean}},setup(n){const t=U(),o=A(!1);function l(d){return H(d,J(i=>i.original||null))}return M(t,()=>{o.value=!1}),(d,i)=>(e(),a("section",null,[m("h2",null,[i[1]||(i[1]=j(" Components ",-1)),!n.hide&&u(t).size>0?(e(),a(v,{key:0},[j(" ("+g(u(t).size)+") ",1)],64)):f("",!0)]),n.hide?(e(),a("p",we,"[hidden]")):(e(),a("ul",Ce,[(e(!0),a(v,null,_(u(t),([k,c],s)=>(e(),a(v,{key:k},[o.value||s<L?(e(!0),a(v,{key:0},_(l(c),([h,b])=>(e(),a("li",{key:h??0},[K(_e,{literal:k,parts:b,original:h},null,8,["literal","parts","original"])]))),128)):f("",!0)],64))),128))])),!n.hide&&!o.value&&u(t).size>L?(e(),$(ae,{key:2,class:"show-more-button",inline:"",onClick:i[0]||(i[0]=k=>o.value=!0)},{default:V(()=>[j(" show "+g(u(t).size-L)+" more ",1)]),_:1})):f("",!0)]))}}),Ue=B(Ke,[["__scopeId","data-v-fca51659"]]),$e={class:"kanji-readings"},Be=["data-blur"],Re=["data-blur"],Ve=w({__name:"KanjiReadings",props:{kanji:{},hideReadings:{type:Boolean}},setup(n){return(t,o)=>(e(),a("section",null,[o[2]||(o[2]=m("h2",null,"Readings",-1)),m("dl",$e,[o[0]||(o[0]=m("dt",null,"Kun",-1)),m("div",{class:"dd-items","data-blur":n.hideReadings?!0:null},[(e(!0),a(v,null,_(n.kanji.kunYomi,l=>(e(),a("dd",{key:l},g(l),1))),128))],8,Be),o[1]||(o[1]=m("dt",null,"On",-1)),m("div",{class:"dd-items","data-blur":n.hideReadings?!0:null},[(e(!0),a(v,null,_(n.kanji.onYomi,l=>(e(),a("dd",{key:l},g(l),1))),128))],8,Re)])]))}}),Ye=B(Ve,[["__scopeId","data-v-ae64717b"]]),Xe=w({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean},practiceMode:{type:Boolean}},emits:["practiceDone"],setup(n){const t=W(),o=q(),l=Y(),d=y(()=>{const i=[];for(const k of t.value?.querySelectorAll("path")??[]){const c=k.getAttribute("d");c&&i.push(c)}return[i]});return(i,k)=>(e(),a("section",null,[m("h2",null,[k[1]||(k[1]=j(" Strokes ",-1)),!n.practiceMode&&!u(l)&&d.value[0].length>0?(e(),a(v,{key:0},[j(" ("+g(d.value[0].length)+") ",1)],64)):f("",!0)]),d.value&&!u(l)?(e(),$(G,{key:0,"view-box":u(o),"char-strokes":d.value,"practice-mode":n.practiceMode,"auto-hint":n.autoHint,onPracticeDone:k[0]||(k[0]=c=>i.$emit("practiceDone"))},null,8,["view-box","char-strokes","practice-mode","auto-hint"])):u(l)?(e(),$(G,{key:1,"char-strokes":[],class:"loading-container"})):f("",!0)]))}}),xe={class:"kanji-title"},Se={class:"main-meaning meaning"},Le={class:"labels"},Ie={key:0,class:"additional-meanings"},Ae={key:1,class:"actions"},Me=w({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1},actions:{default:"explore"}},setup(n){const t=n,o=y(()=>{const{freq:i}=t.kanji;return i?i<=50?50:i<=100?100:i<=200?200:i<=500?500:i<=1e3?1e3:null:null}),l=re(()=>t.kanji.codepoint),d=ie(()=>t.kanji.codepoint,["kanji-write","kanji-read"]);return(i,k)=>{const c=z("RouterLink");return e(),a("header",xe,[x(m("h2",{class:"literal",lang:"ja"},g(n.kanji.literal),513),[[S,!n.hideLiteral]]),x(m("p",Se,[m("strong",null,g(n.kanji.meanings?.at(0)),1)],512),[[S,!n.hideMeaning]]),m("aside",Le,[o.value&&!u(l).some(({name:s})=>s===`news-top-${o.value}`)?(e(),$(N,{key:0,class:"freq-label"},{default:V(()=>[j(" Top "+g(o.value),1)]),_:1})):f("",!0),(e(!0),a(v,null,_(u(l),s=>(e(),$(c,{key:s.name,to:{name:u(te),query:{deck:s.name}}},{default:V(()=>[K(N,{class:"deck-label"},{default:V(()=>[j(g(u(oe)(s)),1)]),_:2},1024)]),_:2},1032,["to"]))),128)),K(P,{r:u(d).get("kanji-write"),label:"書"},null,8,["r"]),K(P,{r:u(d).get("kanji-read"),label:"読"},null,8,["r"])]),n.kanji.meanings?.length>1?x((e(),a("ul",Ie,[(e(!0),a(v,null,_(n.kanji.meanings.slice(1),s=>(e(),a("li",{key:s,class:"meaning"},g(s),1))),128))],512)),[[S,!n.hideMeaning]]):f("",!0),i.$slots.actions?(e(),a("nav",Ae,[ne(i.$slots,"actions",{},void 0,!0)])):f("",!0)])}}}),Ze=B(Me,[["__scopeId","data-v-32a8d656"]]),De={class:"kanji-word-list"},I=10,Ge=w({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(n){const t=n,o=se(async()=>{const{words:c}=t.kanjiVocab,s=[],h=[],{store:b}=(await ce).transaction("bookmarked-words");for(const C of c)await b.count(C)?s.push(C):h.push(C);return{bookmarked:s,rest:h}},null),l=A(I),d=y(()=>{const c=l.value;if(o.value){const{bookmarked:s,rest:h}=o.value;return[s,h.slice(0,c)]}return[t.kanjiVocab.words.slice(0,c)]});function i(){l.value+=I}function k([{isIntersecting:c}]){c&&i()}return M(()=>t.kanjiVocab.codepoint,(c,s)=>{c!==s&&(l.value=I)}),(c,s)=>(e(),a("section",null,[m("h2",null,"Words ("+g(n.kanjiVocab.words.length)+")",1),m("ul",De,[(e(!0),a(v,null,_(d.value,h=>(e(),a(v,null,[(e(!0),a(v,null,_(h,b=>(e(),a("li",{key:b},[K(ue,{word:b,kanji:n.kanjiVocab.literal,"hide-kanji":n.hideKanji,"hide-reading":n.hideReading,"hide-meaning":n.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),l.value<n.kanjiVocab.words.length?x((e(),a("button",{key:0,class:"next-page-button",onClick:s[0]||(s[0]=h=>i())},[...s[1]||(s[1]=[j(" Load More ",-1)])])),[[u(le),k]]):f("",!0)]))}}),Qe=B(Ge,[["__scopeId","data-v-211db6ac"]]);export{Ze as K,Xe as _,Ye as a,Ue as b,Qe as c};
//# sourceMappingURL=KanjiWordList-Ca3djMHJ.js.map
