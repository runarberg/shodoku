import{c as u,B as P,d as b,i as A,v as C,u as n,s as Q,w as D,h as v,t as m,o as s,_ as j,a,F as R,l as K,b as w,m as Y,n as T,D as z,L as G,e as k,g as f,f as V,A as F}from"./index-DjqtGQe7.js";import{u as $,d as E}from"./db-Bphf5mU1.js";import{g as H}from"./decks-CIYxchR_.js";import{u as M}from"./fsrs-CHu1uaRe.js";import{d as J}from"./decks-CfOZF5PQ.js";import{S as x}from"./index-YgSYzKX4.js";import{f as S}from"./formats-CxjEYhKc.js";import"./reviews-Apodrl4I.js";import"./index-B6QifWP2.js";function O(){return $(async()=>(await(await E).transaction("decks").store.index("category+priority").getAll()).filter(({active:t})=>t)).result}function U(l){const t=M(),o=u(()=>{const i=P(l);return()=>H(i,t.value)}),{result:e}=$(o);return e}const W=b({__name:"DeckKanjiCardItem",props:{codepoint:{}},setup(l){const t=l,o=u(()=>String.fromCodePoint(t.codepoint)),{result:e}=$(async()=>{const{codepoint:r}=t,_=(await E).transaction("progress").store,d=await _.get([r,"kanji-read"]),L=await _.get([r,"kanji-write"]);return{read:d,write:L}}),i=M();function p(r){return r?r.state===x.New?"new":r.state===x.Learning||r.state===x.Relearning||r.due<new Date?"due":i.value.get_retrievability(r,new Date,!1)>.99?"know":"review":null}const y=u(()=>p(e.value?.read?.fsrs)),g=u(()=>p(e.value?.write?.fsrs));return(r,_)=>{const d=C("RouterLink");return s(),A(d,{to:n(Q)(o.value),class:"kanji","data-read":y.value,"data-write":g.value},{default:D(()=>[v(m(o.value),1)]),_:1},8,["to","data-read","data-write"])}}}),X=j(W,[["__scopeId","data-v-f91bac39"]]),Z={class:"kanji-list"},ee=b({__name:"DeckKanjiCards",props:{kanji:{}},setup(l){return(t,o)=>(s(),a("ol",Z,[(s(!0),a(R,null,K(t.kanji,e=>(s(),a("li",{key:e,class:"kanji"},[w(X,{codepoint:e},null,8,["codepoint"])]))),128))]))}}),te=j(ee,[["__scopeId","data-v-951da1ce"]]),se=["aria-labelledby"],ne=["id"],ae={class:"status"},oe={class:"count total-count"},re={key:0,class:"count know-count"},ce={key:1,class:"count review-count"},ue={key:2,class:"count due-count"},ie={key:3,class:"count new-count"},le=b({__name:"DeckListItem",props:{deck:{}},setup(l){const t=l,o=Y(null),e=G(),i=T(),p=u(()=>J(t.deck)),y=u(()=>i.query.deck?typeof i.query.deck=="string"?[i.query.deck]:i.query.deck:[]),g=u(()=>y.value.includes(t.deck.name)),r=u(()=>{const{name:c}=t.deck,I=g.value?y.value.filter(h=>h!==c):[...y.value,c];return{query:{...i.query,deck:I}}}),_=U(()=>t.deck.name);function d(c){if(!_.value)return 0;const{"kanji-read":I,"kanji-write":h}=_.value;return(I[c]+h[c])/2}const L=u(()=>d("new")),q=u(()=>d("due")),B=u(()=>d("review")),N=u(()=>d("know"));return z(()=>{g.value&&y.value.length===1&&o.value?.scrollIntoView({block:"start"})}),(c,I)=>{const h=C("RouterLink");return s(),a("article",{ref_key:"el",ref:o,class:"deck-list-item","aria-labelledby":n(e)},[k("strong",{id:n(e),class:"label"},[w(h,{to:r.value,"aria-pressed":g.value,replace:""},{default:D(()=>[v(m(p.value),1)]),_:1},8,["to","aria-pressed"])],8,ne),k("div",ae,[k("span",oe,m(c.deck.cards.length)+" cards",1),n(_)?(s(),a(R,{key:0},[N.value>0?(s(),a("span",re,m(n(S)(N.value/c.deck.cards.length))+" know ",1)):f("",!0),B.value>0?(s(),a("span",ce,m(n(S)(B.value/c.deck.cards.length))+" reviewed ",1)):f("",!0),q.value>0?(s(),a("span",ue,m(n(S)(q.value/c.deck.cards.length))+" due ",1)):f("",!0),L.value>0?(s(),a("span",ie,m(n(S)(L.value/c.deck.cards.length))+" remaining ",1)):f("",!0)],64)):f("",!0)]),g.value?(s(),A(te,{key:0,kanji:c.deck.cards,class:"cards"},null,8,["kanji"])):f("",!0)],8,se)}}}),de=j(le,[["__scopeId","data-v-69c0447a"]]),ke={key:0,class:"deck-list"},pe=b({__name:"DeckList",setup(l){const t=O();return(o,e)=>{const i=C("RouterLink");return s(),a("section",null,[e[4]||(e[4]=k("p",null," Decks allow you do keep track of your practice, such that you know which kanji you already know, which you should learn next, and which you need to review. ",-1)),n(t)&&n(t).length>0?(s(),a("ol",ke,[(s(!0),a(R,null,K(n(t),p=>(s(),a("li",{key:p.name,class:"deck-list-item"},[w(de,{deck:p},null,8,["deck"])]))),128))])):n(t)?(s(),a(R,{key:1},[k("p",null,[e[1]||(e[1]=v(" You donâ€˜t have any decks. ")),w(i,{to:n(V)},{default:D(()=>e[0]||(e[0]=[v("Add your first deck")])),_:1,__:[0]},8,["to"]),e[2]||(e[2]=v(" by clicking the button below. "))]),w(F,{to:n(V),"prefix-icon":"plus"},{default:D(()=>e[3]||(e[3]=[v("Add Deck")])),_:1,__:[3]},8,["to"])],64)):f("",!0)])}}}),_e=j(pe,[["__scopeId","data-v-ebf17603"]]),me={class:"article-header"},fe={class:"actions"},ve=b({__name:"DecksView",setup(l){return(t,o)=>(s(),a("article",null,[k("header",me,[o[1]||(o[1]=k("h2",{class:"title"},"Your Decks",-1)),k("div",fe,[w(F,{to:n(V),"prefix-icon":"draw"},{default:D(()=>o[0]||(o[0]=[v("Manage Decks")])),_:1,__:[0]},8,["to"])])]),w(_e)]))}}),Se=j(ve,[["__scopeId","data-v-d3200aa2"]]);export{Se as default};
