{"version":3,"file":"DictionaryView-B16bvuI-.js","sources":["../../src/components/BookmarkedWords.vue","../../src/helpers/component-picker.ts","../../src/components/ComponentPicker.vue","../../src/helpers/search.ts","../../src/components/KanjiSearchResults.vue","../../src/components/WordSearchResultItem.vue","../../src/components/WordSearchResults.vue","../../src/views/DictionaryView.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { vIntersectionObserver } from \"@vueuse/components\";\nimport { asyncComputed } from \"@vueuse/core\";\nimport { ref } from \"vue\";\n\nimport { db } from \"../db/index.ts\";\nimport WordListItem from \"./WordListItem.vue\";\n\nconst wordIds = asyncComputed(async () => {\n  const result = [];\n  const cursors = (await db)\n    .transaction(\"bookmarked-words\")\n    .store.index(\"bookmarkedAt\")\n    .iterate(null, \"prev\");\n\n  for await (const cursor of cursors) {\n    result.push(cursor.primaryKey);\n  }\n\n  return result;\n}, []);\n\nconst pageLimit = ref(20);\n\nfunction nextPage() {\n  pageLimit.value += 20;\n}\n\nfunction handleNextPageIntersecting([\n  { isIntersecting },\n]: IntersectionObserverEntry[]) {\n  if (isIntersecting) {\n    nextPage();\n  }\n}\n</script>\n\n<template>\n  <section class=\"word-search-results\">\n    <h3>Bookmarked Words</h3>\n\n    <ul class=\"results-list\">\n      <li v-for=\"wordId of wordIds.slice(0, pageLimit)\" :key=\"wordId\">\n        <WordListItem :word=\"wordId\" />\n      </li>\n    </ul>\n\n    <button\n      v-if=\"pageLimit < wordIds.length\"\n      v-intersection-observer=\"handleNextPageIntersecting\"\n      class=\"next-page-button\"\n      @click=\"nextPage()\"\n    >\n      Load More\n    </button>\n  </section>\n</template>\n\n<style scoped>\n.results-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n\n  & > li:not(:first-child) {\n    margin-block-start: 1em;\n  }\n}\n</style>\n","import { onScopeDispose, reactive, ref, toRaw, watch } from \"vue\";\n\nimport { type ComponentPickerMessage } from \"../workers/component-picker.worker.ts\";\nimport ComponentPickerWorker from \"../workers/component-picker.worker.ts?worker\";\n\nconst kanjiPickerWorker = new ComponentPickerWorker();\n\nexport function useComponentPicker() {\n  const allRadicals = ref(new Map<number, string[]>());\n  const filteredRadicals = ref(new Set<string>());\n  const kanjiSelection = ref(new Map<number, string[]>());\n\n  const selectedRadicals = reactive(new Set<string>());\n\n  function handleMessage(event: MessageEvent<ComponentPickerMessage>) {\n    if (event.data.type === \"all-radicals\") {\n      allRadicals.value = event.data.allRadicals;\n    } else if (event.data.type === \"kanji-selection\") {\n      kanjiSelection.value = event.data.kanjiSelection;\n      filteredRadicals.value = event.data.filteredRadicals;\n    }\n  }\n\n  kanjiPickerWorker.addEventListener(\"message\", handleMessage);\n  kanjiPickerWorker.postMessage(\"init\");\n\n  onScopeDispose(() => {\n    kanjiPickerWorker.removeEventListener(\"message\", handleMessage);\n  });\n\n  watch(selectedRadicals, () => {\n    if (selectedRadicals.size === 0) {\n      filteredRadicals.value = new Set();\n      kanjiSelection.value = new Map();\n\n      return;\n    }\n\n    kanjiPickerWorker.postMessage(toRaw(selectedRadicals));\n  });\n\n  return {\n    allRadicals,\n    filteredRadicals,\n    selectedRadicals,\n    kanjiSelection,\n  };\n}\n","<script setup lang=\"ts\">\nimport { useId } from \"vue\";\n\nimport { useComponentPicker } from \"../helpers/component-picker.ts\";\nimport AppButton from \"./AppButton.vue\";\nimport AppIcon from \"./AppIcon.vue\";\n\ndefineEmits<{\n  select: [literal: string];\n  close: [];\n}>();\n\nconst { allRadicals, filteredRadicals, kanjiSelection, selectedRadicals } =\n  useComponentPicker();\nconst id = useId();\n\nfunction toggleRadical(literal: string) {\n  if (selectedRadicals.has(literal)) {\n    selectedRadicals.delete(literal);\n  } else {\n    selectedRadicals.add(literal);\n  }\n}\n</script>\n\n<template>\n  <div class=\"component-picker\">\n    <div class=\"control-buttons\">\n      <AppButton\n        class=\"clear-button\"\n        inline\n        :disabled=\"selectedRadicals.size === 0\"\n        @click=\"selectedRadicals.clear()\"\n      >\n        Clear\n      </AppButton>\n\n      <AppButton class=\"close-button\" inline @click=\"$emit('close')\">\n        <AppIcon icon=\"x-mark\" />\n      </AppButton>\n    </div>\n\n    <p v-if=\"selectedRadicals.size === 0\" class=\"empty-message\">\n      Select one or more components below. Pick any of the resulting kanji.\n    </p>\n\n    <ol v-else class=\"list kanji-list\">\n      <li\n        v-for=\"[strokeCount, kanji] of kanjiSelection\"\n        :key=\"strokeCount\"\n        :aria-labelledby=\"`${id}/kanji-list/${strokeCount}`\"\n        class=\"kanji-list-item\"\n      >\n        <strong\n          :id=\"`${id}/kanji-list/${strokeCount}`\"\n          class=\"stroke-count-label\"\n        >\n          {{ strokeCount }}\n        </strong>\n\n        <ol class=\"list kanji-literal-list\">\n          <li\n            v-for=\"literal of kanji\"\n            :key=\"literal\"\n            class=\"kanji-literal-list-item\"\n          >\n            <button\n              class=\"kanji-select-button\"\n              @click=\"$emit('select', literal)\"\n            >\n              {{ literal }}\n            </button>\n          </li>\n        </ol>\n      </li>\n    </ol>\n\n    <ol class=\"list radical-list\">\n      <li\n        v-for=\"[strokeCount, radicals] of allRadicals\"\n        :key=\"strokeCount\"\n        :aria-labelledby=\"`${id}/radical-list/${strokeCount}`\"\n        class=\"radical-list-item\"\n      >\n        <strong\n          :id=\"`${id}/radical-list/${strokeCount}`\"\n          class=\"stroke-count-label\"\n        >\n          {{ strokeCount }}\n        </strong>\n\n        <ol class=\"list radical-literal-list\">\n          <li\n            v-for=\"literal of radicals\"\n            :key=\"literal\"\n            class=\"radical-literal-list-item\"\n          >\n            <button\n              class=\"radical-toggle-button\"\n              :aria-pressed=\"selectedRadicals.has(literal)\"\n              :disabled=\"\n                filteredRadicals.size > 0 && !filteredRadicals.has(literal)\n              \"\n              @click=\"toggleRadical(literal)\"\n            >\n              {{ literal }}\n            </button>\n          </li>\n        </ol>\n      </li>\n    </ol>\n  </div>\n</template>\n\n<style scoped>\n.component-picker {\n  background: oklch(from var(--background-strong) l c h / 0.4);\n  border: 1px solid var(--accent-color);\n  border-radius: 3px;\n  display: flex;\n  flex-flow: column;\n  padding: 1em;\n  row-gap: 1em;\n}\n\n.list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.empty-message {\n  align-self: center;\n  align-items: center;\n  block-size: 8em;\n  color: var(--text-light);\n  display: flex;\n  margin: 0;\n}\n\n.kanji-list {\n  block-size: 8em;\n  overflow-y: auto;\n}\n\n.kanji-list,\n.radical-list {\n  align-content: start;\n  align-items: start;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.2ex;\n  justify-content: start;\n}\n\n.kanji-list-item,\n.kanji-literal-list,\n.radical-list-item,\n.radical-literal-list {\n  display: contents;\n}\n\n.stroke-count-label,\n.kanji-literal-list-item,\n.radical-literal-list-item {\n  align-items: center;\n  block-size: 1.5em;\n  display: flex;\n  font-size: 1.2em;\n  inline-size: 1.5em;\n  justify-content: center;\n}\n\n.kanji-select-button,\n.radical-toggle-button {\n  border: 1px solid var(--accent-color);\n  border-radius: 0.5ex;\n  background: var(--background-strong);\n  cursor: pointer;\n  color: var(--text-color);\n  font-family: inherit;\n  font-size: inherit;\n  font-weight: 400;\n  line-height: 1em;\n  padding: 0.25ex;\n\n  &[aria-pressed=\"true\"] {\n    background: var(--accent-color);\n    color: var(--background-strong);\n  }\n\n  &:disabled {\n    background: var(--background-light);\n    border-color: var(--accent-color-light);\n    color: var(--text-light);\n    cursor: default;\n  }\n}\n\n.control-buttons {\n  align-self: end;\n  column-gap: 1ex;\n  display: flex;\n  justify-content: end;\n}\n</style>\n","import { watchDebounced } from \"@vueuse/core\";\nimport {\n  MaybeRefOrGetter,\n  onScopeDispose,\n  Ref,\n  ref,\n  ShallowReactive,\n  shallowReactive,\n  toValue,\n} from \"vue\";\n\nimport { hasKanji } from \"../helpers/text.ts\";\nimport type { KanjiSearchResult } from \"../workers/search-kanji.worker.ts\";\nimport SearchKanjiWorker from \"../workers/search-kanji.worker.ts?worker\";\nimport type { WordSearchResult } from \"../workers/search-words.worker.ts\";\nimport SearchWordsWorker from \"../workers/search-words.worker.ts?worker\";\n\nconst searchKanjiWorker = new SearchKanjiWorker();\nconst searchWordsWorker = new SearchWordsWorker();\n\nexport function useWordSearch(\n  searchPhrase: MaybeRefOrGetter<string>,\n): ShallowReactive<WordSearchResult[]> {\n  const wordResults = shallowReactive<WordSearchResult[]>([]);\n\n  watchDebounced(\n    () => toValue(searchPhrase),\n    async (phrase) => {\n      wordResults.splice(0, wordResults.length);\n\n      if (phrase.length > 0) {\n        searchWordsWorker.postMessage(phrase);\n      }\n    },\n    { debounce: 300, immediate: true },\n  );\n\n  function handleMessage(event: MessageEvent<WordSearchResult>) {\n    const result = event.data;\n\n    if (result.phrase === toValue(searchPhrase)) {\n      wordResults.push(result);\n    }\n  }\n\n  searchWordsWorker.addEventListener(\"message\", handleMessage);\n\n  onScopeDispose(() => {\n    searchWordsWorker.removeEventListener(\"message\", handleMessage);\n  });\n\n  return wordResults;\n}\n\nexport function useKanjiSearch(\n  searchPhrase: MaybeRefOrGetter<string>,\n): Ref<KanjiSearchResult[]> {\n  const results = ref<KanjiSearchResult[]>([]);\n\n  watchDebounced(\n    () => toValue(searchPhrase),\n    async (phrase) => {\n      if (phrase.length === 0 || hasKanji(phrase)) {\n        results.value = [];\n      } else {\n        searchKanjiWorker.postMessage(phrase);\n      }\n    },\n    { debounce: 300, immediate: true },\n  );\n\n  function handleMessage(event: MessageEvent<KanjiSearchResult[]>) {\n    results.value = event.data;\n  }\n\n  searchKanjiWorker.addEventListener(\"message\", handleMessage);\n\n  onScopeDispose(() => {\n    searchKanjiWorker.removeEventListener(\"message\", handleMessage);\n  });\n\n  return results;\n}\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\nimport { useKanjiSearch } from \"../helpers/search.ts\";\nimport { isKanji } from \"../helpers/text.ts\";\nimport WordKanjiListItem from \"./WordKanjiListItem.vue\";\n\nconst props = defineProps<{\n  phrase: string;\n}>();\n\nconst kanjiLiterals = computed(() => {\n  const literals = new Set<string>();\n\n  for (const char of props.phrase) {\n    if (isKanji(char)) {\n      literals.add(char);\n    }\n  }\n\n  return literals;\n});\n\nconst kanjiResults = useKanjiSearch(() => props.phrase);\n</script>\n\n<template>\n  <section\n    v-if=\"kanjiLiterals.size > 0 || kanjiResults.length > 0\"\n    class=\"kanji-search-results\"\n  >\n    <h3>Kanji</h3>\n\n    <ul v-if=\"kanjiLiterals.size > 0\" class=\"results-list\">\n      <li v-for=\"kanji of kanjiLiterals\" :key=\"kanji\">\n        <WordKanjiListItem :kanji=\"kanji\" />\n      </li>\n    </ul>\n\n    <ul v-else class=\"results-list\">\n      <li v-for=\"result of kanjiResults\" :key=\"result.id\">\n        <WordKanjiListItem :kanji=\"String.fromCodePoint(result.id)\" />\n      </li>\n    </ul>\n  </section>\n</template>\n\n<style scoped>\n.results-list {\n  list-style: none;\n  display: grid;\n  gap: 1.5em 1em;\n  grid-template-columns: repeat(3, 1fr);\n  margin: 0;\n  padding: 0;\n\n  @media screen and (max-width: 60ch) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  @media screen and (max-width: 45ch) {\n    display: flex;\n    flex-direction: column;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\nimport { hasKanaOrKanji, hasKanji } from \"../helpers/text.ts\";\nimport { useWord } from \"../helpers/words.ts\";\nimport { wordRoute } from \"../router.ts\";\nimport { Furigana, WordMeaning } from \"../types.ts\";\nimport type { WordSearchResult } from \"../workers/search-words.worker.ts\";\nimport BookmarkWordButton from \"./BookmarkWordButton.vue\";\nimport VocabularyWordFurigana from \"./VocabularyWordFurigana.vue\";\nimport VocabularyWordMeaning from \"./VocabularyWordMeaning.vue\";\n\nconst props = defineProps<{\n  result: WordSearchResult;\n}>();\n\nconst word = useWord(() => props.result.id);\n\nconst reading = computed(() => {\n  if (word.value) {\n    return word.value.readings?.at(0)?.text;\n  }\n\n  return props.result.readings.at(0);\n});\n\nconst furigana = computed<Furigana | string>(() => {\n  const { match, readings, writings } = props.result;\n\n  if (word.value) {\n    let found;\n\n    if (hasKanji(match)) {\n      found = word.value.furigana?.find((other) => other.writing === match);\n    } else if (hasKanaOrKanji(match)) {\n      found = word.value.furigana?.find((other) => other.reading === match);\n    }\n\n    if (!found) {\n      found = word.value.furigana?.at(0);\n    }\n\n    if (found) {\n      return found.furigana;\n    }\n\n    return (\n      word.value.writings?.at(0)?.text ??\n      word.value.readings?.at(0)?.text ??\n      match\n    );\n  }\n\n  if (hasKanji(match)) {\n    return [{ ruby: match, rt: readings.at(0) }];\n  }\n\n  const [writing] = writings;\n\n  if (hasKanaOrKanji(match)) {\n    if (writing) {\n      return [{ ruby: writing, rt: match }];\n    }\n\n    return match;\n  }\n\n  const [firstReading] = readings;\n  if (writing && firstReading) {\n    return [{ ruby: firstReading, rt: firstReading }];\n  }\n\n  return writing ?? firstReading ?? match;\n});\n\nconst meaning = computed<WordMeaning | string>(() => {\n  const { match, glossary } = props.result;\n\n  if (word.value) {\n    if (hasKanaOrKanji(match)) {\n      return word.value.meanings?.at(0) ?? glossary.at(0) ?? match;\n    }\n\n    const found = word.value.meanings?.find((other) =>\n      other.glossary?.includes(match),\n    );\n\n    if (found) {\n      return found;\n    }\n  }\n\n  if (hasKanaOrKanji(match)) {\n    return glossary.at(0) ?? match;\n  }\n\n  return match;\n});\n</script>\n\n<template>\n  <div class=\"word-search-result-item\">\n    <BookmarkWordButton\n      :word-id=\"result.id\"\n      :reading=\"reading\"\n      class=\"bookmark-button\"\n    />\n\n    <RouterLink :to=\"wordRoute(result.id)\" class=\"word\">\n      <template v-if=\"typeof furigana === 'string'\">\n        {{ furigana }}\n      </template>\n      <VocabularyWordFurigana v-else :furigana=\"furigana\" />\n    </RouterLink>\n\n    <div class=\"meaning\">\n      <template v-if=\"typeof meaning === 'string'\">\n        {{ meaning }}\n      </template>\n      <VocabularyWordMeaning v-else :meaning=\"meaning\" />\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.word-search-result-item {\n  align-items: start;\n  display: grid;\n  grid-template:\n    \"bookmark . word . meaning\"\n    / auto 0.5ex minmax(0, auto) 1em 1fr;\n\n  & .bookmark-button {\n    grid-area: bookmark;\n  }\n\n  & .word {\n    grid-area: word;\n  }\n\n  & .meaning {\n    grid-area: meaning;\n  }\n}\n\n.bookmark-button {\n  margin-block-start: 0.3ex;\n\n  .word-search-result-item:has(.word ruby rt) & {\n    margin-block-start: 0.9ex;\n  }\n}\n\n.word {\n  color: var(--accent-color);\n  display: block;\n  font-size: 1.5em;\n  font-weight: 500;\n  text-decoration: none;\n\n  @media screen and (max-width: 60ch) {\n    max-inline-size: 40vw;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useWordSearch } from \"../helpers/search.ts\";\nimport WordSearchResultItem from \"./WordSearchResultItem.vue\";\n\nconst props = defineProps<{\n  phrase: string;\n}>();\n\nconst wordResults = useWordSearch(() => props.phrase);\n</script>\n\n<template>\n  <section class=\"word-search-results\">\n    <h3>Words</h3>\n\n    <ul class=\"results-list\">\n      <li v-for=\"result of wordResults\" :key=\"result.id\">\n        <WordSearchResultItem :result=\"result\" />\n      </li>\n    </ul>\n  </section>\n</template>\n\n<style scoped>\n.results-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n\n  & > li:not(:first-child) {\n    margin-block-start: 1em;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, ref, useId } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\n\nimport AppButton from \"../components/AppButton.vue\";\nimport AppIcon from \"../components/AppIcon.vue\";\nimport BookmarkedWords from \"../components/BookmarkedWords.vue\";\nimport ComponentPicker from \"../components/ComponentPicker.vue\";\nimport KanjiSearchResults from \"../components/KanjiSearchResults.vue\";\nimport WordSearchResults from \"../components/WordSearchResults.vue\";\n\nconst route = useRoute();\nconst router = useRouter();\n\nconst componentPickerId = useId();\nconst componentPickerExpanded = ref(false);\n\nconst searchPhrase = computed<string>({\n  get() {\n    if (typeof route.query.search !== \"string\") {\n      return \"\";\n    }\n\n    return route.query.search;\n  },\n\n  set(value: string) {\n    router.replace({ query: { search: value || undefined } });\n  },\n});\n</script>\n\n<template>\n  <div class=\"search-field\">\n    <label class=\"label\">\n      <AppIcon icon=\"search\" class=\"icon\" />\n    </label>\n\n    <input\n      v-model=\"searchPhrase\"\n      type=\"search\"\n      aria-label=\"search\"\n      placeholder=\"Search for words, kanji, meanings, etc.\"\n    />\n\n    <AppButton\n      :filled=\"componentPickerExpanded\"\n      :aria-pressed=\"componentPickerExpanded\"\n      :aria-controls=\"componentPickerId\"\n      aria-label=\"Component Picker\"\n      @click=\"componentPickerExpanded = !componentPickerExpanded\"\n    >\n      éƒ¨\n    </AppButton>\n  </div>\n\n  <ComponentPicker\n    v-if=\"componentPickerExpanded\"\n    :id=\"componentPickerId\"\n    @close=\"componentPickerExpanded = false\"\n    @select=\"searchPhrase += $event\"\n  />\n\n  <template v-if=\"searchPhrase\">\n    <KanjiSearchResults class=\"kanji-results\" :phrase=\"searchPhrase\" />\n    <WordSearchResults class=\"word-results\" :phrase=\"searchPhrase\" />\n  </template>\n\n  <BookmarkedWords v-else class=\"bookmark-results\" />\n</template>\n\n<style scoped>\n.search-field {\n  align-items: center;\n  background: var(--background-strong);\n  column-gap: 1ex;\n  border: 1px solid var(--accent-color);\n  border-radius: 3px;\n  display: flex;\n  padding: 0.5ex 1ex;\n\n  & input {\n    background: var(--background-strong);\n    border: 0;\n    margin: 0;\n    padding: 0;\n    flex-grow: 1;\n    font-family: inherit;\n    font-size: 1.2em;\n\n    &:focus {\n      outline: none;\n    }\n  }\n\n  &::placeholder,\n  & .icon {\n    color: var(--text-light);\n  }\n\n  &:focus-within {\n    outline: 1px solid var(--accent-color);\n\n    & .icon {\n      color: var(--accent-color);\n    }\n  }\n}\n\n.bookmark-results,\n.kanji-results,\n.word-results {\n  margin-block: 2em;\n}\n</style>\n"],"names":["wordIds","asyncComputed","result","cursors","db","cursor","pageLimit","ref","nextPage","handleNextPageIntersecting","isIntersecting","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_Fragment","_unref","wordId","_createVNode","WordListItem","kanjiPickerWorker","ComponentPickerWorker","useComponentPicker","allRadicals","filteredRadicals","kanjiSelection","selectedRadicals","reactive","handleMessage","event","onScopeDispose","watch","toRaw","id","useId","toggleRadical","literal","AppButton","$event","$emit","AppIcon","_hoisted_3","_hoisted_4","_renderList","strokeCount","kanji","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","radicals","_hoisted_11","_hoisted_12","_hoisted_13","searchKanjiWorker","SearchKanjiWorker","searchWordsWorker","SearchWordsWorker","useWordSearch","searchPhrase","wordResults","shallowReactive","watchDebounced","toValue","phrase","useKanjiSearch","results","hasKanji","props","__props","kanjiLiterals","computed","literals","char","isKanji","kanjiResults","WordKanjiListItem","word","useWord","reading","furigana","match","readings","writings","found","other","hasKanaOrKanji","writing","firstReading","meaning","glossary","BookmarkWordButton","_component_RouterLink","wordRoute","_createBlock","VocabularyWordFurigana","VocabularyWordMeaning","WordSearchResultItem","route","useRoute","router","useRouter","componentPickerId","componentPickerExpanded","value","ComponentPicker","KanjiSearchResults","WordSearchResults","BookmarkedWords"],"mappings":"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"}