import{d as h,c,k as A,p as C,o as e,a as i,b as p,t as f,u,f as k,F as j,j as y,e as V,w,g as N,q as B,s as K,h as m,E as g,_ as x,m as L}from"./index-wKkOPtT6.js";import{d as R}from"./decks-GrwULuka.js";import{d as b}from"./channels-Cq-RpcWF.js";import{u as P}from"./db-CN4rHp8z.js";const S={key:0,class:"kanji-aside-nav"},D=["open"],E={class:"label"},F={key:0,class:"kanji-deck-index"},M=h({__name:"KanjiAsideNav",props:{cardId:{},deck:{}},setup(_){const n=_,s=c(()=>n.deck.cards.indexOf(n.cardId)),o=c(()=>Math.max(0,s.value-4)),d=c(()=>Math.min(n.deck.cards.length,s.value+5)),v=c(()=>{const a=n.deck.cards,{length:r}=a;return r<=9?a:o.value===0?a.slice(0,9):d.value===r?a.slice(r-9):a.slice(o.value,d.value)}),t=A(!0);return(a,r)=>{const I=C("RouterLink");return s.value!==-1?(e(),i("nav",S,[p("details",{open:t.value,class:"nav-details",onToggle:r[0]||(r[0]=l=>t.value=l.target.open)},[p("summary",null,[p("span",E,f(u(R)(a.deck)),1),t.value?(e(),k(g,{key:0,icon:"chevron-down"})):(e(),k(g,{key:1,icon:"chevron-up"}))]),t.value?(e(),i("ol",F,[(e(!0),i(j,null,y(v.value,l=>(e(),i("li",null,[V(I,{to:u(B)(String.fromCodePoint(l)),class:K([{"kanji-link-active":l===a.cardId},"kanji-link"])},{default:w(()=>[N(f(String.fromCodePoint(l)),1)]),_:2},1032,["to","class"])]))),256))])):m("",!0)],40,D)])):m("",!0)}}}),T=x(M,[["__scopeId","data-v-26e463ff"]]),$={key:0},q=h({__name:"KanjiAsideView",setup(_){const n=L(),s=c(()=>typeof n.params.kanji!="string"?null:n.params.kanji.codePointAt(0)??null),{result:o}=P(c(()=>{const d=s.value;return async()=>(await b).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(d))}));return(d,v)=>s.value&&u(o)&&u(o).length>0?(e(),i("aside",$,[(e(!0),i(j,null,y(u(o),t=>(e(),k(T,{key:t.name,deck:t,"card-id":s.value,class:"deck-nav"},null,8,["deck","card-id"]))),128))])):m("",!0)}}),H=x(q,[["__scopeId","data-v-08f3c468"]]);export{H as default};
