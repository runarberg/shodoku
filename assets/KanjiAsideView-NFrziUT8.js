import{d as A,g as c,l as N,j as b,o as e,c as o,b as w,f as u,w as k,a as j,t as y,u as r,E as B,i as p,F as x,h as C,k as K,n as R,e as _,_ as I,p as V}from"./index-PWB7_iI1.js";import{d as E}from"./decks-huPVwMnz.js";import{A as L,a as g,u as S,d as D}from"./db-D-7ArWxb.js";const M={key:0,class:"kanji-aside-nav"},O={class:"header"},P={key:0,class:"kanji-deck-index"},$=A({__name:"KanjiAsideNav",props:{cardId:{},deck:{}},setup(v){const n=v,t=c(()=>n.deck.cards.indexOf(n.cardId)),s=c(()=>Math.max(0,t.value-5)),i=c(()=>Math.min(n.deck.cards.length,s.value+10)),m=c(()=>i.value-s.value-10),a=N(!0);return(d,f)=>{const h=b("RouterLink");return t.value!==-1?(e(),o("nav",M,[w("span",O,[u(h,{to:{name:r(B),query:{deck:d.deck.name}},class:"label"},{default:k(()=>[j(y(r(E)(d.deck)),1)]),_:1},8,["to"]),u(L,{"aria-pressed":a.value,class:"expand-button",onClick:f[0]||(f[0]=l=>a.value=!a.value)},{default:k(()=>[a.value?(e(),p(g,{key:0,icon:"chevron-down"})):(e(),p(g,{key:1,icon:"chevron-up"}))]),_:1},8,["aria-pressed"])]),a.value?(e(),o("ol",P,[(e(!0),o(x,null,C(d.deck.cards.slice(s.value+m.value,i.value),l=>(e(),o("li",null,[u(h,{to:r(K)(String.fromCodePoint(l)),class:R([{"kanji-link-active":l===d.cardId},"kanji-link"])},{default:k(()=>[j(y(String.fromCodePoint(l)),1)]),_:2},1032,["to","class"])]))),256))])):_("",!0)])):_("",!0)}}}),F=I($,[["__scopeId","data-v-d88e10c6"]]),T={key:0},q=A({__name:"KanjiAsideView",setup(v){const n=V(),t=c(()=>typeof n.params.kanji!="string"?null:n.params.kanji.codePointAt(0)??null),{result:s}=S(async()=>(await D).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(t.value)));return(i,m)=>t.value&&r(s)&&r(s).length>0?(e(),o("aside",T,[(e(!0),o(x,null,C(r(s),a=>(e(),p(F,{key:a.name,deck:a,"card-id":t.value,class:"deck-nav"},null,8,["deck","card-id"]))),128))])):_("",!0)}}),G=I(q,[["__scopeId","data-v-6fb0da2c"]]);export{G as default};
