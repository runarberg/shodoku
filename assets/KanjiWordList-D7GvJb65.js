import{p as F}from"./reviews-C0tp5JDi.js";import{g as H}from"./WordWritingSelect-DnSPLHUE.js";import{u as E,a as q,b as J,c as U,S as Y,A as G,C as N}from"./CardRetrievabilityLabel-46Oryz0n.js";import{d as w,q as A,I as M,Q,a,o as e,_ as C,c as y,v as X,i as B,w as V,g as m,u,e as p,t as g,y as Z,F as v,h as j,S as ee,z as W,l as _,A as ae,b as $,U as x,V as S,D as ne,E as te,n as oe}from"./index-3SZaU-iL.js";import{u as P}from"./kanji-components-C9A26trC.js";import{A as se}from"./AppLoading-dOxd0OoU.js";import{d as ie}from"./decks-BkI394ym.js";import{a as re}from"./fsrs-D14ruAop.js";import{u as le}from"./formats-BZjAUNO7.js";import{v as ce}from"./index-BVkQD7g-.js";import{d as ue}from"./db-CmzCis4b.js";import{W as de}from"./WordListItem-DZ1Oghxl.js";const ke=w({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(n){const t=n,s=A(null);function l(){s.value?.replaceChildren(t.strokes??"")}return M(()=>t.strokes,l),Q(()=>{l()}),(d,i)=>(e(),a("g",{ref_key:"container",ref:s,class:"kanji-strokes"},null,512))}}),me=C(ke,[["__scopeId","data-v-53c78976"]]),pe=["viewBox"],fe={key:1,class:"component-info"},ge={key:0,class:"literal"},ve={class:"meaning"},he={key:0,class:"original",lang:"ja"},je={key:1,lang:"ja"},ye={class:"tags"},be={key:1,class:"is-phonetic"},_e=w({__name:"KanjiComponentItem",props:{literal:{},original:{},parts:{},hide:{type:Boolean}},setup(n){const t=n,s=E(),l=q(),d=y(()=>{for(const r of t.parts)if(r.radical)return r.radical;return null}),i=y(()=>{for(const r of t.parts)if(r.phon)return r.phon;return null}),k=P(()=>t.literal),c=y(()=>t.parts.at(0)?.original),o=P(c),h=y(()=>o.value?.radical?.en??o.value?.meaning??k.value?.radical?.en??k?.value?.meaning),b=y(()=>o.value?.radical?.jp??o.value?.reading??k.value?.radical?.jp??k?.value?.reading),K=y(()=>o.value?.radical?.number??k.value?.radical?.number),z=y(()=>t.literal.startsWith("CDP-")),O=[["彐","⺕"],["犭","⺨"],["阝","⻖"]];function T(r){for(const[R,f]of O)if(r===R)return f;return r}function D(r){return`oklch(from var(--accent-color) l c ${r+3})`}return X(()=>{const r=s.value;if(!r)return;r.dataset.element===t.literal&&(!t.original||t.original===r.dataset.original)&&(r.dataset.radical==="general"||r.dataset.radical==="tradit"?r.style.color="var(--green)":r.dataset.radical==="nelson"||r.dataset.radical==="jis"?r.style.color="var(--bluegreen)":r.dataset.phon===t.literal?r.style.color="var(--gold)":r.style.color=D(180));let R=-1;for(const f of r.querySelectorAll(`g[data-element="${t.literal}"]`))if(!(t.original&&t.original!==f.dataset.original)){if(f.dataset.radical==="general"||f.dataset.radical==="tradit"){f.style.color="var(--green)";continue}if(f.dataset.radical==="nelson"||f.dataset.radical==="jis"){f.style.color="var(--bluegreen)";continue}if(f.dataset.phon){f.style.color="var(--gold)";continue}(!f.dataset.part||f.dataset.part==="1")&&(R+=1),f.style.color=D(240+63*R)}}),(r,R)=>{const f=W("RouterLink");return e(),B(f,{to:u(ee)(T(n.literal)),class:"kanji-component-item"},{default:V(()=>[u(s)?(e(),a("svg",{key:0,viewBox:u(l),class:"kanji-component-strokes"},[n.hide?m("",!0):(e(),B(me,{key:0,class:"strokes-group",strokes:u(s)},null,8,["strokes"]))],8,pe)):m("",!0),n.hide?m("",!0):(e(),a("div",fe,[z.value?m("",!0):(e(),a("span",ge,g(n.literal),1)),p("p",ve,[p("strong",null,g(h.value),1),c.value?(e(),a("span",he,g(c.value),1)):m("",!0),b.value?(e(),a("span",je," ("+g(b.value)+")",1)):m("",!0)]),p("div",ye,[d.value?(e(),a("span",{key:0,class:Z(["is-radical",{"is-nelson":d.value==="nelson","is-jis":d.value==="jis"}])},[d.value==="nelson"?(e(),a(v,{key:0},[j("Nelson radical")],64)):d.value==="jis"?(e(),a(v,{key:1},[j("JIS radical")],64)):(e(),a(v,{key:2},[j("Radical")],64)),K.value?(e(),a(v,{key:3},[j(" "+g(K.value),1)],64)):m("",!0)],2)):m("",!0),i.value?(e(),a("span",be,"Phonetic")):m("",!0)])]))]),_:1},8,["to"])}}}),we=C(_e,[["__scopeId","data-v-6ab455ef"]]),Ce={class:"component-list"},L=4,Ke=w({__name:"KanjiComponents",props:{hide:{type:Boolean}},setup(n){const t=J(),s=A(!1);function l(d){return F(d,H(i=>i.original||null))}return M(t,()=>{s.value=!1}),(d,i)=>(e(),a("section",null,[p("h2",null,[i[1]||(i[1]=j(" Components ",-1)),!n.hide&&u(t).size>0?(e(),a(v,{key:0},[j(" ("+g(u(t).size)+") ",1)],64)):m("",!0)]),p("ul",Ce,[(e(!0),a(v,null,_(u(t),([k,c],o)=>(e(),a(v,{key:k},[s.value||o<L?(e(!0),a(v,{key:0},_(l(c),([h,b])=>(e(),a("li",{key:h??0},[$(we,{literal:k,parts:b,original:h,hide:n.hide},null,8,["literal","parts","original","hide"])]))),128)):m("",!0)],64))),128))]),!n.hide&&!s.value&&u(t).size>L?(e(),B(ae,{key:0,class:"show-more-button",inline:"",onClick:i[0]||(i[0]=k=>s.value=!0)},{default:V(()=>[j(" show "+g(u(t).size-L)+" more ",1)]),_:1})):m("",!0)]))}}),Xe=C(Ke,[["__scopeId","data-v-ad616a9a"]]),$e={class:"kanji-readings"},Be=["data-blur"],Re=["data-blur"],Ve=w({__name:"KanjiReadings",props:{kanji:{},hideReadings:{type:Boolean}},setup(n){return(t,s)=>(e(),a("section",null,[s[2]||(s[2]=p("h2",null,"Readings",-1)),p("dl",$e,[s[0]||(s[0]=p("dt",null,"Kun",-1)),p("div",{class:"dd-items","data-blur":n.hideReadings?!0:null},[(e(!0),a(v,null,_(n.kanji.kunYomi,l=>(e(),a("dd",{key:l},g(l),1))),128))],8,Be),s[1]||(s[1]=p("dt",null,"On",-1)),p("div",{class:"dd-items","data-blur":n.hideReadings?!0:null},[(e(!0),a(v,null,_(n.kanji.onYomi,l=>(e(),a("dd",{key:l},g(l),1))),128))],8,Re)])]))}}),Ze=C(Ve,[["__scopeId","data-v-eb203917"]]),xe={key:1,class:"loading-container"},Se=w({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean},practiceMode:{type:Boolean}},emits:["practiceDone"],setup(n){const t=E(),s=q(),l=U(),d=y(()=>{const i=[];for(const k of t.value?.querySelectorAll("path")??[]){const c=k.getAttribute("d");c&&i.push(c)}return[i]});return(i,k)=>(e(),a("section",null,[p("h2",null,[k[1]||(k[1]=j(" Strokes ",-1)),!n.practiceMode&&!u(l)&&d.value[0].length>0?(e(),a(v,{key:0},[j(" ("+g(d.value[0].length)+") ",1)],64)):m("",!0)]),d.value&&!u(l)?(e(),B(Y,{key:0,"view-box":u(s),"char-strokes":d.value,"practice-mode":n.practiceMode,"auto-hint":n.autoHint,onPracticeDone:k[0]||(k[0]=c=>i.$emit("practiceDone"))},null,8,["view-box","char-strokes","practice-mode","auto-hint"])):u(l)?(e(),a("div",xe,[$(se,{class:"loading"})])):m("",!0)]))}}),ea=C(Se,[["__scopeId","data-v-38632d97"]]),Le={class:"kanji-title"},Ie={class:"main-meaning meaning"},Ae={class:"labels"},Me={key:0,class:"additional-meanings"},De={key:1,class:"actions"},Ge=w({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1},actions:{default:"explore"}},setup(n){const t=n,s=y(()=>{const{freq:i}=t.kanji;return i?i<=50?50:i<=100?100:i<=200?200:i<=500?500:i<=1e3?1e3:null:null}),l=le(()=>t.kanji.codepoint),d=re(()=>t.kanji.codepoint,["kanji-write","kanji-read"]);return(i,k)=>{const c=W("RouterLink");return e(),a("header",Le,[x(p("h2",{class:"literal",lang:"ja"},g(n.kanji.literal),513),[[S,!n.hideLiteral]]),x(p("p",Ie,[p("strong",null,g(n.kanji.meanings?.at(0)),1)],512),[[S,!n.hideMeaning]]),p("aside",Ae,[s.value&&!u(l).some(({name:o})=>o===`news-top-${s.value}`)?(e(),B(G,{key:0,class:"freq-label"},{default:V(()=>[j(" Top "+g(s.value),1)]),_:1})):m("",!0),(e(!0),a(v,null,_(u(l),o=>(e(),B(c,{key:o.name,to:{name:u(te),query:{deck:o.name}},class:"deck-label"},{default:V(()=>[$(G,null,{default:V(()=>[j(g(u(ie)(o)),1)]),_:2},1024)]),_:2},1032,["to"]))),128)),$(N,{r:u(d).get("kanji-write"),label:"書"},null,8,["r"]),$(N,{r:u(d).get("kanji-read"),label:"読"},null,8,["r"])]),n.kanji.meanings?.length>1?x((e(),a("ul",Me,[(e(!0),a(v,null,_(n.kanji.meanings.slice(1),o=>(e(),a("li",{key:o,class:"meaning"},g(o),1))),128))],512)),[[S,!n.hideMeaning]]):m("",!0),i.$slots.actions?(e(),a("nav",De,[ne(i.$slots,"actions",{},void 0,!0)])):m("",!0)])}}}),aa=C(Ge,[["__scopeId","data-v-b9498ee6"]]),Ne={class:"kanji-word-list"},I=10,Pe=w({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(n){const t=n,s=oe(async()=>{const{words:c}=t.kanjiVocab,o=[],h=[],{store:b}=(await ue).transaction("bookmarked-words");for(const K of c)await b.count(K)?o.push(K):h.push(K);return{bookmarked:o,rest:h}},null),l=A(I),d=y(()=>{const c=l.value;if(s.value){const{bookmarked:o,rest:h}=s.value;return[o,h.slice(0,c)]}return[t.kanjiVocab.words.slice(0,c)]});function i(){l.value+=I}function k([{isIntersecting:c}]){c&&i()}return M(()=>t.kanjiVocab.codepoint,(c,o)=>{c!==o&&(l.value=I)}),(c,o)=>(e(),a("section",null,[p("h2",null,"Words ("+g(n.kanjiVocab.words.length)+")",1),p("ul",Ne,[(e(!0),a(v,null,_(d.value,h=>(e(),a(v,null,[(e(!0),a(v,null,_(h,b=>(e(),a("li",{key:b},[$(de,{word:b,kanji:n.kanjiVocab.literal,"hide-kanji":n.hideKanji,"hide-reading":n.hideReading,"hide-meaning":n.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),l.value<n.kanjiVocab.words.length?x((e(),a("button",{key:0,class:"next-page-button",onClick:o[0]||(o[0]=h=>i())},[...o[1]||(o[1]=[j(" Load More ",-1)])])),[[u(ce),k]]):m("",!0)]))}}),na=C(Pe,[["__scopeId","data-v-e2dbf567"]]);export{aa as K,Ze as a,ea as b,Xe as c,na as d};
//# sourceMappingURL=KanjiWordList-D7GvJb65.js.map
