{"version":3,"file":"RemoteSyncSyncButton.vue_vue_type_script_setup_true_lang-DEQmUQXB.js","sources":["../../src/components/RemoteSyncSyncButton.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref } from \"vue\";\n\nimport { syncRemote } from \"../db/sync.ts\";\nimport { useHasUnsyncedStores, useRemoteSyncEnabled } from \"../store/sync.ts\";\nimport AppButton from \"./AppButton.vue\";\n\ndefineProps<{\n  conditional?: boolean;\n  filled?: boolean;\n}>();\n\nconst emit = defineEmits<{\n  syncing: [];\n  success: [];\n}>();\n\nconst syncing = ref(false);\nconst { result: remoteSyncEnabled } = useRemoteSyncEnabled();\nconst { result: hasUnsyncedStores } = useHasUnsyncedStores();\n\nasync function sync() {\n  emit(\"syncing\");\n  syncing.value = true;\n\n  try {\n    await syncRemote();\n    emit(\"success\");\n  } finally {\n    syncing.value = false;\n  }\n}\n\ndefineExpose({\n  sync,\n});\n</script>\n\n<template>\n  <AppButton\n    v-if=\"!conditional || remoteSyncEnabled\"\n    type=\"submit\"\n    prefix-icon=\"refresh\"\n    :filled=\"filled || hasUnsyncedStores === true\"\n    :disabled=\"syncing\"\n    @click=\"sync\"\n  >\n    <template v-if=\"syncing\"> Syncing </template>\n    <template v-else> Sync </template>\n  </AppButton>\n</template>\n"],"names":["emit","__emit","syncing","ref","remoteSyncEnabled","useRemoteSyncEnabled","hasUnsyncedStores","useHasUnsyncedStores","sync","syncRemote","__expose","__props","_unref","_createBlock","AppButton","_createElementBlock","_Fragment"],"mappings":"0TAYA,MAAMA,EAAOC,EAKPC,EAAUC,EAAI,EAAK,EACnB,CAAE,OAAQC,CAAA,EAAsBC,EAAA,EAChC,CAAE,OAAQC,CAAA,EAAsBC,EAAA,EAEtC,eAAeC,GAAO,CACpBR,EAAK,SAAS,EACdE,EAAQ,MAAQ,GAEhB,GAAI,CACF,MAAMO,EAAA,EACNT,EAAK,SAAS,CAChB,QAAA,CACEE,EAAQ,MAAQ,EAClB,CACF,CAEA,OAAAQ,EAAa,CACX,KAAAF,CAAA,CACD,SAKU,CAAAG,EAAA,aAAeC,EAAAR,CAAA,OADxBS,EAUYC,EAAA,OARV,KAAK,SACL,cAAY,UACX,OAAQH,EAAA,QAAUC,EAAAN,CAAA,IAAiB,GACnC,SAAUJ,EAAA,MACV,QAAOM,CAAA,aAER,IAA6C,CAA7BN,EAAA,WAAhBa,EAA6CC,EAAA,CAAA,IAAA,GAAA,GAApB,WAAS,CAAA,YAClCD,EAAkCC,EAAA,CAAA,IAAA,GAAA,GAAjB,QAAM,CAAA"}