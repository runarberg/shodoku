import{b as p,W as d}from"./index-TyJKmroR.js";import{l as w}from"./reviews-vBeA8rIc.js";import{d as u}from"./channels-Cq-RpcWF.js";import{u as m}from"./db-3hrw4Sm5.js";import{c as f,x as c,C as g,l as j}from"./index-BOg8xiez.js";const b=new RegExp("\\p{Script=Han}","u"),v=new RegExp("^\\p{Script=Han}$","u"),K=/[\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Han}\u{2e80}-\u{2fd5}\u{3000}-\u{303f}\u{31f0}-\u{31ff}\u{3220}-\u{3243}\u{3280}-\u{337f}\u{ff5f}-\u{ff9f}\u{ff01}-\u{ff5e}]/u;function E(t){return K.test(t)}function _(t){return b.test(t)}function h(t){return v.test(t)}function l(){return f(()=>{const t=p({enable_fuzz:w.value});return d(t)})}function x(t){const n=l(),{result:s}=m(f(()=>{const r=c(t);return async()=>{const i=(await u).transaction("progress").store,a=await i.get([r,"kanji-read"]),o=await i.get([r,"kanji-write"]),e=new Date;return{read:a?n.value.get_retrievability(a.fsrs,e,!1):null,write:o?n.value.get_retrievability(o.fsrs,e,!1):null}}}));return s}function D(t){const n=l(),s=g(new Set);return j(()=>c(t),async r=>{if(!r)return;const i=new Date;for(const a of r)if(h(a)){const o=a.codePointAt(0)??0,e=await(await u).get("progress",[o,"kanji-read"]);e&&n.value.get_retrievability(e.fsrs,i,!1)>.99&&s.add(a)}},{immediate:!0}),s}export{x as a,E as b,b as c,D as d,_ as h,h as i,l as u};
