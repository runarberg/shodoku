{"version":3,"file":"kanji-components-CdOEBGxo.js","sources":["../../src/helpers/kanji-components.ts"],"sourcesContent":["import { MaybeRefOrGetter, Ref, ref, toValue, watch } from \"vue\";\n\nimport { KanjiComponentInfo } from \"../types.ts\";\n\nfunction toHex(literal: string): string {\n  if (literal.startsWith(\"CDP-\")) {\n    return literal;\n  }\n\n  const codepoint = literal.codePointAt(0) ?? 0;\n  return codepoint.toString(16).padStart(5, \"0\");\n}\n\nexport function useKanjiComponent(\n  literal: MaybeRefOrGetter<string | null | undefined>,\n): Ref<KanjiComponentInfo | null> {\n  const kanjiComponent = ref<KanjiComponentInfo | null>(null);\n\n  function setKanjiComponent(kanjiComponentInfo: KanjiComponentInfo) {\n    kanjiComponent.value = kanjiComponentInfo;\n  }\n\n  watch(\n    () => toValue(literal),\n    async (value) => {\n      if (!value) {\n        kanjiComponent.value = null;\n        return;\n      }\n\n      if (value === kanjiComponent.value?.literal) {\n        return;\n      }\n\n      const hex = toHex(value);\n      const response = await fetch(`/data/components-v1/${hex}.json`);\n      const data = await response.json();\n\n      setKanjiComponent(data);\n    },\n    { immediate: true },\n  );\n\n  return kanjiComponent;\n}\n"],"names":["toHex","literal","useKanjiComponent","kanjiComponent","ref","setKanjiComponent","kanjiComponentInfo","watch","toValue","value","hex","data"],"mappings":"sDAIA,SAASA,EAAMC,EAAyB,CACtC,OAAIA,EAAQ,WAAW,MAAM,EACpBA,GAGSA,EAAQ,YAAY,CAAC,GAAK,GAC3B,SAAS,EAAE,EAAE,SAAS,EAAG,GAAG,CAC/C,CAEO,SAASC,EACdD,EACgC,CAChC,MAAME,EAAiBC,EAA+B,IAAI,EAE1D,SAASC,EAAkBC,EAAwC,CACjEH,EAAe,MAAQG,CACzB,CAEA,OAAAC,EACE,IAAMC,EAAQP,CAAO,EACrB,MAAOQ,GAAU,CACf,GAAI,CAACA,EAAO,CACVN,EAAe,MAAQ,KACvB,MACF,CAEA,GAAIM,IAAUN,EAAe,OAAO,QAClC,OAGF,MAAMO,EAAMV,EAAMS,CAAK,EAEjBE,EAAO,MADI,MAAM,MAAM,uBAAuBD,CAAG,OAAO,GAClC,KAAA,EAE5BL,EAAkBM,CAAI,CACxB,EACA,CAAE,UAAW,EAAA,CAAK,EAGbR,CACT"}