import{j as V,k as G,c as $,x as be,y as oe,v as ie,s as fe,z as $e,A as ae,d as R,B as Se,a as g,o as f,_ as q,u as j,h as M,g as K,f as x,t as A,q as me,F as S,e as T,i as Y,b as z,w as X,n as ve,C as te,D as se,E as Ce}from"./index-CgdTuyLR.js";import{A as U}from"./AppButton-BT87rAPg.js";import{A as W,u as Be,d as he}from"./db-CcU_202h.js";import{s as ye}from"./time-BmRGZSiE.js";import{a as Ke,c as Ie}from"./index-Dy4zg_J2.js";import{d as Pe}from"./decks-huPVwMnz.js";import{W as Ae,v as Me}from"./WordListItem-Bs5FhiIJ.js";const ue="http://kanjivg.tagaini.net",Q=Symbol("kanjivg"),Ve=new DOMParser;function Ee(e){var o;const n=[];let t=e.closest("[data-position]");for(;t instanceof SVGElement;)n.push(t.dataset.position),t=((o=t.parentElement)==null?void 0:o.closest("[data-position]"))??null;return n}function Ut(e){const n=V(null),t=V(null),o=V(!1);G(()=>ie(e),async s=>{if(s){o.value=!0;try{const r=await(await fetch(`/kanjivg/kanji/${s}.svg`)).text(),c=Ve.parseFromString(r,"image/svg+xml");if(c.documentElement instanceof SVGSVGElement){const{x:l,y:p,width:y,height:k}=c.documentElement.viewBox.baseVal;t.value=`${l},${p},${y},${k}`}const i=c.getElementById(`kvg:${s}`);if(i){for(const l of[...i==null?void 0:i.querySelectorAll("*"),i])if(l instanceof SVGElement){for(const p of[...l.attributes])p.namespaceURI===ue&&(l.dataset[p.localName]=p.value,l.removeAttributeNS(ue,p.localName));l.removeAttribute("xmlns:kvg")}}n.value=i}finally{o.value=!1}}},{immediate:!0});const a=$(()=>{const s=n.value;if(!s)return new Map;const u=new Map,r={};function c(l){if(l.dataset.part&&Number.parseInt(l.dataset.part)>1)return;const p=l.dataset.element,y={element:p,original:l.dataset.original??null,position:Ee(l),radical:l.dataset.radical??null};let k=u.get(p);k?k.push(y):(k=[y],u.set(p,k)),y.radical&&(r[y.radical]=p)}s.dataset.radical&&c(s);for(const l of s.querySelectorAll("g[data-element]"))c(l);const i=new Map;for(const l of["general","tradit","nelson"]){const p=r[l],y=u.get(p);y&&(i.set(p,y),u.delete(p))}for(const[l,p]of u)i.set(l,p);return i});be(Q,{strokesEl:n,viewBox:t,components:a,syncing:o})}function ke(){const e=oe(Q,null);return $(()=>{var t;return((t=e==null?void 0:e.strokesEl.value)==null?void 0:t.cloneNode(!0))??null})}function ge(){const e=oe(Q,null);return $(()=>(e==null?void 0:e.viewBox.value)??"0,0,109,109")}function Ne(){const e=oe(Q,null);return $(()=>(e==null?void 0:e.components.value)??new Map)}function Le(){const e=oe(Q,null);return $(()=>(e==null?void 0:e.syncing.value)??!1)}function*De(e){for(const n of e.split(`
`)){const[t,o,a,s,u]=n.split(",");if(!o)continue;const r={id:Number.parseInt(t),literal:o.at(0)??"",strokes:Number.parseInt(a),meaning:s,reading:u};for(const c of o)yield[c,r]}}const Ge=$e("radicals",()=>{const e=V(!1),n=V(null),t=ae(new Map);async function o(){if(!e.value){e.value=!0,n.value=null;try{const u=await(await fetch("/data/radicals.csv")).text();for(const[r,c]of De(u))t.set(r,c)}catch(s){n.value=s}finally{e.value=!1}}}async function a(s){const u=s.codePointAt(0);if(!u)return;const r=u==null?void 0:u.toString(16).padStart(5,"0"),i=await(await fetch(`/data/kanji-v1/${r}.json`)).json(),l=i.kunYomi.find(p=>!/[.-]/.test(p))??i.kunYomi.at(0)??"";t.set(s,{id:u,literal:s,strokes:i.strokeCount,meaning:i.meanings.at(0)??"",reading:l})}return o(),{radicals:t,sync:o,syncing:e,tryKanji:a}});function Re(e){const n=Ge();return fe(()=>{const t=ie(e);t&&!n.syncing&&!n.radicals.has(t)&&n.tryKanji(t)}),$(()=>{const t=ie(e);return t?n.radicals.get(t)??null:null})}const qe=R({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(e){const n=e,t=V(null);function o(){var a;(a=t.value)==null||a.replaceChildren(n.strokes??"")}return G(()=>n.strokes,o),Se(()=>{o()}),(a,s)=>(f(),g("g",{ref_key:"container",ref:t,class:"kanji-strokes"},null,512))}}),_e=q(qe,[["__scopeId","data-v-53c78976"]]),Oe={class:"kanji-component-item"},Te=["viewBox"],Ye={class:"component-info"},ze={class:"literal"},Xe={class:"meaning"},He={key:0,lang:"ja"},We=R({__name:"KanjiComponentItem",props:{literal:{},parts:{}},setup(e){const n=e,t=ke(),o=ge(),a=$(()=>{for(const r of n.parts)if(r.radical)return r.radical;return null}),s=Re(()=>n.literal);function u(r){return`oklch(from var(--accent-color) l c ${r+3})`}return fe(()=>{const r=t.value;if(!r)return;r.dataset.element===n.literal&&(r.dataset.radical==="general"||r.dataset.radical==="tradit"?r.style.color="var(--green)":r.dataset.radical==="nelson"?r.style.color="var(--orange)":r.style.color=u(180));let c=-1;for(const i of r.querySelectorAll(`g[data-element="${n.literal}"]`)){if(i.dataset.radical==="general"||i.dataset.radical==="tradit"){i.style.color="var(--green)";continue}if(i.dataset.radical==="nelson"){i.style.color="var(--orange)";continue}(!i.dataset.part||i.dataset.part==="1")&&(c+=1),i.style.color=u(240+63*c)}}),(r,c)=>{var i,l;return f(),g("div",Oe,[j(t)?(f(),g("svg",{key:0,viewBox:j(o),class:"kanji-component-strokes"},[M(_e,{class:"strokes-group",strokes:j(t)},null,8,["strokes"])],8,Te)):K("",!0),x("div",Ye,[x("span",ze,A(r.literal),1),x("p",Xe,[x("strong",null,A((i=j(s))==null?void 0:i.meaning),1),(l=j(s))!=null&&l.reading?(f(),g("span",He," ("+A(j(s).reading)+")",1)):K("",!0)]),a.value?(f(),g("span",{key:0,class:me(["is-radical",{"is-nelson":a.value==="nelson"}])},[a.value==="nelson"?(f(),g(S,{key:0},[T("Nelson radical")],64)):(f(),g(S,{key:1},[T("Radical")],64))],2)):K("",!0)])])}}}),Fe=q(We,[["__scopeId","data-v-ce0ca725"]]),Ue={class:"component-list"},Je=R({__name:"KanjiComponents",setup(e){const n=Ne();return(t,o)=>(f(),g("section",null,[x("h2",null,[o[0]||(o[0]=T(" Components ")),j(n).size>0?(f(),g(S,{key:0},[T(" ("+A(j(n).size)+")",1)],64)):K("",!0)]),x("ul",Ue,[(f(!0),g(S,null,Y(j(n),([a,s])=>(f(),g("li",{key:a},[M(Fe,{literal:a,parts:s},null,8,["literal","parts"])]))),128))])]))}}),Jt=q(Je,[["__scopeId","data-v-6768574a"]]),Qe={class:"kanji-readings"},Ze={class:"dd-items"},et={class:"dd-items"},tt=R({__name:"KanjiReadings",props:{kanji:{}},setup(e){return(n,t)=>(f(),g("section",null,[t[2]||(t[2]=x("h2",null,"Readings",-1)),x("dl",Qe,[t[0]||(t[0]=x("dt",null,"Kun",-1)),x("div",Ze,[(f(!0),g(S,null,Y(n.kanji.kunYomi,o=>(f(),g("dd",null,A(o),1))),256))]),t[1]||(t[1]=x("dt",null,"On",-1)),x("div",et,[(f(!0),g(S,null,Y(n.kanji.onYomi,o=>(f(),g("dd",null,A(o),1))),256))])])]))}}),Qt=q(tt,[["__scopeId","data-v-f6c59d96"]]),nt={class:"kanji-strokes-background"},at=["x","y","width","height"],ot=["x1","y1","x2","y2"],st=["x1","y1","x2","y2"],it=["x1","y1","x2","y2"],rt=["x1","y1","x2","y2"],lt=["x1","y1","x2","y2"],ct=["x1","y1","x2","y2"],ut=R({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(e){const n=e,t=$(()=>{const[s,u,r,c]=n.viewBox.split(",");return{x:Number.parseInt(s),y:Number.parseInt(u),width:Number.parseInt(r),height:Number.parseInt(c)}}),o=$(()=>{const{x:s,width:u}=t.value;return s+u/2}),a=$(()=>{const{y:s,height:u}=t.value;return s+u/2});return(s,u)=>(f(),g("g",nt,[x("rect",{class:"background",x:t.value.x,y:t.value.y,width:t.value.width,height:t.value.width,rx:"5"},null,8,at),x("line",{class:"midline",x1:t.value.x+1,y1:a.value,x2:t.value.x+t.value.width-1,y2:a.value},null,8,ot),x("line",{class:"midline",x1:o.value,y1:t.value.y+1,x2:o.value,y2:t.value.y+t.value.height-1},null,8,st),x("line",{class:"quartline",x1:o.value/2,y1:t.value.y+1,x2:o.value/2,y2:t.value.y+t.value.height-1},null,8,it),x("line",{class:"quartline",x1:3*o.value/2,y1:t.value.y+1,x2:3*o.value/2,y2:t.value.y+t.value.height-1},null,8,rt),x("line",{class:"quartline",x1:t.value.x+1,y1:a.value/2,x2:t.value.x+t.value.width-1,y2:a.value/2},null,8,lt),x("line",{class:"quartline",x1:t.value.x+1,y1:3*a.value/2,x2:t.value.x+t.value.width-1,y2:3*a.value/2},null,8,ct)]))}}),dt=q(ut,[["__scopeId","data-v-1b492e2c"]]),pt=1e-12,de=112e-18,ft=e=>e>=-de&&e<=de,xe=(e,n)=>Math.sqrt(e*e+n*n),F=(e,n)=>({x:e,y:n}),mt=e=>xe(e.x,e.y),vt=e=>F(-e.x,-e.y),J=(e,n)=>F(e.x+n.x,e.y+n.y),E=(e,n)=>F(e.x-n.x,e.y-n.y),H=(e,n)=>F(e.x*n,e.y*n),D=(e,n)=>e.x*n.x+e.y*n.y,le=(e,n)=>xe(e.x-n.x,e.y-n.y),O=(e,n=1)=>H(e,n/(mt(e)||1/0)),we=(e,n)=>({p:e,i:n}),ht=(e,n,t)=>{n&&(e.unshift(e[e.length-1]),e.push(e[1]));const o=e.length;if(o===0)return[];const a=[we(e[0])];return re(e,a,t,0,o-1,E(e[1],e[0]),E(e[o-2],e[o-1])),n&&(a.shift(),a.pop()),a},re=(e,n,t,o,a,s,u)=>{if(a-o===1){const y=e[o],k=e[a],v=le(y,k)/3;pe(n,[y,J(y,O(s,v)),J(k,O(u,v)),k]);return}const r=_t(e,o,a);let c=Math.max(t,t*t),i,l=!0;for(let y=0;y<=4;y++){const k=yt(e,o,a,r,s,u),v=xt(e,o,a,k,r);if(v.error<t&&l){pe(n,k);return}if(i=v.index,v.error>=c)break;l=kt(e,o,a,r,k),c=v.error}const p=E(e[i-1],e[i+1]);re(e,n,t,o,i,s,p),re(e,n,t,i,a,vt(p),u)},pe=(e,n)=>{const t=e[e.length-1];t.o=E(n[1],n[0]),e.push(we(n[3],E(n[2],n[3])))},yt=(e,n,t,o,a,s)=>{const u=pt,r=Math.abs,c=e[n],i=e[t],l=[[0,0],[0,0]],p=[0,0];for(let _=0,b=t-n+1;_<b;_++){const I=o[_],N=1-I,h=3*I*N,m=N*N*N,P=h*N,L=h*I,je=I*I*I,Z=O(a,P),ee=O(s,L),ce=E(E(e[n+_],H(c,m+P)),H(i,L+je));l[0][0]+=D(Z,Z),l[0][1]+=D(Z,ee),l[1][0]=l[0][1],l[1][1]+=D(ee,ee),p[0]+=D(Z,ce),p[1]+=D(ee,ce)}const y=l[0][0]*l[1][1]-l[1][0]*l[0][1];let k,v;if(r(y)>u){const _=l[0][0]*p[1]-l[1][0]*p[0];k=(p[0]*l[1][1]-p[1]*l[0][1])/y,v=_/y}else{const _=l[0][0]+l[0][1],b=l[1][0]+l[1][1];k=v=r(_)>u?p[0]/_:r(b)>u?p[1]/b:0}const B=le(i,c),C=u*B;let d,w;if(k<C||v<C)k=v=B/3;else{const _=E(i,c);d=O(a,k),w=O(s,v),D(d,_)-D(w,_)>B*B&&(k=v=B/3,d=w=null)}return[c,J(c,d||O(a,k)),J(i,w||O(s,v)),i]},kt=(e,n,t,o,a)=>{for(let s=n;s<=t;s++)o[s-n]=gt(a,e[s],o[s-n]);for(let s=1,u=o.length;s<u;s++)if(o[s]<=o[s-1])return!1;return!0},gt=(e,n,t)=>{const o=[],a=[];for(let l=0;l<=2;l++)o[l]=H(E(e[l+1],e[l]),3);for(let l=0;l<=1;l++)a[l]=H(E(o[l+1],o[l]),2);const s=ne(3,e,t),u=ne(2,o,t),r=ne(1,a,t),c=E(s,n),i=D(u,u)+D(c,r);return ft(i)?t:t-D(c,u)/i},ne=(e,n,t)=>{const o=n.slice();for(let a=1;a<=e;a++)for(let s=0;s<=e-a;s++)o[s]=J(H(o[s],1-t),H(o[s+1],t));return o[0]},_t=(e,n,t)=>{const o=[0];for(let a=n+1;a<=t;a++)o[a-n]=o[a-n-1]+le(e[a],e[a-1]);for(let a=1,s=t-n;a<=s;a++)o[a]/=o[s];return o},xt=(e,n,t,o,a)=>{let s=Math.floor((t-n+1)/2),u=0;for(let r=n+1;r<t;r++){const c=ne(3,o,a[r-n]),i=E(c,e[r]),l=i.x*i.x+i.y*i.y;l>=u&&(u=l,s=r)}return{error:u,index:s}},wt=(e,n,t)=>{const o=e.length,a=10**t,s=t<16?v=>Math.round(v*a)/a:v=>v,u=(v,B)=>s(v)+","+s(B);let r=!0,c,i,l,p;const y=[],k=(v,B)=>{var w,_,b,I;const C=v.p.x,d=v.p.y;if(r)y.push("M"+u(C,d)),r=!1;else{const N=C+(((w=v.i)==null?void 0:w.x)??0),h=d+(((_=v.i)==null?void 0:_.y)??0);if(N===C&&h===d&&l===c&&p===i){if(!B){const m=C-c,P=d-i;y.push(m===0?"v"+s(P):P===0?"h"+s(m):"l"+u(m,P))}}else y.push("c"+u(l-c,p-i)+" "+u(N-c,h-i)+" "+u(C-c,d-i))}c=C,i=d,l=C+(((b=v.o)==null?void 0:b.x)??0),p=d+(((I=v.o)==null?void 0:I.y)??0)};if(!o)return"";for(let v=0;v<o;v++)k(e[v]);return n&&o>0&&(k(e[0],!0),y.push("z")),y.join("")},jt=(e,n={})=>e.length===0?"":wt(ht(e.map(typeof e[0].x=="number"?t=>F(t.x,t.y):t=>F(t[0],t[1])),n.closed,n.tolerance??2.5),n.closed,n.precision??5),bt=["x","y","width","height"],$t={class:"practice-strokes"},St=["d"],Ct=["points"],Bt=R({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(e,{emit:n}){const t=e,o=n,a=V(null),s=$(()=>{var d;return(d=a.value)==null?void 0:d.closest("svg")}),u=$(()=>{var d;return(d=s.value)==null?void 0:d.viewBox.baseVal}),r=ae([]);function c(d){var b;if(!s.value)return{x:d.x,y:d.y};const w=s.value.createSVGPoint();w.x=d.x,w.y=d.y;const _=w.matrixTransform((b=s.value.getScreenCTM())==null?void 0:b.inverse());return{x:_.x,y:_.y}}function i(d){var w;d.isPrimary&&((w=a.value)==null||w.setPointerCapture(d.pointerId),r.push(c(d)))}function l(d){r.length===0||!d.isPrimary||r.push(c(d))}function p(d){var w,_,b;d.isPrimary&&(r.length>1&&o("stroke",jt(r)),(w=a.value)==null||w.releasePointerCapture(d.pointerId),r.splice(0,r.length),(b=(_=s.value)==null?void 0:_.parentElement)==null||b.click())}function y(d){const w=d.getTotalLength();return[{strokeDasharray:w,strokeDashoffset:w},{strokeDasharray:w,strokeDashoffset:0}]}const k={duration:500,easing:"ease-in-out"},v=[];function B(){var d;if(a.value){for(const w of(d=a.value)==null?void 0:d.querySelectorAll("path.stroke")){const _=w.animate(y(w),k);_.pause(),v.push(_)}C()}}async function C(){let d=v.at(0);for(;d;)d.play(),await d.finished,v.shift(),d=v.at(0),d&&await ye(100)}return G(()=>t.animate,d=>{d&&B()}),G(()=>t.animatePause,d=>{var w,_;d?(w=v.at(0))==null||w.pause():(_=v.at(0))==null||_.play()}),(d,w)=>(f(),g("g",{ref_key:"el",ref:a,class:"kanji-strokes-practice-canvas canvas",onPointerdown:i,onPointermove:l,onPointerup:p},[u.value?(f(),g("rect",{key:0,class:"background",x:u.value.x,y:u.value.y,width:u.value.width,height:u.value.height},null,8,bt)):K("",!0),x("g",$t,[(f(!0),g(S,null,Y(d.practiceStrokes,(_,b)=>(f(),g("path",{class:"stroke practice-stroke",key:b,d:_},null,8,St))),128))]),x("polyline",{class:"stroke current-stroke",points:j(r).map(({x:_,y:b})=>`${_},${b}`).join(" ")},null,8,Ct)],544))}}),Kt=q(Bt,[["__scopeId","data-v-1d5ee95b"]]),It={class:"strokes-figure"},Pt=["viewBox"],At={class:"controls"},Mt=R({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean,default:!1},practiceMode:{type:Boolean,default:!1},practiceReview:{type:Boolean,default:!1}},emits:["practiceDone"],setup(e,{emit:n}){const t=e,o=n,a=V(null),s=ke(),u=ge(),r=Le(),c=$(()=>{var h;return((h=s.value)==null?void 0:h.querySelectorAll("path"))??[]}),i=ae([]),l=$(()=>i.length>0),p=V(!1),y=V(!1),k=ae([]),v=V(null);function B(h){const m=h.getTotalLength();return[{strokeDasharray:m,strokeDashoffset:m},{strokeDasharray:m,strokeDashoffset:0}]}const C={duration:500,easing:"ease-in-out"};function d(){for(const h of c.value){const m=h.animate(B(h),C);m.pause(),i.push(m)}w()}async function w(){let h=i.at(0);for(;h;)h.play(),await h.finished,i.shift(),h=i.at(0),h&&await ye(100)}function _(){var h;(h=i.at(0))==null||h.pause(),p.value=!0}function b(){var h;(h=i.at(0))==null||h.play(),p.value=!1}function I(h=k.length){const m=c.value[h];if(!m)return;m.style.display="block";const P=m.animate(B(m),C);P.play(),P.finished.then(()=>{m.style.removeProperty("display")})}function N(h){k.push(h),t.practiceMode&&k.length===c.value.length&&(v.value=t.kanji.codepoint,o("practiceDone")),t.practiceMode&&t.autoHint&&k.length<c.value.length&&I()}return G(y,h=>{if(h){for(const m of i)m.cancel();i.splice(0,i.length),p.value=!1}else k.splice(0,k.length)}),G(()=>t.practiceMode,h=>{for(const m of c.value)for(const P of m.getAnimations())P.cancel();h!==y.value&&!(t.practiceReview&&v.value===t.kanji.codepoint)&&(y.value=h)},{immediate:!0}),G(()=>t.autoHint,h=>{h&&requestAnimationFrame(async()=>{await Ke(r).toBe(!1),I(0)})},{immediate:!0}),G(()=>t.kanji.codepoint,(h,m)=>{h!==m&&k.splice(0,k.length)}),(h,m)=>{const P=ve("Appbutton");return f(),g("section",null,[x("h2",null,[m[7]||(m[7]=T(" Strokes ")),!h.practiceMode&&c.value.length>0?(f(),g(S,{key:0},[T(" ("+A(c.value.length)+") ",1)],64)):K("",!0)]),x("figure",It,[j(s)?(f(),g("svg",{key:0,ref_key:"svgEl",ref:a,viewBox:j(u),class:"svg"},[M(dt,{viewBox:j(u)},null,8,["viewBox"]),M(_e,{strokes:j(s),class:me(["strokes",{comparing:l.value||c.value.length<=j(k).length,practicing:y.value}])},null,8,["strokes","class"]),y.value?(f(),z(Kt,{key:0,"practice-strokes":j(k),animate:l.value,"animate-pause":p.value,onStroke:m[0]||(m[0]=L=>N(L))},null,8,["practice-strokes","animate","animate-pause"])):K("",!0)],8,Pt)):K("",!0),x("figcaption",At,[l.value?(f(),g(S,{key:0},[p.value?(f(),z(P,{key:0,"aria-label":"Play",onClick:m[1]||(m[1]=L=>b())},{default:X(()=>[M(W,{icon:"play"})]),_:1})):(f(),z(U,{key:1,"aria-label":"Pause",onClick:m[2]||(m[2]=L=>_())},{default:X(()=>[M(W,{icon:"pause"})]),_:1}))],64)):(f(),g(S,{key:1},[y.value&&j(k).length<c.value.length?(f(),z(U,{key:0,"aria-label":"Show Hint",onClick:m[3]||(m[3]=L=>I())},{default:X(()=>[M(W,{icon:"help-circle"})]),_:1})):(f(),z(U,{key:1,"aria-label":"Animate Stroke Order",onClick:m[4]||(m[4]=L=>d())},{default:X(()=>[M(W,{icon:"play"})]),_:1}))],64)),h.practiceMode?K("",!0):(f(),z(U,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${y.value}`,filled:y.value,onClick:m[5]||(m[5]=L=>y.value=!y.value)},{default:X(()=>[M(W,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),y.value?(f(),g(S,{key:3},[m[8]||(m[8]=x("hr",{class:"rule"},null,-1)),M(U,{"aria-label":"Undo",onClick:m[6]||(m[6]=L=>j(k).pop())},{default:X(()=>[M(W,{icon:"rotate-left"})]),_:1})],64)):K("",!0)])])])}}}),Zt=q(Mt,[["__scopeId","data-v-06b10f9d"]]),Vt={class:"kanji-title"},Et={class:"main-meaning meaning"},Nt={class:"labels"},Lt={key:0,class:"label freq"},Dt={key:0,class:"additional-meanings"},Gt={class:"meaning"},Rt=R({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const n=e,t=$(()=>{const{freq:a}=n.kanji;if(!a)return null;if(a<=50)return 50;if(a<=100)return 100;if(a<=200)return 200;if(a<=500)return 500;if(a<=1e3)return 1e3}),{result:o}=Be($(()=>{const a=n.kanji.codepoint;return async()=>(await he).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(a))}));return(a,s)=>{var r,c;const u=ve("RouterLink");return f(),g("header",Vt,[te(x("h2",{class:"literal",lang:"ja"},A(a.kanji.literal),513),[[se,!a.hideLiteral]]),te(x("p",Et,[x("strong",null,A((r=a.kanji.meanings)==null?void 0:r.at(0)),1)],512),[[se,!a.hideMeaning]]),x("aside",Nt,[t.value?(f(),g("span",Lt,"Top "+A(t.value),1)):K("",!0),j(o)?(f(!0),g(S,{key:1},Y(j(o),i=>(f(),z(u,{to:{name:j(Ce),query:{deck:i.name}},key:i.name,class:"label deck"},{default:X(()=>[T(A(j(Pe)(i)),1)]),_:2},1032,["to"]))),128)):K("",!0)]),((c=a.kanji.meanings)==null?void 0:c.length)>1?te((f(),g("ul",Dt,[(f(!0),g(S,null,Y(a.kanji.meanings.slice(1),i=>(f(),g("li",Gt,A(i),1))),256))],512)),[[se,!a.hideMeaning]]):K("",!0)])}}}),en=q(Rt,[["__scopeId","data-v-0c7cade2"]]),qt={class:"kanji-word-list"},Ot=R({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const n=e,t=Ie(async()=>{const{words:r}=n.kanjiVocab,c=[],i=[],{store:l}=(await he).transaction("bookmarked-words");for(const p of r)await l.count(p.word)?c.push(p):i.push(p);return{bookmarked:c,rest:i}},null),o=V(20),a=$(()=>{const r=o.value;if(t.value){const{bookmarked:c,rest:i}=t.value;return[c,i.slice(0,r)]}return[n.kanjiVocab.words.slice(0,r)]});function s(){o.value+=20}function u([{isIntersecting:r}]){r&&s()}return G(()=>n.kanjiVocab.codepoint,(r,c)=>{r!==c&&(o.value=20)}),(r,c)=>(f(),g("section",null,[x("h2",null,"Words ("+A(r.kanjiVocab.words.length)+")",1),x("ul",qt,[(f(!0),g(S,null,Y(a.value,i=>(f(),g(S,null,[(f(!0),g(S,null,Y(i,l=>(f(),g("li",{key:l.word},[M(Ae,{word:l,kanji:r.kanjiVocab.literal,"hide-kanji":r.hideKanji,"hide-reading":r.hideReading,"hide-meaning":r.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),o.value<r.kanjiVocab.words.length?te((f(),g("button",{key:0,class:"next-page-button",onClick:c[0]||(c[0]=i=>s())},c[1]||(c[1]=[T(" Load More ")]))),[[j(Me),u]]):K("",!0)]))}}),tn=q(Ot,[["__scopeId","data-v-f05f9361"]]);export{en as K,Qt as a,Zt as b,tn as c,Jt as d,Ut as p};
