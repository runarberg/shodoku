import{d as j,c as u,i as B,x as N,u as a,p as E,w as b,h as w,t as _,o as n,_ as L,a as o,F as S,l as K,b as v,m as M,q as P,N as F,G as W,e as k,g as m,f as C,A}from"./index-CvwMh420.js";import{b as Q,f as R,u as Y}from"./decks-C8hh0ofh.js";import{d as G}from"./decks-SO1bh7uj.js";import{S as q,k as T,e as z,W as H}from"./reviews-BBX2ZUfX.js";import{u as J,d as O}from"./db-CNlb8ZXY.js";import{u as U}from"./fsrs-BBura_Wb.js";import"./decks-CO9E1ISL.js";const X=j({__name:"DeckKanjiCardItem",props:{codepoint:{}},setup(f){const s=f,r=u(()=>String.fromCodePoint(s.codepoint)),{result:e}=J(async()=>{const{codepoint:t}=s,i=(await O).transaction("progress").store,d=await i.get([t,"kanji-read"]),h=await i.get([t,"kanji-write"]);return{read:d,write:h}}),l=U();function y(t){const i=new Date,d=T.value/100,h=new Date(Date.now()+z.value*H);return l.value.get_retrievability(t,i,!1)>d&&t.due>h}function p(t){return t?t.state===q.New?"new":t.state===q.Learning||t.state===q.Relearning||t.due<new Date?"due":y(t)?"know":"review":null}const g=u(()=>p(e.value?.read?.fsrs)),x=u(()=>p(e.value?.write?.fsrs));return(t,i)=>{const d=N("RouterLink");return n(),B(d,{to:a(E)(r.value),class:"kanji","data-read":g.value,"data-write":x.value},{default:b(()=>[w(_(r.value),1)]),_:1},8,["to","data-read","data-write"])}}}),Z=L(X,[["__scopeId","data-v-08b61479"]]),ee={class:"kanji-list"},te=j({__name:"DeckKanjiCards",props:{kanji:{}},setup(f){return(s,r)=>(n(),o("ol",ee,[(n(!0),o(S,null,K(s.kanji,e=>(n(),o("li",{key:e,class:"kanji"},[v(Z,{codepoint:e},null,8,["codepoint"])]))),128))]))}}),ne=L(te,[["__scopeId","data-v-4bbb3e6d"]]),se=["aria-labelledby"],ae=["id"],oe={class:"status"},re={class:"count total-count"},ce={key:0,class:"count know-count"},ue={key:1,class:"count review-count"},ie={key:2,class:"count due-count"},le={key:3,class:"count new-count"},de=j({__name:"DeckListItem",props:{deck:{}},setup(f){const s=f,r=M(null),e=W(),l=P(),y=u(()=>G(s.deck)),p=u(()=>l.query.deck?typeof l.query.deck=="string"?[l.query.deck]:l.query.deck:[]),g=u(()=>p.value.includes(s.deck.name)),x=u(()=>{const{name:c}=s.deck,I=g.value?p.value.filter(D=>D!==c):[...p.value,c];return{query:{...l.query,deck:I}}}),t=Q(()=>s.deck.name);function i(c){if(!t.value)return 0;const{"kanji-read":I,"kanji-write":D}=t.value;return(I[c]+D[c])/2}const d=u(()=>i("new")),h=u(()=>i("due")),$=u(()=>i("review")),V=u(()=>i("know"));return F(()=>{g.value&&p.value.length===1&&r.value?.scrollIntoView({block:"start"})}),(c,I)=>{const D=N("RouterLink");return n(),o("article",{ref_key:"el",ref:r,class:"deck-list-item","aria-labelledby":a(e)},[k("strong",{id:a(e),class:"label"},[v(D,{to:x.value,"aria-pressed":g.value,replace:""},{default:b(()=>[w(_(y.value),1)]),_:1},8,["to","aria-pressed"])],8,ae),k("div",oe,[k("span",re,_(c.deck.cards.length)+" cards",1),a(t)?(n(),o(S,{key:0},[V.value>0?(n(),o("span",ce,_(a(R)(V.value/c.deck.cards.length))+" know ",1)):m("",!0),$.value>0?(n(),o("span",ue,_(a(R)($.value/c.deck.cards.length))+" reviewed ",1)):m("",!0),h.value>0?(n(),o("span",ie,_(a(R)(h.value/c.deck.cards.length))+" due ",1)):m("",!0),d.value>0?(n(),o("span",le,_(a(R)(d.value/c.deck.cards.length))+" remaining ",1)):m("",!0)],64)):m("",!0)]),g.value?(n(),B(ne,{key:0,kanji:c.deck.cards,class:"cards"},null,8,["kanji"])):m("",!0)],8,se)}}}),ke=L(de,[["__scopeId","data-v-33452db6"]]),pe={key:0,class:"deck-list"},_e=j({__name:"DeckList",setup(f){const s=Y();return(r,e)=>{const l=N("RouterLink");return n(),o("section",null,[e[4]||(e[4]=k("p",null," Decks allow you do keep track of your practice, such that you know which kanji you already know, which you should learn next, and which you need to review. ",-1)),a(s)&&a(s).length>0?(n(),o("ol",pe,[(n(!0),o(S,null,K(a(s),y=>(n(),o("li",{key:y.name,class:"deck-list-item"},[v(ke,{deck:y},null,8,["deck"])]))),128))])):a(s)?(n(),o(S,{key:1},[k("p",null,[e[1]||(e[1]=w(" You donâ€˜t have any decks. ")),v(l,{to:a(C)},{default:b(()=>e[0]||(e[0]=[w(" Add your first deck ")])),_:1,__:[0]},8,["to"]),e[2]||(e[2]=w(" by clicking the button below. "))]),v(A,{to:a(C),"prefix-icon":"plus"},{default:b(()=>e[3]||(e[3]=[w(" Add Deck ")])),_:1,__:[3]},8,["to"])],64)):m("",!0)])}}}),me=L(_e,[["__scopeId","data-v-d7bb3716"]]),we={class:"article-header"},ve={class:"actions"},fe=j({__name:"DecksView",setup(f){return(s,r)=>(n(),o("article",null,[k("header",we,[r[1]||(r[1]=k("h2",{class:"title"},"Your Decks",-1)),k("div",ve,[v(A,{to:a(C),"prefix-icon":"draw"},{default:b(()=>r[0]||(r[0]=[w(" Manage Decks ")])),_:1,__:[0]},8,["to"])])]),v(me)]))}}),Ie=L(fe,[["__scopeId","data-v-45d5f815"]]);export{Ie as default};
