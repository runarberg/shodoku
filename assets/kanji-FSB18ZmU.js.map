{"version":3,"file":"kanji-FSB18ZmU.js","sources":["../../src/helpers/kanji.ts"],"sourcesContent":["import { MaybeRefOrGetter, Ref, ref, toValue, watch } from \"vue\";\n\nimport { KanjiInfo, KanjiVocab } from \"../types.ts\";\n\nexport function useKanji(\n  codepoint: MaybeRefOrGetter<number | null | undefined>,\n): Ref<KanjiInfo | null> {\n  const kanji = ref<KanjiInfo | null>(null);\n\n  function setKanji(kanjiInfo: KanjiInfo) {\n    kanji.value = kanjiInfo;\n  }\n\n  watch(\n    () => toValue(codepoint),\n    async (value) => {\n      if (!value) {\n        kanji.value = null;\n        return;\n      }\n\n      if (value === kanji.value?.codepoint) {\n        return;\n      }\n\n      const hex = value.toString(16).padStart(5, \"0\");\n      const response = await fetch(`/data/kanji-v1/${hex}.json`);\n      const data = await response.json();\n\n      setKanji(data);\n    },\n    { immediate: true },\n  );\n\n  return kanji;\n}\n\nexport function useKanjiVocab(\n  codepoint: MaybeRefOrGetter<number | null | undefined>,\n): Ref<KanjiVocab | null> {\n  const kanjiVocab = ref<KanjiVocab | null>(null);\n\n  watch(\n    () => toValue(codepoint),\n    async (value) => {\n      if (!value) {\n        kanjiVocab.value = null;\n        return;\n      }\n\n      const hex = value.toString(16).padStart(5, \"0\");\n      const response = await fetch(`/data/kanji-vocab-v1/${hex}.json`);\n      const data = await response.json();\n\n      kanjiVocab.value = data;\n    },\n    { immediate: true },\n  );\n\n  return kanjiVocab;\n}\n"],"names":["useKanji","codepoint","kanji","ref","setKanji","kanjiInfo","watch","toValue","value","hex","data","useKanjiVocab","kanjiVocab"],"mappings":"sDAIO,SAASA,EACdC,EACuB,CACvB,MAAMC,EAAQC,EAAsB,IAAI,EAExC,SAASC,EAASC,EAAsB,CACtCH,EAAM,MAAQG,CAChB,CAEA,OAAAC,EACE,IAAMC,EAAQN,CAAS,EACvB,MAAOO,GAAU,CACf,GAAI,CAACA,EAAO,CACVN,EAAM,MAAQ,KACd,MACF,CAEA,GAAIM,IAAUN,EAAM,OAAO,UACzB,OAGF,MAAMO,EAAMD,EAAM,SAAS,EAAE,EAAE,SAAS,EAAG,GAAG,EAExCE,EAAO,MADI,MAAM,MAAM,kBAAkBD,CAAG,OAAO,GAC7B,KAAA,EAE5BL,EAASM,CAAI,CACf,EACA,CAAE,UAAW,EAAA,CAAK,EAGbR,CACT,CAEO,SAASS,EACdV,EACwB,CACxB,MAAMW,EAAaT,EAAuB,IAAI,EAE9C,OAAAG,EACE,IAAMC,EAAQN,CAAS,EACvB,MAAOO,GAAU,CACf,GAAI,CAACA,EAAO,CACVI,EAAW,MAAQ,KACnB,MACF,CAEA,MAAMH,EAAMD,EAAM,SAAS,EAAE,EAAE,SAAS,EAAG,GAAG,EAExCE,EAAO,MADI,MAAM,MAAM,wBAAwBD,CAAG,OAAO,GACnC,KAAA,EAE5BG,EAAW,MAAQF,CACrB,EACA,CAAE,UAAW,EAAA,CAAK,EAGbE,CACT"}