{"version":3,"file":"ReviewView-CC_z4yFz.js","sources":["../../src/components/RateButtons.vue","../../src/components/KanjiReview.vue","../../src/components/ReviewRemainCount.vue","../../src/types.ts","../../src/views/ReviewView.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { Card as FSRSCard, Rating, RecordLogItem } from \"ts-fsrs\";\nimport { computed } from \"vue\";\n\nimport { useFsrs } from \"../helpers/fsrs.ts\";\nimport { formatRelativeTime } from \"../helpers/time.ts\";\nimport AppButton from \"./AppButton.vue\";\n\nconst props = defineProps<{\n  progress: FSRSCard;\n}>();\n\nconst emit = defineEmits<{\n  rate: [next: RecordLogItem];\n}>();\n\nconst fsrs = useFsrs();\nconst ratings = computed(() => fsrs.value.repeat(props.progress, new Date()));\n\nfunction nextReview(next: FSRSCard): string {\n  const currentReviewTime = next.last_review?.getTime() ?? Date.now();\n  const nextReviewTime = next.due.getTime();\n\n  return formatRelativeTime(nextReviewTime - currentReviewTime);\n}\n\nfunction rateCard(rating: Rating) {\n  if (rating === Rating.Manual) {\n    // Not implemented\n    return;\n  }\n\n  emit(\"rate\", fsrs.value.next(props.progress, new Date(), rating));\n}\n</script>\n\n<template>\n  <div class=\"rate-buttons\">\n    <AppButton\n      v-for=\"{ log, card: next } of ratings\"\n      :key=\"log.rating\"\n      class=\"rating-button\"\n      :data-rating=\"Rating[log.rating]\"\n      @click=\"rateCard(log.rating)\"\n    >\n      <span class=\"rate-button-content\">\n        <span class=\"rating\">{{ Rating[log.rating] }}</span>\n        <small class=\"next-review-time\">{{ nextReview(next) }}</small>\n      </span>\n    </AppButton>\n  </div>\n</template>\n\n<style scoped>\n.rate-buttons {\n  column-gap: 1ex;\n  display: flex;\n}\n\n.rating-button {\n  background: var(--background-strong);\n  border-color: currentColor;\n\n  &[data-rating=\"Again\"] {\n    color: var(--pink);\n  }\n\n  &[data-rating=\"Hard\"] {\n    color: var(--orange);\n  }\n\n  &[data-rating=\"Good\"] {\n    color: var(--green);\n  }\n\n  &[data-rating=\"Easy\"] {\n    color: var(--blue);\n  }\n\n  & .rate-button-content {\n    align-items: center;\n    column-gap: 0.5ex;\n    display: flex;\n\n    @media screen and (max-width: 60ch) {\n      flex-direction: column;\n    }\n  }\n\n  & .next-review-time {\n    font-weight: normal;\n    font-size: 0.7em;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { asyncComputed } from \"@vueuse/core\";\nimport { RecordLogItem, State } from \"ts-fsrs\";\nimport { computed, ref } from \"vue\";\n\nimport { db } from \"../db/index.ts\";\nimport { useKanji, useKanjiVocab } from \"../helpers/kanji.ts\";\nimport { provideKanjiVG } from \"../helpers/kanjivg.ts\";\nimport { kanjiRoute } from \"../router.ts\";\nimport { CardProgress, Optional } from \"../types.ts\";\nimport AppButton from \"./AppButton.vue\";\nimport KanjiComponents from \"./KanjiComponents.vue\";\nimport KanjiReadings from \"./KanjiReadings.vue\";\nimport KanjiStrokes from \"./KanjiStrokes.vue\";\nimport KanjiTitle from \"./KanjiTitle.vue\";\nimport KanjiWordList from \"./KanjiWordList.vue\";\nimport RateButtons from \"./RateButtons.vue\";\n\nconst props = defineProps<{\n  card: Optional<CardProgress, \"fsrs\">;\n  isRating?: boolean;\n  singleton?: boolean;\n}>();\n\nconst emit = defineEmits<{\n  answer: [];\n  rate: [value: { progress: CardProgress; next: RecordLogItem }];\n}>();\n\nconst kanji = useKanji(() => props.card.cardId);\nconst kanjiVocab = useKanjiVocab(() => props.card.cardId);\nconst kanjiStrokesEl = ref<InstanceType<typeof KanjiStrokes> | null>(null);\n\nprovideKanjiVG(() => props.card.cardId.toString(16).padStart(5, \"0\"));\n\nconst progress = asyncComputed(async () => {\n  const { cardId, cardType, fsrs } = props.card;\n\n  if (fsrs) {\n    return fsrs;\n  }\n\n  const card = await (await db).get(\"progress\", [cardId, cardType]);\n\n  return card?.fsrs;\n}, props.card.fsrs);\n\nconst isNewCard = computed(() => progress.value?.state === State.New);\n\nfunction answer() {\n  emit(\"answer\");\n\n  if (props.card.cardType === \"kanji-write\") {\n    kanjiStrokesEl.value?.maybeShowAnswer();\n  }\n}\n\nfunction handleRate(next: RecordLogItem): void {\n  if (!progress.value) {\n    return;\n  }\n\n  kanjiStrokesEl.value?.clearPracticeStrokes();\n\n  emit(\"rate\", {\n    progress: { ...props.card, fsrs: progress.value },\n    next,\n  });\n}\n</script>\n\n<template>\n  <section v-if=\"kanji && progress\">\n    <KanjiTitle\n      class=\"title\"\n      :kanji=\"kanji\"\n      :hide-literal=\"!isRating && card.cardType === 'kanji-write' && !isNewCard\"\n      :hide-meaning=\"!isRating && card.cardType === 'kanji-read'\"\n    />\n\n    <KanjiReadings\n      v-if=\"isRating || card.cardType === 'kanji-write'\"\n      class=\"readings\"\n      :kanji=\"kanji\"\n    />\n\n    <KanjiStrokes\n      ref=\"kanjiStrokesEl\"\n      class=\"strokes\"\n      :kanji=\"kanji\"\n      :auto-hint=\"!isRating && card.cardType === 'kanji-write' && isNewCard\"\n      :practice-mode=\"!isRating && card.cardType === 'kanji-write'\"\n      @practice-done=\"$emit('answer')\"\n    />\n\n    <div class=\"advance-buttons\">\n      <RateButtons v-if=\"isRating\" :progress=\"progress\" @rate=\"handleRate\" />\n\n      <template v-else>\n        <AppButton filled @click=\"answer()\">\n          Show\n          <template v-if=\"card.cardType === 'kanji-read'\"> Reading </template>\n          <template v-else> Writing </template>\n        </AppButton>\n\n        <AppButton v-if=\"singleton\" :to=\"kanjiRoute(kanji.literal)\" replace>\n          Cancel\n        </AppButton>\n      </template>\n    </div>\n\n    <KanjiComponents\n      v-if=\"isRating || (card.cardType === 'kanji-write' && isNewCard)\"\n      class=\"components\"\n    />\n\n    <KanjiWordList\n      v-if=\"kanjiVocab\"\n      class=\"words\"\n      :kanji-vocab=\"kanjiVocab\"\n      :hide-kanji=\"!isRating && card.cardType === 'kanji-write' && !isNewCard\"\n      :hide-reading=\"!isRating && card.cardType === 'kanji-read'\"\n      :hide-meaning=\"!isRating && card.cardType === 'kanji-read'\"\n    />\n  </section>\n</template>\n\n<style scoped>\n.advance-buttons {\n  backdrop-filter: blur(2em);\n  display: flex;\n  column-gap: 1ex;\n  inline-size: max-content;\n  inset-block-start: 0;\n  padding-block: 1em 1ex;\n  padding-inline-end: 1em;\n  position: sticky;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useRemainingCount } from \"../store/reviews.ts\";\n\nconst remainingCount = useRemainingCount();\n</script>\n\n<template>\n  <div v-if=\"remainingCount\" class=\"review-remaining-count\">\n    <span class=\"review-count\">\n      {{ remainingCount.due }}\n    </span>\n    <span class=\"new-count\">(+ {{ remainingCount.new }})</span>\n    <span class=\"learning-count\"> {{ remainingCount.learning }}</span>\n  </div>\n</template>\n\n<style scoped>\n.review-remaining-count {\n  column-gap: 0.8ex;\n  display: inline-flex;\n  font-size: 0.8em;\n  font-weight: 600;\n}\n\n.review-count {\n  color: var(--blue);\n}\n\n.new-count {\n  color: var(--green);\n}\n\n.learning-count {\n  color: var(--orange);\n}\n</style>\n","import { StoreNames } from \"idb\";\nimport { type Card as FSRSCard, ReviewLog } from \"ts-fsrs\";\n\nimport { DB } from \"./db/schema.ts\";\n\nexport type Optional<T, Keys extends keyof T> = Omit<T, Keys> &\n  Partial<Pick<T, Keys>>;\n\nexport type KanjiInfo = {\n  codepoint: number;\n  literal: string;\n  meanings: string[];\n  kunYomi: string[];\n  onYomi: string[];\n  strokeCount: number;\n  radical: number;\n  freq?: number;\n  grade?: string;\n};\n\nexport type KanjiComponent = {\n  element: string;\n  original: string | null;\n  position: string[];\n  radical: string | null;\n  phon: string | null;\n};\n\nexport type KanjiComponentInfo = {\n  literal: string;\n  radical?: { original: string; number: number; en: string; jp: string };\n  meaning?: string;\n  reading?: string;\n  strokeCount: number;\n  variations?: string[];\n  variationOf?: string[];\n  kanji: Record<number, string[]>;\n};\n\nexport type WordWriting = {\n  text: string;\n  priority?: { freq?: number };\n  irregular?: boolean;\n  rare?: boolean;\n  outdated?: boolean;\n  searchOnly?: boolean;\n};\n\nexport type WordReading = {\n  text: string;\n  priority?: { freq?: number };\n  irregular?: boolean;\n  rare?: boolean;\n  outdated?: boolean;\n  searchOnly?: boolean;\n};\n\nexport type WordMeaning = {\n  pos?: string[];\n  info?: string;\n  glossary?: string[];\n  useWithWriting?: string[];\n  kanaPreferred?: boolean;\n};\n\nexport type Furigana = Array<{\n  ruby: string;\n  rt?: string;\n}>;\n\nexport type Word = {\n  id: number;\n  writings?: WordWriting[];\n  readings?: WordReading[];\n  meanings?: WordMeaning[];\n  furigana?: Array<{\n    writing: string;\n    reading: string;\n    furigana: Furigana;\n  }>;\n};\n\nexport type BookmarkedWord = {\n  wordId: number;\n  bookmarkedAt: Date;\n  reading?: string | null;\n};\n\nexport type SentenceWord = {\n  word: number;\n  furigana: Furigana;\n};\n\nexport type Sentence = {\n  sentence: string;\n  meaning: string;\n  words: SentenceWord[];\n};\n\nexport type KanjiVocab = {\n  codepoint: number;\n  literal: string;\n  words: number[];\n};\n\nexport type Radical = {\n  id: number;\n  literal: string;\n  strokes: number;\n  meaning: string;\n  reading: string;\n};\n\n// A description of a deck for deck browser.\nexport type DeckTemplate = {\n  name: string;\n  label: string;\n  priority: number;\n  content: string;\n};\n\nexport type Deck = {\n  name: string;\n  label: string;\n  category: string;\n  priority: number;\n  cards: number[];\n  active: boolean;\n  createdAt: Date;\n  updatedAt?: Date;\n};\n\nexport type CardType = \"kanji-read\" | \"kanji-write\";\nexport function isCardType(thing: string): thing is CardType {\n  return thing === \"kanji-read\" || thing === \"kanji-write\";\n}\n\nexport type Card = {\n  id: number;\n  value: string;\n  types: CardType[];\n  createdAt: Date;\n  updatedAt?: Date;\n};\n\nexport type CardProgress = {\n  cardId: number;\n  cardType: CardType;\n  fsrs: FSRSCard;\n};\n\nexport type CardReview = {\n  id: number;\n  cardId: number;\n  cardType: CardType;\n  log: ReviewLog;\n};\n\nexport type SyncPatchStore = {\n  name: StoreNames<DB>;\n  add?: string[];\n  put?: string[];\n  delete?: string[];\n};\n\ntype SyncPatchPreference = [name: string, value: string | null];\n\nexport type SyncPatch = {\n  hash: string;\n  parent: string | null;\n  syncedAt: Date;\n  dbVersion: number;\n  patchVersion: number;\n  stores: SyncPatchStore[];\n  preferences: SyncPatchPreference[];\n};\n\nexport type SyncStagingStore<\n  StoreName extends StoreNames<DB> = StoreNames<DB>,\n> = {\n  id?: number;\n  store: StoreName;\n  key: DB[StoreName][\"key\"];\n  op: \"add\" | \"put\" | \"delete\";\n};\n\nexport type SyncStagingPreference = {\n  id?: number;\n  name: string;\n  value: string | null;\n};\n","<script setup lang=\"ts\">\nimport { RecordLogItem } from \"ts-fsrs\";\nimport { computed, ref, watchEffect } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\n\nimport AppLoading from \"../components/AppLoading.vue\";\nimport KanjiReview from \"../components/KanjiReview.vue\";\nimport ReviewRemainCount from \"../components/ReviewRemainCount.vue\";\nimport { kanjiRoute, reviewSummaryRoute } from \"../router.ts\";\nimport useReviewsStore from \"../store/reviews.ts\";\nimport { CardProgress, isCardType, Optional } from \"../types.ts\";\n\nconst el = ref<HTMLElement | null>(null);\nconst route = useRoute();\nconst router = useRouter();\n\nconst reviewsStore = useReviewsStore();\n\nconst currentCard = computed<Optional<CardProgress, \"fsrs\"> | null>(() => {\n  const { kanji, \"card-type\": cardType } = route.query;\n\n  if (typeof kanji !== \"string\" || typeof cardType !== \"string\") {\n    return null;\n  }\n\n  const cardId = kanji.codePointAt(0);\n\n  if (!cardId || !isCardType(cardType)) {\n    return null;\n  }\n\n  const found = reviewsStore.queue.find(\n    (other) => other.cardId === cardId && other.cardType === cardType,\n  );\n\n  return found ?? { cardId, cardType };\n});\n\nconst isRating = computed(() => \"rating\" in route.query);\nconst loading = computed(() => !currentCard.value && reviewsStore.refreshing);\n\nreviewsStore.refreshQueues();\n\nwatchEffect(() => {\n  if (reviewsStore.queue.length === 0 && !reviewsStore.refreshing) {\n    router.replace(reviewSummaryRoute);\n  }\n});\n\nwatchEffect(() => {\n  if (currentCard.value) {\n    return;\n  }\n\n  const [nextCard] = reviewsStore.queue;\n\n  if (nextCard) {\n    router.replace({\n      query: {\n        kanji: String.fromCodePoint(nextCard.cardId),\n        \"card-type\": nextCard.cardType,\n        rating: undefined,\n      },\n    });\n  }\n});\n\ntype HandleRateParams = {\n  progress: CardProgress;\n  next: RecordLogItem;\n};\n\nfunction handleRate({ progress, next }: HandleRateParams) {\n  reviewsStore.rateCard(progress, next);\n\n  if (\"singleton\" in route.query && typeof route.query.kanji === \"string\") {\n    router.replace(kanjiRoute(route.query.kanji));\n    return;\n  }\n\n  const [nextCard] = reviewsStore.queue;\n  if (nextCard) {\n    router.replace({\n      query: {\n        kanji: String.fromCodePoint(nextCard.cardId),\n        \"card-type\": nextCard.cardType,\n        rating: undefined,\n      },\n    });\n    el.value?.scrollIntoView({ behavior: \"instant\", block: \"start\" });\n  } else {\n    router.replace(reviewSummaryRoute);\n  }\n}\n</script>\n\n<template>\n  <article ref=\"el\">\n    <header class=\"header\">\n      <strong class=\"title\">\n        <template v-if=\"currentCard\">\n          <template v-if=\"currentCard.cardType === 'kanji-read'\">\n            Reading\n          </template>\n          <template v-else>Writing</template>\n          Review\n        </template>\n      </strong>\n\n      <ReviewRemainCount class=\"counts\" />\n    </header>\n\n    <section v-if=\"loading\" class=\"loading\">\n      <p>Loading next cardâ€¦</p>\n      <AppLoading class=\"loading-icon\" />\n    </section>\n\n    <KanjiReview\n      v-else-if=\"currentCard\"\n      :card=\"currentCard\"\n      :is-rating=\"isRating\"\n      :singleton=\"'singleton' in $route.query\"\n      @answer=\"$router.replace({ query: { ...$route.query, rating: '' } })\"\n      @rate=\"handleRate($event)\"\n    />\n  </article>\n</template>\n\n<style scoped>\n.header {\n  display: flex;\n  margin-block-end: 1em;\n\n  & .title {\n    font-size: 1.5em;\n  }\n}\n\n.loading {\n  text-align: center;\n\n  & .loading-icon {\n    color: var(--accent-color);\n    font-size: 50cqmin;\n    opacity: 0.5;\n  }\n}\n\n.counts {\n  margin-inline-start: auto;\n}\n</style>\n"],"names":["props","__props","emit","__emit","fsrs","useFsrs","ratings","computed","nextReview","next","currentReviewTime","nextReviewTime","formatRelativeTime","rateCard","rating","Rating","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","log","_createBlock","AppButton","_unref","$event","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","_hoisted_4","kanji","useKanji","kanjiVocab","useKanjiVocab","kanjiStrokesEl","ref","provideKanjiVG","progress","asyncComputed","cardId","cardType","db","isNewCard","State","answer","handleRate","_createVNode","KanjiTitle","isRating","card","KanjiReadings","KanjiStrokes","$emit","RateButtons","singleton","kanjiRoute","_cache","KanjiComponents","KanjiWordList","remainingCount","useRemainingCount","isCardType","thing","el","route","useRoute","router","useRouter","reviewsStore","useReviewsStore","currentCard","other","loading","watchEffect","reviewSummaryRoute","nextCard","ReviewRemainCount","AppLoading","KanjiReview","$route","$router"],"mappings":"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"}