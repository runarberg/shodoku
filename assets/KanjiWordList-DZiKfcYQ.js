import{k as V,l as L,c as S,y as be,z as ae,x as se,v as ve,A as $e,B as ne,d as R,C as Se,a as g,o as m,_ as G,u as x,e as A,h as C,b as w,t as P,s as ie,F as B,g as O,j as T,f as Y,w as z,D as ee,E as oe,p as Ce,G as Be}from"./index-B5Dql4fu.js";import{A as H}from"./index-Cva3TYWK.js";import{A as W,u as Ke,d as he}from"./db-Cg6DtNz6.js";import{s as ye}from"./time-BmRGZSiE.js";import{a as Pe,c as Ie}from"./index-CCmsRqIl.js";import{d as Me}from"./decks-GrwULuka.js";import{a as Ae}from"./fsrs-CHxvAwVH.js";import{f as de}from"./formats-CxjEYhKc.js";import{W as Ve,v as Ee}from"./WordListItem-Dk1yjjZt.js";const pe="http://kanjivg.tagaini.net",J=Symbol("kanjivg"),Ne=new DOMParser;function De(e){var a;const n=[];let t=e.closest("[data-position]");for(;t instanceof SVGElement;)n.push(t.dataset.position),t=((a=t.parentElement)==null?void 0:a.closest("[data-position]"))??null;return n}function nn(e){const n=V(null),t=V(null),a=V(!1);L(()=>se(e),async o=>{if(o){a.value=!0;try{const c=await(await fetch(`/kanjivg/kanji/${o}.svg`)).text(),u=Ne.parseFromString(c,"image/svg+xml");if(u.documentElement instanceof SVGSVGElement){const{x:r,y:p,width:v,height:y}=u.documentElement.viewBox.baseVal;t.value=`${r},${p},${v},${y}`}const l=u.getElementById(`kvg:${o}`);if(l){for(const r of[...l==null?void 0:l.querySelectorAll("*"),l])if(r instanceof SVGElement){for(const p of[...r.attributes])p.namespaceURI===pe&&(r.dataset[p.localName]=p.value,r.removeAttributeNS(pe,p.localName));r.removeAttribute("xmlns:kvg")}}n.value=l}finally{a.value=!1}}},{immediate:!0});const s=S(()=>{const o=n.value;if(!o)return new Map;const i=new Map,c={};function u(r){if(r.dataset.part&&Number.parseInt(r.dataset.part)>1)return;const p=r.dataset.element,v={element:p,original:r.dataset.original??null,position:De(r),radical:r.dataset.radical??null};let y=i.get(p);y?y.push(v):(y=[v],i.set(p,y)),v.radical&&(c[v.radical]=p)}o.dataset.radical&&u(o);for(const r of o.querySelectorAll("g[data-element]"))u(r);const l=new Map;for(const r of["general","tradit","nelson"]){const p=c[r],v=i.get(p);v&&(l.set(p,v),i.delete(p))}for(const[r,p]of i)l.set(r,p);return l});be(J,{strokesEl:n,viewBox:t,components:s,syncing:a})}function ke(){const e=ae(J,null);return S(()=>{var t;return((t=e==null?void 0:e.strokesEl.value)==null?void 0:t.cloneNode(!0))??null})}function ge(){const e=ae(J,null);return S(()=>(e==null?void 0:e.viewBox.value)??"0,0,109,109")}function Le(){const e=ae(J,null);return S(()=>(e==null?void 0:e.components.value)??new Map)}function Re(){const e=ae(J,null);return S(()=>(e==null?void 0:e.syncing.value)??!1)}function*Ge(e){for(const n of e.split(`
`)){const[t,a,s,o,i]=n.split(",");if(!a)continue;const c={id:Number.parseInt(t),literal:a.at(0)??"",strokes:Number.parseInt(s),meaning:o,reading:i};for(const u of a)yield[u,c]}}const qe=$e("radicals",()=>{const e=V(!1),n=V(null),t=ne(new Map);async function a(){if(!e.value){e.value=!0,n.value=null;try{const i=await(await fetch("/data/radicals.csv")).text();for(const[c,u]of Ge(i))t.set(c,u)}catch(o){n.value=o}finally{e.value=!1}}}async function s(o){const i=o.codePointAt(0);if(!i)return;const c=i==null?void 0:i.toString(16).padStart(5,"0"),l=await(await fetch(`/data/kanji-v1/${c}.json`)).json(),r=l.kunYomi.find(p=>!/[.-]/.test(p))??l.kunYomi.at(0)??"";t.set(o,{id:i,literal:o,strokes:l.strokeCount,meaning:l.meanings.at(0)??"",reading:r})}return a(),{radicals:t,sync:a,syncing:e,tryKanji:s}});function Oe(e){const n=qe();return ve(()=>{const t=se(e);t&&!n.syncing&&!n.radicals.has(t)&&n.tryKanji(t)}),S(()=>{const t=se(e);return t?n.radicals.get(t)??null:null})}const Te=R({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(e){const n=e,t=V(null);function a(){var s;(s=t.value)==null||s.replaceChildren(n.strokes??"")}return L(()=>n.strokes,a),Se(()=>{a()}),(s,o)=>(m(),g("g",{ref_key:"container",ref:t,class:"kanji-strokes"},null,512))}}),_e=G(Te,[["__scopeId","data-v-53c78976"]]),Ye={class:"kanji-component-item"},ze=["viewBox"],Xe={class:"component-info"},He={class:"literal"},We={class:"meaning"},Fe={key:0,lang:"ja"},Ue=R({__name:"KanjiComponentItem",props:{literal:{},parts:{}},setup(e){const n=e,t=ke(),a=ge(),s=S(()=>{for(const c of n.parts)if(c.radical)return c.radical;return null}),o=Oe(()=>n.literal);function i(c){return`oklch(from var(--accent-color) l c ${c+3})`}return ve(()=>{const c=t.value;if(!c)return;c.dataset.element===n.literal&&(c.dataset.radical==="general"||c.dataset.radical==="tradit"?c.style.color="var(--green)":c.dataset.radical==="nelson"?c.style.color="var(--orange)":c.style.color=i(180));let u=-1;for(const l of c.querySelectorAll(`g[data-element="${n.literal}"]`)){if(l.dataset.radical==="general"||l.dataset.radical==="tradit"){l.style.color="var(--green)";continue}if(l.dataset.radical==="nelson"){l.style.color="var(--orange)";continue}(!l.dataset.part||l.dataset.part==="1")&&(u+=1),l.style.color=i(240+63*u)}}),(c,u)=>{var l,r;return m(),g("div",Ye,[x(t)?(m(),g("svg",{key:0,viewBox:x(a),class:"kanji-component-strokes"},[A(_e,{class:"strokes-group",strokes:x(t)},null,8,["strokes"])],8,ze)):C("",!0),w("div",Xe,[w("span",He,P(c.literal),1),w("p",We,[w("strong",null,P((l=x(o))==null?void 0:l.meaning),1),(r=x(o))!=null&&r.reading?(m(),g("span",Fe," ("+P(x(o).reading)+")",1)):C("",!0)]),s.value?(m(),g("span",{key:0,class:ie(["is-radical",{"is-nelson":s.value==="nelson"}])},[s.value==="nelson"?(m(),g(B,{key:0},[O("Nelson radical")],64)):(m(),g(B,{key:1},[O("Radical")],64))],2)):C("",!0)])])}}}),Je=G(Ue,[["__scopeId","data-v-ce0ca725"]]),Qe={class:"component-list"},Ze=R({__name:"KanjiComponents",setup(e){const n=Le();return(t,a)=>(m(),g("section",null,[w("h2",null,[a[0]||(a[0]=O(" Components ")),x(n).size>0?(m(),g(B,{key:0},[O(" ("+P(x(n).size)+")",1)],64)):C("",!0)]),w("ul",Qe,[(m(!0),g(B,null,T(x(n),([s,o])=>(m(),g("li",{key:s},[A(Je,{literal:s,parts:o},null,8,["literal","parts"])]))),128))])]))}}),an=G(Ze,[["__scopeId","data-v-6768574a"]]),et={class:"kanji-readings"},tt={class:"dd-items"},nt={class:"dd-items"},at=R({__name:"KanjiReadings",props:{kanji:{}},setup(e){return(n,t)=>(m(),g("section",null,[t[2]||(t[2]=w("h2",null,"Readings",-1)),w("dl",et,[t[0]||(t[0]=w("dt",null,"Kun",-1)),w("div",tt,[(m(!0),g(B,null,T(n.kanji.kunYomi,a=>(m(),g("dd",null,P(a),1))),256))]),t[1]||(t[1]=w("dt",null,"On",-1)),w("div",nt,[(m(!0),g(B,null,T(n.kanji.onYomi,a=>(m(),g("dd",null,P(a),1))),256))])])]))}}),on=G(at,[["__scopeId","data-v-f6c59d96"]]),ot={class:"kanji-strokes-background"},st=["x","y","width","height"],it=["x1","y1","x2","y2"],rt=["x1","y1","x2","y2"],lt=["x1","y1","x2","y2"],ct=["x1","y1","x2","y2"],ut=["x1","y1","x2","y2"],dt=["x1","y1","x2","y2"],pt=R({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(e){const n=e,t=S(()=>{const[o,i,c,u]=n.viewBox.split(",");return{x:Number.parseInt(o),y:Number.parseInt(i),width:Number.parseInt(c),height:Number.parseInt(u)}}),a=S(()=>{const{x:o,width:i}=t.value;return o+i/2}),s=S(()=>{const{y:o,height:i}=t.value;return o+i/2});return(o,i)=>(m(),g("g",ot,[w("rect",{class:"background",x:t.value.x,y:t.value.y,width:t.value.width,height:t.value.width,rx:"5"},null,8,st),w("line",{class:"midline",x1:t.value.x+1,y1:s.value,x2:t.value.x+t.value.width-1,y2:s.value},null,8,it),w("line",{class:"midline",x1:a.value,y1:t.value.y+1,x2:a.value,y2:t.value.y+t.value.height-1},null,8,rt),w("line",{class:"quartline",x1:a.value/2,y1:t.value.y+1,x2:a.value/2,y2:t.value.y+t.value.height-1},null,8,lt),w("line",{class:"quartline",x1:3*a.value/2,y1:t.value.y+1,x2:3*a.value/2,y2:t.value.y+t.value.height-1},null,8,ct),w("line",{class:"quartline",x1:t.value.x+1,y1:s.value/2,x2:t.value.x+t.value.width-1,y2:s.value/2},null,8,ut),w("line",{class:"quartline",x1:t.value.x+1,y1:3*s.value/2,x2:t.value.x+t.value.width-1,y2:3*s.value/2},null,8,dt)]))}}),ft=G(pt,[["__scopeId","data-v-1b492e2c"]]),mt=1e-12,fe=112e-18,vt=e=>e>=-fe&&e<=fe,xe=(e,n)=>Math.sqrt(e*e+n*n),F=(e,n)=>({x:e,y:n}),ht=e=>xe(e.x,e.y),yt=e=>F(-e.x,-e.y),U=(e,n)=>F(e.x+n.x,e.y+n.y),E=(e,n)=>F(e.x-n.x,e.y-n.y),X=(e,n)=>F(e.x*n,e.y*n),D=(e,n)=>e.x*n.x+e.y*n.y,le=(e,n)=>xe(e.x-n.x,e.y-n.y),q=(e,n=1)=>X(e,n/(ht(e)||1/0)),we=(e,n)=>({p:e,i:n}),kt=(e,n,t)=>{n&&(e.unshift(e[e.length-1]),e.push(e[1]));const a=e.length;if(a===0)return[];const s=[we(e[0])];return re(e,s,t,0,a-1,E(e[1],e[0]),E(e[a-2],e[a-1])),n&&(s.shift(),s.pop()),s},re=(e,n,t,a,s,o,i)=>{if(s-a===1){const v=e[a],y=e[s],f=le(v,y)/3;me(n,[v,U(v,q(o,f)),U(y,q(i,f)),y]);return}const c=wt(e,a,s);let u=Math.max(t,t*t),l,r=!0;for(let v=0;v<=4;v++){const y=gt(e,a,s,c,o,i),f=jt(e,a,s,y,c);if(f.error<t&&r){me(n,y);return}if(l=f.index,f.error>=u)break;r=_t(e,a,s,c,y),u=f.error}const p=E(e[l-1],e[l+1]);re(e,n,t,a,l,o,p),re(e,n,t,l,s,yt(p),i)},me=(e,n)=>{const t=e[e.length-1];t.o=E(n[1],n[0]),e.push(we(n[3],E(n[2],n[3])))},gt=(e,n,t,a,s,o)=>{const i=mt,c=Math.abs,u=e[n],l=e[t],r=[[0,0],[0,0]],p=[0,0];for(let _=0,$=t-n+1;_<$;_++){const M=a[_],N=1-M,k=3*M*N,h=N*N*N,b=k*N,ce=k*M,je=M*M*M,Q=q(s,b),Z=q(o,ce),ue=E(E(e[n+_],X(u,h+b)),X(l,ce+je));r[0][0]+=D(Q,Q),r[0][1]+=D(Q,Z),r[1][0]=r[0][1],r[1][1]+=D(Z,Z),p[0]+=D(Q,ue),p[1]+=D(Z,ue)}const v=r[0][0]*r[1][1]-r[1][0]*r[0][1];let y,f;if(c(v)>i){const _=r[0][0]*p[1]-r[1][0]*p[0];y=(p[0]*r[1][1]-p[1]*r[0][1])/v,f=_/v}else{const _=r[0][0]+r[0][1],$=r[1][0]+r[1][1];y=f=c(_)>i?p[0]/_:c($)>i?p[1]/$:0}const I=le(l,u),K=i*I;let d,j;if(y<K||f<K)y=f=I/3;else{const _=E(l,u);d=q(s,y),j=q(o,f),D(d,_)-D(j,_)>I*I&&(y=f=I/3,d=j=null)}return[u,U(u,d||q(s,y)),U(l,j||q(o,f)),l]},_t=(e,n,t,a,s)=>{for(let o=n;o<=t;o++)a[o-n]=xt(s,e[o],a[o-n]);for(let o=1,i=a.length;o<i;o++)if(a[o]<=a[o-1])return!1;return!0},xt=(e,n,t)=>{const a=[],s=[];for(let r=0;r<=2;r++)a[r]=X(E(e[r+1],e[r]),3);for(let r=0;r<=1;r++)s[r]=X(E(a[r+1],a[r]),2);const o=te(3,e,t),i=te(2,a,t),c=te(1,s,t),u=E(o,n),l=D(i,i)+D(u,c);return vt(l)?t:t-D(u,i)/l},te=(e,n,t)=>{const a=n.slice();for(let s=1;s<=e;s++)for(let o=0;o<=e-s;o++)a[o]=U(X(a[o],1-t),X(a[o+1],t));return a[0]},wt=(e,n,t)=>{const a=[0];for(let s=n+1;s<=t;s++)a[s-n]=a[s-n-1]+le(e[s],e[s-1]);for(let s=1,o=t-n;s<=o;s++)a[s]/=a[o];return a},jt=(e,n,t,a,s)=>{let o=Math.floor((t-n+1)/2),i=0;for(let c=n+1;c<t;c++){const u=te(3,a,s[c-n]),l=E(u,e[c]),r=l.x*l.x+l.y*l.y;r>=i&&(i=r,o=c)}return{error:i,index:o}},bt=(e,n,t)=>{const a=e.length,s=10**t,o=t<16?f=>Math.round(f*s)/s:f=>f,i=(f,I)=>o(f)+","+o(I);let c=!0,u,l,r,p;const v=[],y=(f,I)=>{var j,_,$,M;const K=f.p.x,d=f.p.y;if(c)v.push("M"+i(K,d)),c=!1;else{const N=K+(((j=f.i)==null?void 0:j.x)??0),k=d+(((_=f.i)==null?void 0:_.y)??0);if(N===K&&k===d&&r===u&&p===l){if(!I){const h=K-u,b=d-l;v.push(h===0?"v"+o(b):b===0?"h"+o(h):"l"+i(h,b))}}else v.push("c"+i(r-u,p-l)+" "+i(N-u,k-l)+" "+i(K-u,d-l))}u=K,l=d,r=K+((($=f.o)==null?void 0:$.x)??0),p=d+(((M=f.o)==null?void 0:M.y)??0)};if(!a)return"";for(let f=0;f<a;f++)y(e[f]);return n&&a>0&&(y(e[0],!0),v.push("z")),v.join("")},$t=(e,n={})=>e.length===0?"":bt(kt(e.map(typeof e[0].x=="number"?t=>F(t.x,t.y):t=>F(t[0],t[1])),n.closed,n.tolerance??2.5),n.closed,n.precision??5),St=["x","y","width","height"],Ct={class:"practice-strokes"},Bt=["d"],Kt=["points"],Pt=R({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(e,{emit:n}){const t=e,a=n,s=V(null),o=S(()=>{var d;return(d=s.value)==null?void 0:d.closest("svg")}),i=S(()=>{var d;return(d=o.value)==null?void 0:d.viewBox.baseVal}),c=ne([]);function u(d){var $;if(!o.value)return{x:d.x,y:d.y};const j=o.value.createSVGPoint();j.x=d.x,j.y=d.y;const _=j.matrixTransform(($=o.value.getScreenCTM())==null?void 0:$.inverse());return{x:_.x,y:_.y}}function l(d){var j;d.isPrimary&&(d.preventDefault(),(j=s.value)==null||j.setPointerCapture(d.pointerId),c.push(u(d)))}function r(d){c.length===0||!d.isPrimary||c.push(u(d))}function p(d){var j,_,$;d.isPrimary&&(c.length>1&&a("stroke",$t(c)),(j=s.value)==null||j.releasePointerCapture(d.pointerId),c.splice(0,c.length),($=(_=o.value)==null?void 0:_.parentElement)==null||$.click())}function v(d){const j=d.getTotalLength();return[{strokeDasharray:j,strokeDashoffset:j},{strokeDasharray:j,strokeDashoffset:0}]}const y={duration:500,easing:"ease-in-out"},f=[];function I(){var d;if(s.value){for(const j of(d=s.value)==null?void 0:d.querySelectorAll("path.stroke")){const _=j.animate(v(j),y);_.pause(),f.push(_)}K()}}async function K(){let d=f.at(0);for(;d;)d.play(),await d.finished,f.shift(),d=f.at(0),d&&await ye(100)}return L(()=>t.animate,d=>{d&&I()}),L(()=>t.animatePause,d=>{var j,_;d?(j=f.at(0))==null||j.pause():(_=f.at(0))==null||_.play()}),(d,j)=>(m(),g("g",{ref_key:"el",ref:s,class:"kanji-strokes-practice-canvas canvas",onPointerdown:l,onPointermove:r,onPointerup:p},[i.value?(m(),g("rect",{key:0,class:"background",x:i.value.x,y:i.value.y,width:i.value.width,height:i.value.height},null,8,St)):C("",!0),w("g",Ct,[(m(!0),g(B,null,T(d.practiceStrokes,(_,$)=>(m(),g("path",{class:"stroke practice-stroke",key:$,d:_},null,8,Bt))),128))]),w("polyline",{class:"stroke current-stroke",points:x(c).map(({x:_,y:$})=>`${_},${$}`).join(" ")},null,8,Kt)],544))}}),It=G(Pt,[["__scopeId","data-v-afa29600"]]),Mt={class:"strokes-figure"},At=["viewBox"],Vt={class:"controls"},Et=R({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean,default:!1},practiceMode:{type:Boolean,default:!1},practiceReview:{type:Boolean,default:!1}},emits:["practiceDone"],setup(e,{emit:n}){const t=e,a=n,s=V(null),o=ke(),i=ge(),c=Re(),u=S(()=>{var k;return((k=o.value)==null?void 0:k.querySelectorAll("path"))??[]}),l=ne([]),r=S(()=>l.length>0),p=V(!1),v=V(!1),y=ne([]),f=V(null);function I(k){const h=k.getTotalLength();return[{strokeDasharray:h,strokeDashoffset:h},{strokeDasharray:h,strokeDashoffset:0}]}const K={duration:500,easing:"ease-in-out"};function d(){for(const k of u.value){const h=k.animate(I(k),K);h.pause(),l.push(h)}j()}async function j(){let k=l.at(0);for(;k;)k.play(),await k.finished,l.shift(),k=l.at(0),k&&await ye(100)}function _(){var k;(k=l.at(0))==null||k.pause(),p.value=!0}function $(){var k;(k=l.at(0))==null||k.play(),p.value=!1}function M(k=y.length){const h=u.value[k];if(!h)return;h.style.display="block";const b=h.animate(I(h),K);b.play(),b.finished.then(()=>{h.style.removeProperty("display")})}function N(k){y.push(k),t.practiceMode&&y.length===u.value.length&&(f.value=t.kanji.codepoint,a("practiceDone")),t.practiceMode&&t.autoHint&&y.length<u.value.length&&M()}return L(v,k=>{if(k){for(const h of l)h.cancel();l.splice(0,l.length),p.value=!1}else y.splice(0,y.length)}),L(()=>t.practiceMode,k=>{for(const h of u.value)for(const b of h.getAnimations())b.cancel();k!==v.value&&!(t.practiceReview&&f.value===t.kanji.codepoint)&&(v.value=k)},{immediate:!0}),L(()=>t.autoHint,k=>{k&&requestAnimationFrame(async()=>{await Pe(c).toBe(!1),M(0)})},{immediate:!0}),L(()=>t.kanji.codepoint,(k,h)=>{k!==h&&y.splice(0,y.length)}),(k,h)=>(m(),g("section",null,[w("h2",null,[h[8]||(h[8]=O(" Strokes ")),!k.practiceMode&&u.value.length>0?(m(),g(B,{key:0},[O(" ("+P(u.value.length)+") ",1)],64)):C("",!0)]),w("figure",Mt,[x(o)?(m(),g("svg",{key:0,ref_key:"svgEl",ref:s,class:ie(["svg",{practicing:v.value}]),viewBox:x(i),onTouchstart:h[1]||(h[1]=b=>{v.value&&b.preventDefault()})},[A(ft,{viewBox:x(i)},null,8,["viewBox"]),A(_e,{strokes:x(o),class:ie(["strokes",{comparing:r.value||u.value.length<=x(y).length,practicing:v.value}])},null,8,["strokes","class"]),v.value?(m(),Y(It,{key:0,"practice-strokes":x(y),animate:r.value,"animate-pause":p.value,onStroke:h[0]||(h[0]=b=>N(b))},null,8,["practice-strokes","animate","animate-pause"])):C("",!0)],42,At)):C("",!0),w("figcaption",Vt,[r.value?(m(),g(B,{key:0},[p.value?(m(),Y(H,{key:0,"aria-label":"Play",onClick:h[2]||(h[2]=b=>$())},{default:z(()=>[A(W,{icon:"play"})]),_:1})):(m(),Y(H,{key:1,"aria-label":"Pause",onClick:h[3]||(h[3]=b=>_())},{default:z(()=>[A(W,{icon:"pause"})]),_:1}))],64)):(m(),g(B,{key:1},[v.value&&x(y).length<u.value.length?(m(),Y(H,{key:0,"aria-label":"Show Hint",onClick:h[4]||(h[4]=b=>M())},{default:z(()=>[A(W,{icon:"help-circle"})]),_:1})):(m(),Y(H,{key:1,"aria-label":"Animate Stroke Order",onClick:h[5]||(h[5]=b=>d())},{default:z(()=>[A(W,{icon:"play"})]),_:1}))],64)),k.practiceMode?C("",!0):(m(),Y(H,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${v.value}`,filled:v.value,onClick:h[6]||(h[6]=b=>v.value=!v.value)},{default:z(()=>[A(W,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),v.value?(m(),g(B,{key:3},[h[9]||(h[9]=w("hr",{class:"rule"},null,-1)),A(H,{"aria-label":"Undo",onClick:h[7]||(h[7]=b=>x(y).pop())},{default:z(()=>[A(W,{icon:"rotate-left"})]),_:1})],64)):C("",!0)])])]))}}),sn=G(Et,[["__scopeId","data-v-e74bc57b"]]),Nt={class:"kanji-title"},Dt={class:"main-meaning meaning"},Lt={class:"labels"},Rt={key:0,class:"label freq"},Gt=["data-r"],qt=["data-r"],Ot={key:0,class:"additional-meanings"},Tt={class:"meaning"},Yt=R({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const n=e,t=S(()=>{const{freq:i}=n.kanji;if(!i)return null;if(i<=50)return 50;if(i<=100)return 100;if(i<=200)return 200;if(i<=500)return 500;if(i<=1e3)return 1e3}),{result:a}=Ke(S(()=>{const i=n.kanji.codepoint;return async()=>(await he).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(i))})),s=Ae(()=>n.kanji.codepoint);function o(i){return i>.9?"good":i>.7?"fair":"poor"}return(i,c)=>{var l,r,p,v,y;const u=Ce("RouterLink");return m(),g("header",Nt,[ee(w("h2",{class:"literal",lang:"ja"},P(i.kanji.literal),513),[[oe,!i.hideLiteral]]),ee(w("p",Dt,[w("strong",null,P((l=i.kanji.meanings)==null?void 0:l.at(0)),1)],512),[[oe,!i.hideMeaning]]),w("aside",Lt,[t.value&&!((r=x(a))!=null&&r.some(({name:f})=>f===`news-top-${t.value}`))?(m(),g("span",Rt," Top "+P(t.value),1)):C("",!0),x(a)?(m(!0),g(B,{key:1},T(x(a),f=>(m(),Y(u,{to:{name:x(Be),query:{deck:f.name}},key:f.name,class:"label deck"},{default:z(()=>[O(P(x(Me)(f)),1)]),_:2},1032,["to"]))),128)):C("",!0),(p=x(s))!=null&&p.write?(m(),g("span",{key:2,class:"label retrievability",title:"Writing Retrievability","data-r":o(x(s).write)}," 書 "+P(x(de)(x(s).write)),9,Gt)):C("",!0),(v=x(s))!=null&&v.read?(m(),g("span",{key:3,class:"label retrievability",title:"Reading Retrievability","data-r":o(x(s).read)}," 読 "+P(x(de)(x(s).read)),9,qt)):C("",!0)]),((y=i.kanji.meanings)==null?void 0:y.length)>1?ee((m(),g("ul",Ot,[(m(!0),g(B,null,T(i.kanji.meanings.slice(1),f=>(m(),g("li",Tt,P(f),1))),256))],512)),[[oe,!i.hideMeaning]]):C("",!0)])}}}),rn=G(Yt,[["__scopeId","data-v-0758661b"]]),zt={class:"kanji-word-list"},Xt=R({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const n=e,t=Ie(async()=>{const{words:c}=n.kanjiVocab,u=[],l=[],{store:r}=(await he).transaction("bookmarked-words");for(const p of c)await r.count(p)?u.push(p):l.push(p);return{bookmarked:u,rest:l}},null),a=V(20),s=S(()=>{const c=a.value;if(t.value){const{bookmarked:u,rest:l}=t.value;return[u,l.slice(0,c)]}return[n.kanjiVocab.words.slice(0,c)]});function o(){a.value+=20}function i([{isIntersecting:c}]){c&&o()}return L(()=>n.kanjiVocab.codepoint,(c,u)=>{c!==u&&(a.value=20)}),(c,u)=>(m(),g("section",null,[w("h2",null,"Words ("+P(c.kanjiVocab.words.length)+")",1),w("ul",zt,[(m(!0),g(B,null,T(s.value,l=>(m(),g(B,null,[(m(!0),g(B,null,T(l,r=>(m(),g("li",{key:r},[A(Ve,{word:r,kanji:c.kanjiVocab.literal,"hide-kanji":c.hideKanji,"hide-reading":c.hideReading,"hide-meaning":c.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),a.value<c.kanjiVocab.words.length?ee((m(),g("button",{key:0,class:"next-page-button",onClick:u[0]||(u[0]=l=>o())},u[1]||(u[1]=[O(" Load More ")]))),[[x(Ee),i]]):C("",!0)]))}}),ln=G(Xt,[["__scopeId","data-v-db833710"]]);export{rn as K,on as a,sn as b,ln as c,an as d,nn as p};
