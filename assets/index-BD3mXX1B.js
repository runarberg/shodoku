import{t as h,n as N,a as g,i as X,b as W,c as Y,d as L,e as x,f as A}from"./index-ed5PeQn_.js";import{c as w,B as c,W as y,y as k,D as H,X as R,u as T}from"./index-CLUsYwP5.js";const b=X?window:void 0;function m(e){var t;const o=c(e);return(t=o?.$el)!=null?t:o}function j(...e){const t=[],o=()=>{t.forEach(n=>n()),t.length=0},i=(n,r,l,u)=>(n.addEventListener(r,l,u),()=>n.removeEventListener(r,l,u)),s=w(()=>{const n=h(c(e[0])).filter(r=>r!=null);return n.every(r=>typeof r!="string")?n:void 0}),f=x(()=>{var n,r;return[(r=(n=s.value)==null?void 0:n.map(l=>m(l)))!=null?r:[b].filter(l=>l!=null),h(c(s.value?e[1]:e[0])),h(T(s.value?e[2]:e[1])),c(s.value?e[3]:e[2])]},([n,r,l,u])=>{if(o(),!n?.length||!r?.length||!l?.length)return;const a=A(u)?{...u}:u;t.push(...n.flatMap(O=>r.flatMap(p=>l.map(d=>i(O,p,d,a)))))},{flush:"post"}),v=()=>{f(),o()};return W(o),v}function P(){const e=y(!1),t=R();return t&&H(()=>{e.value=!0},t),e}function V(e){const t=P();return w(()=>(t.value,!!e()))}function S(e,t,o={}){const{root:i,rootMargin:s="0px",threshold:f=0,window:v=b,immediate:n=!0}=o,r=V(()=>v&&"IntersectionObserver"in v),l=w(()=>{const d=c(e);return h(d).map(m).filter(N)});let u=g;const a=y(n),O=r.value?k(()=>[l.value,m(i),a.value],([d,B])=>{if(u(),!a.value||!d.length)return;const D=new IntersectionObserver(t,{root:m(B),rootMargin:s,threshold:f});d.forEach(I=>I&&D.observe(I)),u=()=>{D.disconnect(),u=g}},{immediate:n,flush:"post"}):g,p=()=>{u(),O(),a.value=!1};return W(p),{isSupported:r,isActive:a,pause(){u(),a.value=!1},resume(){a.value=!0},stop:p}}function M(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const J={mounted(e,t){typeof t.value=="function"?S(e,t.value):S(e,...t.value)}};function C(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const o=e.parentNode;return!o||o.tagName==="BODY"?!1:C(o)}}function $(e){const t=e||window.event,o=t.target;return C(o)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const E=new WeakMap;function q(e,t=!1){const o=y(t);let i=null,s="";k(Y(e),n=>{const r=M(c(n));if(r){const l=r;if(E.get(l)||E.set(l,l.style.overflow),l.style.overflow!=="hidden"&&(s=l.style.overflow),l.style.overflow==="hidden")return o.value=!0;if(o.value)return l.style.overflow="hidden"}},{immediate:!0});const f=()=>{const n=M(c(e));!n||o.value||(L&&(i=j(n,"touchmove",r=>{$(r)},{passive:!1})),n.style.overflow="hidden",o.value=!0)},v=()=>{const n=M(c(e));!n||!o.value||(L&&i?.(),n.style.overflow=s,E.delete(n),o.value=!1)};return W(v),w({get(){return o.value},set(n){n?f():v()}})}function z(){let e=!1;const t=y(!1);return(o,i)=>{if(t.value=i.value,e)return;e=!0;const s=q(o,i.value);k(t,f=>s.value=f)}}z();export{J as v};
