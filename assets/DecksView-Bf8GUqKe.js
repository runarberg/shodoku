import{d as j,c as u,m as F,x as P,i as V,z as N,w as $,a as n,g as k,h as p,u as r,F as y,t as w,o as t,_ as L,l as x,b as _,q as Q,s as W,Q as z,K as T,e as m,f as B,A as E}from"./index-sZE7bAWT.js";import{b as G,f as S,a as H}from"./formats-B8hr5_5_.js";import{d as J}from"./decks-BkI394ym.js";import{S as q,k as O,e as U,W as X}from"./reviews-BjQG9Nhh.js";import{u as Z,d as ee}from"./db-CaAx7W_9.js";import{u as te}from"./fsrs-BAHU2VgB.js";import{i as A,r as ae}from"./kana-RsG-lPzR.js";import"./decks-Dqx20Gkd.js";const ne=j({__name:"DeckKanjiCardItem",props:{codepoint:{},type:{}},setup(f){const a=f,o=u(()=>String.fromCodePoint(a.codepoint)),{result:e}=Z(async()=>{const{codepoint:s}=a,i=(await ee).transaction("progress").store,d=await i.get([s,`${a.type}-read`]),D=await i.get([s,`${a.type}-write`]);return{read:d,write:D}}),l=u(()=>a.type==="kanji"?F(o.value):A(o.value)?P(ae(o.value)):P(o.value)),g=te();function h(s){const i=new Date,d=O.value/100,D=new Date(Date.now()+U.value*X);return g.value.get_retrievability(s,i,!1)>d&&s.due>D}function v(s){return s?s.state===q.New?"new":s.state===q.Learning||s.state===q.Relearning||s.due<new Date?"due":h(s)?"know":"review":null}const C=u(()=>v(e.value?.read?.fsrs)),I=u(()=>v(e.value?.write?.fsrs));return(s,i)=>{const d=N("RouterLink");return t(),V(d,{to:l.value,class:"kanji","data-read":C.value,"data-write":I.value},{default:$(()=>[r(A)(o.value)?(t(),n(y,{key:0},[p("◌")],64)):k("",!0),p(" "+w(o.value),1)]),_:1},8,["to","data-read","data-write"])}}}),M=L(ne,[["__scopeId","data-v-054806ca"]]),se=["data-deck-name"],oe=["data-literal"],re=j({__name:"DeckKanaCards",props:{name:{},kana:{}},setup(f){return(a,o)=>(t(),n("ol",{class:"kana-list","data-deck-name":a.name},[(t(!0),n(y,null,x(a.kana,e=>(t(),n("li",{key:e,"data-literal":String.fromCodePoint(e),class:"kana"},[_(M,{type:"kana",codepoint:e},null,8,["codepoint"])],8,oe))),128))],8,se))}}),ce=L(re,[["__scopeId","data-v-0e3fffd0"]]),ue={class:"kanji-list"},le=j({__name:"DeckKanjiCards",props:{kanji:{}},setup(f){return(a,o)=>(t(),n("ol",ue,[(t(!0),n(y,null,x(a.kanji,e=>(t(),n("li",{key:e,class:"kanji"},[_(M,{type:"kanji",codepoint:e},null,8,["codepoint"])]))),128))]))}}),ie=L(le,[["__scopeId","data-v-f728d4e9"]]),de=["aria-labelledby"],ke=["id"],pe={class:"status"},_e={class:"count total-count"},me={key:0,class:"count know-count"},fe={key:1,class:"count review-count"},ve={key:2,class:"count due-count"},we={key:3,class:"count new-count"},ye=j({__name:"DeckListItem",props:{deck:{}},setup(f){const a=f,o=Q(null),e=T(),l=W(),g=u(()=>J(a.deck)),h=u(()=>l.query.deck?typeof l.query.deck=="string"?[l.query.deck]:l.query.deck:[]),v=u(()=>h.value.includes(a.deck.name)),C=u(()=>{const{name:c}=a.deck,R=v.value?h.value.filter(b=>b!==c):[...h.value,c];return{query:{...l.query,deck:R}}}),I=G(()=>a.deck.name);function s(c){if(!I.value)return 0;let R=0,b=0;for(const[,Y]of I.value)R+=Y[c],b+=1;return R/b}const i=u(()=>s("new")),d=u(()=>s("due")),D=u(()=>s("review")),K=u(()=>s("know"));return z(()=>{v.value&&h.value.length===1&&o.value?.scrollIntoView({block:"start"})}),(c,R)=>{const b=N("RouterLink");return t(),n("article",{ref_key:"el",ref:o,class:"deck-list-item","aria-labelledby":r(e)},[m("strong",{id:r(e),class:"label"},[_(b,{to:C.value,"aria-pressed":v.value,replace:""},{default:$(()=>[p(w(g.value),1)]),_:1},8,["to","aria-pressed"])],8,ke),m("div",pe,[m("span",_e,w(c.deck.cards.length)+" cards",1),r(I)?(t(),n(y,{key:0},[K.value>0?(t(),n("span",me,w(r(S)(K.value/c.deck.cards.length))+" know ",1)):k("",!0),D.value>0?(t(),n("span",fe,w(r(S)(D.value/c.deck.cards.length))+" reviewed ",1)):k("",!0),d.value>0?(t(),n("span",ve,w(r(S)(d.value/c.deck.cards.length))+" due ",1)):k("",!0),i.value>0?(t(),n("span",we,w(r(S)(i.value/c.deck.cards.length))+" remaining ",1)):k("",!0)],64)):k("",!0)]),v.value?(t(),n(y,{key:0},[c.deck.category==="kana"?(t(),V(ce,{key:0,name:c.deck.name,kana:c.deck.cards,class:"cards"},null,8,["name","kana"])):(t(),V(ie,{key:1,kanji:c.deck.cards,class:"cards"},null,8,["kanji"]))],64)):k("",!0)],8,de)}}}),ge=L(ye,[["__scopeId","data-v-5682f40c"]]),he={key:0,class:"deck-list"},De=j({__name:"DeckList",setup(f){const a=H();return(o,e)=>{const l=N("RouterLink");return t(),n("section",null,[e[4]||(e[4]=m("p",null," Decks allow you do keep track of your practice, such that you know which kanji you already know, which you should learn next, and which you need to review. ",-1)),r(a)&&r(a).length>0?(t(),n("ol",he,[(t(!0),n(y,null,x(r(a),g=>(t(),n("li",{key:g.name,class:"deck-list-item"},[_(ge,{deck:g},null,8,["deck"])]))),128))])):r(a)?(t(),n(y,{key:1},[m("p",null,[e[1]||(e[1]=p(" You don‘t have any decks. ",-1)),_(l,{to:r(B)},{default:$(()=>[...e[0]||(e[0]=[p(" Add your first deck ",-1)])]),_:1},8,["to"]),e[2]||(e[2]=p(" by clicking the button below. ",-1))]),_(E,{to:r(B),"prefix-icon":"plus"},{default:$(()=>[...e[3]||(e[3]=[p(" Add Deck ",-1)])]),_:1},8,["to"])],64)):k("",!0)])}}}),be=L(De,[["__scopeId","data-v-d7bb3716"]]),je={class:"article-header"},Le={class:"actions"},Ie=j({__name:"DecksView",setup(f){return(a,o)=>(t(),n("article",null,[m("header",je,[o[1]||(o[1]=m("h2",{class:"title"},"Your Decks",-1)),m("div",Le,[_(E,{to:r(B),"prefix-icon":"draw"},{default:$(()=>[...o[0]||(o[0]=[p(" Manage Decks ",-1)])]),_:1},8,["to"])])]),_(be)]))}}),Ne=L(Ie,[["__scopeId","data-v-45d5f815"]]);export{Ne as default};
//# sourceMappingURL=DecksView-Bf8GUqKe.js.map
