{"version":3,"file":"DeckBrowserView-CuejBaEB.js","sources":["../../node_modules/yta/src/async/consumers/reduce.js","../../node_modules/yta/src/sync/consumers/to-array.js","../../node_modules/yta/src/sync/operators/map.js","../../node_modules/yta/src/sync/operators/filter.js","../../node_modules/yta/src/sync/operators/unique.js","../../src/components/CustomDeckForm.vue","../../src/components/CustomDeckCreate.vue","../../src/components/DeckActivateButton.vue","../../src/components/CustomDeckEdit.vue","../../src/components/DeckBrowserItem.vue","../../src/components/DeckBrowserCategory.vue","../../src/components/DeckBrowserCustom.vue","../../src/components/DeckBrowserKanaItem.vue","../../src/components/KanaTable.vue","../../src/components/DeckBrowserKana.vue","../../src/components/DeckBrowser.vue","../../src/views/DeckBrowserView.vue"],"sourcesContent":["/**\n * Consume an async iterator resulting in a single promise.\n *\n * ```js\n * import { asAsync, pipe } from \"yta\";\n * import { reduce } from \"yta/async\";\n * import { range } from \"yta/sync\";\n *\n * await pipe(\n *   range(10),\n *   asAsync(),\n *   reduce((sum, x) => sum + x, 0),\n * );\n * // => 45\n * ```\n *\n * @template A The input type\n * @template B The output value type\n * @param {(acc: B, item: A) => B} fn The consuming function\n * @param {B} init The initial value\n * @returns {(items: AsyncIterable<A>) => Promise<B>}\n */\nexport default function reduce(fn, init) {\n  return async (items) => {\n    let acc = init;\n\n    for await (const item of items) {\n      acc = fn(acc, item);\n    }\n\n    return acc;\n  };\n}\n","/**\n * Collect the iterator into an array.\n *\n * ```js\n * import { pipe } from \"yta\";\n * import { range, toArray } from \"yta/sync\";\n *\n * pipe(range(5), toArray());\n * // => [0, 1, 2, 3, 4]\n * ```\n *\n * @template A\n * @returns {(items: Iterable<A>) => A[]}\n */\nexport default function toArray() {\n  return (items) => [...items];\n}\n","/**\n * Map each item in the iterator.\n *\n * ```js\n * import { pipe } from \"yta\";\n * import { map, range, toArray } from \"yta/sync\";\n *\n * pipe(\n *   range(3),\n *   map((x) => x * 2),\n * );\n * // => [0, 2, 4]\n * ```\n *\n * **See also:**\n *\n * - {@link flatMap}\n *\n * @template A - The input type\n * @template B - The output type\n * @param {(item: A) => B} fn - The mapping function\n * @returns {(items: Iterable<A>) => Generator<B, void>}\n */\nexport default function map(fn) {\n  return function* (items) {\n    for (const item of items) {\n      yield fn(item);\n    }\n  };\n}\n","/**\n * Filter items in the iterator leaving only the items that fulfill the predicate.\n *\n * ```js\n * import { pipe } from \"yta\";\n * import { filter, range, toArray } from \"yta/sync\";\n *\n * pipe(\n *   range(10),\n *   filter((n) => n % 2 === 0),\n *   toArray(),\n * );\n * // => [0, 2, 4, 6, 8]\n * ```\n *\n * @template A - The item type\n * @param {(item: A) => boolean} p - The predicated function\n * @returns {(items: Iterable<A>) => Generator<A, void>}\n */\nexport default function filter(p) {\n  return function* (items) {\n    for (const item of items) {\n      if (p(item)) {\n        yield item;\n      }\n    }\n  };\n}\n","/**\n * Filter items in the iterator such that no two items are the same.\n *\n * ```js\n * import { pipe } from \"yta\";\n * import { of, toArray, unique } from \"yta/sync\";\n *\n * pipe(\n *   of(1, 2, 2, 3, 4, 5, 4),\n *   unique(),\n *   toArray(),\n * );\n * // => [1, 2, 3, 4, 5]\n * ```\n *\n * @since 1.1.0\n * @template A - The item type\n * @returns {(items: Iterable<A>) => Generator<A, void>}\n */\nexport default function unique() {\n  return function* (items) {\n    /** @type {Set<A>} */\n    const collection = new Set();\n\n    for (const item of items) {\n      if (!collection.has(item)) {\n        yield item;\n        collection.add(item);\n      }\n    }\n  };\n}\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { pipe } from \"yta\";\nimport { filter, map, toArray, unique } from \"yta/sync\";\n\nimport { isKanji } from \"../helpers/text.ts\";\nimport AppButton from \"./AppButton.vue\";\nimport AppInput from \"./AppInput.vue\";\nimport AppNumberInput from \"./AppNumberInput.vue\";\nimport AppTextArea from \"./AppTextArea.vue\";\n\nconst label = defineModel<string>(\"label\");\nconst priority = defineModel<number>(\"priority\");\nconst cards = defineModel<number[]>(\"cards\");\n\nwithDefaults(\n  defineProps<{\n    labelFieldDisabled?: boolean;\n    priorityFieldDisabled?: boolean;\n    confirmIcon?: string | null;\n    confirmLabel?: string;\n  }>(),\n  {\n    labelFieldDisabled: false,\n    priorityFieldDisabled: false,\n    confirmLabel: \"confirm\",\n    confirmIcon: null,\n  },\n);\n\ndefineEmits<{\n  submit: [];\n  reset: [];\n}>();\n\nconst kanji = computed({\n  get() {\n    if (!cards.value) {\n      return \"\";\n    }\n\n    return cards.value\n      .map((codePoint) => String.fromCodePoint(codePoint))\n      .join(\"\");\n  },\n\n  set(value: string) {\n    cards.value = pipe(\n      value,\n      filter(isKanji),\n      map((char) => char.codePointAt(0) as number),\n      unique(),\n      toArray(),\n    );\n  },\n});\n</script>\n\n<template>\n  <form @submit.prevent=\"$emit('submit')\" @reset=\"$emit('reset')\">\n    <div class=\"form-body\">\n      <AppInput\n        v-model=\"label\"\n        class=\"name-field\"\n        label=\"Deck Name\"\n        :disabled=\"labelFieldDisabled\"\n        required\n      />\n\n      <AppNumberInput\n        v-model=\"priority\"\n        class=\"priority-field\"\n        label=\"Priority\"\n        min=\"1\"\n        :disabled=\"priorityFieldDisabled\"\n        required\n      />\n\n      <AppTextArea\n        v-model=\"kanji\"\n        class=\"kanji-field\"\n        label=\"Kanji\"\n        autocomplete=\"off\"\n        autocorrect=\"off\"\n        autocapitalize=\"off\"\n        spellcheck=\"false\"\n        placeholder=\"Type or paste in your kanji here: 日月火時漢字読書\"\n      />\n    </div>\n\n    <div class=\"buttons\">\n      <AppButton type=\"reset\"> Cancel </AppButton>\n      <AppButton type=\"submit\" :prefix-icon=\"confirmIcon\" filled>\n        {{ confirmLabel }}\n      </AppButton>\n    </div>\n  </form>\n</template>\n\n<style scoped>\n.form-body {\n  display: grid;\n  gap: 1em;\n  grid-template:\n    \"name priority\"\n    \"kanji kanji\"\n    / 3fr 1fr;\n\n  & .name-field {\n    grid-area: name;\n  }\n\n  & .priority-field {\n    grid-area: priority;\n  }\n\n  & .kanji-field {\n    grid-area: kanji;\n\n    & :deep(textarea) {\n      min-block-size: 5em;\n    }\n  }\n\n  @media screen and (max-width: 60ch) {\n    display: flex;\n    flex-direction: column;\n  }\n}\n\n.buttons {\n  column-gap: 1ex;\n  display: flex;\n  margin-block-start: 1em;\n  justify-content: end;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { onMounted, reactive, toRaw } from \"vue\";\nimport { pipe } from \"yta\";\nimport { map, reduce } from \"yta/async\";\n\nimport { createDeck } from \"../db/decks.ts\";\nimport { db } from \"../db/index.ts\";\nimport { Deck } from \"../types.ts\";\nimport CustomDeckForm from \"./CustomDeckForm.vue\";\n\nconst emit = defineEmits<{\n  cancel: [];\n  success: [deck: Deck];\n}>();\n\ntype Model = {\n  label: string;\n  priority: number;\n  cards: number[];\n};\n\nconst model = reactive<Model>({\n  label: \"\",\n  priority: 1,\n  cards: [],\n});\n\nasync function setDefaultPriority() {\n  const customDeckCardCount = await pipe(\n    (await db).transaction(\"decks\").store.index(\"category\").iterate(\"custom\"),\n    map((cursor) => cursor.value.cards.length),\n    reduce((sum, length) => sum + length, 0),\n  );\n\n  if (customDeckCardCount) {\n    model.priority = Math.ceil(customDeckCardCount / 12);\n  }\n}\n\nasync function handleSubmit() {\n  const deck = await createDeck({\n    label: model.label,\n    priority: model.priority,\n    cards: toRaw(model.cards),\n    cardTypes: [\"kanji-write\", \"kanji-read\"],\n  });\n\n  emit(\"success\", deck);\n}\n\nonMounted(() => {\n  setDefaultPriority();\n});\n</script>\n\n<template>\n  <CustomDeckForm\n    v-model:cards=\"model.cards\"\n    v-model:label=\"model.label\"\n    v-model:priority=\"model.priority\"\n    confirm-icon=\"plus\"\n    confirm-label=\"Create\"\n    @submit=\"handleSubmit\"\n    @reset=\"$emit('cancel')\"\n  />\n</template>\n","<script setup lang=\"ts\">\nimport AppButton from \"./AppButton.vue\";\n\nconst props = withDefaults(\n  defineProps<{\n    isActive?: boolean;\n    toggling?: boolean;\n  }>(),\n  {\n    isActive: false,\n    toggling: false,\n  },\n);\n\nconst emit = defineEmits<{\n  activate: [];\n  deactivate: [];\n}>();\n\nfunction handleClick() {\n  if (props.isActive) {\n    emit(\"deactivate\");\n  } else {\n    emit(\"activate\");\n  }\n}\n</script>\n\n<template>\n  <AppButton\n    class=\"activate-button\"\n    :filled=\"isActive\"\n    :disabled=\"toggling\"\n    :prefix-icon=\"toggling ? undefined : isActive ? 'checkmark' : 'plus'\"\n    :aria-pressed=\"isActive\"\n    @click=\"handleClick\"\n  >\n    <template v-if=\"toggling\">\n      <span class=\"loading-icon\">時</span> Loading\n    </template>\n    <template v-else-if=\"isActive\"> Active </template>\n    <template v-else> Add </template>\n  </AppButton>\n</template>\n\n<style scoped>\n.activate-button {\n  background: none;\n  border-width: 2px;\n  padding: 0.5ex;\n  font-size: 0.8em;\n\n  & .loading-icon {\n    animation: fade-in-out 2s ease-in-out alternate both infinite;\n    font-weight: 700;\n  }\n}\n\n@keyframes fade-in-out {\n  from {\n    opacity: 0.2;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { reactive, toRaw } from \"vue\";\n\nimport { editDeck } from \"../db/decks.ts\";\nimport { Deck } from \"../types.ts\";\nimport CustomDeckForm from \"./CustomDeckForm.vue\";\n\nconst props = defineProps<{\n  deck: Deck;\n}>();\n\nconst emit = defineEmits<{\n  cancel: [];\n  success: [];\n}>();\n\nconst model = reactive({\n  label: props.deck.label,\n  priority: props.deck.priority,\n  cards: props.deck.cards,\n});\n\nasync function handleSubmit() {\n  await editDeck({\n    ...props.deck,\n    label: model.label,\n    priority: model.priority,\n    cards: toRaw(model.cards),\n  });\n\n  emit(\"success\");\n}\n</script>\n\n<template>\n  <CustomDeckForm\n    v-model:cards=\"model.cards\"\n    v-model:label=\"model.label\"\n    v-model:priority=\"model.priority\"\n    confirm-label=\"Update\"\n    :label-field-disabled=\"props.deck.category !== 'custom'\"\n    :priority-field-disabled=\"props.deck.category !== 'custom'\"\n    @submit=\"handleSubmit\"\n    @reset=\"$emit('cancel')\"\n  />\n</template>\n","<script setup lang=\"ts\">\nimport { computed, ref, useId, watch } from \"vue\";\n\nimport {\n  activateDeck,\n  createDeck,\n  deactivateDeck,\n  removeDeck,\n} from \"../db/decks.ts\";\nimport { kanjiRoute } from \"../router.ts\";\nimport { Deck, DeckTemplate } from \"../types.ts\";\nimport AppButton from \"./AppButton.vue\";\nimport CustomDeckEdit from \"./CustomDeckEdit.vue\";\nimport DeckActivateButton from \"./DeckActivateButton.vue\";\n\ntype Props = (\n  | {\n      deck: Deck;\n      template: null;\n      category: null;\n    }\n  | {\n      deck: null;\n      template: DeckTemplate;\n      category: string;\n    }\n) & {\n  togglingCategory?: boolean;\n};\n\nconst props = withDefaults(defineProps<Props>(), {\n  togglingCategory: false,\n});\n\nconst toggling = ref(false);\nconst editing = ref(false);\nconst labelId = useId();\nconst kanjiList = ref<string[] | null>(null);\n\nconst isActive = computed(() => props.deck?.active);\n\nasync function activate() {\n  toggling.value = true;\n\n  try {\n    if (props.deck) {\n      await activateDeck(props.deck.name);\n    } else {\n      await createDeck({\n        name: props.template.name,\n        label: props.template.label,\n        priority: props.template.priority,\n        category: props.category,\n        cards:\n          kanjiList.value?.map((kanji) => kanji.codePointAt(0) ?? NaN) ?? [],\n        cardTypes: [\"kanji-write\", \"kanji-read\"],\n      });\n    }\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    toggling.value = false;\n  }\n}\n\nasync function deactivate() {\n  if (!props.deck) {\n    return;\n  }\n\n  toggling.value = true;\n\n  try {\n    await deactivateDeck(props.deck.name);\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    toggling.value = false;\n  }\n}\n\nwatch(\n  () => props.template?.content,\n  async (path) => {\n    if (!path) {\n      kanjiList.value = null;\n      return;\n    }\n\n    const response = await fetch(path);\n    const text = await response.text();\n\n    kanjiList.value = text.split(\"\\n\").filter((char) => char);\n  },\n  { immediate: true },\n);\n</script>\n\n<template>\n  <CustomDeckEdit\n    v-if=\"editing && deck\"\n    :deck=\"deck\"\n    @cancel=\"editing = false\"\n    @success=\"editing = false\"\n  />\n\n  <article v-else :aria-labelledby=\"labelId\">\n    <header class=\"header\">\n      <strong :id=\"labelId\">{{ deck?.label ?? template?.label }}</strong>\n      <DeckActivateButton\n        :toggling=\"toggling || togglingCategory\"\n        :is-active=\"isActive\"\n        @activate=\"activate\"\n        @deactivate=\"deactivate\"\n      />\n\n      <AppButton\n        v-if=\"deck?.active || deck?.category === 'custom'\"\n        class=\"edit-button\"\n        @click=\"editing = true\"\n      >\n        Edit\n      </AppButton>\n      <AppButton\n        v-else-if=\"deck && !deck.active && deck.category !== 'custom'\"\n        class=\"edit-button\"\n        @click=\"removeDeck(deck.name)\"\n      >\n        Reset\n      </AppButton>\n\n      <AppButton\n        v-if=\"deck?.category === 'custom'\"\n        class=\"delete-button\"\n        @click=\"removeDeck(deck.name)\"\n      >\n        Delete\n      </AppButton>\n    </header>\n\n    <ol class=\"kanji-list\">\n      <template v-if=\"deck\">\n        <li v-for=\"codePoint of deck.cards\" :key=\"codePoint\" class=\"kanji\">\n          <RouterLink :to=\"kanjiRoute(String.fromCodePoint(codePoint))\">\n            {{ String.fromCodePoint(codePoint) }}\n          </RouterLink>\n        </li>\n      </template>\n      <template v-else-if=\"kanjiList\">\n        <li v-for=\"kanji of kanjiList\" :key=\"kanji\" class=\"kanji\">\n          <RouterLink :to=\"kanjiRoute(kanji)\">\n            {{ kanji }}\n          </RouterLink>\n        </li>\n      </template>\n    </ol>\n  </article>\n</template>\n\n<style scoped>\n.header {\n  align-items: center;\n  column-gap: 1ex;\n  display: flex;\n\n  & .edit-button,\n  & .delete-button {\n    background: none;\n    border: none;\n    font-size: 0.8em;\n    padding: 0.2ex;\n  }\n}\n\n.kanji-list {\n  display: flex;\n  flex-wrap: wrap;\n  column-gap: 1ex;\n  list-style: none;\n  margin: 0;\n  padding-inline-start: 2.5em;\n}\n\n.kanji {\n  font-size: 1.2em;\n\n  & a {\n    color: inherit;\n    text-decoration: none;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, ref, useId } from \"vue\";\n\nimport { activateDeckCategory, deactivateDeckCategory } from \"../db/decks.ts\";\nimport { db } from \"../db/index.ts\";\nimport { useLiveQuery } from \"../helpers/db.ts\";\nimport { Deck, DeckTemplate } from \"../types.ts\";\nimport AppButton from \"./AppButton.vue\";\nimport CustomDeckCreate from \"./CustomDeckCreate.vue\";\nimport DeckAcativateButton from \"./DeckActivateButton.vue\";\nimport DeckBrowserItem from \"./DeckBrowserItem.vue\";\n\nconst props = defineProps<{\n  title: string;\n  category: string;\n  deckTemplates?: DeckTemplate[];\n}>();\n\nconst creating = ref(false);\nconst expanded = ref(false);\nconst titleId = useId();\n\nconst { result: storedDecks } = useLiveQuery(\n  computed(() => {\n    const { category } = props;\n\n    return async () => {\n      const map = new Map<string, Deck>();\n\n      const items = (await db)\n        .transaction(\"decks\")\n        .store.index(\"category+priority\")\n        .iterate(\n          IDBKeyRange.bound(\n            [category, Number.NEGATIVE_INFINITY],\n            [category, Number.POSITIVE_INFINITY],\n            true,\n            true,\n          ),\n        );\n\n      for await (const item of items) {\n        map.set(item.primaryKey, item.value);\n      }\n\n      return map;\n    };\n  }),\n);\n\nconst deckCount = computed(() => {\n  if (props.deckTemplates) {\n    return props.deckTemplates.length;\n  }\n\n  return storedDecks.value?.size ?? 0;\n});\n\nconst activeDeckCount = computed(() => {\n  if (!storedDecks.value) {\n    return 0;\n  }\n\n  let sum = 0;\n  for (const [, { active }] of storedDecks.value) {\n    if (active) {\n      sum += 1;\n    }\n  }\n\n  return sum;\n});\n\nconst toggling = ref(false);\nconst isActive = computed(() => {\n  if (!props.deckTemplates) {\n    return true;\n  }\n\n  return activeDeckCount.value >= props.deckTemplates.length;\n});\n\nasync function activate(deckTemplates: DeckTemplate[]) {\n  toggling.value = true;\n\n  try {\n    await activateDeckCategory(props.category, deckTemplates);\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    toggling.value = false;\n  }\n}\n\nasync function deactivate() {\n  toggling.value = true;\n\n  try {\n    await deactivateDeckCategory(props.category);\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    toggling.value = false;\n  }\n}\n\nfunction handleDeckCreated() {\n  expanded.value = true;\n  creating.value = false;\n}\n</script>\n\n<template>\n  <article :aria-labelledby=\"titleId\">\n    <div class=\"controls\">\n      <strong :id=\"titleId\" class=\"title\">{{ title }}</strong>\n\n      <DeckAcativateButton\n        v-if=\"deckTemplates\"\n        :toggling=\"toggling\"\n        :is-active=\"isActive\"\n        @activate=\"activate(deckTemplates)\"\n        @deactivate=\"deactivate\"\n      />\n\n      <AppButton\n        v-else-if=\"!creating\"\n        class=\"create-custom-button\"\n        prefix-icon=\"plus\"\n        @click=\"creating = true\"\n      >\n        Create New\n      </AppButton>\n    </div>\n\n    <AppButton\n      v-if=\"deckCount > 0\"\n      class=\"expand-button\"\n      :aria-pressed=\"expanded\"\n      @click=\"expanded = !expanded\"\n    >\n      <template v-if=\"expanded\"> Hide </template>\n      <template v-else> Show </template>\n      ({{ deckCount }} decks)\n    </AppButton>\n\n    <CustomDeckCreate\n      v-if=\"creating\"\n      class=\"custom-deck-create\"\n      @cancel=\"creating = false\"\n      @success=\"handleDeckCreated\"\n    />\n\n    <ol v-if=\"expanded\" class=\"deck-list\">\n      <template v-if=\"deckTemplates\">\n        <li v-for=\"template of deckTemplates\" :key=\"template.name\">\n          <DeckBrowserItem\n            :deck=\"storedDecks?.get(template.name)\"\n            :template=\"template\"\n            :category=\"category\"\n            :toggling-category=\"toggling\"\n          />\n        </li>\n      </template>\n      <template v-else-if=\"storedDecks\">\n        <li v-for=\"[name, deck] of storedDecks\" :key=\"name\">\n          <DeckBrowserItem :deck=\"deck\" />\n        </li>\n      </template>\n    </ol>\n  </article>\n</template>\n\n<style scoped>\n.controls {\n  align-items: center;\n  column-gap: 1ex;\n  display: flex;\n}\n\n.title {\n  font-size: 1.5em;\n}\n\n.create-custom-button {\n  border-width: 2px;\n  padding: 0.5ex;\n  font-size: 0.8em;\n}\n\n.expand-button {\n  background: none;\n  font-size: 0.75em;\n  border: none;\n  padding: 0;\n}\n\n.custom-deck-create {\n  margin-block: 1em;\n}\n\n.deck-list {\n  list-style: none;\n  margin-block: 1ex;\n  padding: 0;\n\n  & > li {\n    margin-block-start: 1ex;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport DeckBrowserCategory from \"./DeckBrowserCategory.vue\";\n</script>\n\n<template>\n  <DeckBrowserCategory title=\"Custom\" category=\"custom\" />\n</template>\n","<script lang=\"ts\" setup>\nimport { ref } from \"vue\";\n\nimport { createDeck, removeDeck } from \"../db/decks.ts\";\nimport { KanaDeckTemplate } from \"../helpers/decks.ts\";\nimport DeckActivateButton from \"./DeckActivateButton.vue\";\n\nconst props = defineProps<{\n  template: KanaDeckTemplate;\n  togglingCategory?: boolean;\n  isActive?: boolean;\n}>();\n\nconst toggling = ref(false);\n\nasync function activate() {\n  toggling.value = true;\n\n  try {\n    await createDeck(props.template);\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    toggling.value = false;\n  }\n}\n\nasync function deactivate() {\n  toggling.value = true;\n\n  try {\n    await removeDeck(props.template.name);\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    toggling.value = false;\n  }\n}\n</script>\n\n<template>\n  <article class=\"deck-browser-kana-deck-item\">\n    <header class=\"header\">\n      <strong class=\"kana-title\">{{ template.label }}</strong>\n\n      <DeckActivateButton\n        :toggling=\"toggling || togglingCategory\"\n        :is-active=\"isActive\"\n        @activate=\"activate\"\n        @deactivate=\"deactivate\"\n      />\n    </header>\n\n    <div class=\"body\">\n      <slot />\n    </div>\n  </article>\n</template>\n\n<style scoped>\n.header {\n  align-items: center;\n  column-gap: 1ex;\n  display: flex;\n}\n\n.body {\n  margin-inline-start: 2.5em;\n\n  :slotted(& table) {\n    inline-size: 100%;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { kanaRoute } from \"../router\";\n\ndefineProps<{\n  headings?: string[];\n  rows: Array<{ heading?: string; cells: string[] }>;\n}>();\n</script>\n\n<template>\n  <table class=\"kana-table\">\n    <thead v-if=\"headings\">\n      <tr>\n        <th v-for=\"(heading, i) of headings\" :key=\"i\">\n          <span v-if=\"heading\" class=\"aiueo\">{{ heading }}</span>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"({ heading, cells }, i) of rows\" :key=\"i\">\n        <th v-if=\"heading\">\n          <span class=\"consonant\">{{ heading }}</span>\n        </th>\n\n        <td v-for=\"(cell, j) of cells\" :key=\"j\">\n          <RouterLink v-if=\"cell\" class=\"kana-literal\" :to=\"kanaRoute(cell)\">\n            {{ cell }}\n          </RouterLink>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<style scoped>\n.kana-table th .aiueo {\n  display: block;\n  inline-size: 1.2em;\n  text-align: center;\n}\n\n.kana-table th .consonant {\n  display: block;\n  padding-block-start: 0.5ex;\n}\n\n.kana-literal {\n  color: inherit;\n  font-size: 1.2em;\n  text-decoration: none;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, ref, useId } from \"vue\";\n\nimport { createDeck, removeDeck } from \"../db/decks.ts\";\nimport { db } from \"../db/index.ts\";\nimport { useLiveQuery } from \"../helpers/db.ts\";\nimport { kanaDeckTemplates } from \"../helpers/decks.ts\";\nimport {\n  HIRAGANA_DAKUTEN_TABLE_DATA,\n  HIRAGANA_TABLE_DATA,\n  HIRAGANA_YOON_TABLE_DATA,\n  KATAKANA_DAKUTEN_TABLE_DATA,\n  KATAKANA_TABLE_DATA,\n  KATAKANA_YOON_TABLE_DATA,\n} from \"../helpers/kana.ts\";\nimport { Deck } from \"../types.ts\";\nimport AppButton from \"./AppButton.vue\";\nimport DeckAcativateButton from \"./DeckActivateButton.vue\";\nimport DeckBrowserKanaItem from \"./DeckBrowserKanaItem.vue\";\nimport KanaTable from \"./KanaTable.vue\";\n\n// const creating = ref(false);\nconst expanded = ref(false);\nconst titleId = useId();\n\nconst toggling = ref(false);\n\nconst { result: storedDecks } = useLiveQuery(\n  computed(() => {\n    return async () => {\n      const map = new Map<string, Deck>();\n\n      const items = (await db)\n        .transaction(\"decks\")\n        .store.index(\"category+priority\")\n        .iterate(\n          IDBKeyRange.bound(\n            [\"kana\", Number.NEGATIVE_INFINITY],\n            [\"kana\", Number.POSITIVE_INFINITY],\n            true,\n            true,\n          ),\n        );\n\n      for await (const item of items) {\n        map.set(item.primaryKey, item.value);\n      }\n\n      return map;\n    };\n  }),\n  new Map<string, Deck>(),\n);\n\nconst availableDeckCount = Object.keys(kanaDeckTemplates).length;\n\nconst isCategoryActive = computed(\n  () => storedDecks.value.size === availableDeckCount,\n);\n\nasync function activate() {\n  toggling.value = true;\n\n  const decks = storedDecks.value;\n\n  try {\n    for (const template of Object.values(kanaDeckTemplates)) {\n      if (!decks.has(template.name)) {\n        await createDeck(template);\n      }\n    }\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    toggling.value = false;\n  }\n}\n\nasync function deactivate() {\n  toggling.value = true;\n\n  try {\n    for (const name of storedDecks.value.keys()) {\n      await removeDeck(name);\n    }\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    toggling.value = false;\n  }\n}\n</script>\n\n<template>\n  <article :aria-labelledby=\"titleId\">\n    <div class=\"controls\">\n      <strong :id=\"titleId\" class=\"title\">Kana</strong>\n\n      <DeckAcativateButton\n        :toggling=\"toggling\"\n        :is-active=\"isCategoryActive\"\n        @activate=\"activate\"\n        @deactivate=\"deactivate\"\n      />\n    </div>\n\n    <AppButton\n      class=\"expand-button\"\n      :aria-pressed=\"expanded\"\n      @click=\"expanded = !expanded\"\n    >\n      <template v-if=\"expanded\">Hide </template>\n      <template v-else>Show </template>\n      ({{ availableDeckCount }} decks)\n    </AppButton>\n\n    <ol v-if=\"expanded\" class=\"deck-list\">\n      <li>\n        <DeckBrowserKanaItem\n          :template=\"kanaDeckTemplates.hiragana\"\n          :toggling-category=\"toggling\"\n          :is-active=\"storedDecks.has('hiragana')\"\n        >\n          <KanaTable class=\"kana-table\" v-bind=\"HIRAGANA_TABLE_DATA\" />\n        </DeckBrowserKanaItem>\n      </li>\n\n      <li>\n        <DeckBrowserKanaItem\n          :template=\"kanaDeckTemplates.katakana\"\n          :toggling-category=\"toggling\"\n          :is-active=\"storedDecks.has('katakana')\"\n        >\n          <KanaTable class=\"kana-table\" v-bind=\"KATAKANA_TABLE_DATA\" />\n        </DeckBrowserKanaItem>\n      </li>\n\n      <li>\n        <DeckBrowserKanaItem\n          :template=\"kanaDeckTemplates.hiraganaDakuten\"\n          :toggling-category=\"toggling\"\n          :is-active=\"storedDecks.has(kanaDeckTemplates.hiraganaDakuten.name)\"\n        >\n          <KanaTable class=\"kana-table\" v-bind=\"HIRAGANA_DAKUTEN_TABLE_DATA\" />\n        </DeckBrowserKanaItem>\n      </li>\n\n      <li>\n        <DeckBrowserKanaItem\n          :template=\"kanaDeckTemplates.hiraganaYoon\"\n          :toggling-category=\"toggling\"\n          :is-active=\"storedDecks.has(kanaDeckTemplates.hiraganaYoon.name)\"\n        >\n          <KanaTable class=\"kana-table\" v-bind=\"HIRAGANA_YOON_TABLE_DATA\" />\n        </DeckBrowserKanaItem>\n      </li>\n\n      <li>\n        <DeckBrowserKanaItem\n          :template=\"kanaDeckTemplates.katakanaDakuten\"\n          :toggling-category=\"toggling\"\n          :is-active=\"storedDecks.has(kanaDeckTemplates.katakanaDakuten.name)\"\n        >\n          <KanaTable class=\"kana-table\" v-bind=\"KATAKANA_DAKUTEN_TABLE_DATA\" />\n        </DeckBrowserKanaItem>\n      </li>\n\n      <li>\n        <DeckBrowserKanaItem\n          :template=\"kanaDeckTemplates.katakanaYoon\"\n          :toggling-category=\"toggling\"\n          :is-active=\"storedDecks.has(kanaDeckTemplates.katakanaYoon.name)\"\n        >\n          <KanaTable class=\"kana-table\" v-bind=\"KATAKANA_YOON_TABLE_DATA\" />\n        </DeckBrowserKanaItem>\n      </li>\n    </ol>\n  </article>\n</template>\n\n<style scoped>\n.controls {\n  align-items: center;\n  column-gap: 1ex;\n  display: flex;\n}\n\n.title {\n  font-size: 1.5em;\n}\n\n.expand-button {\n  background: none;\n  font-size: 0.75em;\n  border: none;\n  padding: 0;\n}\n\n.deck-list {\n  list-style: none;\n  margin-block: 1ex;\n  padding: 0;\n\n  & > li {\n    margin-block-start: 1em;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport {\n  basicKanjiDecks,\n  genkiDecks,\n  jlptDecks,\n  jouyouDecks,\n  newsFrequencyDecks,\n} from \"../helpers/decks.ts\";\nimport DeckBrowserCategory from \"./DeckBrowserCategory.vue\";\nimport DeckBrowserCustom from \"./DeckBrowserCustom.vue\";\nimport DeckBrowserKana from \"./DeckBrowserKana.vue\";\n</script>\n\n<template>\n  <ul class=\"categories\">\n    <li>\n      <DeckBrowserKana />\n    </li>\n\n    <li>\n      <DeckBrowserCategory\n        title=\"JLPT\"\n        category=\"jlpt\"\n        :deck-templates=\"jlptDecks\"\n      />\n    </li>\n\n    <li>\n      <DeckBrowserCategory\n        title=\"Jōyō Kanji\"\n        category=\"jouyou\"\n        :deck-templates=\"jouyouDecks\"\n      />\n    </li>\n\n    <li>\n      <DeckBrowserCategory\n        title=\"News Frequency\"\n        category=\"news\"\n        :deck-templates=\"newsFrequencyDecks\"\n      />\n    </li>\n\n    <li>\n      <DeckBrowserCategory\n        title=\"Genki\"\n        category=\"genki\"\n        :deck-templates=\"genkiDecks\"\n      />\n    </li>\n\n    <li>\n      <DeckBrowserCategory\n        title=\"Basic Kanji Book\"\n        category=\"basic-kanji\"\n        :deck-templates=\"basicKanjiDecks\"\n      />\n    </li>\n\n    <li>\n      <DeckBrowserCustom />\n    </li>\n  </ul>\n</template>\n\n<style scoped>\n.categories {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n\n  & > li:not(:first-child) {\n    margin-block-start: 1em;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport AppButton from \"../components/AppButton.vue\";\nimport DeckBrowser from \"../components/DeckBrowser.vue\";\nimport { decksRoute } from \"../router.ts\";\n</script>\n\n<template>\n  <article>\n    <header class=\"article-header\">\n      <h2 class=\"title\">Add Decks</h2>\n\n      <div class=\"actions\">\n        <AppButton :to=\"decksRoute\" prefix-icon=\"arrow-left\">\n          Back to your decks\n        </AppButton>\n      </div>\n    </header>\n\n    <DeckBrowser />\n  </article>\n</template>\n\n<style scoped>\n.article-header {\n  align-items: center;\n  display: flex;\n  margin-block-end: 1.5em;\n\n  & .title {\n    margin-block: 0;\n  }\n\n  & .actions {\n    margin-inline-start: auto;\n  }\n}\n</style>\n"],"names":["reduce","fn","init","items","acc","item","toArray","map","filter","p","unique","collection","label","_useModel","__props","priority","cards","kanji","computed","codePoint","value","pipe","isKanji","char","_createElementBlock","$emit","_createElementVNode","_hoisted_1","_createVNode","AppInput","$event","AppNumberInput","AppTextArea","_hoisted_2","AppButton","_cache","emit","__emit","model","reactive","setDefaultPriority","customDeckCardCount","db","cursor","sum","length","handleSubmit","deck","createDeck","toRaw","onMounted","_createBlock","CustomDeckForm","props","handleClick","_Fragment","editDeck","toggling","ref","editing","labelId","useId","kanjiList","isActive","activate","activateDeck","error","deactivate","deactivateDeck","watch","path","text","CustomDeckEdit","_unref","_toDisplayString","_hoisted_3","DeckActivateButton","removeDeck","_hoisted_4","_openBlock","_renderList","_component_RouterLink","kanjiRoute","creating","expanded","titleId","storedDecks","useLiveQuery","category","deckCount","activeDeckCount","active","deckTemplates","activateDeckCategory","deactivateDeckCategory","handleDeckCreated","DeckAcativateButton","CustomDeckCreate","template","DeckBrowserItem","name","DeckBrowserCategory","_renderSlot","_ctx","heading","i","cells","_hoisted_5","cell","j","kanaRoute","availableDeckCount","kanaDeckTemplates","isCategoryActive","decks","DeckBrowserKanaItem","KanaTable","_mergeProps","HIRAGANA_TABLE_DATA","KATAKANA_TABLE_DATA","HIRAGANA_DAKUTEN_TABLE_DATA","HIRAGANA_YOON_TABLE_DATA","KATAKANA_DAKUTEN_TABLE_DATA","KATAKANA_YOON_TABLE_DATA","DeckBrowserKana","jlptDecks","jouyouDecks","newsFrequencyDecks","genkiDecks","basicKanjiDecks","DeckBrowserCustom","decksRoute","DeckBrowser"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}