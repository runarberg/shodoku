import{m as V,y as O,c as $,z as se,B as re,C as be,D as $e,p as he,E as oe,d as G,G as Se,a as m,o as p,_ as R,g as C,e as _,u as g,b as A,t as B,q as le,F as P,h as L,l as T,i as Y,A as H,w as z,H as W,I as ne,J as ie,v as Ce,K as Pe}from"./index-DyCUo9BM.js";import{s as ye}from"./reviews-3IHrIhKH.js";import{u as Ke,c as Ie}from"./index-DM9RO-23.js";import{u as Be,d as ke}from"./db-DFxFyH6D.js";import{d as Me}from"./decks-CfOZF5PQ.js";import{a as Ae}from"./fsrs-BIHyrU4v.js";import{f as pe}from"./formats-CxjEYhKc.js";import{v as Ve,W as Ee}from"./WordListItem-B1C9zql_.js";const fe="http://kanjivg.tagaini.net",Z=Symbol("kanjivg"),Ne=new DOMParser;function De(e){const t=[];let n=e.closest("[data-position]");for(;n instanceof SVGElement;)t.push(n.dataset.position),n=n.parentElement?.closest("[data-position]")??null;return t}function an(e){const t=V(null),n=V(null),o=V(!1);O(()=>re(e),async r=>{if(r){o.value=!0;try{const u=await(await fetch(`/kanjivg/kanji/${r}.svg`)).text(),l=Ne.parseFromString(u,"image/svg+xml");if(l.documentElement instanceof SVGSVGElement){const{x:a,y:v,width:y,height:k}=l.documentElement.viewBox.baseVal;n.value=`${a},${v},${y},${k}`}const c=l.getElementById(`kvg:${r}`);if(c){for(const a of[...c?.querySelectorAll("*"),c])if(a instanceof SVGElement){for(const v of[...a.attributes])v.namespaceURI===fe&&(a.dataset[v.localName]=v.value,a.removeAttributeNS(fe,v.localName));a.removeAttribute("xmlns:kvg")}}t.value=c}finally{o.value=!1}}},{immediate:!0});const s=$(()=>{const r=t.value;if(!r)return new Map;const i=new Map,u={};function l(a){if(a.dataset.part&&Number.parseInt(a.dataset.part)>1)return;const v=a.dataset.element,y={element:v,original:a.dataset.original??null,position:De(a),radical:a.dataset.radical??null,phon:a.dataset.phon??null};let k=i.get(v);k?k.push(y):(k=[y],i.set(v,k)),y.radical&&(u[y.radical]=v)}r.dataset.radical&&l(r);for(const a of r.querySelectorAll("g[data-element]"))l(a);const c=new Map;for(const a of["general","tradit","nelson"]){const v=u[a],y=i.get(v);y&&(c.set(v,y),i.delete(v))}for(const[a,v]of i)c.set(a,v);return c});be(Z,{strokesEl:t,viewBox:n,components:s,syncing:o})}function ge(){const e=se(Z,null);return $(()=>e?.strokesEl.value?.cloneNode(!0)??null)}function _e(){const e=se(Z,null);return $(()=>e?.viewBox.value??"0,0,109,109")}function Le(){const e=se(Z,null);return $(()=>e?.components.value??new Map)}function Ge(){const e=se(Z,null);return $(()=>e?.syncing.value??!1)}function*Re(e){for(const t of e.split(`
`)){const[n,o,s,r,i]=t.split(",");if(!o)continue;const u={id:Number.parseInt(n),literal:o.at(0)??"",strokes:Number.parseInt(s),meaning:r,reading:i};for(const l of o)yield[l,u]}}const qe=$e("radicals",()=>{const e=V(!1),t=V(null),n=oe(new Map);async function o(){if(!e.value){e.value=!0,t.value=null;try{const i=await(await fetch("/data/radicals.csv")).text();for(const[u,l]of Re(i))n.set(u,l)}catch(r){t.value=r}finally{e.value=!1}}}async function s(r){const i=r.codePointAt(0);if(!i)return;const u=i?.toString(16).padStart(5,"0"),c=await(await fetch(`/data/kanji-v1/${u}.json`)).json(),a=c.kunYomi.find(v=>!/[.-]/.test(v))??c.kunYomi.at(0)??"";n.set(r,{id:i,literal:r,strokes:c.strokeCount,meaning:c.meanings.at(0)??"",reading:a})}return o(),{radicals:n,sync:o,syncing:e,tryKanji:s}});function Oe(e){const t=qe();return he(()=>{const n=re(e);n&&!t.syncing&&!t.radicals.has(n)&&t.tryKanji(n)}),$(()=>{const n=re(e);return n?t.radicals.get(n)??null:null})}const Te=G({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(e){const t=e,n=V(null);function o(){n.value?.replaceChildren(t.strokes??"")}return O(()=>t.strokes,o),Se(()=>{o()}),(s,r)=>(p(),m("g",{ref_key:"container",ref:n,class:"kanji-strokes"},null,512))}}),xe=R(Te,[["__scopeId","data-v-53c78976"]]),Ye={class:"kanji-component-item"},ze=["viewBox"],Xe={class:"component-info"},He={class:"literal"},We={class:"meaning"},Fe={key:0,lang:"ja"},Je={class:"tags"},Ue={key:1,class:"is-phonetic"},Qe=G({__name:"KanjiComponentItem",props:{literal:{},parts:{}},setup(e){const t=e,n=ge(),o=_e(),s=$(()=>{for(const l of t.parts)if(l.radical)return l.radical;return null}),r=$(()=>{for(const l of t.parts)if(l.phon)return l.phon}),i=Oe(()=>t.literal);function u(l){return`oklch(from var(--accent-color) l c ${l+3})`}return he(()=>{const l=n.value;if(!l)return;l.dataset.element===t.literal&&(l.dataset.radical==="general"||l.dataset.radical==="tradit"?l.style.color="var(--green)":l.dataset.radical==="nelson"||l.dataset.radical==="jis"?l.style.color="var(--bluegreen)":l.dataset.phon===t.literal?l.style.color="var(--gold)":l.style.color=u(180));let c=-1;for(const a of l.querySelectorAll(`g[data-element="${t.literal}"]`)){if(a.dataset.radical==="general"||a.dataset.radical==="tradit"){a.style.color="var(--green)";continue}if(a.dataset.radical==="nelson"||a.dataset.radical==="jis"){a.style.color="var(--bluegreen)";continue}if(a.dataset.phon){a.style.color="var(--gold)";continue}(!a.dataset.part||a.dataset.part==="1")&&(c+=1),a.style.color=u(240+63*c)}}),(l,c)=>(p(),m("div",Ye,[g(n)?(p(),m("svg",{key:0,viewBox:g(o),class:"kanji-component-strokes"},[A(xe,{class:"strokes-group",strokes:g(n)},null,8,["strokes"])],8,ze)):C("",!0),_("div",Xe,[_("span",He,B(l.literal),1),_("p",We,[_("strong",null,B(g(i)?.meaning),1),g(i)?.reading?(p(),m("span",Fe," ("+B(g(i).reading)+")",1)):C("",!0)]),_("div",Je,[s.value?(p(),m("span",{key:0,class:le(["is-radical",{"is-nelson":s.value==="nelson","is-jis":s.value==="jis"}])},[s.value==="nelson"?(p(),m(P,{key:0},[L("Nelson radical")],64)):s.value==="jis"?(p(),m(P,{key:1},[L("JIS radical")],64)):(p(),m(P,{key:2},[L("Radical")],64))],2)):C("",!0),r.value?(p(),m("span",Ue,"Phonetic")):C("",!0)])])]))}}),Ze=R(Qe,[["__scopeId","data-v-2fcd2705"]]),et={class:"component-list"},tt=G({__name:"KanjiComponents",setup(e){const t=Le();return(n,o)=>(p(),m("section",null,[_("h2",null,[o[0]||(o[0]=L(" Components ")),g(t).size>0?(p(),m(P,{key:0},[L(" ("+B(g(t).size)+")",1)],64)):C("",!0)]),_("ul",et,[(p(!0),m(P,null,T(g(t),([s,r])=>(p(),m("li",{key:s},[A(Ze,{literal:s,parts:r},null,8,["literal","parts"])]))),128))])]))}}),on=R(tt,[["__scopeId","data-v-6768574a"]]),nt={class:"kanji-readings"},at={class:"dd-items"},ot={class:"dd-items"},st=G({__name:"KanjiReadings",props:{kanji:{}},setup(e){return(t,n)=>(p(),m("section",null,[n[2]||(n[2]=_("h2",null,"Readings",-1)),_("dl",nt,[n[0]||(n[0]=_("dt",null,"Kun",-1)),_("div",at,[(p(!0),m(P,null,T(t.kanji.kunYomi,o=>(p(),m("dd",null,B(o),1))),256))]),n[1]||(n[1]=_("dt",null,"On",-1)),_("div",ot,[(p(!0),m(P,null,T(t.kanji.onYomi,o=>(p(),m("dd",null,B(o),1))),256))])])]))}}),sn=R(st,[["__scopeId","data-v-f6c59d96"]]),it={class:"kanji-strokes-background"},rt=["x","y","width","height"],lt=["x1","y1","x2","y2"],ct=["x1","y1","x2","y2"],ut=["x1","y1","x2","y2"],dt=["x1","y1","x2","y2"],pt=["x1","y1","x2","y2"],ft=["x1","y1","x2","y2"],vt=G({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(e){const t=e,n=$(()=>{const[r,i,u,l]=t.viewBox.split(",");return{x:Number.parseInt(r),y:Number.parseInt(i),width:Number.parseInt(u),height:Number.parseInt(l)}}),o=$(()=>{const{x:r,width:i}=n.value;return r+i/2}),s=$(()=>{const{y:r,height:i}=n.value;return r+i/2});return(r,i)=>(p(),m("g",it,[_("rect",{class:"background",x:n.value.x,y:n.value.y,width:n.value.width,height:n.value.width,rx:"5"},null,8,rt),_("line",{class:"midline",x1:n.value.x+1,y1:s.value,x2:n.value.x+n.value.width-1,y2:s.value},null,8,lt),_("line",{class:"midline",x1:o.value,y1:n.value.y+1,x2:o.value,y2:n.value.y+n.value.height-1},null,8,ct),_("line",{class:"quartline",x1:o.value/2,y1:n.value.y+1,x2:o.value/2,y2:n.value.y+n.value.height-1},null,8,ut),_("line",{class:"quartline",x1:3*o.value/2,y1:n.value.y+1,x2:3*o.value/2,y2:n.value.y+n.value.height-1},null,8,dt),_("line",{class:"quartline",x1:n.value.x+1,y1:s.value/2,x2:n.value.x+n.value.width-1,y2:s.value/2},null,8,pt),_("line",{class:"quartline",x1:n.value.x+1,y1:3*s.value/2,x2:n.value.x+n.value.width-1,y2:3*s.value/2},null,8,ft)]))}}),mt=R(vt,[["__scopeId","data-v-1b492e2c"]]),ht=1e-12,ve=112e-18,yt=e=>e>=-ve&&e<=ve,je=(e,t)=>Math.sqrt(e*e+t*t),F=(e,t)=>({x:e,y:t}),kt=e=>je(e.x,e.y),gt=e=>F(-e.x,-e.y),Q=(e,t)=>F(e.x+t.x,e.y+t.y),E=(e,t)=>F(e.x-t.x,e.y-t.y),X=(e,t)=>F(e.x*t,e.y*t),N=(e,t)=>e.x*t.x+e.y*t.y,ue=(e,t)=>je(e.x-t.x,e.y-t.y),q=(e,t=1)=>X(e,t/(kt(e)||1/0)),we=(e,t)=>({p:e,i:t}),_t=(e,t,n)=>{t&&(e.unshift(e[e.length-1]),e.push(e[1]));const o=e.length;if(o===0)return[];const s=[we(e[0])];return ce(e,s,n,0,o-1,E(e[1],e[0]),E(e[o-2],e[o-1])),t&&(s.shift(),s.pop()),s},ce=(e,t,n,o,s,r,i)=>{if(s-o===1){const y=e[o],k=e[s],d=ue(y,k)/3;me(t,[y,Q(y,q(r,d)),Q(k,q(i,d)),k]);return}const u=bt(e,o,s);let l=Math.max(n,n*n),c,a=!0;for(let y=0;y<=4;y++){const k=xt(e,o,s,u,r,i),d=$t(e,o,s,k,u);if(d.error<n&&a){me(t,k);return}if(c=d.index,d.error>=l)break;a=jt(e,o,s,u,k),l=d.error}const v=E(e[c-1],e[c+1]);ce(e,t,n,o,c,r,v),ce(e,t,n,c,s,gt(v),i)},me=(e,t)=>{const n=e[e.length-1];n.o=E(t[1],t[0]),e.push(we(t[3],E(t[2],t[3])))},xt=(e,t,n,o,s,r)=>{const i=ht,u=Math.abs,l=e[t],c=e[n],a=[[0,0],[0,0]],v=[0,0];for(let w=0,I=n-t+1;w<I;w++){const M=o[w],D=1-M,ee=3*M*D,J=D*D*D,U=ee*D,te=ee*M,x=M*M*M,h=q(s,U),S=q(r,te),de=E(E(e[t+w],X(l,J+U)),X(c,te+x));a[0][0]+=N(h,h),a[0][1]+=N(h,S),a[1][0]=a[0][1],a[1][1]+=N(S,S),v[0]+=N(h,de),v[1]+=N(S,de)}const y=a[0][0]*a[1][1]-a[1][0]*a[0][1];let k,d;if(u(y)>i){const w=a[0][0]*v[1]-a[1][0]*v[0];k=(v[0]*a[1][1]-v[1]*a[0][1])/y,d=w/y}else{const w=a[0][0]+a[0][1],I=a[1][0]+a[1][1];k=d=u(w)>i?v[0]/w:u(I)>i?v[1]/I:0}const j=ue(c,l),K=i*j;let f,b;if(k<K||d<K)k=d=j/3;else{const w=E(c,l);f=q(s,k),b=q(r,d),N(f,w)-N(b,w)>j*j&&(k=d=j/3,f=b=null)}return[l,Q(l,f||q(s,k)),Q(c,b||q(r,d)),c]},jt=(e,t,n,o,s)=>{for(let r=t;r<=n;r++)o[r-t]=wt(s,e[r],o[r-t]);for(let r=1,i=o.length;r<i;r++)if(o[r]<=o[r-1])return!1;return!0},wt=(e,t,n)=>{const o=[],s=[];for(let a=0;a<=2;a++)o[a]=X(E(e[a+1],e[a]),3);for(let a=0;a<=1;a++)s[a]=X(E(o[a+1],o[a]),2);const r=ae(3,e,n),i=ae(2,o,n),u=ae(1,s,n),l=E(r,t),c=N(i,i)+N(l,u);return yt(c)?n:n-N(l,i)/c},ae=(e,t,n)=>{const o=t.slice();for(let s=1;s<=e;s++)for(let r=0;r<=e-s;r++)o[r]=Q(X(o[r],1-n),X(o[r+1],n));return o[0]},bt=(e,t,n)=>{const o=[0];for(let s=t+1;s<=n;s++)o[s-t]=o[s-t-1]+ue(e[s],e[s-1]);for(let s=1,r=n-t;s<=r;s++)o[s]/=o[r];return o},$t=(e,t,n,o,s)=>{let r=Math.floor((n-t+1)/2),i=0;for(let u=t+1;u<n;u++){const l=ae(3,o,s[u-t]),c=E(l,e[u]),a=c.x*c.x+c.y*c.y;a>=i&&(i=a,r=u)}return{error:i,index:r}},St=(e,t,n)=>{const o=e.length,s=10**n,r=n<16?d=>Math.round(d*s)/s:d=>d,i=(d,j)=>r(d)+","+r(j);let u=!0,l,c,a,v;const y=[],k=(d,j)=>{const K=d.p.x,f=d.p.y;if(u)y.push("M"+i(K,f)),u=!1;else{const b=K+(d.i?.x??0),w=f+(d.i?.y??0);if(b===K&&w===f&&a===l&&v===c){if(!j){const I=K-l,M=f-c;y.push(I===0?"v"+r(M):M===0?"h"+r(I):"l"+i(I,M))}}else y.push("c"+i(a-l,v-c)+" "+i(b-l,w-c)+" "+i(K-l,f-c))}l=K,c=f,a=K+(d.o?.x??0),v=f+(d.o?.y??0)};if(!o)return"";for(let d=0;d<o;d++)k(e[d]);return t&&o>0&&(k(e[0],!0),y.push("z")),y.join("")},Ct=(e,t={})=>e.length===0?"":St(_t(e.map(typeof e[0].x=="number"?n=>F(n.x,n.y):n=>F(n[0],n[1])),t.closed,t.tolerance??2.5),t.closed,t.precision??5),Pt=["x","y","width","height"],Kt={class:"practice-strokes"},It=["d"],Bt=["points"],Mt=G({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(e,{emit:t}){const n=e,o=t,s=V(null),r=$(()=>s.value?.closest("svg")),i=$(()=>r.value?.viewBox.baseVal),u=oe([]);function l(f){if(!r.value)return{x:f.x,y:f.y};const b=r.value.createSVGPoint();b.x=f.x,b.y=f.y;const w=b.matrixTransform(r.value.getScreenCTM()?.inverse());return{x:w.x,y:w.y}}function c(f){f.isPrimary&&(f.preventDefault(),s.value?.setPointerCapture(f.pointerId),u.push(l(f)))}function a(f){u.length===0||!f.isPrimary||u.push(l(f))}function v(f){f.isPrimary&&(u.length>1&&o("stroke",Ct(u)),s.value?.releasePointerCapture(f.pointerId),u.splice(0,u.length),r.value?.parentElement?.click())}function y(f){const b=f.getTotalLength();return[{strokeDasharray:b,strokeDashoffset:b},{strokeDasharray:b,strokeDashoffset:0}]}const k={duration:500,easing:"ease-in-out"},d=[];function j(){if(s.value){for(const f of s.value?.querySelectorAll("path.stroke")){const b=f.animate(y(f),k);b.pause(),d.push(b)}K()}}async function K(){let f=d.at(0);for(;f;)f.play(),await f.finished,d.shift(),f=d.at(0),f&&await ye(100)}return O(()=>n.animate,f=>{f&&j()}),O(()=>n.animatePause,f=>{f?d.at(0)?.pause():d.at(0)?.play()}),(f,b)=>(p(),m("g",{ref_key:"el",ref:s,class:"kanji-strokes-practice-canvas canvas",onPointerdown:c,onPointermove:a,onPointerup:v},[i.value?(p(),m("rect",{key:0,class:"background",x:i.value.x,y:i.value.y,width:i.value.width,height:i.value.height},null,8,Pt)):C("",!0),_("g",Kt,[(p(!0),m(P,null,T(f.practiceStrokes,(w,I)=>(p(),m("path",{class:"stroke practice-stroke",key:I,d:w},null,8,It))),128))]),_("polyline",{class:"stroke current-stroke",points:g(u).map(({x:w,y:I})=>`${w},${I}`).join(" ")},null,8,Bt)],544))}}),At=R(Mt,[["__scopeId","data-v-afa29600"]]),Vt={class:"strokes-figure"},Et=["viewBox"],Nt={class:"controls"},Dt=G({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean,default:!1},practiceMode:{type:Boolean,default:!1}},emits:["practiceDone"],setup(e,{expose:t,emit:n}){const o=e,s=n,r=V(null),i=ge(),u=_e(),l=Ge(),c=$(()=>i.value?.querySelectorAll("path")??[]),a=oe([]),v=$(()=>a.length>0),y=V(!1),k=V(!1),d=V(!1),j=oe([]);function K(x){const h=x.getTotalLength();return[{strokeDasharray:h,strokeDashoffset:h},{strokeDasharray:h,strokeDashoffset:0}]}const f={duration:500,easing:"ease-in-out"};function b(){for(const x of c.value){const h=x.animate(K(x),f);h.pause(),a.push(h)}w()}async function w(){let x=a.at(0);for(;x;)x.play(),await x.finished,a.shift(),x=a.at(0),x&&await ye(100)}function I(){a.at(0)?.pause(),y.value=!0}function M(){a.at(0)?.play(),y.value=!1}function D(x=j.length){const h=c.value[x];if(!h)return;h.style.display="block";const S=h.animate(K(h),f);S.play(),S.finished.then(()=>{h.style.removeProperty("display")})}function ee(x){j.push(x),o.practiceMode&&j.length===c.value.length&&s("practiceDone"),o.practiceMode&&o.autoHint&&j.length<c.value.length&&D()}function J(){k.value=!1,j.splice(0,j.length)}function U(){for(const x of a)x.cancel();a.splice(0,a.length),y.value=!1;for(const x of c.value)for(const h of x.getAnimations())h.cancel()}function te(){if(j.length===0){d.value=!1;return}j.length<c.value.length&&(k.value=!0)}return O(d,x=>{k.value=!1,x?U():J()}),O(()=>o.autoHint,x=>{x&&requestAnimationFrame(async()=>{await Ke(l).toBe(!1),D(0)})},{immediate:!0}),O(()=>o.kanji.codepoint,(x,h)=>{x!==h&&(J(),U(),k.value=!1,d.value!==o.practiceMode&&(d.value=o.practiceMode))},{immediate:!0}),t({clearPracticeStrokes:J,maybeShowAnswer:te}),(x,h)=>(p(),m("section",null,[_("h2",null,[h[8]||(h[8]=L(" Strokes ")),!x.practiceMode&&c.value.length>0?(p(),m(P,{key:0},[L(" ("+B(c.value.length)+") ",1)],64)):C("",!0)]),_("figure",Vt,[g(i)?(p(),m("svg",{key:0,ref_key:"svgEl",ref:r,class:le(["svg",{practicing:d.value}]),viewBox:g(u),onTouchstart:h[1]||(h[1]=S=>{d.value&&S.preventDefault()})},[A(mt,{viewBox:g(u)},null,8,["viewBox"]),A(xe,{strokes:g(i),class:le(["strokes",{comparing:v.value||k.value||c.value.length<=g(j).length,practicing:d.value}])},null,8,["strokes","class"]),d.value?(p(),Y(At,{key:0,"practice-strokes":g(j),animate:v.value,"animate-pause":y.value,onStroke:h[0]||(h[0]=S=>ee(S))},null,8,["practice-strokes","animate","animate-pause"])):C("",!0)],42,Et)):C("",!0),_("figcaption",Nt,[v.value?(p(),m(P,{key:0},[y.value?(p(),Y(H,{key:0,"aria-label":"Play",onClick:h[2]||(h[2]=S=>M())},{default:z(()=>[A(W,{icon:"play"})]),_:1})):(p(),Y(H,{key:1,"aria-label":"Pause",onClick:h[3]||(h[3]=S=>I())},{default:z(()=>[A(W,{icon:"pause"})]),_:1}))],64)):(p(),m(P,{key:1},[d.value&&g(j).length<c.value.length?(p(),Y(H,{key:0,"aria-label":"Show Hint",onClick:h[4]||(h[4]=S=>D())},{default:z(()=>[A(W,{icon:"help-circle"})]),_:1})):(p(),Y(H,{key:1,"aria-label":"Animate Stroke Order",onClick:h[5]||(h[5]=S=>b())},{default:z(()=>[A(W,{icon:"play"})]),_:1}))],64)),x.practiceMode?C("",!0):(p(),Y(H,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${d.value}`,filled:d.value,onClick:h[6]||(h[6]=S=>d.value=!d.value)},{default:z(()=>[A(W,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),d.value?(p(),m(P,{key:3},[h[9]||(h[9]=_("hr",{class:"rule"},null,-1)),A(H,{"aria-label":"Undo",onClick:h[7]||(h[7]=S=>g(j).pop())},{default:z(()=>[A(W,{icon:"rotate-left"})]),_:1})],64)):C("",!0)])])]))}}),rn=R(Dt,[["__scopeId","data-v-9ce5a873"]]),Lt={class:"kanji-title"},Gt={class:"main-meaning meaning"},Rt={class:"labels"},qt={key:0,class:"label freq"},Ot=["data-r"],Tt=["data-r"],Yt={key:0,class:"additional-meanings"},zt={class:"meaning"},Xt=G({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const t=e,n=$(()=>{const{freq:i}=t.kanji;if(!i)return null;if(i<=50)return 50;if(i<=100)return 100;if(i<=200)return 200;if(i<=500)return 500;if(i<=1e3)return 1e3}),{result:o}=Be($(()=>{const i=t.kanji.codepoint;return async()=>(await ke).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(i))})),s=Ae(()=>t.kanji.codepoint);function r(i){return i>.9?"good":i>.7?"fair":"poor"}return(i,u)=>{const l=Ce("RouterLink");return p(),m("header",Lt,[ne(_("h2",{class:"literal",lang:"ja"},B(i.kanji.literal),513),[[ie,!i.hideLiteral]]),ne(_("p",Gt,[_("strong",null,B(i.kanji.meanings?.at(0)),1)],512),[[ie,!i.hideMeaning]]),_("aside",Rt,[n.value&&!g(o)?.some(({name:c})=>c===`news-top-${n.value}`)?(p(),m("span",qt," Top "+B(n.value),1)):C("",!0),g(o)?(p(!0),m(P,{key:1},T(g(o),c=>(p(),Y(l,{to:{name:g(Pe),query:{deck:c.name}},key:c.name,class:"label deck"},{default:z(()=>[L(B(g(Me)(c)),1)]),_:2},1032,["to"]))),128)):C("",!0),g(s)?.write?(p(),m("span",{key:2,class:"label retrievability",title:"Writing Retrievability","data-r":r(g(s).write)}," 書 "+B(g(pe)(g(s).write)),9,Ot)):C("",!0),g(s)?.read?(p(),m("span",{key:3,class:"label retrievability",title:"Reading Retrievability","data-r":r(g(s).read)}," 読 "+B(g(pe)(g(s).read)),9,Tt)):C("",!0)]),i.kanji.meanings?.length>1?ne((p(),m("ul",Yt,[(p(!0),m(P,null,T(i.kanji.meanings.slice(1),c=>(p(),m("li",zt,B(c),1))),256))],512)),[[ie,!i.hideMeaning]]):C("",!0)])}}}),ln=R(Xt,[["__scopeId","data-v-0758661b"]]),Ht={class:"kanji-word-list"},Wt=G({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const t=e,n=Ie(async()=>{const{words:u}=t.kanjiVocab,l=[],c=[],{store:a}=(await ke).transaction("bookmarked-words");for(const v of u)await a.count(v)?l.push(v):c.push(v);return{bookmarked:l,rest:c}},null),o=V(20),s=$(()=>{const u=o.value;if(n.value){const{bookmarked:l,rest:c}=n.value;return[l,c.slice(0,u)]}return[t.kanjiVocab.words.slice(0,u)]});function r(){o.value+=20}function i([{isIntersecting:u}]){u&&r()}return O(()=>t.kanjiVocab.codepoint,(u,l)=>{u!==l&&(o.value=20)}),(u,l)=>(p(),m("section",null,[_("h2",null,"Words ("+B(u.kanjiVocab.words.length)+")",1),_("ul",Ht,[(p(!0),m(P,null,T(s.value,c=>(p(),m(P,null,[(p(!0),m(P,null,T(c,a=>(p(),m("li",{key:a},[A(Ee,{word:a,kanji:u.kanjiVocab.literal,"hide-kanji":u.hideKanji,"hide-reading":u.hideReading,"hide-meaning":u.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),o.value<u.kanjiVocab.words.length?ne((p(),m("button",{key:0,class:"next-page-button",onClick:l[0]||(l[0]=c=>r())},l[1]||(l[1]=[L(" Load More ")]))),[[g(Ve),i]]):C("",!0)]))}}),cn=R(Wt,[["__scopeId","data-v-db833710"]]);export{ln as K,sn as a,rn as b,on as c,cn as d,an as p};
