import{t as j,n as q,e as S,f as G,j as E,k as J,l as C,o as P,q as U,r as z}from"./index-DM9RO-23.js";import{c as g,B as m,V as b,y as B,G as Q,W as Z,u as f,d as F,m as x,a as v,e as p,I as ee,b as M,v as ne,T as te,w as oe,i as W,F as R,h as ae,t as K,J as se,g as k,l as T,o as c,_ as Y}from"./index-DyCUo9BM.js";import{d as ie,_ as re,e as N,W as le,c as ue,b as de,B as ce,V as fe}from"./WordWritingSelect-CEJWBOWv.js";const A=G?window:void 0;function _(e){var t;const o=m(e);return(t=o?.$el)!=null?t:o}function ve(...e){const t=[],o=()=>{t.forEach(n=>n()),t.length=0},l=(n,a,s,r)=>(n.addEventListener(a,s,r),()=>n.removeEventListener(a,s,r)),i=g(()=>{const n=j(m(e[0])).filter(a=>a!=null);return n.every(a=>typeof a!="string")?n:void 0}),u=P(()=>{var n,a;return[(a=(n=i.value)==null?void 0:n.map(s=>_(s)))!=null?a:[A].filter(s=>s!=null),j(m(i.value?e[1]:e[0])),j(f(i.value?e[2]:e[1])),m(i.value?e[3]:e[2])]},([n,a,s,r])=>{if(o(),!n?.length||!a?.length||!s?.length)return;const h=U(r)?{...r}:r;t.push(...n.flatMap(I=>a.flatMap(y=>s.map(w=>l(I,y,w,h)))))},{flush:"post"}),d=()=>{u(),o()};return E(o),d}function he(){const e=b(!1),t=Z();return t&&Q(()=>{e.value=!0},t),e}function me(e){const t=he();return g(()=>(t.value,!!e()))}function $(e,t,o={}){const{root:l,rootMargin:i="0px",threshold:u=0,window:d=A,immediate:n=!0}=o,a=me(()=>d&&"IntersectionObserver"in d),s=g(()=>{const w=m(e);return j(w).map(_).filter(q)});let r=S;const h=b(n),I=a.value?B(()=>[s.value,_(l),h.value],([w,X])=>{if(r(),!h.value||!w.length)return;const O=new IntersectionObserver(t,{root:_(X),rootMargin:i,threshold:u});w.forEach(D=>D&&O.observe(D)),r=()=>{O.disconnect(),r=S}},{immediate:n,flush:"post"}):S,y=()=>{r(),I(),h.value=!1};return E(y),{isSupported:a,isActive:h,pause(){r(),h.value=!1},resume(){h.value=!0},stop:y}}function V(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const Ke={mounted(e,t){typeof t.value=="function"?$(e,t.value):$(e,...t.value)}};function H(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const o=e.parentNode;return!o||o.tagName==="BODY"?!1:H(o)}}function pe(e){const t=e||window.event,o=t.target;return H(o)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const L=new WeakMap;function ge(e,t=!1){const o=b(t);let l=null,i="";B(J(e),n=>{const a=V(m(n));if(a){const s=a;if(L.get(s)||L.set(s,s.style.overflow),s.style.overflow!=="hidden"&&(i=s.style.overflow),s.style.overflow==="hidden")return o.value=!0;if(o.value)return s.style.overflow="hidden"}},{immediate:!0});const u=()=>{const n=V(m(e));!n||o.value||(C&&(l=ve(n,"touchmove",a=>{pe(a)},{passive:!1})),n.style.overflow="hidden",o.value=!0)},d=()=>{const n=V(m(e));!n||!o.value||(C&&l?.(),n.style.overflow=i,L.delete(n),o.value=!1)};return E(d),g({get(){return o.value},set(n){n?u():d()}})}function we(){let e=!1;const t=b(!1);return(o,l)=>{if(t.value=l.value,e)return;e=!0;const i=ge(o,l.value);B(t,u=>i.value=u)}}we();const ke={class:"vocabulary-word"},ye={class:"word",lang:"ja"},je={class:"meaning"},We={key:1,class:"additional-meanings-details"},_e={class:"additional-meanings"},Me={class:"additional-meaning-item"},be={class:"actions"},Be=F({__name:"VocabularyWord",props:{word:{},kanji:{default:null},hideKanji:{type:Boolean,default:!1},hideReading:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1}},setup(e){const t=e,o=g(()=>{const{kanji:n,word:a}=t;return a.meanings?n?a.meanings.filter(s=>s.info&&s.info.startsWith("esp. ")&&z.test(s.info)?s.info.includes(n):s.useWithWriting?s.useWithWriting.some(r=>r.includes(n)):!0):a.meanings:[]}),l=ie(()=>t.word,{kanji:()=>t.kanji,forceReading:()=>t.hideKanji}),i=g(()=>o.value.at(0)),u=x(null),d=g(()=>o.value.slice(1));return B(()=>t.word.id,(n,a)=>{n!==a&&(u.value=null)}),(n,a)=>{const s=ne("RouterLink");return c(),v("div",ke,[p("p",ye,[M(s,{to:f(te)(n.word.id),class:"word-link"},{default:oe(()=>[typeof u.value=="string"?(c(),v(R,{key:0},[ae(K(u.value),1)],64)):(c(),W(re,{key:1,furigana:u.value||f(l),"hide-kanji":n.hideKanji,"hide-reading":n.hideReading,kanji:n.kanji},null,8,["furigana","hide-kanji","hide-reading","kanji"]))]),_:1},8,["to"])]),ee(p("div",je,[i.value?(c(),W(N,{key:0,meaning:i.value},null,8,["meaning"])):k("",!0),d.value.length>0?(c(),v("details",We,[p("summary",null,K(d.value.length)+" more",1),p("ul",_e,[(c(!0),v(R,null,T(d.value,r=>(c(),v("li",Me,[M(N,{meaning:r},null,8,["meaning"])]))),256))])])):k("",!0)],512),[[se,!n.hideMeaning]]),p("div",be,[!n.hideKanji&&!n.hideReading?(c(),W(le,{key:0,modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=r=>u.value=r),word:n.word,default:f(l)},null,8,["modelValue","word","default"])):k("",!0)])])}}}),Ie=Y(Be,[["__scopeId","data-v-1f24553d"]]),Se={class:"word-list-item"},Ve={class:"bullet"},Le={key:1,"aria-label":"Sentences",class:"sentences-section"},Re={class:"sentences"},Ee=F({__name:"WordListItem",props:{word:{},kanji:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const t=e,o=ue(()=>t.word),l=de(()=>t.word);return(i,u)=>(c(),v("article",Se,[p("aside",Ve,[M(ce,{"word-id":i.word,reading:f(o)?.readings?.at(0)?.text,class:"bookmark-button"},null,8,["word-id","reading"])]),f(o)?(c(),W(Ie,{key:0,word:f(o),kanji:i.kanji,"hide-kanji":i.hideKanji,"hide-reading":i.hideReading,"hide-meaning":i.hideMeaning,class:"word-section"},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])):k("",!0),f(l)?(c(),v("section",Le,[p("ul",Re,[(c(!0),v(R,null,T(f(l),d=>(c(),v("li",{key:d,class:"sentence-item"},[M(fe,{"sentence-id":d,"hide-kanji":i.hideKanji?i.kanji:null,"hide-reading":i.hideReading?i.kanji:null,"hide-meaning":i.hideMeaning},null,8,["sentence-id","hide-kanji","hide-reading","hide-meaning"])]))),128))])])):k("",!0)]))}}),Ne=Y(Ee,[["__scopeId","data-v-752ded72"]]);export{Ne as W,Ke as v};
