{"version":3,"file":"KanjiAsideView-C7I6W1qm.js","sources":["../../src/components/KanjiAsideNav.vue","../../src/views/KanjiAsideView.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { deckLabel } from \"../helpers/decks.ts\";\nimport { kanjiRoute } from \"../router.ts\";\nimport { Deck } from \"../types.ts\";\nimport CardAsideNav from \"./CardAsideNav.vue\";\n\ndefineProps<{\n  cardId: number;\n  deck: Deck;\n}>();\n</script>\n\n<template>\n  <CardAsideNav :deck-cards=\"deck.cards\" :card-id=\"cardId\">\n    <template #label>{{ deckLabel(deck) }}</template>\n    <template #card=\"{ cardId: other }\">\n      <RouterLink\n        :to=\"kanjiRoute(String.fromCodePoint(other))\"\n        :class=\"{ 'link-active': other === cardId }\"\n        class=\"link\"\n      >\n        {{ String.fromCodePoint(other) }}\n      </RouterLink>\n    </template>\n  </CardAsideNav>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { useRoute } from \"vue-router\";\n\nimport KanjiAsideNav from \"../components/KanjiAsideNav.vue\";\nimport { db } from \"../db/index.ts\";\nimport { useLiveQuery } from \"../helpers/db.ts\";\n\nconst route = useRoute();\nconst kanjiId = computed(() => {\n  if (typeof route.params.kanji !== \"string\") {\n    return null;\n  }\n\n  return route.params.kanji.codePointAt(0) ?? null;\n});\n\nconst { result: decks } = useLiveQuery(\n  computed(() => {\n    const id = kanjiId.value;\n\n    return async () =>\n      (await db)\n        .transaction(\"decks\")\n        .store.index(\"cards\")\n        .getAll(IDBKeyRange.only(id));\n  }),\n);\n\nconst activeDecks = computed(() => decks.value?.filter(({ active }) => active));\n</script>\n\n<template>\n  <aside v-if=\"kanjiId && activeDecks && activeDecks.length > 0\">\n    <KanjiAsideNav\n      v-for=\"deck of activeDecks\"\n      :key=\"deck.name\"\n      :deck=\"deck\"\n      :card-id=\"kanjiId\"\n      class=\"deck-nav\"\n    />\n  </aside>\n</template>\n\n<style scoped>\n.deck-nav:not(:first-child) {\n  margin-block-start: 1ex;\n\n  @media screen and (max-width: 75ch) {\n    margin-block-start: 0;\n  }\n}\n</style>\n"],"names":["_createBlock","CardAsideNav","deck","cardId","_createTextVNode","_toDisplayString","_unref","deckLabel","_withCtx","other","_createVNode","_component_RouterLink","kanjiRoute","_normalizeClass","route","useRoute","kanjiId","computed","decks","useLiveQuery","id","db","activeDecks","active","_createElementBlock","_hoisted_1","_Fragment","_renderList","KanjiAsideNav"],"mappings":"8YAaEA,EAWeC,EAAA,CAXA,aAAYC,EAAAA,KAAK,MAAQ,UAASC,EAAAA,MAAAA,GACpC,QAAM,IAAqB,CAAlBC,EAAAC,EAAAC,EAAAC,CAAA,EAAUL,EAAAA,IAAI,CAAA,EAAA,CAAA,CAAA,GACvB,KAAIM,EACb,CAMa,CAAA,OAPYC,KAAK,CAC9BC,EAMaC,EAAA,CALV,GAAIL,EAAAM,CAAA,EAAW,OAAO,cAAcH,CAAK,CAAA,EACzC,MAAKI,EAAA,CAAA,CAAA,cAAmBJ,IAAUN,EAAAA,MAAAA,EAC7B,MAAM,CAAA,CAAA,aAEZ,IAAiC,KAA9B,OAAO,cAAcM,CAAK,CAAA,EAAA,CAAA,CAAA,oHCbrC,MAAMK,EAAQC,EAAA,EACRC,EAAUC,EAAS,IACnB,OAAOH,EAAM,OAAO,OAAU,SACzB,KAGFA,EAAM,OAAO,MAAM,YAAY,CAAC,GAAK,IAC7C,EAEK,CAAE,OAAQI,CAAA,EAAUC,EACxBF,EAAS,IAAM,CACb,MAAMG,EAAKJ,EAAQ,MAEnB,MAAO,WACJ,MAAMK,GACJ,YAAY,OAAO,EACnB,MAAM,MAAM,OAAO,EACnB,OAAO,YAAY,KAAKD,CAAE,CAAC,CAClC,CAAC,CAAA,EAGGE,EAAcL,EAAS,IAAMC,EAAM,OAAO,OAAO,CAAC,CAAE,OAAAK,KAAaA,CAAM,CAAC,eAI/DP,EAAA,OAAWM,EAAA,OAAeA,EAAA,MAAY,OAAM,OAAzDE,EAQQ,QAAAC,EAAA,QAPND,EAMEE,EAAA,KAAAC,EALeL,EAAA,MAARpB,QADTF,EAME4B,EAAA,CAJC,IAAK1B,EAAK,KACV,KAAAA,EACA,UAASc,EAAA,MACV,MAAM,UAAA"}