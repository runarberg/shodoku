import{d as X,t as w,n as U,b,e as E,f as q,i as D,g as z,h as G}from"./index-Dy4zg_J2.js";import{j,k as W,c as k,B as J,M as P,d as N,n as Q,o as f,a as v,f as m,h as L,w as Z,F as I,e as x,t as A,b as M,u as y,K as ee,C as ne,D as te,g as _,i as $,_ as F}from"./index-CgdTuyLR.js";import{d as oe,_ as ae,e as C,W as se,g as ie,c as re,B as le,V as ue}from"./WordWritingSelect-CMFaUaA8.js";const H=z?window:void 0;function B(e){var n;const t=w(e);return(n=t==null?void 0:t.$el)!=null?n:t}function de(...e){let n,t,a,d;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,a,d]=e,n=H):[n,t,a,d]=e,!n)return b;Array.isArray(t)||(t=[t]),Array.isArray(a)||(a=[a]);const r=[],u=()=>{r.forEach(l=>l()),r.length=0},o=(l,c,g,p)=>(l.addEventListener(c,g,p),()=>l.removeEventListener(c,g,p)),s=W(()=>[B(n),w(d)],([l,c])=>{if(u(),!l)return;const g=G(c)?{...c}:c;r.push(...t.flatMap(p=>a.map(h=>o(l,p,h,g))))},{immediate:!0,flush:"post"}),i=()=>{s(),u()};return E(i),i}function ce(){const e=j(!1),n=P();return n&&J(()=>{e.value=!0},n),e}function fe(e){const n=ce();return k(()=>(n.value,!!e()))}function K(e,n,t={}){const{root:a,rootMargin:d="0px",threshold:r=0,window:u=H,immediate:o=!0}=t,s=fe(()=>u&&"IntersectionObserver"in u),i=k(()=>{const h=w(e);return(Array.isArray(h)?h:[h]).map(B).filter(U)});let l=b;const c=j(o),g=s.value?W(()=>[i.value,B(a),c.value],([h,T])=>{if(l(),!c.value||!h.length)return;const O=new IntersectionObserver(n,{root:B(T),rootMargin:d,threshold:r});h.forEach(R=>R&&O.observe(R)),l=()=>{O.disconnect(),l=b}},{immediate:o,flush:"post"}):b,p=()=>{l(),g(),c.value=!1};return E(p),{isSupported:s,isActive:c,pause(){l(),c.value=!1},resume(){c.value=!0},stop:p}}function S(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const Re={[X.mounted](e,n){typeof n.value=="function"?K(e,n.value):K(e,...n.value)}};function Y(e){const n=window.getComputedStyle(e);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&e.clientWidth<e.scrollWidth||n.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const t=e.parentNode;return!t||t.tagName==="BODY"?!1:Y(t)}}function ve(e){const n=e||window.event,t=n.target;return Y(t)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}const V=new WeakMap;function he(e,n=!1){const t=j(n);let a=null,d="";W(q(e),o=>{const s=S(w(o));if(s){const i=s;if(V.get(i)||V.set(i,i.style.overflow),i.style.overflow!=="hidden"&&(d=i.style.overflow),i.style.overflow==="hidden")return t.value=!0;if(t.value)return i.style.overflow="hidden"}},{immediate:!0});const r=()=>{const o=S(w(e));!o||t.value||(D&&(a=de(o,"touchmove",s=>{ve(s)},{passive:!1})),o.style.overflow="hidden",t.value=!0)},u=()=>{const o=S(w(e));!o||!t.value||(D&&(a==null||a()),o.style.overflow=d,V.delete(o),t.value=!1)};return E(u),k({get(){return t.value},set(o){o?r():u()}})}function pe(){let e=!1;const n=j(!1);return(t,a)=>{if(n.value=a.value,e)return;e=!0;const d=he(t,a.value);W(n,r=>d.value=r)}}pe();const me={class:"vocabulary-word"},ge={class:"word",lang:"ja"},we={class:"meaning"},ke={key:1,class:"additional-meanings-details"},ye={class:"additional-meanings"},_e={class:"additional-meaning-item"},je={class:"actions"},We=N({__name:"VocabularyWord",props:{word:{},kanji:{default:null},hideKanji:{type:Boolean,default:!1},hideReading:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1}},setup(e){const n=e,t=k(()=>{const{kanji:o,word:s}=n;return s.meanings?o?s.meanings.filter(i=>i.info&&i.info.startsWith("esp. ")&&ie.test(i.info)?i.info.includes(o):i.useWithWriting?i.useWithWriting.some(l=>l.includes(o)):!0):s.meanings:[]}),a=oe(()=>n.word),d=k(()=>t.value.at(0)),r=j(null),u=k(()=>t.value.slice(1));return W(()=>n.word.id,(o,s)=>{o!==s&&(r.value=null)}),(o,s)=>{const i=Q("RouterLink");return f(),v("div",me,[m("p",ge,[L(i,{to:y(ee)(o.word.id),class:"word-link"},{default:Z(()=>[typeof r.value=="string"?(f(),v(I,{key:0},[x(A(r.value),1)],64)):(f(),M(ae,{key:1,furigana:r.value||y(a),"hide-kanji":o.hideKanji,"hide-reading":o.hideReading,kanji:o.kanji},null,8,["furigana","hide-kanji","hide-reading","kanji"]))]),_:1},8,["to"])]),ne(m("div",we,[d.value?(f(),M(C,{key:0,meaning:d.value},null,8,["meaning"])):_("",!0),u.value.length>0?(f(),v("details",ke,[m("summary",null,A(u.value.length)+" more",1),m("ul",ye,[(f(!0),v(I,null,$(u.value,l=>(f(),v("li",_e,[L(C,{meaning:l},null,8,["meaning"])]))),256))])])):_("",!0)],512),[[te,!o.hideMeaning]]),m("div",je,[!o.hideKanji&&!o.hideReading?(f(),M(se,{key:0,modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=l=>r.value=l),word:o.word,default:y(a)},null,8,["modelValue","word","default"])):_("",!0)])])}}}),be=F(We,[["__scopeId","data-v-ac84feb4"]]),Me={class:"word-list-item"},Be={class:"bullet"},Le={key:1,"aria-label":"Sentences",class:"sentences-section"},Se={class:"sentences"},Ve=N({__name:"WordListItem",props:{word:{},kanji:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const n=e,t=re(()=>n.word.word);return(a,d)=>{var r,u,o;return f(),v("article",Me,[m("aside",Be,[L(le,{"word-id":a.word.word,reading:(o=(u=(r=y(t))==null?void 0:r.readings)==null?void 0:u.at(0))==null?void 0:o.text,class:"bookmark-button"},null,8,["word-id","reading"])]),y(t)?(f(),M(be,{key:0,word:y(t),kanji:a.kanji,"hide-kanji":a.hideKanji,"hide-reading":a.hideReading,"hide-meaning":a.hideMeaning,class:"word-section"},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])):_("",!0),a.word.sentences?(f(),v("section",Le,[m("ul",Se,[(f(!0),v(I,null,$(a.word.sentences,s=>(f(),v("li",{key:s,class:"sentence-item"},[L(ue,{"sentence-id":s,"hide-kanji":a.hideKanji?a.kanji:null,"hide-reading":a.hideReading?a.kanji:null,"hide-meaning":a.hideMeaning},null,8,["sentence-id","hide-kanji","hide-reading","hide-meaning"])]))),128))])])):_("",!0)])}}}),De=F(Ve,[["__scopeId","data-v-d54f740b"]]);export{De as W,Re as v};
