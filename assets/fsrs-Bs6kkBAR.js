import{D as d,r as w,c as m}from"./index-BOsLoRk8.js";import{q as g}from"./reviews-CI8qaBcI.js";import{u as p,d as c}from"./db-B7IDTSNy.js";import{i as v}from"./text-p0dDw4FE.js";import{c as u,B as f,E as b,y}from"./index-iqwy-qSw.js";function l(){return u(()=>{const r=d({enable_fuzz:g.value});return w(r)})}function D(r){const a=l(),{result:i}=p(u(()=>{const s=f(r);return async()=>{const n=(await c).transaction("progress").store,t=await n.get([s,"kanji-read"]),o=await n.get([s,"kanji-write"]),e=new Date;return{read:t?a.value.get_retrievability(t.fsrs,e,!1):null,write:o?a.value.get_retrievability(o.fsrs,e,!1):null}}}));return i}function K(r){const a=l(),i=b(new Set);return y(()=>f(r),async s=>{if(!s)return;const n=new Date;for(const t of s)if(v(t)){const o=t.codePointAt(0)??0,e=await(await c).get("progress",[o,"kanji-read"]);if(e){if(e.fsrs.state!==m.Review)continue;a.value.get_retrievability(e.fsrs,n,!1)>.99&&i.add(t)}}},{immediate:!0}),i}export{D as a,K as b,l as u};
