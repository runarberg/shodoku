import{d as h,c as t,m as A,a as i,g as k,e as v,i as p,t as m,u as f,E as g,F as y,l as j,b as C,w as V,h as w,v as N,p as B,x as K,o as a,_ as x,q as L}from"./index-CvwMh420.js";import{d as R}from"./decks-SO1bh7uj.js";import{u as b,d as D}from"./db-CNlb8ZXY.js";const P={key:0,class:"kanji-aside-nav"},S=["open"],E={class:"label"},F={key:0,class:"kanji-deck-index"},M=h({__name:"KanjiAsideNav",props:{cardId:{},deck:{}},setup(_){const s=_,n=t(()=>s.deck.cards.indexOf(s.cardId)),u=t(()=>Math.max(0,n.value-4)),o=t(()=>Math.min(s.deck.cards.length,n.value+5)),r=t(()=>{const e=s.deck.cards,{length:c}=e;return c<=9?e:u.value===0?e.slice(0,9):o.value===c?e.slice(c-9):e.slice(u.value,o.value)}),d=A(!0);return(e,c)=>{const I=K("RouterLink");return n.value!==-1?(a(),i("nav",P,[v("details",{open:d.value,class:"nav-details",onToggle:c[0]||(c[0]=l=>d.value=l.target.open)},[v("summary",null,[v("span",E,m(f(R)(e.deck)),1),d.value?(a(),p(g,{key:0,icon:"chevron-down"})):(a(),p(g,{key:1,icon:"chevron-up"}))]),d.value?(a(),i("ol",F,[(a(!0),i(y,null,j(r.value,l=>(a(),i("li",{key:l},[C(I,{to:f(B)(String.fromCodePoint(l)),class:N([{"kanji-link-active":l===e.cardId},"kanji-link"])},{default:V(()=>[w(m(String.fromCodePoint(l)),1)]),_:2},1032,["to","class"])]))),128))])):k("",!0)],40,S)])):k("",!0)}}}),T=x(M,[["__scopeId","data-v-9ea2fa37"]]),$={key:0},q=h({__name:"KanjiAsideView",setup(_){const s=L(),n=t(()=>typeof s.params.kanji!="string"?null:s.params.kanji.codePointAt(0)??null),{result:u}=b(t(()=>{const r=n.value;return async()=>(await D).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(r))})),o=t(()=>u.value?.filter(({active:r})=>r));return(r,d)=>n.value&&o.value&&o.value.length>0?(a(),i("aside",$,[(a(!0),i(y,null,j(o.value,e=>(a(),p(T,{key:e.name,deck:e,"card-id":n.value,class:"deck-nav"},null,8,["deck","card-id"]))),128))])):k("",!0)}}),G=x(q,[["__scopeId","data-v-576192dc"]]);export{G as default};
