import{L as m,p as v,B as l,c as y,m as f,G as g}from"./index-CLUsYwP5.js";function*h(t){for(const s of t.split(`
`)){const[n,o,u,a,e]=s.split(",");if(!o)continue;const r={id:Number.parseInt(n),literal:o.at(0)??"",strokes:Number.parseInt(u),meaning:a,reading:e};for(const c of o)yield[c,r]}}const k=m("radicals",()=>{const t=f(!1),s=f(null),n=g(new Map);async function o(){if(!t.value){t.value=!0,s.value=null;try{const e=await(await fetch("/data/radicals.csv")).text();for(const[r,c]of h(e))n.set(r,c)}catch(a){s.value=a}finally{t.value=!1}}}async function u(a){const e=a.codePointAt(0);if(!e)return;const r=e?.toString(16).padStart(5,"0"),i=await(await fetch(`/data/kanji-v1/${r}.json`)).json(),d=i.kunYomi.find(p=>!/[.-]/.test(p))??i.kunYomi.at(0)??"";n.set(a,{id:e,literal:a,strokes:i.strokeCount,meaning:i.meanings.at(0)??"",reading:d})}return o(),{radicals:n,sync:o,syncing:t,tryKanji:u}});function j(t){const s=k();return v(()=>{const n=l(t);n&&!s.syncing&&!s.radicals.has(n)&&s.tryKanji(n)}),y(()=>{const n=l(t);return n?s.radicals.get(n)??null:null})}export{j as u};
