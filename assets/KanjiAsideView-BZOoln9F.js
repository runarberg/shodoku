import{d as h,g as c,l as I,j as C,o as e,c as o,b as u,t as f,u as d,i as p,F as j,h as y,f as w,w as N,a as V,k as b,n as B,e as k,_ as x,p as K}from"./index-uL2dLKam.js";import{d as L}from"./decks-huPVwMnz.js";import{A as g,u as R,d as P}from"./db-ywXYyXbd.js";const S={key:0,class:"kanji-aside-nav"},D=["open"],F={class:"label"},M={key:0,class:"kanji-deck-index"},O=h({__name:"KanjiAsideNav",props:{cardId:{},deck:{}},setup(_){const n=_,t=c(()=>n.deck.cards.indexOf(n.cardId)),a=c(()=>Math.max(0,t.value-5)),l=c(()=>Math.min(n.deck.cards.length,a.value+10)),m=c(()=>l.value-a.value-9),s=I(!0);return(i,v)=>{const A=C("RouterLink");return t.value!==-1?(e(),o("nav",S,[u("details",{open:s.value,class:"nav-details",onToggle:v[0]||(v[0]=r=>s.value=r.target.open)},[u("summary",null,[u("span",F,f(d(L)(i.deck)),1),s.value?(e(),p(g,{key:0,icon:"chevron-down"})):(e(),p(g,{key:1,icon:"chevron-up"}))]),s.value?(e(),o("ol",M,[(e(!0),o(j,null,y(i.deck.cards.slice(a.value+m.value,l.value),r=>(e(),o("li",null,[w(A,{to:d(b)(String.fromCodePoint(r)),class:B([{"kanji-link-active":r===i.cardId},"kanji-link"])},{default:N(()=>[V(f(String.fromCodePoint(r)),1)]),_:2},1032,["to","class"])]))),256))])):k("",!0)],40,D)])):k("",!0)}}}),T=x(O,[["__scopeId","data-v-8771d9f4"]]),$={key:0},z=h({__name:"KanjiAsideView",setup(_){const n=K(),t=c(()=>typeof n.params.kanji!="string"?null:n.params.kanji.codePointAt(0)??null),{result:a}=R(async()=>(await P).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(t.value)));return(l,m)=>t.value&&d(a)&&d(a).length>0?(e(),o("aside",$,[(e(!0),o(j,null,y(d(a),s=>(e(),p(T,{key:s.name,deck:s,"card-id":t.value,class:"deck-nav"},null,8,["deck","card-id"]))),128))])):k("",!0)}}),G=x(z,[["__scopeId","data-v-6fb0da2c"]]);export{G as default};
