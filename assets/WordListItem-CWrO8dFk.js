import{a as X,t as k,b as G,e as b,f as O,g as U,h as D,j as q,k as z}from"./reviews-vBeA8rIc.js";import{k as j,l as W,c as y,D as J,O as P,d as N,p as Q,o as f,a as v,b as g,e as S,w as Z,F as V,g as x,t as A,f as M,u as p,M as ee,G as ne,H as te,h as _,j as $,_ as F}from"./index-BOg8xiez.js";import{d as oe,_ as ae,e as C,W as se,c as ie,b as re,B as le,V as ue}from"./WordWritingSelect-ZaqMOUmN.js";import{c as de}from"./fsrs-CiIXS6Cp.js";const H=q?window:void 0;function B(e){var n;const t=k(e);return(n=t==null?void 0:t.$el)!=null?n:t}function ce(...e){let n,t,i,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,i,a]=e,n=H):[n,t,i,a]=e,!n)return b;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const u=[],d=()=>{u.forEach(l=>l()),u.length=0},o=(l,c,w,m)=>(l.addEventListener(c,w,m),()=>l.removeEventListener(c,w,m)),r=W(()=>[B(n),k(a)],([l,c])=>{if(d(),!l)return;const w=z(c)?{...c}:c;u.push(...t.flatMap(m=>i.map(h=>o(l,m,h,w))))},{immediate:!0,flush:"post"}),s=()=>{r(),d()};return O(s),s}function fe(){const e=j(!1),n=P();return n&&J(()=>{e.value=!0},n),e}function ve(e){const n=fe();return y(()=>(n.value,!!e()))}function K(e,n,t={}){const{root:i,rootMargin:a="0px",threshold:u=0,window:d=H,immediate:o=!0}=t,r=ve(()=>d&&"IntersectionObserver"in d),s=y(()=>{const h=k(e);return(Array.isArray(h)?h:[h]).map(B).filter(G)});let l=b;const c=j(o),w=r.value?W(()=>[s.value,B(i),c.value],([h,T])=>{if(l(),!c.value||!h.length)return;const E=new IntersectionObserver(n,{root:B(T),rootMargin:a,threshold:u});h.forEach(R=>R&&E.observe(R)),l=()=>{E.disconnect(),l=b}},{immediate:o,flush:"post"}):b,m=()=>{l(),w(),c.value=!1};return O(m),{isSupported:r,isActive:c,pause(){l(),c.value=!1},resume(){c.value=!0},stop:m}}function I(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const Ae={[X.mounted](e,n){typeof n.value=="function"?K(e,n.value):K(e,...n.value)}};function Y(e){const n=window.getComputedStyle(e);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&e.clientWidth<e.scrollWidth||n.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const t=e.parentNode;return!t||t.tagName==="BODY"?!1:Y(t)}}function he(e){const n=e||window.event,t=n.target;return Y(t)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}const L=new WeakMap;function pe(e,n=!1){const t=j(n);let i=null,a="";W(U(e),o=>{const r=I(k(o));if(r){const s=r;if(L.get(s)||L.set(s,s.style.overflow),s.style.overflow!=="hidden"&&(a=s.style.overflow),s.style.overflow==="hidden")return t.value=!0;if(t.value)return s.style.overflow="hidden"}},{immediate:!0});const u=()=>{const o=I(k(e));!o||t.value||(D&&(i=ce(o,"touchmove",r=>{he(r)},{passive:!1})),o.style.overflow="hidden",t.value=!0)},d=()=>{const o=I(k(e));!o||!t.value||(D&&(i==null||i()),o.style.overflow=a,L.delete(o),t.value=!1)};return O(d),y({get(){return t.value},set(o){o?u():d()}})}function me(){let e=!1;const n=j(!1);return(t,i)=>{if(n.value=i.value,e)return;e=!0;const a=pe(t,i.value);W(n,u=>a.value=u)}}me();const ge={class:"vocabulary-word"},we={class:"word",lang:"ja"},ke={class:"meaning"},ye={key:1,class:"additional-meanings-details"},_e={class:"additional-meanings"},je={class:"additional-meaning-item"},We={class:"actions"},be=N({__name:"VocabularyWord",props:{word:{},kanji:{default:null},hideKanji:{type:Boolean,default:!1},hideReading:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1}},setup(e){const n=e,t=y(()=>{const{kanji:o,word:r}=n;return r.meanings?o?r.meanings.filter(s=>s.info&&s.info.startsWith("esp. ")&&de.test(s.info)?s.info.includes(o):s.useWithWriting?s.useWithWriting.some(l=>l.includes(o)):!0):r.meanings:[]}),i=oe(()=>n.word),a=y(()=>t.value.at(0)),u=j(null),d=y(()=>t.value.slice(1));return W(()=>n.word.id,(o,r)=>{o!==r&&(u.value=null)}),(o,r)=>{const s=Q("RouterLink");return f(),v("div",ge,[g("p",we,[S(s,{to:p(ee)(o.word.id),class:"word-link"},{default:Z(()=>[typeof u.value=="string"?(f(),v(V,{key:0},[x(A(u.value),1)],64)):(f(),M(ae,{key:1,furigana:u.value||p(i),"hide-kanji":o.hideKanji,"hide-reading":o.hideReading,kanji:o.kanji},null,8,["furigana","hide-kanji","hide-reading","kanji"]))]),_:1},8,["to"])]),ne(g("div",ke,[a.value?(f(),M(C,{key:0,meaning:a.value},null,8,["meaning"])):_("",!0),d.value.length>0?(f(),v("details",ye,[g("summary",null,A(d.value.length)+" more",1),g("ul",_e,[(f(!0),v(V,null,$(d.value,l=>(f(),v("li",je,[S(C,{meaning:l},null,8,["meaning"])]))),256))])])):_("",!0)],512),[[te,!o.hideMeaning]]),g("div",We,[!o.hideKanji&&!o.hideReading?(f(),M(se,{key:0,modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=l=>u.value=l),word:o.word,default:p(i)},null,8,["modelValue","word","default"])):_("",!0)])])}}}),Me=F(be,[["__scopeId","data-v-ac84feb4"]]),Be={class:"word-list-item"},Se={class:"bullet"},Ie={key:1,"aria-label":"Sentences",class:"sentences-section"},Le={class:"sentences"},Ve=N({__name:"WordListItem",props:{word:{},kanji:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const n=e,t=ie(()=>n.word),i=re(()=>n.word);return(a,u)=>{var d,o,r;return f(),v("article",Be,[g("aside",Se,[S(le,{"word-id":a.word,reading:(r=(o=(d=p(t))==null?void 0:d.readings)==null?void 0:o.at(0))==null?void 0:r.text,class:"bookmark-button"},null,8,["word-id","reading"])]),p(t)?(f(),M(Me,{key:0,word:p(t),kanji:a.kanji,"hide-kanji":a.hideKanji,"hide-reading":a.hideReading,"hide-meaning":a.hideMeaning,class:"word-section"},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])):_("",!0),p(i)?(f(),v("section",Ie,[g("ul",Le,[(f(!0),v(V,null,$(p(i),s=>(f(),v("li",{key:s,class:"sentence-item"},[S(ue,{"sentence-id":s,"hide-kanji":a.hideKanji?a.kanji:null,"hide-reading":a.hideReading?a.kanji:null,"hide-meaning":a.hideMeaning},null,8,["sentence-id","hide-kanji","hide-reading","hide-meaning"])]))),128))])])):_("",!0)])}}}),Ce=F(Ve,[["__scopeId","data-v-752ded72"]]);export{Ce as W,Ae as v};
