import{u as K,D as Q,Y as D,k as F,Z as J,l as W,$ as X,L as Y,O as Z,a0 as q,a1 as ee,X as V,a2 as I,v as te,c as ne}from"./index-wKkOPtT6.js";import{d as re,l as ie}from"./channels-Cq-RpcWF.js";function oe(e){return X()?(Y(e),!0):!1}function b(e){return typeof e=="function"?e():K(e)}const Fe={mounted:"mounted",updated:"updated",unmounted:"unmounted"},k=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ne=e=>e!=null,ae=Object.prototype.toString,se=e=>ae.call(e)==="[object Object]",N=()=>{},Pe=ue();function ue(){var e,n;return k&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function le(e,n){function t(...r){return new Promise((a,s)=>{Promise.resolve(e(()=>n.apply(this,r),{fn:n,thisArg:this,args:r})).then(a).catch(s)})}return t}const H=e=>e();function ce(e,n={}){let t,r,a=N;const s=m=>{clearTimeout(m),a(),a=N};return m=>{const y=b(e),f=b(n.maxWait);return t&&s(t),y<=0||f!==void 0&&f<=0?(r&&(s(r),r=null),Promise.resolve(m())):new Promise((u,i)=>{a=n.rejectOnCancel?i:u,f&&!r&&(r=setTimeout(()=>{t&&s(t),r=null,u(m())},f)),t=setTimeout(()=>{r&&s(r),r=null,u(m())},y)})}}function fe(e=H){const n=F(!0);function t(){n.value=!1}function r(){n.value=!0}const a=(...s)=>{n.value&&e(...s)};return{isActive:J(n),pause:t,resume:r,eventFilter:a}}function B(e,n=!1,t="Timeout"){return new Promise((r,a)=>{setTimeout(n?()=>a(t):r,e)})}function de(e){return Z()}function _e(...e){if(e.length!==1)return q(...e);const n=e[0];return typeof n=="function"?J(ee(()=>({get:n,set:N}))):F(n)}function $(e,n,t={}){const{eventFilter:r=H,...a}=t;return W(e,le(r,n),a)}function pe(e,n,t={}){const{eventFilter:r,...a}=t,{eventFilter:s,pause:g,resume:m,isActive:y}=fe(r);return{stop:$(e,n,{...a,eventFilter:s}),pause:g,resume:m,isActive:y}}function me(e,n=!0,t){de()?Q(e,t):n?e():D(e)}function L(e,n=!1){function t(i,{flush:l="sync",deep:c=!1,timeout:p,throwOnTimeout:h}={}){let d=null;const A=[new Promise(T=>{d=W(e,O=>{i(O)!==n&&(d?d():D(()=>d==null?void 0:d()),T(O))},{flush:l,deep:c,immediate:!0})})];return p!=null&&A.push(B(p,h).then(()=>b(e)).finally(()=>d==null?void 0:d())),Promise.race(A)}function r(i,l){if(!V(i))return t(O=>O===i,l);const{flush:c="sync",deep:p=!1,timeout:h,throwOnTimeout:d}=l??{};let v=null;const T=[new Promise(O=>{v=W([e,i],([E,C])=>{n!==(E===C)&&(v?v():D(()=>v==null?void 0:v()),O(E))},{flush:c,deep:p,immediate:!0})})];return h!=null&&T.push(B(h,d).then(()=>b(e)).finally(()=>(v==null||v(),b(e)))),Promise.race(T)}function a(i){return t(l=>!!l,i)}function s(i){return r(null,i)}function g(i){return r(void 0,i)}function m(i){return t(Number.isNaN,i)}function y(i,l){return t(c=>{const p=Array.from(c);return p.includes(i)||p.includes(b(i))},l)}function f(i){return u(1,i)}function u(i=1,l){let c=-1;return t(()=>(c+=1,c>=i),l)}return Array.isArray(b(e))?{toMatch:t,toContains:y,changed:f,changedTimes:u,get not(){return L(e,!n)}}:{toMatch:t,toBe:r,toBeTruthy:a,toBeNull:s,toBeNaN:m,toBeUndefined:g,changed:f,changedTimes:u,get not(){return L(e,!n)}}}function je(e){return L(e)}function De(e,n,t={}){const{debounce:r=0,maxWait:a=void 0,...s}=t;return $(e,n,{...s,eventFilter:ce(r,{maxWait:a})})}function We(e,n,t){let r;V(t)?r={evaluating:t}:r={};const{lazy:a=!1,evaluating:s=void 0,shallow:g=!0,onError:m=N}=r,y=F(!a),f=g?I(n):F(n);let u=0;return te(async i=>{if(!y.value)return;u++;const l=u;let c=!1;s&&Promise.resolve().then(()=>{s.value=!0});try{const p=await e(h=>{i(()=>{s&&(s.value=!1),c||h()})});l===u&&(f.value=p)}catch(p){m(p)}finally{s&&l===u&&(s.value=!1),c=!0}}),a?ne(()=>(y.value=!0,f.value)):f}const z=k?window:void 0;function we(e){var n;const t=b(e);return(n=t==null?void 0:t.$el)!=null?n:t}function x(...e){let n,t,r,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,r,a]=e,n=z):[n,t,r,a]=e,!n)return N;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const s=[],g=()=>{s.forEach(u=>u()),s.length=0},m=(u,i,l,c)=>(u.addEventListener(i,l,c),()=>u.removeEventListener(i,l,c)),y=W(()=>[we(n),b(a)],([u,i])=>{if(g(),!u)return;const l=se(i)?{...i}:i;s.push(...t.flatMap(c=>r.map(p=>m(u,c,p,l))))},{immediate:!0,flush:"post"}),f=()=>{y(),g()};return oe(f),f}const _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j="__vueuse_ssr_handlers__",he=ye();function ye(){return j in _||(_[j]=_[j]||{}),_[j]}function ge(e,n){return he[e]||n}function ve(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Se={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},R="vueuse-storage";function be(e,n,t,r={}){var a;const{flush:s="pre",deep:g=!0,listenToStorageChanges:m=!0,writeDefaults:y=!0,mergeDefaults:f=!1,shallow:u,window:i=z,eventFilter:l,onError:c=o=>{console.error(o)},initOnMounted:p}=r,h=(u?I:F)(typeof n=="function"?n():n);if(!t)try{t=ge("getDefaultStorage",()=>{var o;return(o=z)==null?void 0:o.localStorage})()}catch(o){c(o)}if(!t)return h;const d=b(n),v=ve(d),A=(a=r.serializer)!=null?a:Se[v],{pause:T,resume:O}=pe(h,()=>C(h.value),{flush:s,deep:g,eventFilter:l});i&&m&&me(()=>{t instanceof Storage?x(i,"storage",P):x(i,R,U),p&&P()}),p||P();function E(o,w){if(i){const S={key:e,oldValue:o,newValue:w,storageArea:t};i.dispatchEvent(t instanceof Storage?new StorageEvent("storage",S):new CustomEvent(R,{detail:S}))}}function C(o){try{const w=t.getItem(e);if(o==null)E(w,null),t.removeItem(e);else{const S=A.write(o);w!==S&&(t.setItem(e,S),E(w,S))}}catch(w){c(w)}}function G(o){const w=o?o.newValue:t.getItem(e);if(w==null)return y&&d!=null&&t.setItem(e,A.write(d)),d;if(!o&&f){const S=A.read(w);return typeof f=="function"?f(S,d):v==="object"&&!Array.isArray(S)?{...d,...S}:S}else return typeof w!="string"?w:A.read(w)}function P(o){if(!(o&&o.storageArea!==t)){if(o&&o.key==null){h.value=d;return}if(!(o&&o.key!==e)){T();try{(o==null?void 0:o.newValue)!==A.write(h.value)&&(h.value=G(o))}catch(w){c(w)}finally{o?D(O):O()}}}}function U(o){P(o.detail)}return h}function M(e,n,t={}){const{window:r=z}=t;return be(e,n,r==null?void 0:r.localStorage,t)}const Ae=M("shodoku.app.preferences.limit.due",50),Oe=M("shodoku.app.preferences.limit.new",10),ze=M("shodoku.app.preferences.fsrs.fuzz-enabled",!0);async function Ce(e={new:Oe.value,due:Ae.value}){return await(await re).add("review-limits",{time:new Date,count:e}),ie.postMessage("review-limit-increased")}export{Fe as a,Ne as b,We as c,Ae as d,N as e,oe as f,_e as g,Pe as h,Ce as i,k as j,se as k,ze as l,Oe as n,b as t,je as u,De as w};
