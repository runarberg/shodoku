import{g as d,s as w,i as g,S as m}from"./index-DM9RO-23.js";import{d as p}from"./reviews-3IHrIhKH.js";import{u as v,d as c}from"./db-DFxFyH6D.js";import{c as u,B as f,E as b,y}from"./index-DyCUo9BM.js";function l(){return u(()=>{const s=d({enable_fuzz:p.value});return w(s)})}function S(s){const r=l(),{result:i}=v(u(()=>{const a=f(s);return async()=>{const n=(await c).transaction("progress").store,e=await n.get([a,"kanji-read"]),o=await n.get([a,"kanji-write"]),t=new Date;return{read:e?r.value.get_retrievability(e.fsrs,t,!1):null,write:o?r.value.get_retrievability(o.fsrs,t,!1):null}}}));return i}function _(s){const r=l(),i=b(new Set);return y(()=>f(s),async a=>{if(!a)return;const n=new Date;for(const e of a)if(g(e)){const o=e.codePointAt(0)??0,t=await(await c).get("progress",[o,"kanji-read"]);if(t){if(t.fsrs.state!==m.Review)continue;r.value.get_retrievability(t.fsrs,n,!1)>.99&&i.add(e)}}},{immediate:!0}),i}export{S as a,_ as b,l as u};
