{"version":3,"file":"KanjiWordList-Bkqv3Okt.js","sources":["../../node_modules/yta/src/sync/consumers/group-by.js","../../src/helpers/kanjivg.ts","../../src/components/KanjiStrokesGroup.vue","../../src/components/KanjiComponentItem.vue","../../src/components/KanjiComponents.vue","../../src/components/KanjiReadings.vue","../../src/components/KanjiStrokesBackground.vue","../../node_modules/@luncheon/simplify-svg-path/index.js","../../src/components/KanjiStrokesPracticeCanvas.vue","../../src/components/KanjiStrokes.vue","../../src/components/KanjiTitle.vue","../../src/components/KanjiWordList.vue"],"sourcesContent":["/**\n * Collect the items of the iterator into a map of arrays keyed by the return\n * value of your key generator function.\n *\n * Note we return a `Map` which natively implements `Symbol.iterator` which\n * means you are free to chain another operator after it’s consumed.\n *\n * ```js\n * import { pipe } from \"yta\";\n * import { group-by, map, of } from \"yta/sync\";\n *\n * pipe(\n *   of(\n *     { name: \"foo\", value: 5 },\n *     { name: \"foo\", value: 42 },\n *     { name: \"bar\", value: 101 },\n *     { name: \"foo\", value: 13 },\n *     { name: \"bar\", value: 2 },\n *   ),\n *   groupBy(({ name }) => name),\n *   map(([key, values]) => [key, values.map(({ value }) => value)]),\n *   Object.fromEntries,\n * );\n * // => { \"foo\": [5, 42, 13], \"bar\": [101, 2] }\n * ```\n *\n * **See also:**\n *\n * [The native `Map` object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)\n *\n * @template A\n * @template K\n * @param {(item: A) => K} getKey\n * @returns {(items: Iterable<A>) => Map<K, A[]>}\n */\nexport default function groupBy(getKey) {\n  return (items) => {\n    /** @type {Map<K, A[]>} */\n    const map = new Map();\n\n    for (const item of items) {\n      const key = getKey(item);\n      let values = map.get(key);\n\n      if (!values) {\n        values = [];\n        map.set(key, values);\n      }\n\n      values.push(item);\n    }\n\n    return map;\n  };\n}\n","import {\n  computed,\n  ComputedRef,\n  inject,\n  InjectionKey,\n  MaybeRefOrGetter,\n  provide,\n  Ref,\n  ref,\n  toValue,\n  watch,\n} from \"vue\";\n\nimport { KanjiComponent } from \"../types.ts\";\n\ntype KanjiVGStore = {\n  strokesEl: Ref<SVGGElement | null>;\n  viewBox: Ref<string | null>;\n  components: ComputedRef<Map<string, KanjiComponent>>;\n  syncing: Ref<boolean>;\n};\n\nconst KANJIVG_NAMESPACE = \"http://kanjivg.tagaini.net\";\nconst KANJIVG_KEY: InjectionKey<KanjiVGStore> = Symbol(\"kanjivg\");\n\nconst RADICAL_TYPES = [\"general\", \"tradit\", \"nelson\"];\n\nconst parser = new DOMParser();\n\nfunction gatherPositions(el: SVGElement): string[] {\n  const positions = [];\n\n  let ancestor = el.closest(\"[data-position]\");\n  while (ancestor instanceof SVGElement) {\n    positions.push(ancestor.dataset.position as string);\n    ancestor = ancestor.parentElement?.closest(\"[data-position]\") ?? null;\n  }\n\n  return positions;\n}\n\nexport function provideKanjiVG(hex: MaybeRefOrGetter<string | null>) {\n  const strokesEl = ref<SVGGElement | null>(null);\n  const viewBox = ref<string | null>(null);\n  const syncing = ref(false);\n\n  watch(\n    () => toValue(hex),\n    async (hexValue) => {\n      if (!hexValue) {\n        return;\n      }\n\n      syncing.value = true;\n\n      try {\n        const response = await fetch(`/kanjivg/kanji/${hexValue}.svg`);\n        const svgText = await response.text();\n        const svg = parser.parseFromString(svgText, \"image/svg+xml\");\n\n        if (svg.documentElement instanceof SVGSVGElement) {\n          const { x, y, width, height } = svg.documentElement.viewBox.baseVal;\n\n          viewBox.value = `${x},${y},${width},${height}`;\n        }\n\n        const strokes = svg.getElementById(\n          `kvg:${hexValue}`,\n        ) as SVGGElement | null;\n\n        if (strokes) {\n          for (const el of [...strokes.querySelectorAll(\"*\"), strokes]) {\n            if (!(el instanceof SVGElement)) {\n              continue;\n            }\n\n            for (const attr of [...el.attributes]) {\n              if (attr.namespaceURI === KANJIVG_NAMESPACE) {\n                el.dataset[attr.localName] = attr.value;\n                el.removeAttributeNS(KANJIVG_NAMESPACE, attr.localName);\n              }\n            }\n\n            el.removeAttribute(\"xmlns:kvg\");\n          }\n        }\n\n        strokesEl.value = strokes;\n      } finally {\n        syncing.value = false;\n      }\n    },\n    { immediate: true },\n  );\n\n  const components = computed(() => {\n    const group = strokesEl.value;\n\n    if (!group) {\n      return new Map();\n    }\n\n    const map = new Map<string, KanjiComponent[]>();\n    const radicals: Record<string, string> = {};\n\n    function insertComponent(el: SVGGElement) {\n      if (el.dataset.part && Number.parseInt(el.dataset.part) > 1) {\n        return;\n      }\n\n      const literal = el.dataset.element as string;\n      const info = {\n        element: literal,\n        original: el.dataset.original ?? null,\n        position: gatherPositions(el),\n        radical: el.dataset.radical ?? null,\n        phon: el.dataset.phon ?? null,\n      };\n\n      let found = map.get(literal);\n      if (!found) {\n        found = [info];\n        map.set(literal, found);\n      } else {\n        found.push(info);\n      }\n\n      if (info.radical) {\n        radicals[info.radical] = literal;\n      }\n    }\n\n    if (group.dataset.radical) {\n      insertComponent(group);\n    }\n\n    for (const el of group.querySelectorAll<SVGGElement>(\"g[data-element]\")) {\n      insertComponent(el);\n    }\n\n    const sorted = new Map<string, KanjiComponent[]>();\n    for (const type of RADICAL_TYPES) {\n      const literal = radicals[type];\n      const component = map.get(literal);\n      if (component) {\n        component.sort((a, b) => {\n          if (a.radical) {\n            if (b.radical) {\n              return (\n                RADICAL_TYPES.indexOf(a.radical) -\n                RADICAL_TYPES.indexOf(b.radical)\n              );\n            }\n\n            return -1;\n          }\n          if (b.radical) {\n            return -1;\n          }\n\n          return 0;\n        });\n\n        sorted.set(literal, component);\n        map.delete(literal);\n      }\n    }\n\n    for (const [literal, component] of map) {\n      sorted.set(literal, component);\n    }\n\n    return sorted;\n  });\n\n  provide(KANJIVG_KEY, { strokesEl, viewBox, components, syncing });\n}\n\nexport function useKanjiVG(): ComputedRef<SVGGElement | null> {\n  const store = inject(KANJIVG_KEY, null);\n\n  return computed(() => {\n    const clone = store?.strokesEl.value?.cloneNode(true) as SVGGElement | null;\n\n    return clone ?? null;\n  });\n}\n\nexport function useKanjiVGViewBox(): ComputedRef<string> {\n  const store = inject(KANJIVG_KEY, null);\n\n  return computed(() => store?.viewBox.value ?? \"0,0,109,109\");\n}\n\nexport function useKanjiVGComponents(): ComputedRef<\n  Map<string, KanjiComponent[]>\n> {\n  const store = inject(KANJIVG_KEY, null);\n\n  return computed(() => store?.components.value ?? new Map());\n}\n\nexport function useKanjiVGSyncing(): ComputedRef<boolean> {\n  const store = inject(KANJIVG_KEY, null);\n\n  return computed(() => store?.syncing.value ?? false);\n}\n","<script setup lang=\"ts\">\nimport { onMounted, ref, watch } from \"vue\";\n\nconst props = defineProps<{\n  strokes: SVGGElement;\n}>();\n\nconst container = ref<SVGGElement | null>(null);\n\nfunction render() {\n  container.value?.replaceChildren(props.strokes ?? \"\");\n}\n\nwatch(() => props.strokes, render);\n\nonMounted(() => {\n  render();\n});\n</script>\n\n<template>\n  <g ref=\"container\" class=\"kanji-strokes\" />\n</template>\n\n<style scoped>\n.kanji-strokes {\n  fill: none;\n  stroke: currentcolor;\n  stroke-width: 3px;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, watchEffect } from \"vue\";\n\nimport { useKanjiComponent } from \"../helpers/kanji-components.ts\";\nimport { useKanjiVG, useKanjiVGViewBox } from \"../helpers/kanjivg.ts\";\nimport { kanjiComponentRoute } from \"../router.ts\";\nimport { KanjiComponent } from \"../types.ts\";\nimport KanjiStrokesGroup from \"./KanjiStrokesGroup.vue\";\n\nconst props = defineProps<{\n  literal: string;\n  original?: string | null;\n  parts: KanjiComponent[];\n}>();\n\nconst kanjiVG = useKanjiVG();\nconst viewBox = useKanjiVGViewBox();\n\nconst radical = computed(() => {\n  for (const part of props.parts) {\n    if (part.radical) {\n      return part.radical;\n    }\n  }\n\n  return null;\n});\n\nconst phonetic = computed(() => {\n  for (const part of props.parts) {\n    if (part.phon) {\n      return part.phon;\n    }\n  }\n\n  return null;\n});\n\nconst componentInfo = useKanjiComponent(() => props.literal);\nconst original = computed(() => props.parts.at(0)?.original);\nconst originalComponentInfo = useKanjiComponent(original);\n\nconst meaning = computed(\n  () =>\n    originalComponentInfo.value?.radical?.en ??\n    originalComponentInfo.value?.meaning ??\n    componentInfo.value?.radical?.en ??\n    componentInfo?.value?.meaning,\n);\n\nconst reading = computed(\n  () =>\n    originalComponentInfo.value?.radical?.jp ??\n    originalComponentInfo.value?.reading ??\n    componentInfo.value?.radical?.jp ??\n    componentInfo?.value?.reading,\n);\n\nconst radicalNumber = computed(\n  () =>\n    originalComponentInfo.value?.radical?.number ??\n    componentInfo.value?.radical?.number,\n);\n\nconst isCDPCodePoint = computed(() => props.literal.startsWith(\"CDP-\"));\n\n// These are exceptions from the kanjivg dataset. These are using the\n// characters from the radical unicode block instead of the CJK\n// codeblock as is usual. In these cases, the whole character is the\n// only one denoted with the CJK block while the parts are all from\n// the radical block.\n//\n// See: https://kanjivg.tagaini.net/radicals.html#other-radicals\nconst rogueCJKRadicalPairs = [\n  [\"\\u{5f50}\", \"\\u{2e95}\"],\n  [\"\\u{72ad}\", \"\\u{2ea8}\"],\n  [\"\\u{961d}\", \"\\u{2ed6}\"],\n];\nfunction replaceCJKRadical(literal: string): string {\n  for (const [cjkBlock, radicalBlock] of rogueCJKRadicalPairs) {\n    if (literal === cjkBlock) {\n      return radicalBlock;\n    }\n  }\n\n  return literal;\n}\n\nfunction accentColorOffset(deg: number): string {\n  return `oklch(from var(--accent-color) l c ${deg + 3})`;\n}\n\nwatchEffect(() => {\n  const strokes = kanjiVG.value;\n\n  if (!strokes) {\n    return;\n  }\n\n  if (\n    strokes.dataset.element === props.literal &&\n    (!props.original || props.original === strokes.dataset.original)\n  ) {\n    if (\n      strokes.dataset.radical === \"general\" ||\n      strokes.dataset.radical === \"tradit\"\n    ) {\n      strokes.style.color = \"var(--green)\";\n    } else if (\n      strokes.dataset.radical === \"nelson\" ||\n      strokes.dataset.radical === \"jis\"\n    ) {\n      strokes.style.color = \"var(--bluegreen)\";\n    } else if (strokes.dataset.phon === props.literal) {\n      strokes.style.color = \"var(--gold)\";\n    } else {\n      strokes.style.color = accentColorOffset(180);\n    }\n  }\n\n  let i = -1;\n  for (const group of strokes.querySelectorAll<SVGGElement>(\n    `g[data-element=\"${props.literal}\"]`,\n  )) {\n    if (props.original && props.original !== group.dataset.original) {\n      continue;\n    }\n\n    if (\n      group.dataset.radical === \"general\" ||\n      group.dataset.radical === \"tradit\"\n    ) {\n      group.style.color = \"var(--green)\";\n      continue;\n    }\n\n    if (group.dataset.radical === \"nelson\" || group.dataset.radical === \"jis\") {\n      group.style.color = \"var(--bluegreen)\";\n      continue;\n    }\n\n    if (group.dataset.phon) {\n      group.style.color = \"var(--gold)\";\n      continue;\n    }\n\n    if (!group.dataset.part || group.dataset.part === \"1\") {\n      i += 1;\n    }\n\n    group.style.color = accentColorOffset(240 + 63 * i);\n  }\n});\n</script>\n\n<template>\n  <RouterLink\n    :to=\"kanjiComponentRoute(replaceCJKRadical(literal))\"\n    class=\"kanji-component-item\"\n  >\n    <svg v-if=\"kanjiVG\" :viewBox=\"viewBox\" class=\"kanji-component-strokes\">\n      <KanjiStrokesGroup class=\"strokes-group\" :strokes=\"kanjiVG\" />\n    </svg>\n\n    <div class=\"component-info\">\n      <span v-if=\"!isCDPCodePoint\" class=\"literal\">{{ literal }}</span>\n\n      <p class=\"meaning\">\n        <strong>{{ meaning }}</strong>\n        <span v-if=\"original\" class=\"original\" lang=\"ja\"> {{ original }}</span>\n        <span v-if=\"reading\" lang=\"ja\"> ({{ reading }})</span>\n      </p>\n\n      <div class=\"tags\">\n        <span\n          v-if=\"radical\"\n          class=\"is-radical\"\n          :class=\"{\n            'is-nelson': radical === 'nelson',\n            'is-jis': radical === 'jis',\n          }\"\n        >\n          <template v-if=\"radical === 'nelson'\">Nelson radical</template>\n          <template v-else-if=\"radical === 'jis'\">JIS radical</template>\n          <template v-else>Radical</template>\n\n          <template v-if=\"radicalNumber\">&nbsp;{{ radicalNumber }}</template>\n        </span>\n\n        <span v-if=\"phonetic\" class=\"is-phonetic\">Phonetic</span>\n      </div>\n    </div>\n  </RouterLink>\n</template>\n\n<style scoped>\n.kanji-component-item {\n  color: inherit;\n  column-gap: 1em;\n  display: flex;\n  text-decoration: none;\n}\n\n.kanji-component-strokes {\n  background: var(--background-strong);\n  block-size: 5em;\n  border-radius: 1ex;\n  flex-shrink: 0;\n\n  & .strokes-group {\n    color: light-dark(var(--light-gray), var(--medium-dark-gray));\n  }\n}\n\n.component-info {\n  align-items: start;\n  align-self: center;\n  column-gap: 1em;\n  display: grid;\n  grid-template:\n    \"literal tags\" min-content\n    \"literal meaning\" 1fr;\n  justify-content: start;\n}\n\n.literal {\n  font-size: 3em;\n  font-weight: normal;\n  grid-area: literal;\n  line-height: 1em;\n}\n\n.meaning {\n  grid-area: meaning;\n  margin: 0;\n\n  & strong {\n    text-transform: capitalize;\n  }\n\n  & .original {\n    padding-inline-start: 1ex;\n  }\n}\n\n.tags {\n  column-gap: 0.5ex;\n  display: flex;\n  grid-area: tags;\n}\n\n.is-radical,\n.is-phonetic {\n  border-radius: 1ex;\n  color: var(--background-strong);\n  font-size: 0.6em;\n  font-weight: 600;\n  padding: 0.5ex 1ex;\n  justify-self: start;\n}\n\n.is-radical {\n  background: var(--green);\n\n  &.is-nelson,\n  &.is-jis {\n    background-color: var(--bluegreen);\n  }\n}\n\n.is-phonetic {\n  background: var(--gold);\n}\n</style>\n","<script setup lang=\"ts\">\nimport { pipe } from \"yta\";\nimport { groupBy } from \"yta/sync\";\n\nimport { useKanjiVGComponents } from \"../helpers/kanjivg.ts\";\nimport { KanjiComponent } from \"../types.ts\";\nimport KanjiComponentItem from \"./KanjiComponentItem.vue\";\n\nconst components = useKanjiVGComponents();\n\nfunction originals(\n  parts: KanjiComponent[],\n): Map<string | null, KanjiComponent[]> {\n  return pipe(\n    parts,\n    groupBy((part) => part.original || null),\n  );\n}\n</script>\n\n<template>\n  <section>\n    <h2>\n      Components\n      <template v-if=\"components.size > 0\"> ({{ components.size }}) </template>\n    </h2>\n\n    <ul class=\"component-list\">\n      <template v-for=\"[literal, partss] of components\" :key=\"literal\">\n        <li v-for=\"[original, parts] of originals(partss)\" :key=\"original ?? 0\">\n          <KanjiComponentItem\n            :literal=\"literal\"\n            :parts=\"parts\"\n            :original=\"original\"\n          />\n        </li>\n      </template>\n    </ul>\n  </section>\n</template>\n\n<style scoped>\n.component-list {\n  display: grid;\n  gap: 1ex;\n  grid-template-columns: 1fr 1fr;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n\n  @media screen and (max-width: 60ch) {\n    display: flex;\n    flex-direction: column;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { KanjiInfo } from \"../types.ts\";\n\ndefineProps<{\n  kanji: KanjiInfo;\n}>();\n</script>\n\n<template>\n  <section>\n    <h2>Readings</h2>\n\n    <dl class=\"kanji-readings\">\n      <dt>Kun</dt>\n      <div class=\"dd-items\">\n        <dd v-for=\"reading of kanji.kunYomi\" :key=\"reading\">\n          {{ reading }}\n        </dd>\n      </div>\n\n      <dt>On</dt>\n      <div class=\"dd-items\">\n        <dd v-for=\"reading of kanji.onYomi\" :key=\"reading\">\n          {{ reading }}\n        </dd>\n      </div>\n    </dl>\n  </section>\n</template>\n\n<style scoped>\n.kanji-readings {\n  gap: 1em;\n  display: grid;\n  grid-template-columns: max-content auto;\n\n  & dd,\n  & dt {\n    margin: 0;\n    padding-block: 0.2ex;\n  }\n\n  & dt {\n    font-weight: 600;\n  }\n\n  & dd {\n    background: oklch(from var(--background-strong) l c h / 0.6);\n    border-radius: 0.5ex;\n    padding-inline: 0.5ex;\n  }\n}\n\n.dd-items {\n  gap: 0.5ex 1ex;\n  display: flex;\n  flex-wrap: wrap;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\nconst props = defineProps<{\n  viewBox: string;\n}>();\n\nconst box = computed(() => {\n  const [x, y, width, height] = props.viewBox.split(\",\");\n\n  return {\n    x: Number.parseInt(x),\n    y: Number.parseInt(y),\n    width: Number.parseInt(width),\n    height: Number.parseInt(height),\n  };\n});\n\nconst midLineX = computed(() => {\n  const { x, width } = box.value;\n\n  return x + width / 2;\n});\n\nconst midLineY = computed(() => {\n  const { y, height } = box.value;\n\n  return y + height / 2;\n});\n</script>\n\n<template>\n  <g class=\"kanji-strokes-background\">\n    <rect\n      class=\"background\"\n      :x=\"box.x\"\n      :y=\"box.y\"\n      :width=\"box.width\"\n      :height=\"box.width\"\n      rx=\"5\"\n    />\n\n    <line\n      class=\"midline\"\n      :x1=\"box.x + 1\"\n      :y1=\"midLineY\"\n      :x2=\"box.x + box.width - 1\"\n      :y2=\"midLineY\"\n    />\n\n    <line\n      class=\"midline\"\n      :x1=\"midLineX\"\n      :y1=\"box.y + 1\"\n      :x2=\"midLineX\"\n      :y2=\"box.y + box.height - 1\"\n    />\n\n    <line\n      class=\"quartline\"\n      :x1=\"midLineX / 2\"\n      :y1=\"box.y + 1\"\n      :x2=\"midLineX / 2\"\n      :y2=\"box.y + box.height - 1\"\n    />\n\n    <line\n      class=\"quartline\"\n      :x1=\"(3 * midLineX) / 2\"\n      :y1=\"box.y + 1\"\n      :x2=\"(3 * midLineX) / 2\"\n      :y2=\"box.y + box.height - 1\"\n    />\n\n    <line\n      class=\"quartline\"\n      :x1=\"box.x + 1\"\n      :y1=\"midLineY / 2\"\n      :x2=\"box.x + box.width - 1\"\n      :y2=\"midLineY / 2\"\n    />\n\n    <line\n      class=\"quartline\"\n      :x1=\"box.x + 1\"\n      :y1=\"(3 * midLineY) / 2\"\n      :x2=\"box.x + box.width - 1\"\n      :y2=\"(3 * midLineY) / 2\"\n    />\n  </g>\n</template>\n\n<style scoped>\n.background {\n  fill: var(--background-strong);\n}\n\n.midline,\n.quartline {\n  stroke: light-dark(var(--light-gray), var(--dark-gray));\n}\n\n.midline {\n  stroke-width: 1px;\n  stroke-dasharray: 4;\n  stroke-dashoffset: 8;\n}\n\n.quartline {\n  stroke-width: 0.5px;\n  stroke-dasharray: 2;\n  stroke-dashoffset: 0;\n}\n</style>\n","/*\n * simplify-svg-path\n *\n * The logic is a copy of Paper.js v0.12.11.\n */\n/*\n * Paper.js - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey\n * http://juerglehni.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n */\n// An Algorithm for Automatically Fitting Digitized Curves\n// by Philip J. Schneider\n// from \"Graphics Gems\", Academic Press, 1990\n// Modifications and optimizations of original algorithm by Jürg Lehni.\nconst EPSILON = 1e-12;\nconst MACHINE_EPSILON = 1.12e-16;\nconst isMachineZero = (val) => val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n// `Math.sqrt(x * x + y * y)` seems to be faster than `Math.hypot(x, y)`\nconst hypot = (x, y) => Math.sqrt(x * x + y * y);\nconst point = (x, y) => ({ x, y });\nconst pointLength = (p) => hypot(p.x, p.y);\nconst pointNegate = (p) => point(-p.x, -p.y);\nconst pointAdd = (p1, p2) => point(p1.x + p2.x, p1.y + p2.y);\nconst pointSubtract = (p1, p2) => point(p1.x - p2.x, p1.y - p2.y);\nconst pointMultiplyScalar = (p, n) => point(p.x * n, p.y * n);\nconst pointDot = (p1, p2) => p1.x * p2.x + p1.y * p2.y;\nconst pointDistance = (p1, p2) => hypot(p1.x - p2.x, p1.y - p2.y);\nconst pointNormalize = (p, length = 1) => pointMultiplyScalar(p, length / (pointLength(p) || Infinity));\nconst createSegment = (p, i) => ({ p, i });\nconst fit = (points, closed, error) => {\n    // We need to duplicate the first and last segment when simplifying a\n    // closed path.\n    if (closed) {\n        points.unshift(points[points.length - 1]);\n        points.push(points[1]); // The point previously at index 0 is now 1.\n    }\n    const length = points.length;\n    if (length === 0) {\n        return [];\n    }\n    // To support reducing paths with multiple points in the same place\n    // to one segment:\n    const segments = [createSegment(points[0])];\n    fitCubic(points, segments, error, 0, length - 1, \n    // Left Tangent\n    pointSubtract(points[1], points[0]), \n    // Right Tangent\n    pointSubtract(points[length - 2], points[length - 1]));\n    // Remove the duplicated segments for closed paths again.\n    if (closed) {\n        segments.shift();\n        segments.pop();\n    }\n    return segments;\n};\n// Fit a Bezier curve to a (sub)set of digitized points\nconst fitCubic = (points, segments, error, first, last, tan1, tan2) => {\n    //  Use heuristic if region only has two points in it\n    if (last - first === 1) {\n        const pt1 = points[first], pt2 = points[last], dist = pointDistance(pt1, pt2) / 3;\n        addCurve(segments, [pt1, pointAdd(pt1, pointNormalize(tan1, dist)), pointAdd(pt2, pointNormalize(tan2, dist)), pt2]);\n        return;\n    }\n    // Parameterize points, and attempt to fit curve\n    const uPrime = chordLengthParameterize(points, first, last);\n    let maxError = Math.max(error, error * error), split, parametersInOrder = true;\n    // Try not 4 but 5 iterations\n    for (let i = 0; i <= 4; i++) {\n        const curve = generateBezier(points, first, last, uPrime, tan1, tan2);\n        //  Find max deviation of points to fitted curve\n        const max = findMaxError(points, first, last, curve, uPrime);\n        if (max.error < error && parametersInOrder) {\n            addCurve(segments, curve);\n            return;\n        }\n        split = max.index;\n        // If error not too large, try reparameterization and iteration\n        if (max.error >= maxError)\n            break;\n        parametersInOrder = reparameterize(points, first, last, uPrime, curve);\n        maxError = max.error;\n    }\n    // Fitting failed -- split at max error point and fit recursively\n    const tanCenter = pointSubtract(points[split - 1], points[split + 1]);\n    fitCubic(points, segments, error, first, split, tan1, tanCenter);\n    fitCubic(points, segments, error, split, last, pointNegate(tanCenter), tan2);\n};\nconst addCurve = (segments, curve) => {\n    const prev = segments[segments.length - 1];\n    prev.o = pointSubtract(curve[1], curve[0]);\n    segments.push(createSegment(curve[3], pointSubtract(curve[2], curve[3])));\n};\n// Use least-squares method to find Bezier control points for region.\nconst generateBezier = (points, first, last, uPrime, tan1, tan2) => {\n    const epsilon = /*#=*/ EPSILON, abs = Math.abs, pt1 = points[first], pt2 = points[last], \n    // Create the C and X matrices\n    C = [\n        [0, 0],\n        [0, 0],\n    ], X = [0, 0];\n    for (let i = 0, l = last - first + 1; i < l; i++) {\n        const u = uPrime[i], t = 1 - u, b = 3 * u * t, b0 = t * t * t, b1 = b * t, b2 = b * u, b3 = u * u * u, a1 = pointNormalize(tan1, b1), a2 = pointNormalize(tan2, b2), tmp = pointSubtract(pointSubtract(points[first + i], pointMultiplyScalar(pt1, b0 + b1)), pointMultiplyScalar(pt2, b2 + b3));\n        C[0][0] += pointDot(a1, a1);\n        C[0][1] += pointDot(a1, a2);\n        // C[1][0] += a1.dot(a2);\n        C[1][0] = C[0][1];\n        C[1][1] += pointDot(a2, a2);\n        X[0] += pointDot(a1, tmp);\n        X[1] += pointDot(a2, tmp);\n    }\n    // Compute the determinants of C and X\n    const detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1];\n    let alpha1;\n    let alpha2;\n    if (abs(detC0C1) > epsilon) {\n        // Kramer's rule\n        const detC0X = C[0][0] * X[1] - C[1][0] * X[0], detXC1 = X[0] * C[1][1] - X[1] * C[0][1];\n        // Derive alpha values\n        alpha1 = detXC1 / detC0C1;\n        alpha2 = detC0X / detC0C1;\n    }\n    else {\n        // Matrix is under-determined, try assuming alpha1 == alpha2\n        const c0 = C[0][0] + C[0][1], c1 = C[1][0] + C[1][1];\n        alpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0 : abs(c1) > epsilon ? X[1] / c1 : 0;\n    }\n    // If alpha negative, use the Wu/Barsky heuristic (see text)\n    // (if alpha is 0, you get coincident control points that lead to\n    // divide by zero in any subsequent NewtonRaphsonRootFind() call.\n    const segLength = pointDistance(pt2, pt1), eps = epsilon * segLength;\n    let handle1, handle2;\n    if (alpha1 < eps || alpha2 < eps) {\n        // fall back on standard (probably inaccurate) formula,\n        // and subdivide further if needed.\n        alpha1 = alpha2 = segLength / 3;\n    }\n    else {\n        // Check if the found control points are in the right order when\n        // projected onto the line through pt1 and pt2.\n        const line = pointSubtract(pt2, pt1);\n        // Control points 1 and 2 are positioned an alpha distance out\n        // on the tangent vectors, left and right, respectively\n        handle1 = pointNormalize(tan1, alpha1);\n        handle2 = pointNormalize(tan2, alpha2);\n        if (pointDot(handle1, line) - pointDot(handle2, line) > segLength * segLength) {\n            // Fall back to the Wu/Barsky heuristic above.\n            alpha1 = alpha2 = segLength / 3;\n            handle1 = handle2 = null; // Force recalculation\n        }\n    }\n    // First and last control points of the Bezier curve are\n    // positioned exactly at the first and last data points\n    return [pt1, pointAdd(pt1, handle1 || pointNormalize(tan1, alpha1)), pointAdd(pt2, handle2 || pointNormalize(tan2, alpha2)), pt2];\n};\n// Given set of points and their parameterization, try to find\n// a better parameterization.\nconst reparameterize = (points, first, last, u, curve) => {\n    for (let i = first; i <= last; i++) {\n        u[i - first] = findRoot(curve, points[i], u[i - first]);\n    }\n    // Detect if the new parameterization has reordered the points.\n    // In that case, we would fit the points of the path in the wrong order.\n    for (let i = 1, l = u.length; i < l; i++) {\n        if (u[i] <= u[i - 1])\n            return false;\n    }\n    return true;\n};\n// Use Newton-Raphson iteration to find better root.\nconst findRoot = (curve, point, u) => {\n    const curve1 = [], curve2 = [];\n    // Generate control vertices for Q'\n    for (let i = 0; i <= 2; i++) {\n        curve1[i] = pointMultiplyScalar(pointSubtract(curve[i + 1], curve[i]), 3);\n    }\n    // Generate control vertices for Q''\n    for (let i = 0; i <= 1; i++) {\n        curve2[i] = pointMultiplyScalar(pointSubtract(curve1[i + 1], curve1[i]), 2);\n    }\n    // Compute Q(u), Q'(u) and Q''(u)\n    const pt = evaluate(3, curve, u), pt1 = evaluate(2, curve1, u), pt2 = evaluate(1, curve2, u), diff = pointSubtract(pt, point), df = pointDot(pt1, pt1) + pointDot(diff, pt2);\n    // u = u - f(u) / f'(u)\n    return isMachineZero(df) ? u : u - pointDot(diff, pt1) / df;\n};\n// Evaluate a bezier curve at a particular parameter value\nconst evaluate = (degree, curve, t) => {\n    // Copy array\n    const tmp = curve.slice();\n    // Triangle computation\n    for (let i = 1; i <= degree; i++) {\n        for (let j = 0; j <= degree - i; j++) {\n            tmp[j] = pointAdd(pointMultiplyScalar(tmp[j], 1 - t), pointMultiplyScalar(tmp[j + 1], t));\n        }\n    }\n    return tmp[0];\n};\n// Assign parameter values to digitized points\n// using relative distances between points.\nconst chordLengthParameterize = (points, first, last) => {\n    const u = [0];\n    for (let i = first + 1; i <= last; i++) {\n        u[i - first] = u[i - first - 1] + pointDistance(points[i], points[i - 1]);\n    }\n    for (let i = 1, m = last - first; i <= m; i++) {\n        u[i] /= u[m];\n    }\n    return u;\n};\n// Find the maximum squared distance of digitized points to fitted curve.\nconst findMaxError = (points, first, last, curve, u) => {\n    let index = Math.floor((last - first + 1) / 2), maxDist = 0;\n    for (let i = first + 1; i < last; i++) {\n        const P = evaluate(3, curve, u[i - first]);\n        const v = pointSubtract(P, points[i]);\n        const dist = v.x * v.x + v.y * v.y; // squared\n        if (dist >= maxDist) {\n            maxDist = dist;\n            index = i;\n        }\n    }\n    return {\n        error: maxDist,\n        index: index,\n    };\n};\nconst getSegmentsPathData = (segments, closed, precision) => {\n    const length = segments.length;\n    const precisionMultiplier = 10 ** precision;\n    const round = precision < 16 ? (n) => Math.round(n * precisionMultiplier) / precisionMultiplier : (n) => n;\n    const formatPair = (x, y) => round(x) + ',' + round(y);\n    let first = true;\n    let prevX, prevY, outX, outY;\n    const parts = [];\n    const addSegment = (segment, skipLine) => {\n        const curX = segment.p.x;\n        const curY = segment.p.y;\n        if (first) {\n            parts.push('M' + formatPair(curX, curY));\n            first = false;\n        }\n        else {\n            const inX = curX + (segment.i?.x ?? 0);\n            const inY = curY + (segment.i?.y ?? 0);\n            if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n                // l = relative lineto:\n                if (!skipLine) {\n                    const dx = curX - prevX;\n                    const dy = curY - prevY;\n                    parts.push(dx === 0 ? 'v' + round(dy) : dy === 0 ? 'h' + round(dx) : 'l' + formatPair(dx, dy));\n                }\n            }\n            else {\n                // c = relative curveto:\n                parts.push('c' +\n                    formatPair(outX - prevX, outY - prevY) +\n                    ' ' +\n                    formatPair(inX - prevX, inY - prevY) +\n                    ' ' +\n                    formatPair(curX - prevX, curY - prevY));\n            }\n        }\n        prevX = curX;\n        prevY = curY;\n        outX = curX + (segment.o?.x ?? 0);\n        outY = curY + (segment.o?.y ?? 0);\n    };\n    if (!length)\n        return '';\n    for (let i = 0; i < length; i++)\n        addSegment(segments[i]);\n    // Close path by drawing first segment again\n    if (closed && length > 0) {\n        addSegment(segments[0], true);\n        parts.push('z');\n    }\n    return parts.join('');\n};\nconst simplifySvgPath = (points, options = {}) => {\n    if (points.length === 0) {\n        return '';\n    }\n    return getSegmentsPathData(fit(points.map(typeof points[0].x === 'number' ? (p) => point(p.x, p.y) : (p) => point(p[0], p[1])), options.closed, options.tolerance ?? 2.5), options.closed, options.precision ?? 5);\n};\nexport default simplifySvgPath;\n","<script setup lang=\"ts\">\nimport simplifySvgPath from \"@luncheon/simplify-svg-path\";\nimport { computed, ref, shallowReactive, watch } from \"vue\";\n\nimport { sleep } from \"../helpers/time.ts\";\n\nconst props = defineProps<{\n  practiceStrokes: string[];\n  animate?: boolean;\n  animatePause?: boolean;\n}>();\n\nconst emit = defineEmits<{\n  stroke: [value: string];\n}>();\n\ntype Point = { x: number; y: number };\n\nconst el = ref<SVGGElement | null>(null);\nconst svg = computed(() => el.value?.closest(\"svg\"));\nconst viewBox = computed(() => svg.value?.viewBox.baseVal);\nconst points = shallowReactive<Point[]>([]);\n\nfunction toSVGCoords(event: PointerEvent): Point {\n  if (!svg.value) {\n    return { x: event.x, y: event.y };\n  }\n\n  const p = svg.value.createSVGPoint();\n  p.x = event.x;\n  p.y = event.y;\n\n  const domPoint = p.matrixTransform(svg.value.getScreenCTM()?.inverse());\n\n  return { x: domPoint.x, y: domPoint.y };\n}\n\nfunction handlePointerDown(event: PointerEvent) {\n  if (!event.isPrimary) {\n    return;\n  }\n\n  event.preventDefault();\n  el.value?.setPointerCapture(event.pointerId);\n  points.push(toSVGCoords(event));\n}\n\nfunction handlePointerMove(event: PointerEvent) {\n  if (points.length === 0 || !event.isPrimary) {\n    return;\n  }\n\n  points.push(toSVGCoords(event));\n}\n\nfunction handlePointerUp(event: PointerEvent) {\n  if (!event.isPrimary) {\n    return;\n  }\n\n  if (points.length > 1) {\n    emit(\"stroke\", simplifySvgPath(points));\n  }\n\n  el.value?.releasePointerCapture(event.pointerId);\n  points.splice(0, points.length);\n\n  svg.value?.parentElement?.click();\n}\n\nfunction strokeKeyframes(stroke: SVGPathElement): Keyframe[] {\n  const l = stroke.getTotalLength();\n\n  return [\n    { strokeDasharray: l, strokeDashoffset: l },\n    { strokeDasharray: l, strokeDashoffset: 0 },\n  ];\n}\n\nconst strokeAnimationOptions = {\n  duration: 500,\n  easing: \"ease-in-out\",\n};\n\nconst animations: Animation[] = [];\n\nfunction startAnimation() {\n  if (!el.value) {\n    return;\n  }\n\n  for (const stroke of el.value.querySelectorAll<SVGPathElement>(\n    \"path.stroke\",\n  )) {\n    const animation = stroke.animate(\n      strokeKeyframes(stroke),\n      strokeAnimationOptions,\n    );\n\n    animation.pause();\n    animations.push(animation);\n  }\n\n  playAnimations();\n}\n\nasync function playAnimations() {\n  let animation = animations.at(0);\n  while (animation) {\n    animation.play();\n    await animation.finished;\n\n    animations.shift();\n    animation = animations.at(0);\n\n    if (animation) {\n      await sleep(100);\n    }\n  }\n}\n\nwatch(\n  () => props.animate,\n  (shouldAnimate) => {\n    if (shouldAnimate) {\n      startAnimation();\n    }\n  },\n);\n\nwatch(\n  () => props.animatePause,\n  (shouldPause) => {\n    if (shouldPause) {\n      animations.at(0)?.pause();\n    } else {\n      animations.at(0)?.play();\n    }\n  },\n);\n</script>\n\n<template>\n  <g\n    ref=\"el\"\n    class=\"kanji-strokes-practice-canvas canvas\"\n    @pointerdown=\"handlePointerDown\"\n    @pointermove=\"handlePointerMove\"\n    @pointerup=\"handlePointerUp\"\n  >\n    <rect\n      v-if=\"viewBox\"\n      class=\"background\"\n      :x=\"viewBox.x\"\n      :y=\"viewBox.y\"\n      :width=\"viewBox.width\"\n      :height=\"viewBox.height\"\n    />\n    <g class=\"practice-strokes\">\n      <path\n        v-for=\"(stroke, i) of practiceStrokes\"\n        :key=\"i\"\n        class=\"stroke practice-stroke\"\n        :d=\"stroke\"\n      />\n    </g>\n    <polyline\n      class=\"stroke current-stroke\"\n      :points=\"points.map(({ x, y }) => `${x},${y}`).join(' ')\"\n    />\n  </g>\n</template>\n\n<style scoped>\n.canvas {\n  cursor: crosshair;\n  touch-action: none;\n}\n\n.background {\n  fill: transparent;\n  stroke: none;\n}\n\n.stroke {\n  fill: none;\n  stroke: currentcolor;\n  stroke-width: 3px;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { until } from \"@vueuse/core\";\nimport { computed, ref, shallowReactive, watch } from \"vue\";\n\nimport {\n  useKanjiVG,\n  useKanjiVGSyncing,\n  useKanjiVGViewBox,\n} from \"../helpers/kanjivg.ts\";\nimport { sleep } from \"../helpers/time.ts\";\nimport { KanjiInfo } from \"../types.ts\";\nimport AppButton from \"./AppButton.vue\";\nimport AppIcon from \"./AppIcon.vue\";\nimport KanjiStrokesBackground from \"./KanjiStrokesBackground.vue\";\nimport KanjiStrokesGroup from \"./KanjiStrokesGroup.vue\";\nimport KanjiStrokesPracticeCanvas from \"./KanjiStrokesPracticeCanvas.vue\";\n\nconst props = withDefaults(\n  defineProps<{\n    kanji: KanjiInfo;\n    autoHint?: boolean;\n    practiceMode?: boolean;\n  }>(),\n  {\n    autoHint: false,\n    practiceMode: false,\n  },\n);\n\nconst emit = defineEmits<{\n  practiceDone: [];\n}>();\n\nconst svgEl = ref<SVGSVGElement | null>(null);\nconst kanjiVG = useKanjiVG();\nconst viewBox = useKanjiVGViewBox();\nconst isKanjiVGSyncing = useKanjiVGSyncing();\n\nconst strokes = computed(() => kanjiVG.value?.querySelectorAll(\"path\") ?? []);\n\nconst animations = shallowReactive<Animation[]>([]);\nconst animating = computed(() => animations.length > 0);\nconst animationPaused = ref(false);\n\nconst comparing = ref(false);\nconst practicing = ref(false);\nconst practiceStrokes = shallowReactive<string[]>([]);\n\nfunction strokeKeyframes(stroke: SVGPathElement): Keyframe[] {\n  const l = stroke.getTotalLength();\n\n  return [\n    { strokeDasharray: l, strokeDashoffset: l },\n    { strokeDasharray: l, strokeDashoffset: 0 },\n  ];\n}\n\nconst strokeAnimationOptions = {\n  duration: 500,\n  easing: \"ease-in-out\",\n};\n\nfunction animate() {\n  for (const stroke of strokes.value) {\n    const animation = stroke.animate(\n      strokeKeyframes(stroke),\n      strokeAnimationOptions,\n    );\n\n    animation.pause();\n    animations.push(animation);\n  }\n\n  playAnimations();\n}\n\nasync function playAnimations() {\n  let animation = animations.at(0);\n  while (animation) {\n    animation.play();\n    await animation.finished;\n\n    animations.shift();\n    animation = animations.at(0);\n\n    if (animation) {\n      await sleep(100);\n    }\n  }\n}\n\nfunction pauseAnimation() {\n  animations.at(0)?.pause();\n  animationPaused.value = true;\n}\n\nfunction resumeAnimation() {\n  animations.at(0)?.play();\n  animationPaused.value = false;\n}\n\nfunction skipForward() {\n  const path = strokes.value[practiceStrokes.length]?.getAttribute(\"d\");\n\n  if (!path) {\n    return;\n  }\n\n  practiceStrokes.push(path);\n}\n\nfunction showHint(n = practiceStrokes.length) {\n  const stroke = strokes.value[n];\n\n  if (!stroke) {\n    return;\n  }\n\n  stroke.style.display = \"block\";\n\n  const animation = stroke.animate(\n    strokeKeyframes(stroke),\n    strokeAnimationOptions,\n  );\n\n  animation.play();\n\n  animation.finished.then(() => {\n    stroke.style.removeProperty(\"display\");\n  });\n}\n\nfunction pushPracticeStroke(d: string) {\n  practiceStrokes.push(d);\n\n  if (props.practiceMode && practiceStrokes.length === strokes.value.length) {\n    emit(\"practiceDone\");\n  }\n\n  if (\n    props.practiceMode &&\n    props.autoHint &&\n    practiceStrokes.length < strokes.value.length\n  ) {\n    showHint();\n  }\n}\n\nfunction clearPracticeStrokes() {\n  comparing.value = false;\n  practiceStrokes.splice(0, practiceStrokes.length);\n}\n\nfunction clearAnimations() {\n  for (const animation of animations) {\n    animation.cancel();\n  }\n  animations.splice(0, animations.length);\n  animationPaused.value = false;\n\n  for (const stroke of strokes.value) {\n    for (const animation of stroke.getAnimations()) {\n      animation.cancel();\n    }\n  }\n}\n\nfunction maybeShowAnswer() {\n  if (practiceStrokes.length === 0) {\n    practicing.value = false;\n\n    return;\n  }\n\n  if (practiceStrokes.length < strokes.value.length) {\n    comparing.value = true;\n  }\n}\n\nwatch(practicing, (practiceStarted) => {\n  comparing.value = false;\n\n  if (practiceStarted) {\n    clearAnimations();\n  } else {\n    clearPracticeStrokes();\n  }\n});\n\nwatch(\n  () => props.autoHint,\n  (isAutoHint) => {\n    if (isAutoHint) {\n      requestAnimationFrame(async () => {\n        await until(isKanjiVGSyncing).toBe(false);\n        showHint(0);\n      });\n    }\n  },\n  { immediate: true },\n);\n\nwatch(\n  () => props.kanji.codepoint,\n  (newValue, oldValue) => {\n    if (newValue !== oldValue) {\n      // We have a new kanji.\n      clearPracticeStrokes();\n      clearAnimations();\n      comparing.value = false;\n\n      if (practicing.value !== props.practiceMode) {\n        // And maybe toggle the practice mode.\n        practicing.value = props.practiceMode;\n      }\n    }\n  },\n  { immediate: true },\n);\n\ndefineExpose({\n  clearPracticeStrokes,\n  maybeShowAnswer,\n});\n</script>\n\n<template>\n  <section>\n    <h2>\n      Strokes\n      <template v-if=\"!practiceMode && strokes.length > 0\">\n        ({{ strokes.length }})\n      </template>\n    </h2>\n\n    <figure class=\"strokes-figure\">\n      <svg\n        v-if=\"kanjiVG\"\n        ref=\"svgEl\"\n        class=\"svg\"\n        :class=\"{ practicing }\"\n        :viewBox=\"viewBox\"\n        @touchstart=\"\n          if (practicing) {\n            $event.preventDefault();\n          }\n        \"\n      >\n        <KanjiStrokesBackground :viewBox=\"viewBox\" />\n\n        <KanjiStrokesGroup\n          :strokes=\"kanjiVG\"\n          class=\"strokes\"\n          :class=\"{\n            comparing:\n              animating ||\n              comparing ||\n              strokes.length <= practiceStrokes.length,\n            practicing,\n          }\"\n        />\n\n        <KanjiStrokesPracticeCanvas\n          v-if=\"practicing\"\n          :practice-strokes=\"practiceStrokes\"\n          :animate=\"animating\"\n          :animate-pause=\"animationPaused\"\n          @stroke=\"pushPracticeStroke($event)\"\n        />\n      </svg>\n\n      <figcaption class=\"controls\">\n        <template v-if=\"animating\">\n          <AppButton\n            v-if=\"animationPaused\"\n            aria-label=\"Play\"\n            @click=\"resumeAnimation()\"\n          >\n            <AppIcon icon=\"play\" />\n          </AppButton>\n\n          <AppButton v-else aria-label=\"Pause\" @click=\"pauseAnimation()\">\n            <AppIcon icon=\"pause\" />\n          </AppButton>\n        </template>\n\n        <template v-else>\n          <AppButton\n            v-if=\"practicing && practiceStrokes.length < strokes.length\"\n            aria-label=\"Show Hint\"\n            @click=\"showHint()\"\n          >\n            <AppIcon icon=\"help-circle\" />\n          </AppButton>\n\n          <AppButton\n            v-else\n            aria-label=\"Animate Stroke Order\"\n            @click=\"animate()\"\n          >\n            <AppIcon icon=\"play\" />\n          </AppButton>\n        </template>\n\n        <AppButton\n          v-if=\"!practiceMode\"\n          aria-lable=\"Practice Drawing\"\n          :aria-pressed=\"`${practicing}`\"\n          :filled=\"practicing\"\n          @click=\"practicing = !practicing\"\n        >\n          <AppIcon icon=\"draw\" />\n        </AppButton>\n\n        <template v-if=\"practicing\">\n          <hr class=\"rule\" />\n\n          <AppButton\n            aria-label=\"Start Over\"\n            :disabled=\"practiceStrokes.length === 0\"\n            @click=\"practiceStrokes.splice(0, practiceStrokes.length)\"\n          >\n            <AppIcon icon=\"rotate-left\" />\n          </AppButton>\n\n          <AppButton\n            aria-label=\"Skip Backward\"\n            :disabled=\"practiceStrokes.length === 0\"\n            @click=\"practiceStrokes.pop()\"\n          >\n            <AppIcon icon=\"skip-backward\" />\n          </AppButton>\n\n          <AppButton\n            aria-label=\"Skip Backward\"\n            :disabled=\"practiceStrokes.length === strokes.length\"\n            @click=\"skipForward()\"\n          >\n            <AppIcon icon=\"skip-forward\" />\n          </AppButton>\n        </template>\n      </figcaption>\n    </figure>\n  </section>\n</template>\n\n<style scoped>\n.strokes-figure {\n  display: grid;\n  grid-template:\n    \"svg . controls .\"\n    / minmax(15em, 25em) 1ex auto minmax(0, 1fr);\n  margin: 0;\n\n  & .svg {\n    grid-area: svg;\n    touch-action: manipulation;\n    max-inline-size: 100%;\n\n    &.practicing {\n      touch-action: none;\n    }\n\n    & .strokes.practicing :deep(path) {\n      color: light-dark(var(--light-gray), var(--dark-gray));\n      display: none;\n    }\n\n    & .strokes.practicing.comparing :deep(path) {\n      display: block;\n    }\n  }\n\n  & .controls {\n    align-self: start;\n    display: flex;\n    flex-direction: column;\n    grid-area: controls;\n    row-gap: 1ex;\n\n    & .rule {\n      background: var(--accent-color);\n      block-size: 1px;\n      border: none;\n      inline-size: 100%;\n    }\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\nimport { deckLabel } from \"../helpers/decks.ts\";\nimport { formatPercent } from \"../helpers/formats.ts\";\nimport { useKanjiRetrievability } from \"../helpers/fsrs.ts\";\nimport { DECKS_ROUTE_NAME } from \"../router.ts\";\nimport { useDecksContainingCard } from \"../store/decks.ts\";\nimport { KanjiInfo } from \"../types.ts\";\n\nconst props = withDefaults(\n  defineProps<{\n    kanji: KanjiInfo;\n    hideLiteral?: boolean;\n    hideMeaning?: boolean;\n    actions?: \"explore\" | \"review\";\n  }>(),\n  {\n    hideLiteral: false,\n    hideMeaning: false,\n    actions: \"explore\",\n  },\n);\n\nconst freq = computed(() => {\n  const { freq: n } = props.kanji;\n\n  if (!n) {\n    return null;\n  }\n\n  if (n <= 50) {\n    return 50;\n  }\n\n  if (n <= 100) {\n    return 100;\n  }\n\n  if (n <= 200) {\n    return 200;\n  }\n\n  if (n <= 500) {\n    return 500;\n  }\n\n  if (n <= 1000) {\n    return 1000;\n  }\n\n  return null;\n});\n\nconst decks = useDecksContainingCard(() => props.kanji.codepoint);\nconst retrievability = useKanjiRetrievability(() => props.kanji.codepoint);\n\nfunction rGrade(p: number | string): \"good\" | \"fair\" | \"poor\" {\n  if (typeof p === \"string\") {\n    return \"poor\";\n  }\n\n  if (p > 0.9) {\n    return \"good\";\n  }\n\n  if (p > 0.7) {\n    return \"fair\";\n  }\n\n  return \"poor\";\n}\n</script>\n\n<template>\n  <header class=\"kanji-title\">\n    <h2 v-show=\"!hideLiteral\" class=\"literal\" lang=\"ja\">\n      {{ kanji.literal }}\n    </h2>\n\n    <p v-show=\"!hideMeaning\" class=\"main-meaning meaning\">\n      <strong>{{ kanji.meanings?.at(0) }}</strong>\n    </p>\n\n    <aside class=\"labels\">\n      <span\n        v-if=\"freq && !decks.some(({ name }) => name === `news-top-${freq}`)\"\n        class=\"label freq\"\n      >\n        Top {{ freq }}\n      </span>\n\n      <RouterLink\n        v-for=\"deck of decks\"\n        :key=\"deck.name\"\n        :to=\"{ name: DECKS_ROUTE_NAME, query: { deck: deck.name } }\"\n        class=\"label deck\"\n      >\n        {{ deckLabel(deck) }}\n      </RouterLink>\n\n      <span\n        v-if=\"retrievability?.write\"\n        class=\"label retrievability\"\n        title=\"Writing Retrievability\"\n        :data-r=\"rGrade(retrievability.write)\"\n      >\n        書\n        <template v-if=\"typeof retrievability.write === 'string'\">\n          {{ retrievability.write }}\n        </template>\n        <template v-else> {{ formatPercent(retrievability.write) }} </template>\n      </span>\n\n      <span\n        v-if=\"retrievability?.read\"\n        class=\"label retrievability\"\n        title=\"Reading Retrievability\"\n        :data-r=\"rGrade(retrievability.read)\"\n      >\n        読\n        <template v-if=\"typeof retrievability.read === 'string'\">\n          {{ retrievability.read }}\n        </template>\n        <template v-else> {{ formatPercent(retrievability.read) }} </template>\n      </span>\n    </aside>\n\n    <ul\n      v-if=\"kanji.meanings?.length > 1\"\n      v-show=\"!hideMeaning\"\n      class=\"additional-meanings\"\n    >\n      <li\n        v-for=\"meaning of kanji.meanings.slice(1)\"\n        :key=\"meaning\"\n        class=\"meaning\"\n      >\n        {{ meaning }}\n      </li>\n    </ul>\n\n    <nav v-if=\"$slots.actions\" class=\"actions\">\n      <slot name=\"actions\" />\n    </nav>\n  </header>\n</template>\n\n<style scoped>\n.kanji-title {\n  column-gap: 1em;\n  display: grid;\n  grid-template:\n    \"literal meaning    labels     actions\"\n    \"literal additional additional .      \" 1fr\n    / min-content auto 1fr auto;\n\n  @media screen and (max-width: 75ch) {\n    grid-template:\n      \"literal labels     actions\"\n      \"literal meaning    .      \"\n      \"literal additional .      \"\n      / min-content 1fr;\n  }\n}\n\n.literal {\n  font-size: 5em;\n  font-weight: normal;\n  grid-area: literal;\n  line-height: 1em;\n  margin: 0;\n}\n\n.main-meaning {\n  font-size: 2em;\n  grid-area: meaning;\n  margin-block: 0;\n}\n\n.additional-meanings {\n  column-gap: 1em;\n  display: flex;\n  flex-wrap: wrap;\n  grid-area: additional;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.meaning {\n  text-transform: capitalize;\n}\n\n.labels {\n  align-content: start;\n  align-items: stretch;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5ex;\n  grid-area: labels;\n\n  & .label {\n    align-items: center;\n    border-radius: 1ex;\n    display: flex;\n    font-size: 0.65em;\n    font-weight: 600;\n    padding: 0.5ex 1ex;\n  }\n\n  & .freq {\n    background: var(--green);\n    color: var(--background-strong);\n  }\n\n  & .deck {\n    background: var(--blue);\n    color: var(--background-strong);\n    text-decoration: none;\n  }\n\n  & .retrievability {\n    color: var(--background-strong);\n\n    &[data-r=\"good\"] {\n      background: var(--green);\n    }\n\n    &[data-r=\"fair\"] {\n      background: var(--gold);\n    }\n\n    &[data-r=\"poor\"] {\n      background: var(--orange);\n    }\n  }\n}\n\n.actions {\n  grid-area: actions;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { vIntersectionObserver } from \"@vueuse/components\";\nimport { asyncComputed } from \"@vueuse/core\";\nimport { computed, ref, watch } from \"vue\";\n\nimport { db } from \"../db/index.ts\";\nimport { KanjiVocab } from \"../types.ts\";\nimport WordListItem from \"./WordListItem.vue\";\n\nconst props = defineProps<{\n  kanjiVocab: KanjiVocab;\n  hideKanji?: boolean;\n  hideReading?: boolean;\n  hideMeaning?: boolean;\n}>();\n\nconst wordListsResult = asyncComputed(async () => {\n  const { words } = props.kanjiVocab;\n  const bookmarked = [];\n  const rest = [];\n  const { store } = (await db).transaction(\"bookmarked-words\");\n  for (const word of words) {\n    if (await store.count(word)) {\n      bookmarked.push(word);\n    } else {\n      rest.push(word);\n    }\n  }\n\n  return { bookmarked, rest };\n}, null);\n\nconst pageLimit = ref(20);\nconst wordLists = computed(() => {\n  const limit = pageLimit.value;\n\n  if (wordListsResult.value) {\n    const { bookmarked, rest } = wordListsResult.value;\n    return [bookmarked, rest.slice(0, limit)];\n  }\n\n  return [props.kanjiVocab.words.slice(0, limit)];\n});\n\nfunction nextPage() {\n  pageLimit.value += 20;\n}\n\nfunction handleNextPageIntersecting([\n  { isIntersecting },\n]: IntersectionObserverEntry[]) {\n  if (isIntersecting) {\n    nextPage();\n  }\n}\n\nwatch(\n  () => props.kanjiVocab.codepoint,\n  (newValue, oldValue) => {\n    if (newValue !== oldValue) {\n      pageLimit.value = 20;\n    }\n  },\n);\n</script>\n\n<template>\n  <section>\n    <h2>Words ({{ kanjiVocab.words.length }})</h2>\n\n    <ul class=\"kanji-word-list\">\n      <template v-for=\"words of wordLists\">\n        <li v-for=\"word of words\" :key=\"word\">\n          <WordListItem\n            :word=\"word\"\n            :kanji=\"kanjiVocab.literal\"\n            :hide-kanji=\"hideKanji\"\n            :hide-reading=\"hideReading\"\n            :hide-meaning=\"hideMeaning\"\n          />\n        </li>\n      </template>\n    </ul>\n\n    <button\n      v-if=\"pageLimit < kanjiVocab.words.length\"\n      v-intersection-observer=\"handleNextPageIntersecting\"\n      class=\"next-page-button\"\n      @click=\"nextPage()\"\n    >\n      Load More\n    </button>\n  </section>\n</template>\n\n<style scoped>\n.kanji-word-list {\n  list-style: none;\n  padding: 0;\n}\n\n.next-page-button {\n  background: none;\n  border: none;\n  color: var(--accent-color);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: 1em;\n  font-weight: 600;\n}\n</style>\n"],"names":["groupBy","getKey","items","map","item","key","values","KANJIVG_NAMESPACE","KANJIVG_KEY","RADICAL_TYPES","parser","gatherPositions","el","positions","ancestor","provideKanjiVG","hex","strokesEl","ref","viewBox","syncing","watch","toValue","hexValue","svgText","svg","x","y","width","height","strokes","attr","components","computed","group","radicals","insertComponent","literal","info","found","sorted","type","component","a","b","provide","useKanjiVG","store","inject","useKanjiVGViewBox","useKanjiVGComponents","useKanjiVGSyncing","props","__props","container","render","onMounted","_createElementBlock","kanjiVG","radical","part","phonetic","componentInfo","useKanjiComponent","original","originalComponentInfo","meaning","reading","radicalNumber","isCDPCodePoint","rogueCJKRadicalPairs","replaceCJKRadical","cjkBlock","radicalBlock","accentColorOffset","deg","watchEffect","i","_createBlock","_component_RouterLink","_unref","kanjiComponentRoute","_createVNode","KanjiStrokesGroup","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_openBlock","_hoisted_6","_hoisted_7","_Fragment","_createTextVNode","_hoisted_8","originals","parts","pipe","_hoisted_1","_renderList","partss","KanjiComponentItem","_cache","kanji","box","midLineX","midLineY","EPSILON","MACHINE_EPSILON","isMachineZero","val","hypot","point","pointLength","p","pointNegate","pointAdd","p1","p2","pointSubtract","pointMultiplyScalar","n","pointDot","pointDistance","pointNormalize","length","createSegment","fit","points","closed","error","segments","fitCubic","first","last","tan1","tan2","pt1","pt2","dist","addCurve","uPrime","chordLengthParameterize","maxError","split","parametersInOrder","curve","generateBezier","max","findMaxError","reparameterize","tanCenter","prev","epsilon","abs","C","X","l","u","t","b0","b1","b2","b3","a1","a2","tmp","detC0C1","alpha1","alpha2","detC0X","c0","c1","segLength","eps","handle1","handle2","line","findRoot","curve1","curve2","pt","evaluate","diff","df","degree","j","m","index","maxDist","P","v","getSegmentsPathData","precision","precisionMultiplier","round","formatPair","prevX","prevY","outX","outY","addSegment","segment","skipLine","curX","curY","inX","inY","dx","dy","simplifySvgPath","options","emit","__emit","shallowReactive","toSVGCoords","event","domPoint","handlePointerDown","handlePointerMove","handlePointerUp","strokeKeyframes","stroke","strokeAnimationOptions","animations","startAnimation","animation","playAnimations","sleep","shouldAnimate","shouldPause","practiceStrokes","svgEl","isKanjiVGSyncing","animating","animationPaused","comparing","practicing","animate","pauseAnimation","resumeAnimation","skipForward","path","showHint","pushPracticeStroke","d","clearPracticeStrokes","clearAnimations","maybeShowAnswer","practiceStarted","isAutoHint","until","newValue","oldValue","__expose","practiceMode","_normalizeClass","$event","KanjiStrokesBackground","KanjiStrokesPracticeCanvas","AppButton","AppIcon","freq","decks","useDecksContainingCard","retrievability","useKanjiRetrievability","rGrade","hideLiteral","_withDirectives","hideMeaning","name","deck","DECKS_ROUTE_NAME","deckLabel","formatPercent","$slots","_renderSlot","_ctx","wordListsResult","asyncComputed","words","bookmarked","rest","db","word","pageLimit","wordLists","limit","nextPage","handleNextPageIntersecting","isIntersecting","kanjiVocab","WordListItem","hideKanji","hideReading"],"mappings":"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","x_google_ignoreList":[0,7]}