import{n as N,p as q,m as F,g as S,q as $e,s as re,l as ve,v as Se,x as ae,d as M,y as Ie,c as i,o as a,_ as P,u as $,f as B,e as K,b as v,t as I,z as ye,F as d,a as c,h as C,i as A,w as Y,A as J,B as Z}from"./index-BwJfRx6P.js";import{A as z,a as X}from"./AppButton-B0vMXV15.js";import{s as Ke}from"./time-BmRGZSiE.js";function mt(t){const n=N(null);return q(()=>F(t),async e=>{if(!e){n.value=null;return}const s=e.toString(16).padStart(5,"0"),r=await(await fetch(`/data/kanji-v1/${s}.json`)).json();n.value=r},{immediate:!0}),n}function jt(t){const n=N(null);return q(()=>F(t),async e=>{if(!e){n.value=null;return}const s=e.toString(16).padStart(5,"0"),r=await(await fetch(`/data/kanji-vocab-v1/${s}.json`)).json();n.value=r},{immediate:!0}),n}const pe="http://kanjivg.tagaini.net",ie=Symbol("kanjivg"),Be=new DOMParser;function Me(t){var s;const n=[];let e=t.closest("[data-position]");for(;e instanceof SVGElement;)n.push(e.dataset.position),e=((s=e.parentElement)==null?void 0:s.closest("[data-position]"))??null;return n}function ht(t){const n=N(null),e=N(null);q(()=>F(t),async o=>{if(!o)return;const f=await(await fetch(`/kanjivg/kanji/${o}.svg`)).text(),g=Be.parseFromString(f,"image/svg+xml");if(g.documentElement instanceof SVGSVGElement){const{x:p,y:l,width:m,height:j}=g.documentElement.viewBox.baseVal;e.value=`${p},${l},${m},${j}`}const y=g.getElementById(`kvg:${o}`);if(y){for(const p of[...y==null?void 0:y.querySelectorAll("*"),y])if(p instanceof SVGElement){for(const l of[...p.attributes])l.namespaceURI===pe&&(p.dataset[l.localName]=l.value,p.removeAttributeNS(pe,l.localName));p.removeAttribute("xmlns:kvg")}}n.value=y},{immediate:!0});const s=S(()=>{const o=n.value;if(!o)return new Map;const r=new Map,f={};function g(p){if(p.dataset.part&&Number.parseInt(p.dataset.part)>1)return;const l=p.dataset.element,m={element:l,original:p.dataset.original??null,position:Me(p),radical:p.dataset.radical??null};let j=r.get(l);j?j.push(m):(j=[m],r.set(l,j)),m.radical&&(f[m.radical]=l)}o.dataset.radical&&g(o);for(const p of o.querySelectorAll("g[data-element]"))g(p);const y=new Map;for(const p of["general","tradit","nelson"]){const l=f[p],m=r.get(l);m&&(y.set(l,m),r.delete(l))}for(const[p,l]of r)y.set(p,l);return y});$e(ie,{strokesEl:n,viewBox:e,components:s})}function ke(){const t=re(ie,null);return S(()=>{var e;return((e=t==null?void 0:t.strokesEl.value)==null?void 0:e.cloneNode(!0))??null})}function me(){const t=re(ie,null);return S(()=>(t==null?void 0:t.viewBox.value)??"0,0,109,109")}function Le(){const t=re(ie,null);return S(()=>(t==null?void 0:t.components.value)??new Map)}function*Ce(t){for(const n of t.split(`
`)){const[e,s,o,r,f]=n.split(",");if(!s)continue;const g={id:Number.parseInt(e),literal:s.at(0)??"",strokes:Number.parseInt(o),meaning:r,reading:f};for(const y of s)yield[y,g]}}const Pe=Se("radicals",()=>{const t=N(!1),n=N(null),e=ae(new Map);async function s(){if(!t.value){t.value=!0,n.value=null;try{const f=await(await fetch("/data/radicals.csv")).text();for(const[g,y]of Ce(f))e.set(g,y)}catch(r){n.value=r}finally{t.value=!1}}}async function o(r){const f=r.codePointAt(0);if(!f)return;const g=f==null?void 0:f.toString(16).padStart(5,"0"),p=await(await fetch(`/data/kanji-v1/${g}.json`)).json(),l=p.kunYomi.find(m=>!/[.-]/.test(m))??p.kunYomi.at(0)??"";e.set(r,{id:f,literal:r,strokes:p.strokeCount,meaning:p.meanings.at(0)??"",reading:l})}return s(),{radicals:e,sync:s,syncing:t,tryKanji:o}});function Ve(t){const n=Pe();return ve(()=>{const e=F(t);e&&!n.syncing&&!n.radicals.has(e)&&n.tryKanji(e)}),S(()=>{const e=F(t);return e?n.radicals.get(e)??null:null})}const xe=M({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(t){const n=t,e=N(null);function s(){var o;(o=e.value)==null||o.replaceChildren(n.strokes??"")}return q(()=>n.strokes,s),Ie(()=>{s()}),(o,r)=>(a(),i("g",{ref_key:"container",ref:e,class:"kanji-strokes"},null,512))}}),je=P(xe,[["__scopeId","data-v-53c78976"]]),Ge={class:"kanji-component-item"},Ne=["viewBox"],Ae={class:"component-info"},Ee={class:"literal"},qe={class:"meaning"},Re={key:0,lang:"ja"},De=M({__name:"KanjiComponentItem",props:{literal:{},parts:{}},setup(t){const n=t,e=ke(),s=me(),o=S(()=>{for(const g of n.parts)if(g.radical)return g.radical;return null}),r=Ve(()=>n.literal);function f(g){return`oklch(from var(--accent-color) l c ${g+3})`}return ve(()=>{const g=e.value;if(!g)return;g.dataset.element===n.literal&&(g.dataset.radical==="general"||g.dataset.radical==="tradit"?g.style.color="var(--green)":g.dataset.radical==="nelson"?g.style.color="var(--orange)":g.style.color=f(180));let y=-1;for(const p of g.querySelectorAll(`g[data-element="${n.literal}"]`)){if(p.dataset.radical==="general"||p.dataset.radical==="tradit"){p.style.color="var(--green)";continue}if(p.dataset.radical==="nelson"){p.style.color="var(--orange)";continue}(!p.dataset.part||p.dataset.part==="1")&&(y+=1),p.style.color=f(240+63*y)}}),(g,y)=>{var p,l;return a(),i("div",Ge,[$(e)?(a(),i("svg",{key:0,viewBox:$(s),class:"kanji-component-strokes"},[B(je,{class:"strokes-group",strokes:$(e)},null,8,["strokes"])],8,Ne)):K("",!0),v("div",Ae,[v("span",Ee,I(g.literal),1),v("p",qe,[v("strong",null,I((p=$(r))==null?void 0:p.meaning),1),(l=$(r))!=null&&l.reading?(a(),i("span",Re," ("+I($(r).reading)+")",1)):K("",!0)]),o.value?(a(),i("span",{key:0,class:ye(["is-radical",{"is-nelson":o.value==="nelson"}])},[o.value==="nelson"?(a(),i(d,{key:0},[c("Nelson radical")],64)):(a(),i(d,{key:1},[c("Radical")],64))],2)):K("",!0)])])}}}),Te=P(De,[["__scopeId","data-v-ce0ca725"]]),We={class:"component-list"},Oe=M({__name:"KanjiComponents",setup(t){const n=Le();return(e,s)=>(a(),i("section",null,[v("h2",null,[s[0]||(s[0]=c(" Components ")),$(n).size>0?(a(),i(d,{key:0},[c(" ("+I($(n).size)+")",1)],64)):K("",!0)]),v("ul",We,[(a(!0),i(d,null,C($(n),([o,r])=>(a(),i("li",{key:o},[B(Te,{literal:o,parts:r},null,8,["literal","parts"])]))),128))])]))}}),wt=P(Oe,[["__scopeId","data-v-6768574a"]]),Ye={class:"kanji-readings"},ze={class:"dd-items"},Xe={class:"dd-items"},Fe=M({__name:"KanjiReadings",props:{kanji:{}},setup(t){return(n,e)=>(a(),i("section",null,[e[2]||(e[2]=v("h2",null,"Readings",-1)),v("dl",Ye,[e[0]||(e[0]=v("dt",null,"Kun",-1)),v("div",ze,[(a(!0),i(d,null,C(n.kanji.kunYomi,s=>(a(),i("dd",null,I(s),1))),256))]),e[1]||(e[1]=v("dt",null,"On",-1)),v("div",Xe,[(a(!0),i(d,null,C(n.kanji.onYomi,s=>(a(),i("dd",null,I(s),1))),256))])])]))}}),bt=P(Fe,[["__scopeId","data-v-f6c59d96"]]),_e={class:"kanji-strokes-background"},He=["x","y","width","height"],Ue=["x1","y1","x2","y2"],Je=["x1","y1","x2","y2"],Ze=["x1","y1","x2","y2"],Qe=["x1","y1","x2","y2"],en=["x1","y1","x2","y2"],nn=["x1","y1","x2","y2"],tn=M({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(t){const n=t,e=S(()=>{const[r,f,g,y]=n.viewBox.split(",");return{x:Number.parseInt(r),y:Number.parseInt(f),width:Number.parseInt(g),height:Number.parseInt(y)}}),s=S(()=>{const{x:r,width:f}=e.value;return r+f/2}),o=S(()=>{const{y:r,height:f}=e.value;return r+f/2});return(r,f)=>(a(),i("g",_e,[v("rect",{class:"background",x:e.value.x,y:e.value.y,width:e.value.width,height:e.value.width,rx:"5"},null,8,He),v("line",{class:"midline",x1:e.value.x+1,y1:o.value,x2:e.value.x+e.value.width-1,y2:o.value},null,8,Ue),v("line",{class:"midline",x1:s.value,y1:e.value.y+1,x2:s.value,y2:e.value.y+e.value.height-1},null,8,Je),v("line",{class:"quartline",x1:s.value/2,y1:e.value.y+1,x2:s.value/2,y2:e.value.y+e.value.height-1},null,8,Ze),v("line",{class:"quartline",x1:3*s.value/2,y1:e.value.y+1,x2:3*s.value/2,y2:e.value.y+e.value.height-1},null,8,Qe),v("line",{class:"quartline",x1:e.value.x+1,y1:o.value/2,x2:e.value.x+e.value.width-1,y2:o.value/2},null,8,en),v("line",{class:"quartline",x1:e.value.x+1,y1:3*o.value/2,x2:e.value.x+e.value.width-1,y2:3*o.value/2},null,8,nn)]))}}),an=P(tn,[["__scopeId","data-v-1b492e2c"]]),sn=1e-12,ce=112e-18,on=t=>t>=-ce&&t<=ce,he=(t,n)=>Math.sqrt(t*t+n*n),_=(t,n)=>({x:t,y:n}),rn=t=>he(t.x,t.y),ln=t=>_(-t.x,-t.y),Q=(t,n)=>_(t.x+n.x,t.y+n.y),G=(t,n)=>_(t.x-n.x,t.y-n.y),W=(t,n)=>_(t.x*n,t.y*n),E=(t,n)=>t.x*n.x+t.y*n.y,le=(t,n)=>he(t.x-n.x,t.y-n.y),T=(t,n=1)=>W(t,n/(rn(t)||1/0)),we=(t,n)=>({p:t,i:n}),un=(t,n,e)=>{n&&(t.unshift(t[t.length-1]),t.push(t[1]));const s=t.length;if(s===0)return[];const o=[we(t[0])];return oe(t,o,e,0,s-1,G(t[1],t[0]),G(t[s-2],t[s-1])),n&&(o.shift(),o.pop()),o},oe=(t,n,e,s,o,r,f)=>{if(o-s===1){const j=t[s],w=t[o],h=le(j,w)/3;ge(n,[j,Q(j,T(r,h)),Q(w,T(f,h)),w]);return}const g=gn(t,s,o);let y=Math.max(e,e*e),p,l=!0;for(let j=0;j<=4;j++){const w=dn(t,s,o,g,r,f),h=fn(t,s,o,w,g);if(h.error<e&&l){ge(n,w);return}if(p=h.index,h.error>=y)break;l=pn(t,s,o,g,w),y=h.error}const m=G(t[p-1],t[p+1]);oe(t,n,e,s,p,r,m),oe(t,n,e,p,o,ln(m),f)},ge=(t,n)=>{const e=t[t.length-1];e.o=G(n[1],n[0]),t.push(we(n[3],G(n[2],n[3])))},dn=(t,n,e,s,o,r)=>{const f=sn,g=Math.abs,y=t[n],p=t[e],l=[[0,0],[0,0]],m=[0,0];for(let b=0,x=e-n+1;b<x;b++){const R=s[b],D=1-R,H=3*R*D,U=D*D*D,O=H*D,ue=H*R,be=R*R*R,ee=T(o,O),ne=T(r,ue),de=G(G(t[n+b],W(y,U+O)),W(p,ue+be));l[0][0]+=E(ee,ee),l[0][1]+=E(ee,ne),l[1][0]=l[0][1],l[1][1]+=E(ne,ne),m[0]+=E(ee,de),m[1]+=E(ne,de)}const j=l[0][0]*l[1][1]-l[1][0]*l[0][1];let w,h;if(g(j)>f){const b=l[0][0]*m[1]-l[1][0]*m[0];w=(m[0]*l[1][1]-m[1]*l[0][1])/j,h=b/j}else{const b=l[0][0]+l[0][1],x=l[1][0]+l[1][1];w=h=g(b)>f?m[0]/b:g(x)>f?m[1]/x:0}const V=le(p,y),L=f*V;let u,k;if(w<L||h<L)w=h=V/3;else{const b=G(p,y);u=T(o,w),k=T(r,h),E(u,b)-E(k,b)>V*V&&(w=h=V/3,u=k=null)}return[y,Q(y,u||T(o,w)),Q(p,k||T(r,h)),p]},pn=(t,n,e,s,o)=>{for(let r=n;r<=e;r++)s[r-n]=cn(o,t[r],s[r-n]);for(let r=1,f=s.length;r<f;r++)if(s[r]<=s[r-1])return!1;return!0},cn=(t,n,e)=>{const s=[],o=[];for(let l=0;l<=2;l++)s[l]=W(G(t[l+1],t[l]),3);for(let l=0;l<=1;l++)o[l]=W(G(s[l+1],s[l]),2);const r=te(3,t,e),f=te(2,s,e),g=te(1,o,e),y=G(r,n),p=E(f,f)+E(y,g);return on(p)?e:e-E(y,f)/p},te=(t,n,e)=>{const s=n.slice();for(let o=1;o<=t;o++)for(let r=0;r<=t-o;r++)s[r]=Q(W(s[r],1-e),W(s[r+1],e));return s[0]},gn=(t,n,e)=>{const s=[0];for(let o=n+1;o<=e;o++)s[o-n]=s[o-n-1]+le(t[o],t[o-1]);for(let o=1,r=e-n;o<=r;o++)s[o]/=s[r];return s},fn=(t,n,e,s,o)=>{let r=Math.floor((e-n+1)/2),f=0;for(let g=n+1;g<e;g++){const y=te(3,s,o[g-n]),p=G(y,t[g]),l=p.x*p.x+p.y*p.y;l>=f&&(f=l,r=g)}return{error:f,index:r}},vn=(t,n,e)=>{const s=t.length,o=10**e,r=e<16?h=>Math.round(h*o)/o:h=>h,f=(h,V)=>r(h)+","+r(V);let g=!0,y,p,l,m;const j=[],w=(h,V)=>{var k,b,x,R;const L=h.p.x,u=h.p.y;if(g)j.push("M"+f(L,u)),g=!1;else{const D=L+(((k=h.i)==null?void 0:k.x)??0),H=u+(((b=h.i)==null?void 0:b.y)??0);if(D===L&&H===u&&l===y&&m===p){if(!V){const U=L-y,O=u-p;j.push(U===0?"v"+r(O):O===0?"h"+r(U):"l"+f(U,O))}}else j.push("c"+f(l-y,m-p)+" "+f(D-y,H-p)+" "+f(L-y,u-p))}y=L,p=u,l=L+(((x=h.o)==null?void 0:x.x)??0),m=u+(((R=h.o)==null?void 0:R.y)??0)};if(!s)return"";for(let h=0;h<s;h++)w(t[h]);return n&&s>0&&(w(t[0],!0),j.push("z")),j.join("")},yn=(t,n={})=>t.length===0?"":vn(un(t.map(typeof t[0].x=="number"?e=>_(e.x,e.y):e=>_(e[0],e[1])),n.closed,n.tolerance??2.5),n.closed,n.precision??5),kn=["x","y","width","height"],mn=["d"],jn=["points"],hn=M({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(t,{emit:n}){const e=t,s=n,o=N(null),r=S(()=>{var u;return(u=o.value)==null?void 0:u.closest("svg")}),f=S(()=>{var u;return(u=r.value)==null?void 0:u.viewBox.baseVal}),g=ae([]);function y(u){var x;if(!r.value)return{x:u.x,y:u.y};const k=r.value.createSVGPoint();k.x=u.x,k.y=u.y;const b=k.matrixTransform((x=r.value.getScreenCTM())==null?void 0:x.inverse());return{x:b.x,y:b.y}}function p(u){u.isPrimary&&(u.preventDefault(),g.push(y(u)))}function l(u){var k;g.length===0||!u.isPrimary||((k=o.value)==null||k.setPointerCapture(u.pointerId),g.push(y(u)))}function m(u){var k;u.isPrimary&&(g.length>1&&s("stroke",yn(g)),(k=o.value)==null||k.releasePointerCapture(u.pointerId),g.splice(0,g.length))}function j(u){const k=u.getTotalLength();return[{strokeDasharray:k,strokeDashoffset:k},{strokeDasharray:k,strokeDashoffset:0}]}const w={duration:500,endDelay:100,easing:"ease-in-out"},h=[];function V(){var u;if(o.value){for(const k of(u=o.value)==null?void 0:u.querySelectorAll("path.stroke")){const b=k.animate(j(k),w);b.pause(),h.push(b)}L()}}async function L(){let u=h.at(0);for(;u;)u.play(),await u.finished,h.shift(),u=h.at(0)}return q(()=>e.animate,u=>{u&&V()}),q(()=>e.animatePause,u=>{var k,b;u?(k=h.at(0))==null||k.pause():(b=h.at(0))==null||b.play()}),(u,k)=>(a(),i("g",{ref_key:"el",ref:o,class:"kanji-strokes-practice-canvas canvas",onPointerdown:p,onPointermove:l,onPointerup:m},[f.value?(a(),i("rect",{key:0,class:"background",x:f.value.x,y:f.value.y,width:f.value.width,height:f.value.height},null,8,kn)):K("",!0),(a(!0),i(d,null,C(u.practiceStrokes,b=>(a(),i("path",{class:"stroke",d:b},null,8,mn))),256)),v("polyline",{class:"stroke current-stroke",points:$(g).map(({x:b,y:x})=>`${b},${x}`).join(" ")},null,8,jn)],544))}}),wn=P(hn,[["__scopeId","data-v-b76b5538"]]),bn={class:"strokes-figure"},$n=["viewBox"],Sn={class:"controls"},In=M({__name:"KanjiStrokes",props:{kanji:{},practiceMode:{type:Boolean,default:!1}},setup(t){const n=t,e=ke(),s=me(),o=S(()=>{var u;return((u=e.value)==null?void 0:u.querySelectorAll("path"))??[]}),r=ae([]),f=S(()=>r.length>0),g=N(!1),y=N(!1),p=ae([]);q(y,u=>{if(u){for(const k of r)k.cancel();r.splice(0,r.length),g.value=!1}else p.splice(0,p.length)}),q(()=>n.practiceMode,u=>{u!==y.value&&(y.value=u)},{immediate:!0});function l(u){const k=u.getTotalLength();return[{strokeDasharray:k,strokeDashoffset:k},{strokeDasharray:k,strokeDashoffset:0}]}const m={duration:500,easing:"ease-in-out"};function j(){for(const u of o.value){const k=u.animate(l(u),m);k.pause(),r.push(k)}w()}async function w(){let u=r.at(0);for(;u;)u.play(),await u.finished,r.shift(),u=r.at(0),u&&await Ke(100)}function h(){var u;(u=r.at(0))==null||u.pause(),g.value=!0}function V(){var u;(u=r.at(0))==null||u.play(),g.value=!1}function L(){const u=o.value[p.length];if(!u)return;u.style.display="block",u.animate(l(u),m).finished.then(()=>{u.style.removeProperty("display")})}return(u,k)=>(a(),i("section",null,[v("h2",null,[k[6]||(k[6]=c(" Strokes ")),!u.practiceMode&&o.value.length>0?(a(),i(d,{key:0},[c(" ("+I(o.value.length)+") ",1)],64)):K("",!0)]),v("figure",bn,[$(e)?(a(),i("svg",{key:0,viewBox:$(s),class:"svg"},[B(an,{viewBox:$(s)},null,8,["viewBox"]),B(je,{strokes:$(e),class:ye(["strokes",{comparing:f.value||o.value.length<=$(p).length,practicing:y.value}])},null,8,["strokes","class"]),y.value?(a(),A(wn,{key:0,"practice-strokes":$(p),animate:f.value,"animate-pause":g.value,onStroke:k[0]||(k[0]=b=>$(p).push(b))},null,8,["practice-strokes","animate","animate-pause"])):K("",!0)],8,$n)):K("",!0),v("figcaption",Sn,[f.value?(a(),i(d,{key:0},[g.value?(a(),A(z,{key:0,"aria-label":"Play",onClick:k[1]||(k[1]=b=>V())},{default:Y(()=>[B(X,{icon:"play"})]),_:1})):(a(),A(z,{key:1,"aria-label":"Pause",onClick:k[2]||(k[2]=b=>h())},{default:Y(()=>[B(X,{icon:"pause"})]),_:1}))],64)):(a(),i(d,{key:1},[y.value&&$(p).length<o.value.length?(a(),A(z,{key:0,"aria-lable":"hint",onClick:L},{default:Y(()=>[B(X,{icon:"help-circle"})]),_:1})):(a(),A(z,{key:1,"aria-label":"Play Stroke Order",onClick:k[3]||(k[3]=b=>j())},{default:Y(()=>[B(X,{icon:"play"})]),_:1}))],64)),u.practiceMode?K("",!0):(a(),A(z,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${y.value}`,filled:y.value,onClick:k[4]||(k[4]=b=>y.value=!y.value)},{default:Y(()=>[B(X,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),y.value?(a(),i(d,{key:3},[k[7]||(k[7]=v("hr",{class:"rule"},null,-1)),B(z,{"aria-label":"Undo",onClick:k[5]||(k[5]=b=>$(p).pop())},{default:Y(()=>[B(X,{icon:"rotate-left"})]),_:1})],64)):K("",!0)])])]))}}),$t=P(In,[["__scopeId","data-v-3e452920"]]),Kn={class:"kanji-title"},Bn={class:"main-meaning meaning"},Mn={class:"labels"},Ln={key:0,class:"freq"},Cn={key:0,class:"additional-meanings"},Pn={class:"meaning"},Vn=M({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){const n=t,e=S(()=>{const{freq:s}=n.kanji;if(!s)return null;if(s<=50)return 50;if(s<=100)return 100;if(s<=200)return 200;if(s<=500)return 500;if(s<=1e3)return 1e3});return(s,o)=>{var r,f;return a(),i("header",Kn,[J(v("h2",{class:"literal",lang:"ja"},I(s.kanji.literal),513),[[Z,!s.hideLiteral]]),J(v("p",Bn,[v("strong",null,I((r=s.kanji.meanings)==null?void 0:r.at(0)),1)],512),[[Z,!s.hideMeaning]]),v("aside",Mn,[e.value?(a(),i("span",Ln,"Top "+I(e.value),1)):K("",!0)]),((f=s.kanji.meanings)==null?void 0:f.length)>1?J((a(),i("ul",Cn,[(a(!0),i(d,null,C(s.kanji.meanings.slice(1),g=>(a(),i("li",Pn,I(g),1))),256))],512)),[[Z,!s.hideMeaning]]):K("",!0)])}}}),St=P(Vn,[["__scopeId","data-v-955be1b2"]]);function xn(t){const n=N(null);return q(()=>F(t),async e=>{const o=await(await fetch(`/data/sentences-v1/${e}.json`)).json();n.value=o},{immediate:!0}),n}const Gn={key:0,class:"placeholder"},se=M({__name:"MaybeHideKanji",props:{str:{},kanji:{default:null},hide:{type:Boolean,default:!1}},setup(t){return(n,e)=>!n.kanji||!n.hide?(a(),i(d,{key:0},[c(I(n.str),1)],64)):(a(!0),i(d,{key:1},C(n.str,s=>(a(),i(d,null,[s===n.kanji?(a(),i("span",Gn,"◌")):(a(),i(d,{key:1},[c(I(s),1)],64))],64))),256))}}),Nn={key:0},An={lang:"ja",class:"sentence"},En={key:0},qn={key:0},Rn={key:1},Dn=M({__name:"VocabularySentence",props:{sentenceId:{},hideKanji:{},hideReading:{},hideMeaning:{type:Boolean}},setup(t){const n=t,e=xn(()=>n.sentenceId);function s(o){return n.hideReading&&o.includes(n.hideReading)}return(o,r)=>$(e)?(a(),i("div",Nn,[v("p",An,[(a(!0),i(d,null,C($(e).words,f=>(a(),i(d,null,[(a(!0),i(d,null,C(f.furigana,({ruby:g,rt:y})=>(a(),i(d,null,[y?(a(),i("ruby",En,[B(se,{hide:o.hideKanji!=null,kanji:o.hideKanji,str:g},null,8,["hide","kanji","str"]),r[0]||(r[0]=v("rp",null,"(",-1)),s(g)?(a(),i("rt",qn,"◌")):(a(),i("rt",Rn,I(y),1)),r[1]||(r[1]=v("rp",null,")",-1))])):(a(),A(se,{key:1,hide:o.hideKanji!=null,kanji:o.hideKanji,str:g},null,8,["hide","kanji","str"]))],64))),256))],64))),256))]),J(v("p",{lang:"en",class:"translation"},I($(e).meaning),513),[[Z,!o.hideMeaning]])])):K("",!0)}}),Tn=P(Dn,[["__scopeId","data-v-0af9cb09"]]),Wn={class:"pos-tag"},On=M({__name:"PartOfSpeechTag",props:{tag:{}},setup(t){return(n,e)=>(a(),i("span",Wn,[n.tag==="adj-f"?(a(),i(d,{key:0},[c(" noun or prenominal verb")],64)):n.tag==="adj-i"?(a(),i(d,{key:1},[e[0]||(e[0]=v("i",{lang:"ja-Latn"},"i",-1)),e[1]||(e[1]=c(" adjective"))],64)):n.tag==="adj-ix"?(a(),i(d,{key:2},[e[2]||(e[2]=c(" adjective – ")),e[3]||(e[3]=v("i",{lang:"ja-Latn"},"yoi",-1)),e[4]||(e[4]=c("/")),e[5]||(e[5]=v("i",{lang:"ja-Latn"},"ii",-1)),e[6]||(e[6]=c(" class"))],64)):n.tag==="adj-na"?(a(),i(d,{key:3},[c(" na adjective")],64)):n.tag==="adj-nari"?(a(),i(d,{key:4},[e[7]||(e[7]=c(" formal ")),e[8]||(e[8]=v("i",{lang:"ja-Latn"},"na",-1)),e[9]||(e[9]=c("-adjective"))],64)):n.tag==="adj-no"?(a(),i(d,{key:5},[e[10]||(e[10]=c(" noun w. ")),e[11]||(e[11]=v("i",null,"no",-1)),e[12]||(e[12]=c(" particle"))],64)):n.tag==="adj-pn"?(a(),i(d,{key:6},[c(" pre-noun adjectival")],64)):n.tag==="adj-t"?(a(),i(d,{key:7},[e[13]||(e[13]=v("i",{lang:"ja-Latn"},"taru",-1)),e[14]||(e[14]=c(" adjective"))],64)):n.tag==="adv"?(a(),i(d,{key:8},[c(" adverb")],64)):n.tag==="adv-to"?(a(),i(d,{key:9},[e[15]||(e[15]=c(" adverb w. ")),e[16]||(e[16]=v("i",{lang:"ja-Latn"},"to",-1)),e[17]||(e[17]=c(" particle"))],64)):n.tag==="aux"?(a(),i(d,{key:10},[c(" auxiliary")],64)):n.tag==="aux-adj"?(a(),i(d,{key:11},[c(" auxiliary adjective")],64)):n.tag==="aux-v"?(a(),i(d,{key:12},[c(" auxiliary verb")],64)):n.tag==="conj"?(a(),i(d,{key:13},[c(" conjunction")],64)):n.tag==="cop"?(a(),i(d,{key:14},[c(" copula")],64)):n.tag==="ctr"?(a(),i(d,{key:15},[c(" counter")],64)):n.tag==="exp"?(a(),i(d,{key:16},[c(" expressions")],64)):n.tag==="int"?(a(),i(d,{key:17},[c(" interjection")],64)):n.tag==="n"?(a(),i(d,{key:18},[c(" noun")],64)):n.tag==="n-adv"?(a(),i(d,{key:19},[c(" adverbial noun")],64)):n.tag==="n-pr"?(a(),i(d,{key:20},[c(" proper noun")],64)):n.tag==="n-pref"?(a(),i(d,{key:21},[c(" noun, used as a prefix")],64)):n.tag==="n-suf"?(a(),i(d,{key:22},[c(" noun, used as a suffix")],64)):n.tag==="n-t"?(a(),i(d,{key:23},[c(" noun (temporal)")],64)):n.tag==="num"?(a(),i(d,{key:24},[c(" numeric")],64)):n.tag==="pn"?(a(),i(d,{key:25},[c(" pronoun")],64)):n.tag==="pref"?(a(),i(d,{key:26},[c(" prefix")],64)):n.tag==="prt"?(a(),i(d,{key:27},[c(" particle")],64)):n.tag==="suf"?(a(),i(d,{key:28},[c(" suffix")],64)):n.tag==="v-unspec"?(a(),i(d,{key:29},[c(" verb")],64)):n.tag==="v1"?(a(),i(d,{key:30},[c(" Ichidan verb")],64)):n.tag==="v1-s"?(a(),i(d,{key:31},[e[18]||(e[18]=c(" Ichidan verb – ")),e[19]||(e[19]=v("i",{lang:"ja-Latn"},"kureru",-1))],64)):n.tag==="v5aru"?(a(),i(d,{key:32},[e[20]||(e[20]=c(" Godan verb – ")),e[21]||(e[21]=v("i",{lang:"ja-Latn"},"-aru",-1))],64)):n.tag==="v5b"?(a(),i(d,{key:33},[c(" Godan verb")],64)):n.tag==="v5g"?(a(),i(d,{key:34},[c(" Godan verb")],64)):n.tag==="v5k"?(a(),i(d,{key:35},[c(" Godan verb")],64)):n.tag==="v5k-s"?(a(),i(d,{key:36},[e[22]||(e[22]=c(" Godan verb – ")),e[23]||(e[23]=v("i",{lang:"ja-Latn"},"iku",-1)),e[24]||(e[24]=c("/")),e[25]||(e[25]=v("i",{lang:"ja-Latn"},"yuku",-1))],64)):n.tag==="v5m"?(a(),i(d,{key:37},[c(" Godan verb")],64)):n.tag==="v5n"?(a(),i(d,{key:38},[c(" Godan verb")],64)):n.tag==="v5r"?(a(),i(d,{key:39},[e[26]||(e[26]=c(" Godan verb with ")),e[27]||(e[27]=v("i",{lang:"ja-Latn"},"ru",-1)),e[28]||(e[28]=c(" ending"))],64)):n.tag==="v5r-i"?(a(),i(d,{key:40},[e[29]||(e[29]=c(" Godan verb with ")),e[30]||(e[30]=v("i",{lang:"ja-Latn"},"ru",-1)),e[31]||(e[31]=c(" ending (irregular)"))],64)):n.tag==="v5s"?(a(),i(d,{key:41},[c(" Godan verb")],64)):n.tag==="v5t"?(a(),i(d,{key:42},[c(" Godan verb")],64)):n.tag==="v5u"?(a(),i(d,{key:43},[c(" Godan verb")],64)):n.tag==="v5u-s"?(a(),i(d,{key:44},[e[32]||(e[32]=c(" Godan verb with ")),e[33]||(e[33]=v("i",{lang:"ja-Latn"},"u",-1)),e[34]||(e[34]=c(" ending (special class)"))],64)):n.tag==="v5uru"?(a(),i(d,{key:45},[e[35]||(e[35]=c(" Godan verb – ")),e[36]||(e[36]=v("i",{lang:"ja-Latn"},"Uru",-1)),e[37]||(e[37]=c(" old class verb"))],64)):n.tag==="vi"?(a(),i(d,{key:46},[c(" intransitive verb")],64)):n.tag==="vk"?(a(),i(d,{key:47},[e[38]||(e[38]=v("i",{lang:"ja-Latn"},"Kuru",-1)),e[39]||(e[39]=c(" verb"))],64)):n.tag==="vn"?(a(),i(d,{key:48},[e[40]||(e[40]=c(" irregular ")),e[41]||(e[41]=v("i",{lang:"ja-Latn"},"nu",-1)),e[42]||(e[42]=c(" verb"))],64)):n.tag==="vr"?(a(),i(d,{key:49},[e[43]||(e[43]=c(" irregular ")),e[44]||(e[44]=v("i",{lang:"ja-Latn"},"ru",-1)),e[45]||(e[45]=c(" verb"))],64)):n.tag==="vs"?(a(),i(d,{key:50},[e[46]||(e[46]=v("i",{lang:"ja-Latn"},"suru",-1)),e[47]||(e[47]=c(" verb"))],64)):n.tag==="vs-c"?(a(),i(d,{key:51},[e[48]||(e[48]=v("i",{lang:"ja-Latn"},"su",-1)),e[49]||(e[49]=c(" verb—precursor to the modern ")),e[50]||(e[50]=v("i",{lang:"ja-Latn"},"suru",-1))],64)):n.tag==="vs-i"?(a(),i(d,{key:52},[e[51]||(e[51]=v("i",{lang:"ja-Latn"},"suru",-1)),e[52]||(e[52]=c(" verb – included"))],64)):n.tag==="vs-s"?(a(),i(d,{key:53},[e[53]||(e[53]=v("i",{lang:"ja-Latn"},"suru",-1)),e[54]||(e[54]=c(" verb – special class"))],64)):n.tag==="vt"?(a(),i(d,{key:54},[c(" transitive verb")],64)):n.tag==="vz"?(a(),i(d,{key:55},[e[55]||(e[55]=c(" Ichidan verb – ")),e[56]||(e[56]=v("i",{lang:"ja-Latn"},"zuru",-1)),e[57]||(e[57]=c(" verb"))],64)):K("",!0)]))}}),Yn=P(On,[["__scopeId","data-v-a8a9d510"]]),zn={class:"vocabulary-word-meaning"},Xn={class:"meaning-pos"},Fn={class:"glossary"},_n={class:"glossary-word"},Hn=M({__name:"VocabularyWordMeaning",props:{meaning:{}},setup(t){return(n,e)=>(a(),i("div",zn,[v("div",Xn,[(a(!0),i(d,null,C(n.meaning.pos,s=>(a(),A(Yn,{tag:s},null,8,["tag"]))),256))]),v("div",Fn,[(a(!0),i(d,null,C(n.meaning.glossary,s=>(a(),i("span",_n,I(s),1))),256))])]))}}),fe=P(Hn,[["__scopeId","data-v-a1fc931c"]]),Un={class:"vocabulary-word"},Jn={key:0,class:"word",lang:"ja"},Zn={key:0},Qn={key:0},et={key:1},nt={key:1,class:"word",lang:"ja"},tt={class:"meaning"},at={key:1,class:"additional-meanings-details"},st={class:"additional-meanings"},it={class:"additional-meaning-item"},ot=M({__name:"VocabularyWord",props:{word:{},kanji:{default:null},hideKanji:{type:Boolean,default:!1},hideReading:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1}},setup(t){const n=t,e=new RegExp("\\p{Script=Han}","u"),s=S(()=>{const{kanji:l,word:m}=n;return m.meanings?l?m.meanings.filter(j=>j.info&&j.info.startsWith("esp. ")&&e.test(j.info)?j.info.includes(l):j.useWithWriting?j.useWithWriting.some(w=>w.includes(l)):!0):m.meanings:[]}),o=S(()=>{var m,j;if(!n.word.writings)return null;let l=null;for(const w of n.word.writings){if(!l){l=w;continue}n.kanji&&!w.text.includes(n.kanji)||(m=w.priority)!=null&&m.freq&&w.priority.freq<(((j=l.priority)==null?void 0:j.freq)??Number.POSITIVE_INFINITY)&&(l=w)}return l==null?void 0:l.text}),r=S(()=>{var m,j;if(!n.word.readings)return null;let l=null;for(const w of n.word.readings){if(!l){l=w;continue}(m=w.priority)!=null&&m.freq&&w.priority.freq<(((j=l.priority)==null?void 0:j.freq)??Number.POSITIVE_INFINITY)&&(l=w)}return l==null?void 0:l.text}),f=S(()=>{var m,j,w;let l;return!r.value||!o.value?l=(m=n.word.furigana)==null?void 0:m.at(0):l=(j=n.word.furigana)==null?void 0:j.find(h=>h.writing===o.value&&h.reading===r.value),l||(l=(w=n.word.furigana)==null?void 0:w.at(0)),(l==null?void 0:l.furigana)??null}),g=S(()=>s.value.at(0));function y(l){return!n.hideReading||!n.kanji?!1:l.includes(n.kanji)}const p=S(()=>s.value.slice(1));return(l,m)=>(a(),i("div",Un,[f.value?(a(),i("p",Jn,[(a(!0),i(d,null,C(f.value,({ruby:j,rt:w})=>(a(),i(d,null,[w?(a(),i("ruby",Zn,[B(se,{hide:l.hideKanji,kanji:l.kanji,str:j},null,8,["hide","kanji","str"]),m[0]||(m[0]=v("rp",null," (",-1)),y(j)?(a(),i("rt",Qn,"◌")):(a(),i("rt",et,I(w),1)),m[1]||(m[1]=v("rp",null,")",-1))])):(a(),A(se,{key:1,hide:l.hideKanji,kanji:l.kanji,str:j},null,8,["hide","kanji","str"]))],64))),256))])):(a(),i("p",nt,I(o.value),1)),J(v("div",tt,[g.value?(a(),A(fe,{key:0,meaning:g.value},null,8,["meaning"])):K("",!0),p.value.length>0?(a(),i("details",at,[v("summary",null,I(p.value.length)+" more",1),v("ul",st,[(a(!0),i(d,null,C(p.value,j=>(a(),i("li",it,[B(fe,{meaning:j},null,8,["meaning"])]))),256))])])):K("",!0)],512),[[Z,!l.hideMeaning]])]))}}),rt=P(ot,[["__scopeId","data-v-cd0b4803"]]),lt={class:"word-list-item"},ut={key:1,"aria-label":"Sentences"},dt={class:"sentences"},pt=M({__name:"WordListItem",props:{word:{},kanji:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){const n=t,e=N(null);return q(()=>n.word,async({word:s})=>{const r=await(await fetch(`/data/words-v1/${s}.json`)).json();e.value=r},{immediate:!0}),(s,o)=>(a(),i("article",lt,[e.value?(a(),A(rt,{key:0,word:e.value,kanji:s.kanji,"hide-kanji":s.hideKanji,"hide-reading":s.hideReading,"hide-meaning":s.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])):K("",!0),s.word.sentences?(a(),i("section",ut,[v("ul",dt,[(a(!0),i(d,null,C(s.word.sentences,r=>(a(),i("li",{key:r,class:"sentence-item"},[B(Tn,{"sentence-id":r,"hide-kanji":s.hideKanji?s.kanji:null,"hide-reading":s.hideReading?s.kanji:null,"hide-meaning":s.hideMeaning},null,8,["sentence-id","hide-kanji","hide-reading","hide-meaning"])]))),128))])])):K("",!0)]))}}),ct=P(pt,[["__scopeId","data-v-4a1e7cc1"]]),gt={class:"kanji-word-list"},ft=M({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){return(n,e)=>(a(),i("section",null,[v("h2",null,"Words ("+I(n.kanjiVocab.words.length)+")",1),v("ul",gt,[(a(!0),i(d,null,C(n.kanjiVocab.words,s=>(a(),i("li",{key:s.word},[B(ct,{word:s,kanji:n.kanjiVocab.literal,"hide-kanji":n.hideKanji,"hide-reading":n.hideReading,"hide-meaning":n.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))])]))}}),It=P(ft,[["__scopeId","data-v-f556788b"]]);export{St as K,jt as a,bt as b,$t as c,It as d,wt as e,ht as p,mt as u};
