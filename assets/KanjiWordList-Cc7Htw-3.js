import{l as G,m as R,v as X,g as I,x as Se,y as re,s as ve,z as Ie,A as ae,d as P,B as Ke,c as s,o as a,_ as N,u as S,f as M,e as L,b as f,t as K,n as ye,F as d,a as c,h as C,i as A,w as O,C as J,D as Q,j as Be,E as Le}from"./index-PWB7_iI1.js";import{A as z,a as _,u as Me,d as Ce}from"./db-D-7ArWxb.js";import{s as ke}from"./time-BmRGZSiE.js";import{d as Pe}from"./decks-huPVwMnz.js";function It(t){const n=G(null);return R(()=>X(t),async e=>{if(!e){n.value=null;return}const o=e.toString(16).padStart(5,"0"),l=await(await fetch(`/data/kanji-v1/${o}.json`)).json();n.value=l},{immediate:!0}),n}function Kt(t){const n=G(null);return R(()=>X(t),async e=>{if(!e){n.value=null;return}const o=e.toString(16).padStart(5,"0"),l=await(await fetch(`/data/kanji-vocab-v1/${o}.json`)).json();n.value=l},{immediate:!0}),n}const ce="http://kanjivg.tagaini.net",ie=Symbol("kanjivg"),Ve=new DOMParser;function Ne(t){var o;const n=[];let e=t.closest("[data-position]");for(;e instanceof SVGElement;)n.push(e.dataset.position),e=((o=e.parentElement)==null?void 0:o.closest("[data-position]"))??null;return n}function Bt(t){const n=G(null),e=G(null);R(()=>X(t),async i=>{if(!i)return;const p=await(await fetch(`/kanjivg/kanji/${i}.svg`)).text(),g=Ve.parseFromString(p,"image/svg+xml");if(g.documentElement instanceof SVGSVGElement){const{x:u,y:r,width:j,height:h}=g.documentElement.viewBox.baseVal;e.value=`${u},${r},${j},${h}`}const y=g.getElementById(`kvg:${i}`);if(y){for(const u of[...y==null?void 0:y.querySelectorAll("*"),y])if(u instanceof SVGElement){for(const r of[...u.attributes])r.namespaceURI===ce&&(u.dataset[r.localName]=r.value,u.removeAttributeNS(ce,r.localName));u.removeAttribute("xmlns:kvg")}}n.value=y},{immediate:!0});const o=I(()=>{const i=n.value;if(!i)return new Map;const l=new Map,p={};function g(u){if(u.dataset.part&&Number.parseInt(u.dataset.part)>1)return;const r=u.dataset.element,j={element:r,original:u.dataset.original??null,position:Ne(u),radical:u.dataset.radical??null};let h=l.get(r);h?h.push(j):(h=[j],l.set(r,h)),j.radical&&(p[j.radical]=r)}i.dataset.radical&&g(i);for(const u of i.querySelectorAll("g[data-element]"))g(u);const y=new Map;for(const u of["general","tradit","nelson"]){const r=p[u],j=l.get(r);j&&(y.set(r,j),l.delete(r))}for(const[u,r]of l)y.set(u,r);return y});Se(ie,{strokesEl:n,viewBox:e,components:o})}function me(){const t=re(ie,null);return I(()=>{var e;return((e=t==null?void 0:t.strokesEl.value)==null?void 0:e.cloneNode(!0))??null})}function je(){const t=re(ie,null);return I(()=>(t==null?void 0:t.viewBox.value)??"0,0,109,109")}function xe(){const t=re(ie,null);return I(()=>(t==null?void 0:t.components.value)??new Map)}function*Ge(t){for(const n of t.split(`
`)){const[e,o,i,l,p]=n.split(",");if(!o)continue;const g={id:Number.parseInt(e),literal:o.at(0)??"",strokes:Number.parseInt(i),meaning:l,reading:p};for(const y of o)yield[y,g]}}const Ae=Ie("radicals",()=>{const t=G(!1),n=G(null),e=ae(new Map);async function o(){if(!t.value){t.value=!0,n.value=null;try{const p=await(await fetch("/data/radicals.csv")).text();for(const[g,y]of Ge(p))e.set(g,y)}catch(l){n.value=l}finally{t.value=!1}}}async function i(l){const p=l.codePointAt(0);if(!p)return;p===19994&&e.set(l,{id:p,literal:l,strokes:5,meaning:"North",reading:"ほく"});const g=p==null?void 0:p.toString(16).padStart(5,"0"),u=await(await fetch(`/data/kanji-v1/${g}.json`)).json(),r=u.kunYomi.find(j=>!/[.-]/.test(j))??u.kunYomi.at(0)??"";e.set(l,{id:p,literal:l,strokes:u.strokeCount,meaning:u.meanings.at(0)??"",reading:r})}return o(),{radicals:e,sync:o,syncing:t,tryKanji:i}});function Ee(t){const n=Ae();return ve(()=>{const e=X(t);e&&!n.syncing&&!n.radicals.has(e)&&n.tryKanji(e)}),I(()=>{const e=X(t);return e?n.radicals.get(e)??null:null})}const Re=P({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(t){const n=t,e=G(null);function o(){var i;(i=e.value)==null||i.replaceChildren(n.strokes??"")}return R(()=>n.strokes,o),Ke(()=>{o()}),(i,l)=>(a(),s("g",{ref_key:"container",ref:e,class:"kanji-strokes"},null,512))}}),he=N(Re,[["__scopeId","data-v-53c78976"]]),qe={class:"kanji-component-item"},De=["viewBox"],Te={class:"component-info"},Oe={class:"literal"},We={class:"meaning"},Ye={key:0,lang:"ja"},ze=P({__name:"KanjiComponentItem",props:{literal:{},parts:{}},setup(t){const n=t,e=me(),o=je(),i=I(()=>{for(const g of n.parts)if(g.radical)return g.radical;return null}),l=Ee(()=>n.literal);function p(g){return`oklch(from var(--accent-color) l c ${g+3})`}return ve(()=>{const g=e.value;if(!g)return;g.dataset.element===n.literal&&(g.dataset.radical==="general"||g.dataset.radical==="tradit"?g.style.color="var(--green)":g.dataset.radical==="nelson"?g.style.color="var(--orange)":g.style.color=p(180));let y=-1;for(const u of g.querySelectorAll(`g[data-element="${n.literal}"]`)){if(u.dataset.radical==="general"||u.dataset.radical==="tradit"){u.style.color="var(--green)";continue}if(u.dataset.radical==="nelson"){u.style.color="var(--orange)";continue}(!u.dataset.part||u.dataset.part==="1")&&(y+=1),u.style.color=p(240+63*y)}}),(g,y)=>{var u,r;return a(),s("div",qe,[S(e)?(a(),s("svg",{key:0,viewBox:S(o),class:"kanji-component-strokes"},[M(he,{class:"strokes-group",strokes:S(e)},null,8,["strokes"])],8,De)):L("",!0),f("div",Te,[f("span",Oe,K(g.literal),1),f("p",We,[f("strong",null,K((u=S(l))==null?void 0:u.meaning),1),(r=S(l))!=null&&r.reading?(a(),s("span",Ye," ("+K(S(l).reading)+")",1)):L("",!0)]),i.value?(a(),s("span",{key:0,class:ye(["is-radical",{"is-nelson":i.value==="nelson"}])},[i.value==="nelson"?(a(),s(d,{key:0},[c("Nelson radical")],64)):(a(),s(d,{key:1},[c("Radical")],64))],2)):L("",!0)])])}}}),_e=N(ze,[["__scopeId","data-v-ce0ca725"]]),Xe={class:"component-list"},He=P({__name:"KanjiComponents",setup(t){const n=xe();return(e,o)=>(a(),s("section",null,[f("h2",null,[o[0]||(o[0]=c(" Components ")),S(n).size>0?(a(),s(d,{key:0},[c(" ("+K(S(n).size)+")",1)],64)):L("",!0)]),f("ul",Xe,[(a(!0),s(d,null,C(S(n),([i,l])=>(a(),s("li",{key:i},[M(_e,{literal:i,parts:l},null,8,["literal","parts"])]))),128))])]))}}),Lt=N(He,[["__scopeId","data-v-6768574a"]]),Fe={class:"kanji-readings"},Ue={class:"dd-items"},Je={class:"dd-items"},Qe=P({__name:"KanjiReadings",props:{kanji:{}},setup(t){return(n,e)=>(a(),s("section",null,[e[2]||(e[2]=f("h2",null,"Readings",-1)),f("dl",Fe,[e[0]||(e[0]=f("dt",null,"Kun",-1)),f("div",Ue,[(a(!0),s(d,null,C(n.kanji.kunYomi,o=>(a(),s("dd",null,K(o),1))),256))]),e[1]||(e[1]=f("dt",null,"On",-1)),f("div",Je,[(a(!0),s(d,null,C(n.kanji.onYomi,o=>(a(),s("dd",null,K(o),1))),256))])])]))}}),Mt=N(Qe,[["__scopeId","data-v-f6c59d96"]]),Ze={class:"kanji-strokes-background"},en=["x","y","width","height"],nn=["x1","y1","x2","y2"],tn=["x1","y1","x2","y2"],an=["x1","y1","x2","y2"],sn=["x1","y1","x2","y2"],on=["x1","y1","x2","y2"],rn=["x1","y1","x2","y2"],ln=P({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(t){const n=t,e=I(()=>{const[l,p,g,y]=n.viewBox.split(",");return{x:Number.parseInt(l),y:Number.parseInt(p),width:Number.parseInt(g),height:Number.parseInt(y)}}),o=I(()=>{const{x:l,width:p}=e.value;return l+p/2}),i=I(()=>{const{y:l,height:p}=e.value;return l+p/2});return(l,p)=>(a(),s("g",Ze,[f("rect",{class:"background",x:e.value.x,y:e.value.y,width:e.value.width,height:e.value.width,rx:"5"},null,8,en),f("line",{class:"midline",x1:e.value.x+1,y1:i.value,x2:e.value.x+e.value.width-1,y2:i.value},null,8,nn),f("line",{class:"midline",x1:o.value,y1:e.value.y+1,x2:o.value,y2:e.value.y+e.value.height-1},null,8,tn),f("line",{class:"quartline",x1:o.value/2,y1:e.value.y+1,x2:o.value/2,y2:e.value.y+e.value.height-1},null,8,an),f("line",{class:"quartline",x1:3*o.value/2,y1:e.value.y+1,x2:3*o.value/2,y2:e.value.y+e.value.height-1},null,8,sn),f("line",{class:"quartline",x1:e.value.x+1,y1:i.value/2,x2:e.value.x+e.value.width-1,y2:i.value/2},null,8,on),f("line",{class:"quartline",x1:e.value.x+1,y1:3*i.value/2,x2:e.value.x+e.value.width-1,y2:3*i.value/2},null,8,rn)]))}}),un=N(ln,[["__scopeId","data-v-1b492e2c"]]),dn=1e-12,pe=112e-18,cn=t=>t>=-pe&&t<=pe,we=(t,n)=>Math.sqrt(t*t+n*n),H=(t,n)=>({x:t,y:n}),pn=t=>we(t.x,t.y),gn=t=>H(-t.x,-t.y),Z=(t,n)=>H(t.x+n.x,t.y+n.y),E=(t,n)=>H(t.x-n.x,t.y-n.y),W=(t,n)=>H(t.x*n,t.y*n),q=(t,n)=>t.x*n.x+t.y*n.y,le=(t,n)=>we(t.x-n.x,t.y-n.y),T=(t,n=1)=>W(t,n/(pn(t)||1/0)),be=(t,n)=>({p:t,i:n}),fn=(t,n,e)=>{n&&(t.unshift(t[t.length-1]),t.push(t[1]));const o=t.length;if(o===0)return[];const i=[be(t[0])];return oe(t,i,e,0,o-1,E(t[1],t[0]),E(t[o-2],t[o-1])),n&&(i.shift(),i.pop()),i},oe=(t,n,e,o,i,l,p)=>{if(i-o===1){const h=t[o],b=t[i],w=le(h,b)/3;ge(n,[h,Z(h,T(l,w)),Z(b,T(p,w)),b]);return}const g=mn(t,o,i);let y=Math.max(e,e*e),u,r=!0;for(let h=0;h<=4;h++){const b=vn(t,o,i,g,l,p),w=jn(t,o,i,b,g);if(w.error<e&&r){ge(n,b);return}if(u=w.index,w.error>=y)break;r=yn(t,o,i,g,b),y=w.error}const j=E(t[u-1],t[u+1]);oe(t,n,e,o,u,l,j),oe(t,n,e,u,i,gn(j),p)},ge=(t,n)=>{const e=t[t.length-1];e.o=E(n[1],n[0]),t.push(be(n[3],E(n[2],n[3])))},vn=(t,n,e,o,i,l)=>{const p=dn,g=Math.abs,y=t[n],u=t[e],r=[[0,0],[0,0]],j=[0,0];for(let v=0,m=e-n+1;v<m;v++){const B=o[v],D=1-B,F=3*B*D,U=D*D*D,Y=F*D,ue=F*B,$e=B*B*B,ee=T(i,Y),ne=T(l,ue),de=E(E(t[n+v],W(y,U+Y)),W(u,ue+$e));r[0][0]+=q(ee,ee),r[0][1]+=q(ee,ne),r[1][0]=r[0][1],r[1][1]+=q(ne,ne),j[0]+=q(ee,de),j[1]+=q(ne,de)}const h=r[0][0]*r[1][1]-r[1][0]*r[0][1];let b,w;if(g(h)>p){const v=r[0][0]*j[1]-r[1][0]*j[0];b=(j[0]*r[1][1]-j[1]*r[0][1])/h,w=v/h}else{const v=r[0][0]+r[0][1],m=r[1][0]+r[1][1];b=w=g(v)>p?j[0]/v:g(m)>p?j[1]/m:0}const x=le(u,y),V=p*x;let k,$;if(b<V||w<V)b=w=x/3;else{const v=E(u,y);k=T(i,b),$=T(l,w),q(k,v)-q($,v)>x*x&&(b=w=x/3,k=$=null)}return[y,Z(y,k||T(i,b)),Z(u,$||T(l,w)),u]},yn=(t,n,e,o,i)=>{for(let l=n;l<=e;l++)o[l-n]=kn(i,t[l],o[l-n]);for(let l=1,p=o.length;l<p;l++)if(o[l]<=o[l-1])return!1;return!0},kn=(t,n,e)=>{const o=[],i=[];for(let r=0;r<=2;r++)o[r]=W(E(t[r+1],t[r]),3);for(let r=0;r<=1;r++)i[r]=W(E(o[r+1],o[r]),2);const l=te(3,t,e),p=te(2,o,e),g=te(1,i,e),y=E(l,n),u=q(p,p)+q(y,g);return cn(u)?e:e-q(y,p)/u},te=(t,n,e)=>{const o=n.slice();for(let i=1;i<=t;i++)for(let l=0;l<=t-i;l++)o[l]=Z(W(o[l],1-e),W(o[l+1],e));return o[0]},mn=(t,n,e)=>{const o=[0];for(let i=n+1;i<=e;i++)o[i-n]=o[i-n-1]+le(t[i],t[i-1]);for(let i=1,l=e-n;i<=l;i++)o[i]/=o[l];return o},jn=(t,n,e,o,i)=>{let l=Math.floor((e-n+1)/2),p=0;for(let g=n+1;g<e;g++){const y=te(3,o,i[g-n]),u=E(y,t[g]),r=u.x*u.x+u.y*u.y;r>=p&&(p=r,l=g)}return{error:p,index:l}},hn=(t,n,e)=>{const o=t.length,i=10**e,l=e<16?w=>Math.round(w*i)/i:w=>w,p=(w,x)=>l(w)+","+l(x);let g=!0,y,u,r,j;const h=[],b=(w,x)=>{var $,v,m,B;const V=w.p.x,k=w.p.y;if(g)h.push("M"+p(V,k)),g=!1;else{const D=V+((($=w.i)==null?void 0:$.x)??0),F=k+(((v=w.i)==null?void 0:v.y)??0);if(D===V&&F===k&&r===y&&j===u){if(!x){const U=V-y,Y=k-u;h.push(U===0?"v"+l(Y):Y===0?"h"+l(U):"l"+p(U,Y))}}else h.push("c"+p(r-y,j-u)+" "+p(D-y,F-u)+" "+p(V-y,k-u))}y=V,u=k,r=V+(((m=w.o)==null?void 0:m.x)??0),j=k+(((B=w.o)==null?void 0:B.y)??0)};if(!o)return"";for(let w=0;w<o;w++)b(t[w]);return n&&o>0&&(b(t[0],!0),h.push("z")),h.join("")},wn=(t,n={})=>t.length===0?"":hn(fn(t.map(typeof t[0].x=="number"?e=>H(e.x,e.y):e=>H(e[0],e[1])),n.closed,n.tolerance??2.5),n.closed,n.precision??5),bn=["x","y","width","height"],$n={class:"practice-strokes"},Sn=["d"],In=["points"],Kn=P({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(t,{emit:n}){const e=t,o=n,i=G(null),l=I(()=>{var k;return(k=i.value)==null?void 0:k.closest("svg")}),p=I(()=>{var k;return(k=l.value)==null?void 0:k.viewBox.baseVal}),g=ae([]);function y(k){var m;if(!l.value)return{x:k.x,y:k.y};const $=l.value.createSVGPoint();$.x=k.x,$.y=k.y;const v=$.matrixTransform((m=l.value.getScreenCTM())==null?void 0:m.inverse());return{x:v.x,y:v.y}}function u(k){k.isPrimary&&g.push(y(k))}function r(k){var $;g.length===0||!k.isPrimary||(($=i.value)==null||$.setPointerCapture(k.pointerId),g.push(y(k)))}function j(k){var $;k.isPrimary&&(g.length>1&&o("stroke",wn(g)),($=i.value)==null||$.releasePointerCapture(k.pointerId),g.splice(0,g.length))}function h(k){const $=k.getTotalLength();return[{strokeDasharray:$,strokeDashoffset:$},{strokeDasharray:$,strokeDashoffset:0}]}const b={duration:500,easing:"ease-in-out"},w=[];function x(){var k;if(i.value){for(const $ of(k=i.value)==null?void 0:k.querySelectorAll("path.stroke")){const v=$.animate(h($),b);v.pause(),w.push(v)}V()}}async function V(){let k=w.at(0);for(;k;)k.play(),await k.finished,w.shift(),k=w.at(0),k&&await ke(100)}return R(()=>e.animate,k=>{k&&x()}),R(()=>e.animatePause,k=>{var $,v;k?($=w.at(0))==null||$.pause():(v=w.at(0))==null||v.play()}),(k,$)=>(a(),s("g",{ref_key:"el",ref:i,class:"kanji-strokes-practice-canvas canvas",onPointerdown:u,onPointermove:r,onPointerup:j},[p.value?(a(),s("rect",{key:0,class:"background",x:p.value.x,y:p.value.y,width:p.value.width,height:p.value.height},null,8,bn)):L("",!0),f("g",$n,[(a(!0),s(d,null,C(k.practiceStrokes,(v,m)=>(a(),s("path",{class:"stroke practice-stroke",key:m,d:v},null,8,Sn))),128))]),f("polyline",{class:"stroke current-stroke",points:S(g).map(({x:v,y:m})=>`${v},${m}`).join(" ")},null,8,In)],544))}}),Bn=N(Kn,[["__scopeId","data-v-b739eea3"]]),Ln={class:"strokes-figure"},Mn=["viewBox"],Cn={class:"controls"},Pn=P({__name:"KanjiStrokes",props:{kanji:{},practiceMode:{type:Boolean,default:!1},autoHint:{type:Boolean,default:!1}},setup(t){const n=t,e=G(null),o=me(),i=je(),l=I(()=>{var v;return((v=o.value)==null?void 0:v.querySelectorAll("path"))??[]}),p=ae([]),g=I(()=>p.length>0),y=G(!1),u=G(!1),r=ae([]);function j(v){const m=v.getTotalLength();return[{strokeDasharray:m,strokeDashoffset:m},{strokeDasharray:m,strokeDashoffset:0}]}const h={duration:500,easing:"ease-in-out"};function b(){for(const v of l.value){const m=v.animate(j(v),h);m.pause(),p.push(m)}w()}async function w(){let v=p.at(0);for(;v;)v.play(),await v.finished,p.shift(),v=p.at(0),v&&await ke(100)}function x(){var v;(v=p.at(0))==null||v.pause(),y.value=!0}function V(){var v;(v=p.at(0))==null||v.play(),y.value=!1}function k(v=r.length){const m=l.value[v];if(!m)return;m.style.display="block",m.animate(j(m),h).finished.then(()=>{m.style.removeProperty("display")})}function $(v){r.push(v),n.practiceMode&&n.autoHint&&r.length<l.value.length&&k()}return R(u,v=>{if(v){for(const m of p)m.cancel();p.splice(0,p.length),y.value=!1}else r.splice(0,r.length)}),R(()=>n.practiceMode,v=>{for(const m of l.value)for(const B of m.getAnimations())B.cancel();v!==u.value&&(u.value=v)},{immediate:!0}),R(l,()=>{r.splice(0,r.length)}),(v,m)=>(a(),s("section",null,[f("h2",null,[m[7]||(m[7]=c(" Strokes ")),!v.practiceMode&&l.value.length>0?(a(),s(d,{key:0},[c(" ("+K(l.value.length)+") ",1)],64)):L("",!0)]),f("figure",Ln,[S(o)?(a(),s("svg",{key:0,ref_key:"svgEl",ref:e,viewBox:S(i),class:"svg"},[M(un,{viewBox:S(i)},null,8,["viewBox"]),M(he,{strokes:S(o),class:ye(["strokes",{comparing:g.value||l.value.length<=S(r).length,practicing:u.value}])},null,8,["strokes","class"]),u.value?(a(),A(Bn,{key:0,"practice-strokes":S(r),animate:g.value,"animate-pause":y.value,onStroke:m[0]||(m[0]=B=>$(B))},null,8,["practice-strokes","animate","animate-pause"])):L("",!0)],8,Mn)):L("",!0),f("figcaption",Cn,[g.value?(a(),s(d,{key:0},[y.value?(a(),A(z,{key:0,"aria-label":"Play",onClick:m[1]||(m[1]=B=>V())},{default:O(()=>[M(_,{icon:"play"})]),_:1})):(a(),A(z,{key:1,"aria-label":"Pause",onClick:m[2]||(m[2]=B=>x())},{default:O(()=>[M(_,{icon:"pause"})]),_:1}))],64)):(a(),s(d,{key:1},[u.value&&S(r).length<l.value.length?(a(),A(z,{key:0,"aria-lable":"hint",onClick:m[3]||(m[3]=B=>k())},{default:O(()=>[M(_,{icon:"help-circle"})]),_:1})):(a(),A(z,{key:1,"aria-label":"Play Stroke Order",onClick:m[4]||(m[4]=B=>b())},{default:O(()=>[M(_,{icon:"play"})]),_:1}))],64)),v.practiceMode?L("",!0):(a(),A(z,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${u.value}`,filled:u.value,onClick:m[5]||(m[5]=B=>u.value=!u.value)},{default:O(()=>[M(_,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),u.value?(a(),s(d,{key:3},[m[8]||(m[8]=f("hr",{class:"rule"},null,-1)),M(z,{"aria-label":"Undo",onClick:m[6]||(m[6]=B=>S(r).pop())},{default:O(()=>[M(_,{icon:"rotate-left"})]),_:1})],64)):L("",!0)])])]))}}),Ct=N(Pn,[["__scopeId","data-v-469b5467"]]),Vn={class:"kanji-title"},Nn={class:"main-meaning meaning"},xn={class:"labels"},Gn={key:0,class:"label freq"},An={key:0,class:"additional-meanings"},En={class:"meaning"},Rn=P({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){const n=t,e=I(()=>{const{freq:i}=n.kanji;if(!i)return null;if(i<=50)return 50;if(i<=100)return 100;if(i<=200)return 200;if(i<=500)return 500;if(i<=1e3)return 1e3}),{result:o}=Me(I(()=>{const i=n.kanji.codepoint;return async()=>(await Ce).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(i))}));return(i,l)=>{var g,y;const p=Be("RouterLink");return a(),s("header",Vn,[J(f("h2",{class:"literal",lang:"ja"},K(i.kanji.literal),513),[[Q,!i.hideLiteral]]),J(f("p",Nn,[f("strong",null,K((g=i.kanji.meanings)==null?void 0:g.at(0)),1)],512),[[Q,!i.hideMeaning]]),f("aside",xn,[e.value?(a(),s("span",Gn,"Top "+K(e.value),1)):L("",!0),S(o)?(a(!0),s(d,{key:1},C(S(o),u=>(a(),A(p,{to:{name:S(Le),query:{deck:u.name}},key:u.name,class:"label deck"},{default:O(()=>[c(K(S(Pe)(u)),1)]),_:2},1032,["to"]))),128)):L("",!0)]),((y=i.kanji.meanings)==null?void 0:y.length)>1?J((a(),s("ul",An,[(a(!0),s(d,null,C(i.kanji.meanings.slice(1),u=>(a(),s("li",En,K(u),1))),256))],512)),[[Q,!i.hideMeaning]]):L("",!0)])}}}),Pt=N(Rn,[["__scopeId","data-v-0c7cade2"]]);function qn(t){const n=G(null);return R(()=>X(t),async e=>{const i=await(await fetch(`/data/sentences-v1/${e}.json`)).json();n.value=i},{immediate:!0}),n}const Dn={key:0,class:"placeholder"},se=P({__name:"MaybeHideKanji",props:{str:{},kanji:{default:null},hide:{type:Boolean,default:!1}},setup(t){return(n,e)=>!n.kanji||!n.hide?(a(),s(d,{key:0},[c(K(n.str),1)],64)):(a(!0),s(d,{key:1},C(n.str,o=>(a(),s(d,null,[o===n.kanji?(a(),s("span",Dn,"◌")):(a(),s(d,{key:1},[c(K(o),1)],64))],64))),256))}}),Tn={key:0},On={lang:"ja",class:"sentence"},Wn={key:0},Yn={key:0},zn={key:1},_n=P({__name:"VocabularySentence",props:{sentenceId:{},hideKanji:{},hideReading:{},hideMeaning:{type:Boolean}},setup(t){const n=t,e=qn(()=>n.sentenceId);function o(i){return n.hideReading&&i.includes(n.hideReading)}return(i,l)=>S(e)?(a(),s("div",Tn,[f("p",On,[(a(!0),s(d,null,C(S(e).words,p=>(a(),s(d,null,[(a(!0),s(d,null,C(p.furigana,({ruby:g,rt:y})=>(a(),s(d,null,[y?(a(),s("ruby",Wn,[M(se,{hide:i.hideKanji!=null,kanji:i.hideKanji,str:g},null,8,["hide","kanji","str"]),l[0]||(l[0]=f("rp",null,"(",-1)),o(g)?(a(),s("rt",Yn,"◌")):(a(),s("rt",zn,K(y),1)),l[1]||(l[1]=f("rp",null,")",-1))])):(a(),A(se,{key:1,hide:i.hideKanji!=null,kanji:i.hideKanji,str:g},null,8,["hide","kanji","str"]))],64))),256))],64))),256))]),J(f("p",{lang:"en",class:"translation"},K(S(e).meaning),513),[[Q,!i.hideMeaning]])])):L("",!0)}}),Xn=N(_n,[["__scopeId","data-v-0af9cb09"]]),Hn={class:"pos-tag"},Fn=P({__name:"PartOfSpeechTag",props:{tag:{}},setup(t){return(n,e)=>(a(),s("span",Hn,[n.tag==="adj-f"?(a(),s(d,{key:0},[c(" noun or prenominal verb")],64)):n.tag==="adj-i"?(a(),s(d,{key:1},[e[0]||(e[0]=f("i",{lang:"ja-Latn"},"i",-1)),e[1]||(e[1]=c(" adjective"))],64)):n.tag==="adj-ix"?(a(),s(d,{key:2},[e[2]||(e[2]=c(" adjective – ")),e[3]||(e[3]=f("i",{lang:"ja-Latn"},"yoi",-1)),e[4]||(e[4]=c("/")),e[5]||(e[5]=f("i",{lang:"ja-Latn"},"ii",-1)),e[6]||(e[6]=c(" class"))],64)):n.tag==="adj-na"?(a(),s(d,{key:3},[c(" na adjective")],64)):n.tag==="adj-nari"?(a(),s(d,{key:4},[e[7]||(e[7]=c(" formal ")),e[8]||(e[8]=f("i",{lang:"ja-Latn"},"na",-1)),e[9]||(e[9]=c("-adjective"))],64)):n.tag==="adj-no"?(a(),s(d,{key:5},[e[10]||(e[10]=c(" noun w. ")),e[11]||(e[11]=f("i",null,"no",-1)),e[12]||(e[12]=c(" particle"))],64)):n.tag==="adj-pn"?(a(),s(d,{key:6},[c(" pre-noun adjectival")],64)):n.tag==="adj-t"?(a(),s(d,{key:7},[e[13]||(e[13]=f("i",{lang:"ja-Latn"},"taru",-1)),e[14]||(e[14]=c(" adjective"))],64)):n.tag==="adv"?(a(),s(d,{key:8},[c(" adverb")],64)):n.tag==="adv-to"?(a(),s(d,{key:9},[e[15]||(e[15]=c(" adverb w. ")),e[16]||(e[16]=f("i",{lang:"ja-Latn"},"to",-1)),e[17]||(e[17]=c(" particle"))],64)):n.tag==="aux"?(a(),s(d,{key:10},[c(" auxiliary")],64)):n.tag==="aux-adj"?(a(),s(d,{key:11},[c(" auxiliary adjective")],64)):n.tag==="aux-v"?(a(),s(d,{key:12},[c(" auxiliary verb")],64)):n.tag==="conj"?(a(),s(d,{key:13},[c(" conjunction")],64)):n.tag==="cop"?(a(),s(d,{key:14},[c(" copula")],64)):n.tag==="ctr"?(a(),s(d,{key:15},[c(" counter")],64)):n.tag==="exp"?(a(),s(d,{key:16},[c(" expressions")],64)):n.tag==="int"?(a(),s(d,{key:17},[c(" interjection")],64)):n.tag==="n"?(a(),s(d,{key:18},[c(" noun")],64)):n.tag==="n-adv"?(a(),s(d,{key:19},[c(" adverbial noun")],64)):n.tag==="n-pr"?(a(),s(d,{key:20},[c(" proper noun")],64)):n.tag==="n-pref"?(a(),s(d,{key:21},[c(" noun, used as a prefix")],64)):n.tag==="n-suf"?(a(),s(d,{key:22},[c(" noun, used as a suffix")],64)):n.tag==="n-t"?(a(),s(d,{key:23},[c(" noun (temporal)")],64)):n.tag==="num"?(a(),s(d,{key:24},[c(" numeric")],64)):n.tag==="pn"?(a(),s(d,{key:25},[c(" pronoun")],64)):n.tag==="pref"?(a(),s(d,{key:26},[c(" prefix")],64)):n.tag==="prt"?(a(),s(d,{key:27},[c(" particle")],64)):n.tag==="suf"?(a(),s(d,{key:28},[c(" suffix")],64)):n.tag==="v-unspec"?(a(),s(d,{key:29},[c(" verb")],64)):n.tag==="v1"?(a(),s(d,{key:30},[c(" Ichidan verb")],64)):n.tag==="v1-s"?(a(),s(d,{key:31},[e[18]||(e[18]=c(" Ichidan verb – ")),e[19]||(e[19]=f("i",{lang:"ja-Latn"},"kureru",-1))],64)):n.tag==="v5aru"?(a(),s(d,{key:32},[e[20]||(e[20]=c(" Godan verb – ")),e[21]||(e[21]=f("i",{lang:"ja-Latn"},"-aru",-1))],64)):n.tag==="v5b"?(a(),s(d,{key:33},[c(" Godan verb")],64)):n.tag==="v5g"?(a(),s(d,{key:34},[c(" Godan verb")],64)):n.tag==="v5k"?(a(),s(d,{key:35},[c(" Godan verb")],64)):n.tag==="v5k-s"?(a(),s(d,{key:36},[e[22]||(e[22]=c(" Godan verb – ")),e[23]||(e[23]=f("i",{lang:"ja-Latn"},"iku",-1)),e[24]||(e[24]=c("/")),e[25]||(e[25]=f("i",{lang:"ja-Latn"},"yuku",-1))],64)):n.tag==="v5m"?(a(),s(d,{key:37},[c(" Godan verb")],64)):n.tag==="v5n"?(a(),s(d,{key:38},[c(" Godan verb")],64)):n.tag==="v5r"?(a(),s(d,{key:39},[e[26]||(e[26]=c(" Godan verb with ")),e[27]||(e[27]=f("i",{lang:"ja-Latn"},"ru",-1)),e[28]||(e[28]=c(" ending"))],64)):n.tag==="v5r-i"?(a(),s(d,{key:40},[e[29]||(e[29]=c(" Godan verb with ")),e[30]||(e[30]=f("i",{lang:"ja-Latn"},"ru",-1)),e[31]||(e[31]=c(" ending (irregular)"))],64)):n.tag==="v5s"?(a(),s(d,{key:41},[c(" Godan verb")],64)):n.tag==="v5t"?(a(),s(d,{key:42},[c(" Godan verb")],64)):n.tag==="v5u"?(a(),s(d,{key:43},[c(" Godan verb")],64)):n.tag==="v5u-s"?(a(),s(d,{key:44},[e[32]||(e[32]=c(" Godan verb with ")),e[33]||(e[33]=f("i",{lang:"ja-Latn"},"u",-1)),e[34]||(e[34]=c(" ending (special class)"))],64)):n.tag==="v5uru"?(a(),s(d,{key:45},[e[35]||(e[35]=c(" Godan verb – ")),e[36]||(e[36]=f("i",{lang:"ja-Latn"},"Uru",-1)),e[37]||(e[37]=c(" old class verb"))],64)):n.tag==="vi"?(a(),s(d,{key:46},[c(" intransitive verb")],64)):n.tag==="vk"?(a(),s(d,{key:47},[e[38]||(e[38]=f("i",{lang:"ja-Latn"},"Kuru",-1)),e[39]||(e[39]=c(" verb"))],64)):n.tag==="vn"?(a(),s(d,{key:48},[e[40]||(e[40]=c(" irregular ")),e[41]||(e[41]=f("i",{lang:"ja-Latn"},"nu",-1)),e[42]||(e[42]=c(" verb"))],64)):n.tag==="vr"?(a(),s(d,{key:49},[e[43]||(e[43]=c(" irregular ")),e[44]||(e[44]=f("i",{lang:"ja-Latn"},"ru",-1)),e[45]||(e[45]=c(" verb"))],64)):n.tag==="vs"?(a(),s(d,{key:50},[e[46]||(e[46]=f("i",{lang:"ja-Latn"},"suru",-1)),e[47]||(e[47]=c(" verb"))],64)):n.tag==="vs-c"?(a(),s(d,{key:51},[e[48]||(e[48]=f("i",{lang:"ja-Latn"},"su",-1)),e[49]||(e[49]=c(" verb—precursor to the modern ")),e[50]||(e[50]=f("i",{lang:"ja-Latn"},"suru",-1))],64)):n.tag==="vs-i"?(a(),s(d,{key:52},[e[51]||(e[51]=f("i",{lang:"ja-Latn"},"suru",-1)),e[52]||(e[52]=c(" verb – included"))],64)):n.tag==="vs-s"?(a(),s(d,{key:53},[e[53]||(e[53]=f("i",{lang:"ja-Latn"},"suru",-1)),e[54]||(e[54]=c(" verb – special class"))],64)):n.tag==="vt"?(a(),s(d,{key:54},[c(" transitive verb")],64)):n.tag==="vz"?(a(),s(d,{key:55},[e[55]||(e[55]=c(" Ichidan verb – ")),e[56]||(e[56]=f("i",{lang:"ja-Latn"},"zuru",-1)),e[57]||(e[57]=c(" verb"))],64)):L("",!0)]))}}),Un=N(Fn,[["__scopeId","data-v-a8a9d510"]]),Jn={class:"vocabulary-word-meaning"},Qn={class:"meaning-pos"},Zn={class:"glossary"},et={class:"glossary-word"},nt=P({__name:"VocabularyWordMeaning",props:{meaning:{}},setup(t){return(n,e)=>(a(),s("div",Jn,[f("div",Qn,[(a(!0),s(d,null,C(n.meaning.pos,o=>(a(),A(Un,{tag:o},null,8,["tag"]))),256))]),f("div",Zn,[(a(!0),s(d,null,C(n.meaning.glossary,o=>(a(),s("span",et,K(o),1))),256))])]))}}),fe=N(nt,[["__scopeId","data-v-a1fc931c"]]),tt={class:"vocabulary-word"},at={key:0,class:"word",lang:"ja"},st={key:0},it={key:0},ot={key:1},rt={key:1,class:"word",lang:"ja"},lt={class:"meaning"},ut={key:1,class:"additional-meanings-details"},dt={class:"additional-meanings"},ct={class:"additional-meaning-item"},pt=P({__name:"VocabularyWord",props:{word:{},kanji:{default:null},hideKanji:{type:Boolean,default:!1},hideReading:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1}},setup(t){const n=t,e=new RegExp("\\p{Script=Han}","u"),o=I(()=>{const{kanji:r,word:j}=n;return j.meanings?r?j.meanings.filter(h=>h.info&&h.info.startsWith("esp. ")&&e.test(h.info)?h.info.includes(r):h.useWithWriting?h.useWithWriting.some(b=>b.includes(r)):!0):j.meanings:[]}),i=I(()=>{var j,h;if(!n.word.writings)return null;let r=null;for(const b of n.word.writings){if(!r){r=b;continue}n.kanji&&!b.text.includes(n.kanji)||(j=b.priority)!=null&&j.freq&&b.priority.freq<(((h=r.priority)==null?void 0:h.freq)??Number.POSITIVE_INFINITY)&&(r=b)}return r==null?void 0:r.text}),l=I(()=>{var j,h;if(!n.word.readings)return null;let r=null;for(const b of n.word.readings){if(!r){r=b;continue}(j=b.priority)!=null&&j.freq&&b.priority.freq<(((h=r.priority)==null?void 0:h.freq)??Number.POSITIVE_INFINITY)&&(r=b)}return r==null?void 0:r.text}),p=I(()=>{var j,h,b;let r;return!l.value||!i.value?r=(j=n.word.furigana)==null?void 0:j.at(0):r=(h=n.word.furigana)==null?void 0:h.find(w=>w.writing===i.value&&w.reading===l.value),r||(r=(b=n.word.furigana)==null?void 0:b.at(0)),(r==null?void 0:r.furigana)??null}),g=I(()=>o.value.at(0));function y(r){return!n.hideReading||!n.kanji?!1:r.includes(n.kanji)}const u=I(()=>o.value.slice(1));return(r,j)=>(a(),s("div",tt,[p.value?(a(),s("p",at,[(a(!0),s(d,null,C(p.value,({ruby:h,rt:b})=>(a(),s(d,null,[b?(a(),s("ruby",st,[M(se,{hide:r.hideKanji,kanji:r.kanji,str:h},null,8,["hide","kanji","str"]),j[0]||(j[0]=f("rp",null," (",-1)),y(h)?(a(),s("rt",it,"◌")):(a(),s("rt",ot,K(b),1)),j[1]||(j[1]=f("rp",null,")",-1))])):(a(),A(se,{key:1,hide:r.hideKanji,kanji:r.kanji,str:h},null,8,["hide","kanji","str"]))],64))),256))])):(a(),s("p",rt,K(i.value),1)),J(f("div",lt,[g.value?(a(),A(fe,{key:0,meaning:g.value},null,8,["meaning"])):L("",!0),u.value.length>0?(a(),s("details",ut,[f("summary",null,K(u.value.length)+" more",1),f("ul",dt,[(a(!0),s(d,null,C(u.value,h=>(a(),s("li",ct,[M(fe,{meaning:h},null,8,["meaning"])]))),256))])])):L("",!0)],512),[[Q,!r.hideMeaning]])]))}}),gt=N(pt,[["__scopeId","data-v-9eae3501"]]),ft={class:"word-list-item"},vt={key:1,"aria-label":"Sentences"},yt={class:"sentences"},kt=P({__name:"WordListItem",props:{word:{},kanji:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){const n=t,e=G(null);return R(()=>n.word,async({word:o})=>{const l=await(await fetch(`/data/words-v1/${o}.json`)).json();e.value=l},{immediate:!0}),(o,i)=>(a(),s("article",ft,[e.value?(a(),A(gt,{key:0,word:e.value,kanji:o.kanji,"hide-kanji":o.hideKanji,"hide-reading":o.hideReading,"hide-meaning":o.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])):L("",!0),o.word.sentences?(a(),s("section",vt,[f("ul",yt,[(a(!0),s(d,null,C(o.word.sentences,l=>(a(),s("li",{key:l,class:"sentence-item"},[M(Xn,{"sentence-id":l,"hide-kanji":o.hideKanji?o.kanji:null,"hide-reading":o.hideReading?o.kanji:null,"hide-meaning":o.hideMeaning},null,8,["sentence-id","hide-kanji","hide-reading","hide-meaning"])]))),128))])])):L("",!0)]))}}),mt=N(kt,[["__scopeId","data-v-4a1e7cc1"]]),jt={class:"kanji-word-list"},ht=P({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){return(n,e)=>(a(),s("section",null,[f("h2",null,"Words ("+K(n.kanjiVocab.words.length)+")",1),f("ul",jt,[(a(!0),s(d,null,C(n.kanjiVocab.words,o=>(a(),s("li",{key:o.word},[M(mt,{word:o,kanji:n.kanjiVocab.literal,"hide-kanji":n.hideKanji,"hide-reading":n.hideReading,"hide-meaning":n.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))])]))}}),Vt=N(ht,[["__scopeId","data-v-f556788b"]]);export{Pt as K,Kt as a,Mt as b,Ct as c,Vt as d,Lt as e,Bt as p,It as u};
