{"version":3,"file":"HomeView-CANE3909.js","sources":["../../node_modules/yta/src/async/consumers/count.js","../../src/views/HomeView.vue"],"sourcesContent":["/**\n * Count the items in the iterator and consume it.\n *\n * ```js\n * import { pipe } from \"yta\";\n * import { count, range } from \"yta/async\";\n *\n * pipe(range(10), count());\n * // => 10\n * ```\n *\n * @template A - The input type\n * @returns {(items: AsyncIterable<A>) => Promise<number>}\n */\nexport default function count() {\n  return async (items) => {\n    let total = 0;\n\n    for await (const _ of items) {\n      total += 1;\n    }\n\n    return total;\n  };\n}\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { pipe } from \"yta\";\nimport { count, filter, map } from \"yta/async\";\n\nimport AppButton from \"../components/AppButton.vue\";\nimport AppLoading from \"../components/AppLoading.vue\";\nimport RemoteSyncSyncButton from \"../components/RemoteSyncSyncButton.vue\";\nimport { db } from \"../db/index.ts\";\nimport { useLiveQuery } from \"../helpers/db.ts\";\nimport {\n  deckBrowserRoute,\n  reviewRoute,\n  reviewSummaryRoute,\n} from \"../router.ts\";\nimport {\n  increaseReviewLimit,\n  newLimit,\n  useRemainingCount,\n  useReviewedCards,\n} from \"../store/reviews.ts\";\n\nconst router = useRouter();\nconst remainingCount = useRemainingCount();\n\nconst doneToday = computed(() => {\n  const counts = remainingCount.value;\n\n  if (!counts) {\n    return false;\n  }\n\n  return counts.due === 0 && counts.new === 0 && counts.learning === 0;\n});\n\nconst { result: deckCount } = useLiveQuery(async () =>\n  pipe(\n    (await db).transaction(\"decks\").store.iterate(),\n    map((cursor) => cursor.value),\n    filter((deck) => deck.active),\n    count(),\n  ),\n);\n\nconst reviewedCards = useReviewedCards();\nconst reviewedCardsCount = computed(() => reviewedCards.value?.size ?? 0);\n\nfunction continueReview() {\n  increaseReviewLimit();\n  router.push(reviewRoute);\n}\n</script>\n\n<template>\n  <article>\n    <div v-if=\"deckCount === null\" class=\"loading\">\n      <AppLoading class=\"loading-icon\" />\n    </div>\n\n    <template v-else-if=\"deckCount === 0\">\n      <p>\n        You don’t have any active decks. Click the button below to select a deck\n        and start learning new kanji.\n      </p>\n\n      <nav class=\"home-nav\">\n        <AppButton :to=\"deckBrowserRoute\" filled> Select Decks </AppButton>\n      </nav>\n    </template>\n\n    <template v-else>\n      <p v-if=\"doneToday\">\n        Finished all reviews today. Click the buttons below to see summary or\n        review extra.\n      </p>\n      <p v-else-if=\"remainingCount\" class=\"counts\">\n        You have\n        <span class=\"due-count\">{{ remainingCount.due }} reviews</span> due\n        <span class=\"new-count\">(+ {{ remainingCount.new }} new)</span> and\n        <span class=\"learning-count\"\n          >{{ remainingCount.learning }} learning</span\n        >.\n      </p>\n\n      <nav class=\"home-nav\">\n        <AppButton v-if=\"!doneToday\" :to=\"reviewRoute\" filled>\n          Start Review\n        </AppButton>\n\n        <AppButton v-if=\"reviewedCardsCount > 0\" :to=\"reviewSummaryRoute\">\n          Today’s Summary\n        </AppButton>\n\n        <AppButton v-if=\"doneToday\" @click=\"continueReview\">\n          Review {{ newLimit }} Extra\n        </AppButton>\n\n        <RemoteSyncSyncButton conditional />\n      </nav>\n    </template>\n  </article>\n</template>\n\n<style scoped>\n.loading {\n  text-align: center;\n\n  & .loading-icon {\n    color: var(--accent-color);\n    font-size: 50cqmin;\n    opacity: 0.5;\n  }\n}\n\n.due-count,\n.new-count,\n.learning-count {\n  font-weight: 600;\n}\n\n.due-count {\n  color: var(--blue);\n}\n\n.new-count {\n  color: var(--green);\n}\n\n.learning-count {\n  color: var(--orange);\n}\n\n.home-nav {\n  align-items: start;\n  display: flex;\n  gap: 1ex;\n\n  @media screen and (max-width: 60ch) {\n    align-items: center;\n    flex-direction: column;\n  }\n}\n</style>\n"],"names":["count","items","total","_","router","useRouter","remainingCount","useRemainingCount","doneToday","computed","counts","deckCount","useLiveQuery","pipe","db","map","cursor","filter","deck","reviewedCards","useReviewedCards","reviewedCardsCount","continueReview","increaseReviewLimit","reviewRoute","_createElementBlock","_unref","_openBlock","_hoisted_1","_createVNode","AppLoading","_Fragment","_cache","_createElementVNode","_hoisted_2","AppButton","deckBrowserRoute","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","_hoisted_8","_createBlock","reviewSummaryRoute","newLimit","RemoteSyncSyncButton"],"mappings":"yaAce,SAASA,GAAQ,CAC9B,MAAO,OAAOC,GAAU,CACtB,IAAIC,EAAQ,EAEZ,gBAAiBC,KAAKF,EACpBC,GAAS,EAGX,OAAOA,CACT,CACF,qNCDA,MAAME,EAASC,EAAA,EACTC,EAAiBC,EAAA,EAEjBC,EAAYC,EAAS,IAAM,CAC/B,MAAMC,EAASJ,EAAe,MAE9B,OAAKI,EAIEA,EAAO,MAAQ,GAAKA,EAAO,MAAQ,GAAKA,EAAO,WAAa,EAH1D,EAIX,CAAC,EAEK,CAAE,OAAQC,CAAA,EAAcC,EAAa,SACzCC,GACG,MAAMC,GAAI,YAAY,OAAO,EAAE,MAAM,QAAA,EACtCC,EAAKC,GAAWA,EAAO,KAAK,EAC5BC,EAAQC,GAASA,EAAK,MAAM,EAC5BlB,EAAA,CAAM,CACR,EAGImB,EAAgBC,EAAA,EAChBC,EAAqBZ,EAAS,IAAMU,EAAc,OAAO,MAAQ,CAAC,EAExE,SAASG,GAAiB,CACxBC,EAAA,EACAnB,EAAO,KAAKoB,CAAW,CACzB,mBAIEC,EA8CU,UAAA,KAAA,CA7CGC,EAAAf,CAAA,IAAS,MAApBgB,IAAAF,EAEM,MAFNG,EAEM,CADJC,EAAmCC,EAAA,CAAvB,MAAM,eAAc,CAAA,IAGbJ,EAAAf,CAAA,IAAS,OAA9Bc,EASWM,EAAA,CAAA,IAAA,GAAA,CARTC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAGI,SAHD,2GAGH,EAAA,GAEAA,EAEM,MAFNC,EAEM,CADJL,EAAmEM,EAAA,CAAvD,GAAIT,EAAAU,CAAA,EAAkB,OAAA,EAAA,aAAO,IAAc,CAAA,GAAAJ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAd,iBAAc,EAAA,CAAA,iCAI3DP,EA6BWM,EAAA,CAAA,IAAA,GAAA,CA5BAvB,EAAA,OAATmB,EAAA,EAAAF,EAGI,MAHgB,uFAGpB,GACcC,EAAApB,CAAA,GAAdqB,EAAA,EAAAF,EAOI,IAPJY,EAOI,eAPyC,aAE3C,EAAA,GAAAJ,EAA+D,OAA/DK,EAA+DC,EAApCb,KAAe,GAAG,EAAG,WAAQ,CAAA,gBAAO,QAC/D,EAAA,GAAAO,EAA+D,OAA/DO,EAAwB,QAAMd,EAAApB,CAAA,EAAe,GAAG,EAAG,QAAK,CAAA,gBAAO,QAC/D,EAAA,GAAA2B,EAEC,OAFDQ,EAECF,EADKb,KAAe,QAAQ,EAAG,YAAS,CAAA,gBACxC,KACH,EAAA,EAAA,aAEAO,EAcM,MAdNS,EAcM,CAbclC,EAAA,oBAAlBmC,EAEYR,EAAA,OAFkB,GAAIT,EAAAF,CAAA,EAAa,OAAA,EAAA,aAAO,IAEtD,CAAA,GAAAQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFsD,iBAEtD,EAAA,CAAA,qBAEiBX,EAAA,MAAkB,OAAnCsB,EAEYR,EAAA,OAF8B,GAAIT,EAAAkB,CAAA,CAAA,aAAoB,IAElE,CAAA,GAAAZ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFkE,oBAElE,EAAA,CAAA,8BAEiBxB,EAAA,WAAjBmC,EAEYR,EAAA,OAFiB,QAAOb,CAAA,aAAgB,IAC3C,GAD2C,WAC3CiB,EAAGb,EAAAmB,CAAA,CAAQ,EAAG,UACvB,CAAA,CAAA,mBAEAhB,EAAoCiB,EAAA,CAAd,YAAA,GAAW,CAAA","x_google_ignoreList":[0]}