import{d as h,c as i,m as A,a as d,g as k,e as p,i as _,t as f,u,I as g,F as y,l as j,b as C,w as V,h as w,s as N,v as B,x as K,o as e,_ as x,p as L}from"./index-C4O8d0Wk.js";import{d as R}from"./decks-CfOZF5PQ.js";import{u as b,d as P}from"./db-D-l1LJxU.js";const S={key:0,class:"kanji-aside-nav"},D=["open"],F={class:"label"},M={key:0,class:"kanji-deck-index"},T=h({__name:"KanjiAsideNav",props:{cardId:{},deck:{}},setup(m){const s=m,n=i(()=>s.deck.cards.indexOf(s.cardId)),o=i(()=>Math.max(0,n.value-4)),l=i(()=>Math.min(s.deck.cards.length,n.value+5)),v=i(()=>{const a=s.deck.cards,{length:r}=a;return r<=9?a:o.value===0?a.slice(0,9):l.value===r?a.slice(r-9):a.slice(o.value,l.value)}),t=A(!0);return(a,r)=>{const I=K("RouterLink");return n.value!==-1?(e(),d("nav",S,[p("details",{open:t.value,class:"nav-details",onToggle:r[0]||(r[0]=c=>t.value=c.target.open)},[p("summary",null,[p("span",F,f(u(R)(a.deck)),1),t.value?(e(),_(g,{key:0,icon:"chevron-down"})):(e(),_(g,{key:1,icon:"chevron-up"}))]),t.value?(e(),d("ol",M,[(e(!0),d(y,null,j(v.value,c=>(e(),d("li",{key:c},[C(I,{to:u(B)(String.fromCodePoint(c)),class:N([{"kanji-link-active":c===a.cardId},"kanji-link"])},{default:V(()=>[w(f(String.fromCodePoint(c)),1)]),_:2},1032,["to","class"])]))),128))])):k("",!0)],40,D)])):k("",!0)}}}),$=x(T,[["__scopeId","data-v-9ea2fa37"]]),z={key:0},E=h({__name:"KanjiAsideView",setup(m){const s=L(),n=i(()=>typeof s.params.kanji!="string"?null:s.params.kanji.codePointAt(0)??null),{result:o}=b(i(()=>{const l=n.value;return async()=>(await P).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(l))}));return(l,v)=>n.value&&u(o)&&u(o).length>0?(e(),d("aside",z,[(e(!0),d(y,null,j(u(o),t=>(e(),_($,{key:t.name,deck:t,"card-id":n.value,class:"deck-nav"},null,8,["deck","card-id"]))),128))])):k("",!0)}}),G=x(E,[["__scopeId","data-v-eefd7cc3"]]);export{G as default};
