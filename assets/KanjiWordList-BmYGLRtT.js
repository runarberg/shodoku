import{l as A,m as q,D as H,g as K,E as Se,G as re,C as ve,H as Ie,I as ae,d as N,s as Ke,c as s,o as a,_ as x,u as I,f as P,e as L,b as f,t as B,n as ye,F as u,a as p,h as V,i as R,w as W,J,K as Q,j as Be,L as Le}from"./index-DfymEPXH.js";import{A as z,a as X,u as Me,d as Ce}from"./db-xPPCzUcI.js";import{s as ke}from"./time-BmRGZSiE.js";import{d as Pe}from"./decks-huPVwMnz.js";function It(t){const n=A(null);return q(()=>H(t),async e=>{if(!e){n.value=null;return}const o=e.toString(16).padStart(5,"0"),l=await(await fetch(`/data/kanji-v1/${o}.json`)).json();n.value=l},{immediate:!0}),n}function Kt(t){const n=A(null);return q(()=>H(t),async e=>{if(!e){n.value=null;return}const o=e.toString(16).padStart(5,"0"),l=await(await fetch(`/data/kanji-vocab-v1/${o}.json`)).json();n.value=l},{immediate:!0}),n}const ce="http://kanjivg.tagaini.net",ie=Symbol("kanjivg"),Ve=new DOMParser;function Ne(t){var o;const n=[];let e=t.closest("[data-position]");for(;e instanceof SVGElement;)n.push(e.dataset.position),e=((o=e.parentElement)==null?void 0:o.closest("[data-position]"))??null;return n}function Bt(t){const n=A(null),e=A(null);q(()=>H(t),async i=>{if(!i)return;const g=await(await fetch(`/kanjivg/kanji/${i}.svg`)).text(),d=Ve.parseFromString(g,"image/svg+xml");if(d.documentElement instanceof SVGSVGElement){const{x:c,y:r,width:k,height:y}=d.documentElement.viewBox.baseVal;e.value=`${c},${r},${k},${y}`}const v=d.getElementById(`kvg:${i}`);if(v){for(const c of[...v==null?void 0:v.querySelectorAll("*"),v])if(c instanceof SVGElement){for(const r of[...c.attributes])r.namespaceURI===ce&&(c.dataset[r.localName]=r.value,c.removeAttributeNS(ce,r.localName));c.removeAttribute("xmlns:kvg")}}n.value=v},{immediate:!0});const o=K(()=>{const i=n.value;if(!i)return new Map;const l=new Map,g={};function d(c){if(c.dataset.part&&Number.parseInt(c.dataset.part)>1)return;const r=c.dataset.element,k={element:r,original:c.dataset.original??null,position:Ne(c),radical:c.dataset.radical??null};let y=l.get(r);y?y.push(k):(y=[k],l.set(r,y)),k.radical&&(g[k.radical]=r)}i.dataset.radical&&d(i);for(const c of i.querySelectorAll("g[data-element]"))d(c);const v=new Map;for(const c of["general","tradit","nelson"]){const r=g[c],k=l.get(r);k&&(v.set(r,k),l.delete(r))}for(const[c,r]of l)v.set(c,r);return v});Se(ie,{strokesEl:n,viewBox:e,components:o})}function me(){const t=re(ie,null);return K(()=>{var e;return((e=t==null?void 0:t.strokesEl.value)==null?void 0:e.cloneNode(!0))??null})}function je(){const t=re(ie,null);return K(()=>(t==null?void 0:t.viewBox.value)??"0,0,109,109")}function Ge(){const t=re(ie,null);return K(()=>(t==null?void 0:t.components.value)??new Map)}function*xe(t){for(const n of t.split(`
`)){const[e,o,i,l,g]=n.split(",");if(!o)continue;const d={id:Number.parseInt(e),literal:o.at(0)??"",strokes:Number.parseInt(i),meaning:l,reading:g};for(const v of o)yield[v,d]}}const Ee=Ie("radicals",()=>{const t=A(!1),n=A(null),e=ae(new Map);async function o(){if(!t.value){t.value=!0,n.value=null;try{const g=await(await fetch("/data/radicals.csv")).text();for(const[d,v]of xe(g))e.set(d,v)}catch(l){n.value=l}finally{t.value=!1}}}async function i(l){const g=l.codePointAt(0);if(!g)return;g===19994&&e.set(l,{id:g,literal:l,strokes:5,meaning:"North",reading:"ほく"});const d=g==null?void 0:g.toString(16).padStart(5,"0"),c=await(await fetch(`/data/kanji-v1/${d}.json`)).json(),r=c.kunYomi.find(k=>!/[.-]/.test(k))??c.kunYomi.at(0)??"";e.set(l,{id:g,literal:l,strokes:c.strokeCount,meaning:c.meanings.at(0)??"",reading:r})}return o(),{radicals:e,sync:o,syncing:t,tryKanji:i}});function Ae(t){const n=Ee();return ve(()=>{const e=H(t);e&&!n.syncing&&!n.radicals.has(e)&&n.tryKanji(e)}),K(()=>{const e=H(t);return e?n.radicals.get(e)??null:null})}const Re=N({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(t){const n=t,e=A(null);function o(){var i;(i=e.value)==null||i.replaceChildren(n.strokes??"")}return q(()=>n.strokes,o),Ke(()=>{o()}),(i,l)=>(a(),s("g",{ref_key:"container",ref:e,class:"kanji-strokes"},null,512))}}),he=x(Re,[["__scopeId","data-v-53c78976"]]),De={class:"kanji-component-item"},qe=["viewBox"],Te={class:"component-info"},Oe={class:"literal"},We={class:"meaning"},Ye={key:0,lang:"ja"},_e=N({__name:"KanjiComponentItem",props:{literal:{},parts:{}},setup(t){const n=t,e=me(),o=je(),i=K(()=>{for(const d of n.parts)if(d.radical)return d.radical;return null}),l=Ae(()=>n.literal);function g(d){return`oklch(from var(--accent-color) l c ${d+3})`}return ve(()=>{const d=e.value;if(!d)return;d.dataset.element===n.literal&&(d.dataset.radical==="general"||d.dataset.radical==="tradit"?d.style.color="var(--green)":d.dataset.radical==="nelson"?d.style.color="var(--orange)":d.style.color=g(180));let v=-1;for(const c of d.querySelectorAll(`g[data-element="${n.literal}"]`)){if(c.dataset.radical==="general"||c.dataset.radical==="tradit"){c.style.color="var(--green)";continue}if(c.dataset.radical==="nelson"){c.style.color="var(--orange)";continue}(!c.dataset.part||c.dataset.part==="1")&&(v+=1),c.style.color=g(240+63*v)}}),(d,v)=>{var c,r;return a(),s("div",De,[I(e)?(a(),s("svg",{key:0,viewBox:I(o),class:"kanji-component-strokes"},[P(he,{class:"strokes-group",strokes:I(e)},null,8,["strokes"])],8,qe)):L("",!0),f("div",Te,[f("span",Oe,B(d.literal),1),f("p",We,[f("strong",null,B((c=I(l))==null?void 0:c.meaning),1),(r=I(l))!=null&&r.reading?(a(),s("span",Ye," ("+B(I(l).reading)+")",1)):L("",!0)]),i.value?(a(),s("span",{key:0,class:ye(["is-radical",{"is-nelson":i.value==="nelson"}])},[i.value==="nelson"?(a(),s(u,{key:0},[p("Nelson radical")],64)):(a(),s(u,{key:1},[p("Radical")],64))],2)):L("",!0)])])}}}),ze=x(_e,[["__scopeId","data-v-ce0ca725"]]),Xe={class:"component-list"},He=N({__name:"KanjiComponents",setup(t){const n=Ge();return(e,o)=>(a(),s("section",null,[f("h2",null,[o[0]||(o[0]=p(" Components ")),I(n).size>0?(a(),s(u,{key:0},[p(" ("+B(I(n).size)+")",1)],64)):L("",!0)]),f("ul",Xe,[(a(!0),s(u,null,V(I(n),([i,l])=>(a(),s("li",{key:i},[P(ze,{literal:i,parts:l},null,8,["literal","parts"])]))),128))])]))}}),Lt=x(He,[["__scopeId","data-v-6768574a"]]),Fe={class:"kanji-readings"},Ue={class:"dd-items"},Je={class:"dd-items"},Qe=N({__name:"KanjiReadings",props:{kanji:{}},setup(t){return(n,e)=>(a(),s("section",null,[e[2]||(e[2]=f("h2",null,"Readings",-1)),f("dl",Fe,[e[0]||(e[0]=f("dt",null,"Kun",-1)),f("div",Ue,[(a(!0),s(u,null,V(n.kanji.kunYomi,o=>(a(),s("dd",null,B(o),1))),256))]),e[1]||(e[1]=f("dt",null,"On",-1)),f("div",Je,[(a(!0),s(u,null,V(n.kanji.onYomi,o=>(a(),s("dd",null,B(o),1))),256))])])]))}}),Mt=x(Qe,[["__scopeId","data-v-f6c59d96"]]),Ze={class:"kanji-strokes-background"},en=["x","y","width","height"],nn=["x1","y1","x2","y2"],tn=["x1","y1","x2","y2"],an=["x1","y1","x2","y2"],sn=["x1","y1","x2","y2"],on=["x1","y1","x2","y2"],rn=["x1","y1","x2","y2"],ln=N({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(t){const n=t,e=K(()=>{const[l,g,d,v]=n.viewBox.split(",");return{x:Number.parseInt(l),y:Number.parseInt(g),width:Number.parseInt(d),height:Number.parseInt(v)}}),o=K(()=>{const{x:l,width:g}=e.value;return l+g/2}),i=K(()=>{const{y:l,height:g}=e.value;return l+g/2});return(l,g)=>(a(),s("g",Ze,[f("rect",{class:"background",x:e.value.x,y:e.value.y,width:e.value.width,height:e.value.width,rx:"5"},null,8,en),f("line",{class:"midline",x1:e.value.x+1,y1:i.value,x2:e.value.x+e.value.width-1,y2:i.value},null,8,nn),f("line",{class:"midline",x1:o.value,y1:e.value.y+1,x2:o.value,y2:e.value.y+e.value.height-1},null,8,tn),f("line",{class:"quartline",x1:o.value/2,y1:e.value.y+1,x2:o.value/2,y2:e.value.y+e.value.height-1},null,8,an),f("line",{class:"quartline",x1:3*o.value/2,y1:e.value.y+1,x2:3*o.value/2,y2:e.value.y+e.value.height-1},null,8,sn),f("line",{class:"quartline",x1:e.value.x+1,y1:i.value/2,x2:e.value.x+e.value.width-1,y2:i.value/2},null,8,on),f("line",{class:"quartline",x1:e.value.x+1,y1:3*i.value/2,x2:e.value.x+e.value.width-1,y2:3*i.value/2},null,8,rn)]))}}),un=x(ln,[["__scopeId","data-v-1b492e2c"]]),dn=1e-12,pe=112e-18,cn=t=>t>=-pe&&t<=pe,we=(t,n)=>Math.sqrt(t*t+n*n),F=(t,n)=>({x:t,y:n}),pn=t=>we(t.x,t.y),gn=t=>F(-t.x,-t.y),Z=(t,n)=>F(t.x+n.x,t.y+n.y),D=(t,n)=>F(t.x-n.x,t.y-n.y),Y=(t,n)=>F(t.x*n,t.y*n),T=(t,n)=>t.x*n.x+t.y*n.y,le=(t,n)=>we(t.x-n.x,t.y-n.y),O=(t,n=1)=>Y(t,n/(pn(t)||1/0)),be=(t,n)=>({p:t,i:n}),fn=(t,n,e)=>{n&&(t.unshift(t[t.length-1]),t.push(t[1]));const o=t.length;if(o===0)return[];const i=[be(t[0])];return oe(t,i,e,0,o-1,D(t[1],t[0]),D(t[o-2],t[o-1])),n&&(i.shift(),i.pop()),i},oe=(t,n,e,o,i,l,g)=>{if(i-o===1){const y=t[o],w=t[i],j=le(y,w)/3;ge(n,[y,Z(y,O(l,j)),Z(w,O(g,j)),w]);return}const d=mn(t,o,i);let v=Math.max(e,e*e),c,r=!0;for(let y=0;y<=4;y++){const w=vn(t,o,i,d,l,g),j=jn(t,o,i,w,d);if(j.error<e&&r){ge(n,w);return}if(c=j.index,j.error>=v)break;r=yn(t,o,i,d,w),v=j.error}const k=D(t[c-1],t[c+1]);oe(t,n,e,o,c,l,k),oe(t,n,e,c,i,gn(k),g)},ge=(t,n)=>{const e=t[t.length-1];e.o=D(n[1],n[0]),t.push(be(n[3],D(n[2],n[3])))},vn=(t,n,e,o,i,l)=>{const g=dn,d=Math.abs,v=t[n],c=t[e],r=[[0,0],[0,0]],k=[0,0];for(let $=0,M=e-n+1;$<M;$++){const b=o[$],h=1-b,C=3*b*h,U=h*h*h,_=C*h,ue=C*b,$e=b*b*b,ee=O(i,_),ne=O(l,ue),de=D(D(t[n+$],Y(v,U+_)),Y(c,ue+$e));r[0][0]+=T(ee,ee),r[0][1]+=T(ee,ne),r[1][0]=r[0][1],r[1][1]+=T(ne,ne),k[0]+=T(ee,de),k[1]+=T(ne,de)}const y=r[0][0]*r[1][1]-r[1][0]*r[0][1];let w,j;if(d(y)>g){const $=r[0][0]*k[1]-r[1][0]*k[0];w=(k[0]*r[1][1]-k[1]*r[0][1])/y,j=$/y}else{const $=r[0][0]+r[0][1],M=r[1][0]+r[1][1];w=j=d($)>g?k[0]/$:d(M)>g?k[1]/M:0}const E=le(c,v),G=g*E;let m,S;if(w<G||j<G)w=j=E/3;else{const $=D(c,v);m=O(i,w),S=O(l,j),T(m,$)-T(S,$)>E*E&&(w=j=E/3,m=S=null)}return[v,Z(v,m||O(i,w)),Z(c,S||O(l,j)),c]},yn=(t,n,e,o,i)=>{for(let l=n;l<=e;l++)o[l-n]=kn(i,t[l],o[l-n]);for(let l=1,g=o.length;l<g;l++)if(o[l]<=o[l-1])return!1;return!0},kn=(t,n,e)=>{const o=[],i=[];for(let r=0;r<=2;r++)o[r]=Y(D(t[r+1],t[r]),3);for(let r=0;r<=1;r++)i[r]=Y(D(o[r+1],o[r]),2);const l=te(3,t,e),g=te(2,o,e),d=te(1,i,e),v=D(l,n),c=T(g,g)+T(v,d);return cn(c)?e:e-T(v,g)/c},te=(t,n,e)=>{const o=n.slice();for(let i=1;i<=t;i++)for(let l=0;l<=t-i;l++)o[l]=Z(Y(o[l],1-e),Y(o[l+1],e));return o[0]},mn=(t,n,e)=>{const o=[0];for(let i=n+1;i<=e;i++)o[i-n]=o[i-n-1]+le(t[i],t[i-1]);for(let i=1,l=e-n;i<=l;i++)o[i]/=o[l];return o},jn=(t,n,e,o,i)=>{let l=Math.floor((e-n+1)/2),g=0;for(let d=n+1;d<e;d++){const v=te(3,o,i[d-n]),c=D(v,t[d]),r=c.x*c.x+c.y*c.y;r>=g&&(g=r,l=d)}return{error:g,index:l}},hn=(t,n,e)=>{const o=t.length,i=10**e,l=e<16?j=>Math.round(j*i)/i:j=>j,g=(j,E)=>l(j)+","+l(E);let d=!0,v,c,r,k;const y=[],w=(j,E)=>{var S,$,M,b;const G=j.p.x,m=j.p.y;if(d)y.push("M"+g(G,m)),d=!1;else{const h=G+(((S=j.i)==null?void 0:S.x)??0),C=m+((($=j.i)==null?void 0:$.y)??0);if(h===G&&C===m&&r===v&&k===c){if(!E){const U=G-v,_=m-c;y.push(U===0?"v"+l(_):_===0?"h"+l(U):"l"+g(U,_))}}else y.push("c"+g(r-v,k-c)+" "+g(h-v,C-c)+" "+g(G-v,m-c))}v=G,c=m,r=G+(((M=j.o)==null?void 0:M.x)??0),k=m+(((b=j.o)==null?void 0:b.y)??0)};if(!o)return"";for(let j=0;j<o;j++)w(t[j]);return n&&o>0&&(w(t[0],!0),y.push("z")),y.join("")},wn=(t,n={})=>t.length===0?"":hn(fn(t.map(typeof t[0].x=="number"?e=>F(e.x,e.y):e=>F(e[0],e[1])),n.closed,n.tolerance??2.5),n.closed,n.precision??5),bn=["x","y","width","height"],$n={class:"practice-strokes"},Sn=["d"],In=["points"],Kn=N({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(t,{emit:n}){const e=t,o=n,i=A(null),l=K(()=>{var m;return(m=i.value)==null?void 0:m.closest("svg")}),g=K(()=>{var m;return(m=l.value)==null?void 0:m.viewBox.baseVal}),d=ae([]);function v(m){var M;if(!l.value)return{x:m.x,y:m.y};const S=l.value.createSVGPoint();S.x=m.x,S.y=m.y;const $=S.matrixTransform((M=l.value.getScreenCTM())==null?void 0:M.inverse());return{x:$.x,y:$.y}}function c(m){m.isPrimary&&d.push(v(m))}function r(m){var S;d.length===0||!m.isPrimary||((S=i.value)==null||S.setPointerCapture(m.pointerId),d.push(v(m)))}function k(m){var S;m.isPrimary&&(d.length>1&&o("stroke",wn(d)),(S=i.value)==null||S.releasePointerCapture(m.pointerId),d.splice(0,d.length))}function y(m){const S=m.getTotalLength();return[{strokeDasharray:S,strokeDashoffset:S},{strokeDasharray:S,strokeDashoffset:0}]}const w={duration:500,easing:"ease-in-out"},j=[];function E(){var m;if(i.value){for(const S of(m=i.value)==null?void 0:m.querySelectorAll("path.stroke")){const $=S.animate(y(S),w);$.pause(),j.push($)}G()}}async function G(){let m=j.at(0);for(;m;)m.play(),await m.finished,j.shift(),m=j.at(0),m&&await ke(100)}return q(()=>e.animate,m=>{m&&E()}),q(()=>e.animatePause,m=>{var S,$;m?(S=j.at(0))==null||S.pause():($=j.at(0))==null||$.play()}),(m,S)=>(a(),s("g",{ref_key:"el",ref:i,class:"kanji-strokes-practice-canvas canvas",onPointerdown:c,onPointermove:r,onPointerup:k},[g.value?(a(),s("rect",{key:0,class:"background",x:g.value.x,y:g.value.y,width:g.value.width,height:g.value.height},null,8,bn)):L("",!0),f("g",$n,[(a(!0),s(u,null,V(m.practiceStrokes,($,M)=>(a(),s("path",{class:"stroke practice-stroke",key:M,d:$},null,8,Sn))),128))]),f("polyline",{class:"stroke current-stroke",points:I(d).map(({x:$,y:M})=>`${$},${M}`).join(" ")},null,8,In)],544))}}),Bn=x(Kn,[["__scopeId","data-v-b739eea3"]]),Ln={class:"strokes-figure"},Mn=["viewBox"],Cn={class:"controls"},Pn=N({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean,default:!1},practiceMode:{type:Boolean,default:!1},practiceReview:{type:Boolean,default:!1}},emits:["practiceDone"],setup(t,{emit:n}){const e=t,o=n,i=A(null),l=me(),g=je(),d=K(()=>{var b;return((b=l.value)==null?void 0:b.querySelectorAll("path"))??[]}),v=ae([]),c=K(()=>v.length>0),r=A(!1),k=A(!1),y=ae([]);function w(b){const h=b.getTotalLength();return[{strokeDasharray:h,strokeDashoffset:h},{strokeDasharray:h,strokeDashoffset:0}]}const j={duration:500,easing:"ease-in-out"};function E(){for(const b of d.value){const h=b.animate(w(b),j);h.pause(),v.push(h)}G()}async function G(){let b=v.at(0);for(;b;)b.play(),await b.finished,v.shift(),b=v.at(0),b&&await ke(100)}function m(){var b;(b=v.at(0))==null||b.pause(),r.value=!0}function S(){var b;(b=v.at(0))==null||b.play(),r.value=!1}function $(b=y.length){const h=d.value[b];if(!h)return;h.style.display="block",h.animate(w(h),j).finished.then(()=>{h.style.removeProperty("display")})}function M(b){y.push(b),e.practiceMode&&y.length===d.value.length&&o("practiceDone"),e.practiceMode&&e.autoHint&&y.length<d.value.length&&$()}return q(k,b=>{if(b){for(const h of v)h.cancel();v.splice(0,v.length),r.value=!1}else y.splice(0,y.length)}),q(()=>e.practiceMode,b=>{for(const h of d.value)for(const C of h.getAnimations())C.cancel();e.practiceReview&&y.length===d.value.length?k.value=!0:b!==k.value&&(k.value=b)},{immediate:!0}),q(d,()=>{y.splice(0,y.length)}),(b,h)=>(a(),s("section",null,[f("h2",null,[h[7]||(h[7]=p(" Strokes ")),!b.practiceMode&&d.value.length>0?(a(),s(u,{key:0},[p(" ("+B(d.value.length)+") ",1)],64)):L("",!0)]),f("figure",Ln,[I(l)?(a(),s("svg",{key:0,ref_key:"svgEl",ref:i,viewBox:I(g),class:"svg"},[P(un,{viewBox:I(g)},null,8,["viewBox"]),P(he,{strokes:I(l),class:ye(["strokes",{comparing:c.value||d.value.length<=I(y).length,practicing:k.value}])},null,8,["strokes","class"]),k.value?(a(),R(Bn,{key:0,"practice-strokes":I(y),animate:c.value,"animate-pause":r.value,onStroke:h[0]||(h[0]=C=>M(C))},null,8,["practice-strokes","animate","animate-pause"])):L("",!0)],8,Mn)):L("",!0),f("figcaption",Cn,[c.value?(a(),s(u,{key:0},[r.value?(a(),R(z,{key:0,"aria-label":"Play",onClick:h[1]||(h[1]=C=>S())},{default:W(()=>[P(X,{icon:"play"})]),_:1})):(a(),R(z,{key:1,"aria-label":"Pause",onClick:h[2]||(h[2]=C=>m())},{default:W(()=>[P(X,{icon:"pause"})]),_:1}))],64)):(a(),s(u,{key:1},[k.value&&I(y).length<d.value.length?(a(),R(z,{key:0,"aria-lable":"hint",onClick:h[3]||(h[3]=C=>$())},{default:W(()=>[P(X,{icon:"help-circle"})]),_:1})):(a(),R(z,{key:1,"aria-label":"Play Stroke Order",onClick:h[4]||(h[4]=C=>E())},{default:W(()=>[P(X,{icon:"play"})]),_:1}))],64)),b.practiceMode?L("",!0):(a(),R(z,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${k.value}`,filled:k.value,onClick:h[5]||(h[5]=C=>k.value=!k.value)},{default:W(()=>[P(X,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),k.value?(a(),s(u,{key:3},[h[8]||(h[8]=f("hr",{class:"rule"},null,-1)),P(z,{"aria-label":"Undo",onClick:h[6]||(h[6]=C=>I(y).pop())},{default:W(()=>[P(X,{icon:"rotate-left"})]),_:1})],64)):L("",!0)])])]))}}),Ct=x(Pn,[["__scopeId","data-v-36310fcc"]]),Vn={class:"kanji-title"},Nn={class:"main-meaning meaning"},Gn={class:"labels"},xn={key:0,class:"label freq"},En={key:0,class:"additional-meanings"},An={class:"meaning"},Rn=N({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){const n=t,e=K(()=>{const{freq:i}=n.kanji;if(!i)return null;if(i<=50)return 50;if(i<=100)return 100;if(i<=200)return 200;if(i<=500)return 500;if(i<=1e3)return 1e3}),{result:o}=Me(K(()=>{const i=n.kanji.codepoint;return async()=>(await Ce).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(i))}));return(i,l)=>{var d,v;const g=Be("RouterLink");return a(),s("header",Vn,[J(f("h2",{class:"literal",lang:"ja"},B(i.kanji.literal),513),[[Q,!i.hideLiteral]]),J(f("p",Nn,[f("strong",null,B((d=i.kanji.meanings)==null?void 0:d.at(0)),1)],512),[[Q,!i.hideMeaning]]),f("aside",Gn,[e.value?(a(),s("span",xn,"Top "+B(e.value),1)):L("",!0),I(o)?(a(!0),s(u,{key:1},V(I(o),c=>(a(),R(g,{to:{name:I(Le),query:{deck:c.name}},key:c.name,class:"label deck"},{default:W(()=>[p(B(I(Pe)(c)),1)]),_:2},1032,["to"]))),128)):L("",!0)]),((v=i.kanji.meanings)==null?void 0:v.length)>1?J((a(),s("ul",En,[(a(!0),s(u,null,V(i.kanji.meanings.slice(1),c=>(a(),s("li",An,B(c),1))),256))],512)),[[Q,!i.hideMeaning]]):L("",!0)])}}}),Pt=x(Rn,[["__scopeId","data-v-0c7cade2"]]);function Dn(t){const n=A(null);return q(()=>H(t),async e=>{const i=await(await fetch(`/data/sentences-v1/${e}.json`)).json();n.value=i},{immediate:!0}),n}const qn={key:0,class:"placeholder"},se=N({__name:"MaybeHideKanji",props:{str:{},kanji:{default:null},hide:{type:Boolean,default:!1}},setup(t){return(n,e)=>!n.kanji||!n.hide?(a(),s(u,{key:0},[p(B(n.str),1)],64)):(a(!0),s(u,{key:1},V(n.str,o=>(a(),s(u,null,[o===n.kanji?(a(),s("span",qn,"◌")):(a(),s(u,{key:1},[p(B(o),1)],64))],64))),256))}}),Tn={key:0},On={lang:"ja",class:"sentence"},Wn={key:0},Yn={key:0},_n={key:1},zn=N({__name:"VocabularySentence",props:{sentenceId:{},hideKanji:{},hideReading:{},hideMeaning:{type:Boolean}},setup(t){const n=t,e=Dn(()=>n.sentenceId);function o(i){return n.hideReading&&i.includes(n.hideReading)}return(i,l)=>I(e)?(a(),s("div",Tn,[f("p",On,[(a(!0),s(u,null,V(I(e).words,g=>(a(),s(u,null,[(a(!0),s(u,null,V(g.furigana,({ruby:d,rt:v})=>(a(),s(u,null,[v?(a(),s("ruby",Wn,[P(se,{hide:i.hideKanji!=null,kanji:i.hideKanji,str:d},null,8,["hide","kanji","str"]),l[0]||(l[0]=f("rp",null,"(",-1)),o(d)?(a(),s("rt",Yn,"◌")):(a(),s("rt",_n,B(v),1)),l[1]||(l[1]=f("rp",null,")",-1))])):(a(),R(se,{key:1,hide:i.hideKanji!=null,kanji:i.hideKanji,str:d},null,8,["hide","kanji","str"]))],64))),256))],64))),256))]),J(f("p",{lang:"en",class:"translation"},B(I(e).meaning),513),[[Q,!i.hideMeaning]])])):L("",!0)}}),Xn=x(zn,[["__scopeId","data-v-0af9cb09"]]),Hn={class:"pos-tag"},Fn=N({__name:"PartOfSpeechTag",props:{tag:{}},setup(t){return(n,e)=>(a(),s("span",Hn,[n.tag==="adj-f"?(a(),s(u,{key:0},[p(" noun or prenominal verb")],64)):n.tag==="adj-i"?(a(),s(u,{key:1},[e[0]||(e[0]=f("i",{lang:"ja-Latn"},"i",-1)),e[1]||(e[1]=p(" adjective"))],64)):n.tag==="adj-ix"?(a(),s(u,{key:2},[e[2]||(e[2]=p(" adjective – ")),e[3]||(e[3]=f("i",{lang:"ja-Latn"},"yoi",-1)),e[4]||(e[4]=p("/")),e[5]||(e[5]=f("i",{lang:"ja-Latn"},"ii",-1)),e[6]||(e[6]=p(" class"))],64)):n.tag==="adj-na"?(a(),s(u,{key:3},[p(" na adjective")],64)):n.tag==="adj-nari"?(a(),s(u,{key:4},[e[7]||(e[7]=p(" formal ")),e[8]||(e[8]=f("i",{lang:"ja-Latn"},"na",-1)),e[9]||(e[9]=p("-adjective"))],64)):n.tag==="adj-no"?(a(),s(u,{key:5},[e[10]||(e[10]=p(" noun w. ")),e[11]||(e[11]=f("i",null,"no",-1)),e[12]||(e[12]=p(" particle"))],64)):n.tag==="adj-pn"?(a(),s(u,{key:6},[p(" pre-noun adjectival")],64)):n.tag==="adj-t"?(a(),s(u,{key:7},[e[13]||(e[13]=f("i",{lang:"ja-Latn"},"taru",-1)),e[14]||(e[14]=p(" adjective"))],64)):n.tag==="adv"?(a(),s(u,{key:8},[p(" adverb")],64)):n.tag==="adv-to"?(a(),s(u,{key:9},[e[15]||(e[15]=p(" adverb w. ")),e[16]||(e[16]=f("i",{lang:"ja-Latn"},"to",-1)),e[17]||(e[17]=p(" particle"))],64)):n.tag==="aux"?(a(),s(u,{key:10},[p(" auxiliary")],64)):n.tag==="aux-adj"?(a(),s(u,{key:11},[p(" auxiliary adjective")],64)):n.tag==="aux-v"?(a(),s(u,{key:12},[p(" auxiliary verb")],64)):n.tag==="conj"?(a(),s(u,{key:13},[p(" conjunction")],64)):n.tag==="cop"?(a(),s(u,{key:14},[p(" copula")],64)):n.tag==="ctr"?(a(),s(u,{key:15},[p(" counter")],64)):n.tag==="exp"?(a(),s(u,{key:16},[p(" expressions")],64)):n.tag==="int"?(a(),s(u,{key:17},[p(" interjection")],64)):n.tag==="n"?(a(),s(u,{key:18},[p(" noun")],64)):n.tag==="n-adv"?(a(),s(u,{key:19},[p(" adverbial noun")],64)):n.tag==="n-pr"?(a(),s(u,{key:20},[p(" proper noun")],64)):n.tag==="n-pref"?(a(),s(u,{key:21},[p(" noun, used as a prefix")],64)):n.tag==="n-suf"?(a(),s(u,{key:22},[p(" noun, used as a suffix")],64)):n.tag==="n-t"?(a(),s(u,{key:23},[p(" noun (temporal)")],64)):n.tag==="num"?(a(),s(u,{key:24},[p(" numeric")],64)):n.tag==="pn"?(a(),s(u,{key:25},[p(" pronoun")],64)):n.tag==="pref"?(a(),s(u,{key:26},[p(" prefix")],64)):n.tag==="prt"?(a(),s(u,{key:27},[p(" particle")],64)):n.tag==="suf"?(a(),s(u,{key:28},[p(" suffix")],64)):n.tag==="v-unspec"?(a(),s(u,{key:29},[p(" verb")],64)):n.tag==="v1"?(a(),s(u,{key:30},[p(" Ichidan verb")],64)):n.tag==="v1-s"?(a(),s(u,{key:31},[e[18]||(e[18]=p(" Ichidan verb – ")),e[19]||(e[19]=f("i",{lang:"ja-Latn"},"kureru",-1))],64)):n.tag==="v5aru"?(a(),s(u,{key:32},[e[20]||(e[20]=p(" Godan verb – ")),e[21]||(e[21]=f("i",{lang:"ja-Latn"},"-aru",-1))],64)):n.tag==="v5b"?(a(),s(u,{key:33},[p(" Godan verb")],64)):n.tag==="v5g"?(a(),s(u,{key:34},[p(" Godan verb")],64)):n.tag==="v5k"?(a(),s(u,{key:35},[p(" Godan verb")],64)):n.tag==="v5k-s"?(a(),s(u,{key:36},[e[22]||(e[22]=p(" Godan verb – ")),e[23]||(e[23]=f("i",{lang:"ja-Latn"},"iku",-1)),e[24]||(e[24]=p("/")),e[25]||(e[25]=f("i",{lang:"ja-Latn"},"yuku",-1))],64)):n.tag==="v5m"?(a(),s(u,{key:37},[p(" Godan verb")],64)):n.tag==="v5n"?(a(),s(u,{key:38},[p(" Godan verb")],64)):n.tag==="v5r"?(a(),s(u,{key:39},[e[26]||(e[26]=p(" Godan verb with ")),e[27]||(e[27]=f("i",{lang:"ja-Latn"},"ru",-1)),e[28]||(e[28]=p(" ending"))],64)):n.tag==="v5r-i"?(a(),s(u,{key:40},[e[29]||(e[29]=p(" Godan verb with ")),e[30]||(e[30]=f("i",{lang:"ja-Latn"},"ru",-1)),e[31]||(e[31]=p(" ending (irregular)"))],64)):n.tag==="v5s"?(a(),s(u,{key:41},[p(" Godan verb")],64)):n.tag==="v5t"?(a(),s(u,{key:42},[p(" Godan verb")],64)):n.tag==="v5u"?(a(),s(u,{key:43},[p(" Godan verb")],64)):n.tag==="v5u-s"?(a(),s(u,{key:44},[e[32]||(e[32]=p(" Godan verb with ")),e[33]||(e[33]=f("i",{lang:"ja-Latn"},"u",-1)),e[34]||(e[34]=p(" ending (special class)"))],64)):n.tag==="v5uru"?(a(),s(u,{key:45},[e[35]||(e[35]=p(" Godan verb – ")),e[36]||(e[36]=f("i",{lang:"ja-Latn"},"Uru",-1)),e[37]||(e[37]=p(" old class verb"))],64)):n.tag==="vi"?(a(),s(u,{key:46},[p(" intransitive verb")],64)):n.tag==="vk"?(a(),s(u,{key:47},[e[38]||(e[38]=f("i",{lang:"ja-Latn"},"Kuru",-1)),e[39]||(e[39]=p(" verb"))],64)):n.tag==="vn"?(a(),s(u,{key:48},[e[40]||(e[40]=p(" irregular ")),e[41]||(e[41]=f("i",{lang:"ja-Latn"},"nu",-1)),e[42]||(e[42]=p(" verb"))],64)):n.tag==="vr"?(a(),s(u,{key:49},[e[43]||(e[43]=p(" irregular ")),e[44]||(e[44]=f("i",{lang:"ja-Latn"},"ru",-1)),e[45]||(e[45]=p(" verb"))],64)):n.tag==="vs"?(a(),s(u,{key:50},[e[46]||(e[46]=f("i",{lang:"ja-Latn"},"suru",-1)),e[47]||(e[47]=p(" verb"))],64)):n.tag==="vs-c"?(a(),s(u,{key:51},[e[48]||(e[48]=f("i",{lang:"ja-Latn"},"su",-1)),e[49]||(e[49]=p(" verb—precursor to the modern ")),e[50]||(e[50]=f("i",{lang:"ja-Latn"},"suru",-1))],64)):n.tag==="vs-i"?(a(),s(u,{key:52},[e[51]||(e[51]=f("i",{lang:"ja-Latn"},"suru",-1)),e[52]||(e[52]=p(" verb – included"))],64)):n.tag==="vs-s"?(a(),s(u,{key:53},[e[53]||(e[53]=f("i",{lang:"ja-Latn"},"suru",-1)),e[54]||(e[54]=p(" verb – special class"))],64)):n.tag==="vt"?(a(),s(u,{key:54},[p(" transitive verb")],64)):n.tag==="vz"?(a(),s(u,{key:55},[e[55]||(e[55]=p(" Ichidan verb – ")),e[56]||(e[56]=f("i",{lang:"ja-Latn"},"zuru",-1)),e[57]||(e[57]=p(" verb"))],64)):L("",!0)]))}}),Un=x(Fn,[["__scopeId","data-v-a8a9d510"]]),Jn={class:"vocabulary-word-meaning"},Qn={class:"meaning-pos"},Zn={class:"glossary"},et={class:"glossary-word"},nt=N({__name:"VocabularyWordMeaning",props:{meaning:{}},setup(t){return(n,e)=>(a(),s("div",Jn,[f("div",Qn,[(a(!0),s(u,null,V(n.meaning.pos,o=>(a(),R(Un,{tag:o},null,8,["tag"]))),256))]),f("div",Zn,[(a(!0),s(u,null,V(n.meaning.glossary,o=>(a(),s("span",et,B(o),1))),256))])]))}}),fe=x(nt,[["__scopeId","data-v-a1fc931c"]]),tt={class:"vocabulary-word"},at={key:0,class:"word",lang:"ja"},st={key:0},it={key:0},ot={key:1},rt={key:1,class:"word",lang:"ja"},lt={class:"meaning"},ut={key:1,class:"additional-meanings-details"},dt={class:"additional-meanings"},ct={class:"additional-meaning-item"},pt=N({__name:"VocabularyWord",props:{word:{},kanji:{default:null},hideKanji:{type:Boolean,default:!1},hideReading:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1}},setup(t){const n=t,e=new RegExp("\\p{Script=Han}","u"),o=K(()=>{const{kanji:r,word:k}=n;return k.meanings?r?k.meanings.filter(y=>y.info&&y.info.startsWith("esp. ")&&e.test(y.info)?y.info.includes(r):y.useWithWriting?y.useWithWriting.some(w=>w.includes(r)):!0):k.meanings:[]}),i=K(()=>{var k,y;if(!n.word.writings)return null;let r=null;for(const w of n.word.writings){if(!r){r=w;continue}n.kanji&&!w.text.includes(n.kanji)||(k=w.priority)!=null&&k.freq&&w.priority.freq<(((y=r.priority)==null?void 0:y.freq)??Number.POSITIVE_INFINITY)&&(r=w)}return r==null?void 0:r.text}),l=K(()=>{var k,y;if(!n.word.readings)return null;let r=null;for(const w of n.word.readings){if(!r){r=w;continue}(k=w.priority)!=null&&k.freq&&w.priority.freq<(((y=r.priority)==null?void 0:y.freq)??Number.POSITIVE_INFINITY)&&(r=w)}return r==null?void 0:r.text}),g=K(()=>{var k,y,w;let r;return!l.value||!i.value?r=(k=n.word.furigana)==null?void 0:k.at(0):r=(y=n.word.furigana)==null?void 0:y.find(j=>j.writing===i.value&&j.reading===l.value),r||(r=(w=n.word.furigana)==null?void 0:w.at(0)),(r==null?void 0:r.furigana)??null}),d=K(()=>o.value.at(0));function v(r){return!n.hideReading||!n.kanji?!1:r.includes(n.kanji)}const c=K(()=>o.value.slice(1));return(r,k)=>(a(),s("div",tt,[g.value?(a(),s("p",at,[(a(!0),s(u,null,V(g.value,({ruby:y,rt:w})=>(a(),s(u,null,[w?(a(),s("ruby",st,[P(se,{hide:r.hideKanji,kanji:r.kanji,str:y},null,8,["hide","kanji","str"]),k[0]||(k[0]=f("rp",null," (",-1)),v(y)?(a(),s("rt",it,"◌")):(a(),s("rt",ot,B(w),1)),k[1]||(k[1]=f("rp",null,")",-1))])):(a(),R(se,{key:1,hide:r.hideKanji,kanji:r.kanji,str:y},null,8,["hide","kanji","str"]))],64))),256))])):(a(),s("p",rt,B(i.value),1)),J(f("div",lt,[d.value?(a(),R(fe,{key:0,meaning:d.value},null,8,["meaning"])):L("",!0),c.value.length>0?(a(),s("details",ut,[f("summary",null,B(c.value.length)+" more",1),f("ul",dt,[(a(!0),s(u,null,V(c.value,y=>(a(),s("li",ct,[P(fe,{meaning:y},null,8,["meaning"])]))),256))])])):L("",!0)],512),[[Q,!r.hideMeaning]])]))}}),gt=x(pt,[["__scopeId","data-v-9eae3501"]]),ft={class:"word-list-item"},vt={key:1,"aria-label":"Sentences"},yt={class:"sentences"},kt=N({__name:"WordListItem",props:{word:{},kanji:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){const n=t,e=A(null);return q(()=>n.word,async({word:o})=>{const l=await(await fetch(`/data/words-v1/${o}.json`)).json();e.value=l},{immediate:!0}),(o,i)=>(a(),s("article",ft,[e.value?(a(),R(gt,{key:0,word:e.value,kanji:o.kanji,"hide-kanji":o.hideKanji,"hide-reading":o.hideReading,"hide-meaning":o.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])):L("",!0),o.word.sentences?(a(),s("section",vt,[f("ul",yt,[(a(!0),s(u,null,V(o.word.sentences,l=>(a(),s("li",{key:l,class:"sentence-item"},[P(Xn,{"sentence-id":l,"hide-kanji":o.hideKanji?o.kanji:null,"hide-reading":o.hideReading?o.kanji:null,"hide-meaning":o.hideMeaning},null,8,["sentence-id","hide-kanji","hide-reading","hide-meaning"])]))),128))])])):L("",!0)]))}}),mt=x(kt,[["__scopeId","data-v-4a1e7cc1"]]),jt={class:"kanji-word-list"},ht=N({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){return(n,e)=>(a(),s("section",null,[f("h2",null,"Words ("+B(n.kanjiVocab.words.length)+")",1),f("ul",jt,[(a(!0),s(u,null,V(n.kanjiVocab.words,o=>(a(),s("li",{key:o.word},[P(mt,{word:o,kanji:n.kanjiVocab.literal,"hide-kanji":n.hideKanji,"hide-reading":n.hideReading,"hide-meaning":n.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))])]))}}),Vt=x(ht,[["__scopeId","data-v-f556788b"]]);export{Pt as K,Kt as a,Mt as b,Ct as c,Vt as d,Lt as e,Bt as p,It as u};
