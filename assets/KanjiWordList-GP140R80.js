import{p as $e,s as he}from"./reviews-DovQcjTA.js";import{u as pe}from"./kanji-components-DJX0Q8se.js";import{m as N,z as Y,c as C,B as ae,C as Se,D as Ce,d as G,E as Pe,a as v,o as p,_ as q,q as Be,i as z,w as E,g as P,e as b,u as x,b as I,t as B,s as le,F as S,h as M,G as Ke,x as ye,l as R,H as ce,A as O,I as T,J as Ie,K as te,L as ie,M as Me,n as Ae}from"./index-Q4noPGif.js";import{u as Ve,d as ge}from"./db-BhNzgzsk.js";import{d as De}from"./decks-C8NYG5fl.js";import{f as fe}from"./formats-CxjEYhKc.js";import{a as Ee}from"./fsrs-jRzrxqJt.js";import{v as Le}from"./index-D_x_tOyf.js";import{W as Ne}from"./WordListItem-BOupouP2.js";function Re(e){return t=>{const n=new Map;for(const o of t){const r=e(o);let s=n.get(r);s||(s=[],n.set(r,s)),s.push(o)}return n}}const ve="http://kanjivg.tagaini.net",ee=Symbol("kanjivg"),re=["general","tradit","nelson"],Ge=new DOMParser;function qe(e){const t=[];let n=e.closest("[data-position]");for(;n instanceof SVGElement;)t.push(n.dataset.position),n=n.parentElement?.closest("[data-position]")??null;return t}function on(e){const t=N(null),n=N(null),o=N(!1);Y(()=>Se(e),async s=>{if(s){o.value=!0;try{const i=await(await fetch(`/kanjivg/kanji/${s}.svg`)).text(),d=Ge.parseFromString(i,"image/svg+xml");if(d.documentElement instanceof SVGSVGElement){const{x:a,y:m,width:_,height:y}=d.documentElement.viewBox.baseVal;n.value=`${a},${m},${_},${y}`}const l=d.getElementById(`kvg:${s}`);if(l){for(const a of[...l.querySelectorAll("*"),l])if(a instanceof SVGElement){for(const m of[...a.attributes])m.namespaceURI===ve&&(a.dataset[m.localName]=m.value,a.removeAttributeNS(ve,m.localName));a.removeAttribute("xmlns:kvg")}}t.value=l}finally{o.value=!1}}},{immediate:!0});const r=C(()=>{const s=t.value;if(!s)return new Map;const c=new Map,i={};function d(a){if(a.dataset.part&&Number.parseInt(a.dataset.part)>1)return;const m=a.dataset.element,_={element:m,original:a.dataset.original??null,position:qe(a),radical:a.dataset.radical??null,phon:a.dataset.phon??null};let y=c.get(m);y?y.push(_):(y=[_],c.set(m,y)),_.radical&&(i[_.radical]=m)}s.dataset.radical&&d(s);for(const a of s.querySelectorAll("g[data-element]"))d(a);const l=new Map;for(const a of re){const m=i[a],_=c.get(m);_&&(_.sort((y,u)=>y.radical?u.radical?re.indexOf(y.radical)-re.indexOf(u.radical):-1:u.radical?-1:0),l.set(m,_),c.delete(m))}for(const[a,m]of c)l.set(a,m);return l});Ce(ee,{strokesEl:t,viewBox:n,components:r,syncing:o})}function _e(){const e=ae(ee,null);return C(()=>e?.strokesEl.value?.cloneNode(!0)??null)}function xe(){const e=ae(ee,null);return C(()=>e?.viewBox.value??"0,0,109,109")}function Oe(){const e=ae(ee,null);return C(()=>e?.components.value??new Map)}function Te(){const e=ae(ee,null);return C(()=>e?.syncing.value??!1)}const ze=G({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(e){const t=e,n=N(null);function o(){n.value?.replaceChildren(t.strokes??"")}return Y(()=>t.strokes,o),Pe(()=>{o()}),(r,s)=>(p(),v("g",{ref_key:"container",ref:n,class:"kanji-strokes"},null,512))}}),we=q(ze,[["__scopeId","data-v-53c78976"]]),Xe=["viewBox"],Ye={class:"component-info"},He={key:0,class:"literal"},We={class:"meaning"},Je={key:0,class:"original",lang:"ja"},Fe={key:1,lang:"ja"},Ue={class:"tags"},Qe={key:1,class:"is-phonetic"},Ze=G({__name:"KanjiComponentItem",props:{literal:{},original:{},parts:{}},setup(e){const t=e,n=_e(),o=xe(),r=C(()=>{for(const h of t.parts)if(h.radical)return h.radical;return null}),s=C(()=>{for(const h of t.parts)if(h.phon)return h.phon;return null}),c=pe(()=>t.literal),i=C(()=>t.parts.at(0)?.original),d=pe(i),l=C(()=>d.value?.radical?.en??d.value?.meaning??c.value?.radical?.en??c?.value?.meaning),a=C(()=>d.value?.radical?.jp??d.value?.reading??c.value?.radical?.jp??c?.value?.reading),m=C(()=>d.value?.radical?.number??c.value?.radical?.number),_=C(()=>t.literal.startsWith("CDP-")),y=[["彐","⺕"],["犭","⺨"],["阝","⻖"]];function u(h){for(const[f,g]of y)if(h===f)return g;return h}function j(h){return`oklch(from var(--accent-color) l c ${h+3})`}return Be(()=>{const h=n.value;if(!h)return;h.dataset.element===t.literal&&(!t.original||t.original===h.dataset.original)&&(h.dataset.radical==="general"||h.dataset.radical==="tradit"?h.style.color="var(--green)":h.dataset.radical==="nelson"||h.dataset.radical==="jis"?h.style.color="var(--bluegreen)":h.dataset.phon===t.literal?h.style.color="var(--gold)":h.style.color=j(180));let f=-1;for(const g of h.querySelectorAll(`g[data-element="${t.literal}"]`))if(!(t.original&&t.original!==g.dataset.original)){if(g.dataset.radical==="general"||g.dataset.radical==="tradit"){g.style.color="var(--green)";continue}if(g.dataset.radical==="nelson"||g.dataset.radical==="jis"){g.style.color="var(--bluegreen)";continue}if(g.dataset.phon){g.style.color="var(--gold)";continue}(!g.dataset.part||g.dataset.part==="1")&&(f+=1),g.style.color=j(240+63*f)}}),(h,f)=>{const g=ye("RouterLink");return p(),z(g,{to:x(Ke)(u(h.literal)),class:"kanji-component-item"},{default:E(()=>[x(n)?(p(),v("svg",{key:0,viewBox:x(o),class:"kanji-component-strokes"},[I(we,{class:"strokes-group",strokes:x(n)},null,8,["strokes"])],8,Xe)):P("",!0),b("div",Ye,[_.value?P("",!0):(p(),v("span",He,B(h.literal),1)),b("p",We,[b("strong",null,B(l.value),1),i.value?(p(),v("span",Je,B(i.value),1)):P("",!0),a.value?(p(),v("span",Fe," ("+B(a.value)+")",1)):P("",!0)]),b("div",Ue,[r.value?(p(),v("span",{key:0,class:le(["is-radical",{"is-nelson":r.value==="nelson","is-jis":r.value==="jis"}])},[r.value==="nelson"?(p(),v(S,{key:0},[M("Nelson radical")],64)):r.value==="jis"?(p(),v(S,{key:1},[M("JIS radical")],64)):(p(),v(S,{key:2},[M("Radical")],64)),m.value?(p(),v(S,{key:3},[M(" "+B(m.value),1)],64)):P("",!0)],2)):P("",!0),s.value?(p(),v("span",Qe,"Phonetic")):P("",!0)])])]),_:1},8,["to"])}}}),et=q(Ze,[["__scopeId","data-v-d58bba66"]]),tt={class:"component-list"},nt=G({__name:"KanjiComponents",setup(e){const t=Oe();function n(o){return $e(o,Re(r=>r.original||null))}return(o,r)=>(p(),v("section",null,[b("h2",null,[r[0]||(r[0]=M(" Components ")),x(t).size>0?(p(),v(S,{key:0},[M(" ("+B(x(t).size)+") ",1)],64)):P("",!0)]),b("ul",tt,[(p(!0),v(S,null,R(x(t),([s,c])=>(p(),v(S,{key:s},[(p(!0),v(S,null,R(n(c),([i,d])=>(p(),v("li",{key:i??0},[I(et,{literal:s,parts:d,original:i},null,8,["literal","parts","original"])]))),128))],64))),128))])]))}}),sn=q(nt,[["__scopeId","data-v-57344291"]]),at={class:"kanji-readings"},ot={class:"dd-items"},st={class:"dd-items"},it=G({__name:"KanjiReadings",props:{kanji:{}},setup(e){return(t,n)=>(p(),v("section",null,[n[2]||(n[2]=b("h2",null,"Readings",-1)),b("dl",at,[n[0]||(n[0]=b("dt",null,"Kun",-1)),b("div",ot,[(p(!0),v(S,null,R(t.kanji.kunYomi,o=>(p(),v("dd",{key:o},B(o),1))),128))]),n[1]||(n[1]=b("dt",null,"On",-1)),b("div",st,[(p(!0),v(S,null,R(t.kanji.onYomi,o=>(p(),v("dd",{key:o},B(o),1))),128))])])]))}}),rn=q(it,[["__scopeId","data-v-9a0b4580"]]),rt={class:"kanji-strokes-background"},lt=["x","y","width","height"],ct=["x1","y1","x2","y2"],ut=["x1","y1","x2","y2"],dt=["x1","y1","x2","y2"],pt=["x1","y1","x2","y2"],ft=["x1","y1","x2","y2"],vt=["x1","y1","x2","y2"],mt=G({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(e){const t=e,n=C(()=>{const[s,c,i,d]=t.viewBox.split(",");return{x:Number.parseInt(s),y:Number.parseInt(c),width:Number.parseInt(i),height:Number.parseInt(d)}}),o=C(()=>{const{x:s,width:c}=n.value;return s+c/2}),r=C(()=>{const{y:s,height:c}=n.value;return s+c/2});return(s,c)=>(p(),v("g",rt,[b("rect",{class:"background",x:n.value.x,y:n.value.y,width:n.value.width,height:n.value.width,rx:"5"},null,8,lt),b("line",{class:"midline",x1:n.value.x+1,y1:r.value,x2:n.value.x+n.value.width-1,y2:r.value},null,8,ct),b("line",{class:"midline",x1:o.value,y1:n.value.y+1,x2:o.value,y2:n.value.y+n.value.height-1},null,8,ut),b("line",{class:"quartline",x1:o.value/2,y1:n.value.y+1,x2:o.value/2,y2:n.value.y+n.value.height-1},null,8,dt),b("line",{class:"quartline",x1:3*o.value/2,y1:n.value.y+1,x2:3*o.value/2,y2:n.value.y+n.value.height-1},null,8,pt),b("line",{class:"quartline",x1:n.value.x+1,y1:r.value/2,x2:n.value.x+n.value.width-1,y2:r.value/2},null,8,ft),b("line",{class:"quartline",x1:n.value.x+1,y1:3*r.value/2,x2:n.value.x+n.value.width-1,y2:3*r.value/2},null,8,vt)]))}}),kt=q(mt,[["__scopeId","data-v-78045927"]]),ht=1e-12,me=112e-18,yt=e=>e>=-me&&e<=me,je=(e,t)=>Math.sqrt(e*e+t*t),U=(e,t)=>({x:e,y:t}),gt=e=>je(e.x,e.y),_t=e=>U(-e.x,-e.y),Z=(e,t)=>U(e.x+t.x,e.y+t.y),D=(e,t)=>U(e.x-t.x,e.y-t.y),W=(e,t)=>U(e.x*t,e.y*t),L=(e,t)=>e.x*t.x+e.y*t.y,de=(e,t)=>je(e.x-t.x,e.y-t.y),X=(e,t=1)=>W(e,t/(gt(e)||1/0)),be=(e,t)=>({p:e,i:t}),xt=(e,t,n)=>{t&&(e.unshift(e[e.length-1]),e.push(e[1]));const o=e.length;if(o===0)return[];const r=[be(e[0])];return ue(e,r,n,0,o-1,D(e[1],e[0]),D(e[o-2],e[o-1])),t&&(r.shift(),r.pop()),r},ue=(e,t,n,o,r,s,c)=>{if(r-o===1){const _=e[o],y=e[r],u=de(_,y)/3;ke(t,[_,Z(_,X(s,u)),Z(y,X(c,u)),y]);return}const i=$t(e,o,r);let d=Math.max(n,n*n),l,a=!0;for(let _=0;_<=4;_++){const y=wt(e,o,r,i,s,c),u=St(e,o,r,y,i);if(u.error<n&&a){ke(t,y);return}if(l=u.index,u.error>=d)break;a=jt(e,o,r,i,y),d=u.error}const m=D(e[l-1],e[l+1]);ue(e,t,n,o,l,s,m),ue(e,t,n,l,r,_t(m),c)},ke=(e,t)=>{const n=e[e.length-1];n.o=D(t[1],t[0]),e.push(be(t[3],D(t[2],t[3])))},wt=(e,t,n,o,r,s)=>{const c=ht,i=Math.abs,d=e[t],l=e[n],a=[[0,0],[0,0]],m=[0,0];for(let $=0,A=n-t+1;$<A;$++){const V=o[$],H=1-V,J=3*V*H,oe=H*H*H,F=J*H,Q=J*V,se=V*V*V,w=X(r,F),k=X(s,Q),K=D(D(e[t+$],W(d,oe+F)),W(l,Q+se));a[0][0]+=L(w,w),a[0][1]+=L(w,k),a[1][0]=a[0][1],a[1][1]+=L(k,k),m[0]+=L(w,K),m[1]+=L(k,K)}const _=a[0][0]*a[1][1]-a[1][0]*a[0][1];let y,u;if(i(_)>c){const $=a[0][0]*m[1]-a[1][0]*m[0];y=(m[0]*a[1][1]-m[1]*a[0][1])/_,u=$/_}else{const $=a[0][0]+a[0][1],A=a[1][0]+a[1][1];y=u=i($)>c?m[0]/$:i(A)>c?m[1]/A:0}const j=de(l,d),h=c*j;let f,g;if(y<h||u<h)y=u=j/3;else{const $=D(l,d);f=X(r,y),g=X(s,u),L(f,$)-L(g,$)>j*j&&(y=u=j/3,f=g=null)}return[d,Z(d,f||X(r,y)),Z(l,g||X(s,u)),l]},jt=(e,t,n,o,r)=>{for(let s=t;s<=n;s++)o[s-t]=bt(r,e[s],o[s-t]);for(let s=1,c=o.length;s<c;s++)if(o[s]<=o[s-1])return!1;return!0},bt=(e,t,n)=>{const o=[],r=[];for(let a=0;a<=2;a++)o[a]=W(D(e[a+1],e[a]),3);for(let a=0;a<=1;a++)r[a]=W(D(o[a+1],o[a]),2);const s=ne(3,e,n),c=ne(2,o,n),i=ne(1,r,n),d=D(s,t),l=L(c,c)+L(d,i);return yt(l)?n:n-L(d,c)/l},ne=(e,t,n)=>{const o=t.slice();for(let r=1;r<=e;r++)for(let s=0;s<=e-r;s++)o[s]=Z(W(o[s],1-n),W(o[s+1],n));return o[0]},$t=(e,t,n)=>{const o=[0];for(let r=t+1;r<=n;r++)o[r-t]=o[r-t-1]+de(e[r],e[r-1]);for(let r=1,s=n-t;r<=s;r++)o[r]/=o[s];return o},St=(e,t,n,o,r)=>{let s=Math.floor((n-t+1)/2),c=0;for(let i=t+1;i<n;i++){const d=ne(3,o,r[i-t]),l=D(d,e[i]),a=l.x*l.x+l.y*l.y;a>=c&&(c=a,s=i)}return{error:c,index:s}},Ct=(e,t,n)=>{const o=e.length,r=10**n,s=n<16?u=>Math.round(u*r)/r:u=>u,c=(u,j)=>s(u)+","+s(j);let i=!0,d,l,a,m;const _=[],y=(u,j)=>{const h=u.p.x,f=u.p.y;if(i)_.push("M"+c(h,f)),i=!1;else{const g=h+(u.i?.x??0),$=f+(u.i?.y??0);if(g===h&&$===f&&a===d&&m===l){if(!j){const A=h-d,V=f-l;_.push(A===0?"v"+s(V):V===0?"h"+s(A):"l"+c(A,V))}}else _.push("c"+c(a-d,m-l)+" "+c(g-d,$-l)+" "+c(h-d,f-l))}d=h,l=f,a=h+(u.o?.x??0),m=f+(u.o?.y??0)};if(!o)return"";for(let u=0;u<o;u++)y(e[u]);return t&&o>0&&(y(e[0],!0),_.push("z")),_.join("")},Pt=(e,t={})=>e.length===0?"":Ct(xt(e.map(typeof e[0].x=="number"?n=>U(n.x,n.y):n=>U(n[0],n[1])),t.closed,t.tolerance??2.5),t.closed,t.precision??5),Bt=["x","y","width","height"],Kt={class:"practice-strokes"},It=["d"],Mt=["points"],At=G({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(e,{emit:t}){const n=e,o=t,r=N(null),s=C(()=>r.value?.closest("svg")),c=C(()=>s.value?.viewBox.baseVal),i=ce([]);function d(f){if(!s.value)return{x:f.x,y:f.y};const g=s.value.createSVGPoint();g.x=f.x,g.y=f.y;const $=g.matrixTransform(s.value.getScreenCTM()?.inverse());return{x:$.x,y:$.y}}function l(f){f.isPrimary&&(f.preventDefault(),r.value?.setPointerCapture(f.pointerId),i.push(d(f)))}function a(f){i.length===0||!f.isPrimary||i.push(d(f))}function m(f){f.isPrimary&&(i.length>1&&o("stroke",Pt(i)),r.value?.releasePointerCapture(f.pointerId),i.splice(0,i.length),s.value?.parentElement?.click())}function _(f){const g=f.getTotalLength();return[{strokeDasharray:g,strokeDashoffset:g},{strokeDasharray:g,strokeDashoffset:0}]}const y={duration:500,easing:"ease-in-out"},u=[];function j(){if(r.value){for(const f of r.value.querySelectorAll("path.stroke")){const g=f.animate(_(f),y);g.pause(),u.push(g)}h()}}async function h(){let f=u.at(0);for(;f;)f.play(),await f.finished,u.shift(),f=u.at(0),f&&await he(100)}return Y(()=>n.animate,f=>{f&&j()}),Y(()=>n.animatePause,f=>{f?u.at(0)?.pause():u.at(0)?.play()}),(f,g)=>(p(),v("g",{ref_key:"el",ref:r,class:"kanji-strokes-practice-canvas canvas",onPointerdown:l,onPointermove:a,onPointerup:m},[c.value?(p(),v("rect",{key:0,class:"background",x:c.value.x,y:c.value.y,width:c.value.width,height:c.value.height},null,8,Bt)):P("",!0),b("g",Kt,[(p(!0),v(S,null,R(f.practiceStrokes,($,A)=>(p(),v("path",{key:A,class:"stroke practice-stroke",d:$},null,8,It))),128))]),b("polyline",{class:"stroke current-stroke",points:x(i).map(({x:$,y:A})=>`${$},${A}`).join(" ")},null,8,Mt)],544))}}),Vt=q(At,[["__scopeId","data-v-5df6291b"]]),Dt={class:"strokes-figure"},Et=["viewBox"],Lt={class:"controls"},Nt=G({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean,default:!1},practiceMode:{type:Boolean,default:!1}},emits:["practiceDone"],setup(e,{expose:t,emit:n}){const o=e,r=n,s=N(null),c=_e(),i=xe(),d=Te(),l=C(()=>c.value?.querySelectorAll("path")??[]),a=ce([]),m=C(()=>a.length>0),_=N(!1),y=N(!1),u=N(!1),j=ce([]);function h(w){const k=w.getTotalLength();return[{strokeDasharray:k,strokeDashoffset:k},{strokeDasharray:k,strokeDashoffset:0}]}const f={duration:500,easing:"ease-in-out"};function g(){for(const w of l.value){const k=w.animate(h(w),f);k.pause(),a.push(k)}$()}async function $(){let w=a.at(0);for(;w;)w.play(),await w.finished,a.shift(),w=a.at(0),w&&await he(100)}function A(){a.at(0)?.pause(),_.value=!0}function V(){a.at(0)?.play(),_.value=!1}function H(){const w=l.value[j.length]?.getAttribute("d");w&&j.push(w)}function J(w=j.length){const k=l.value[w];if(!k)return;k.style.display="block";const K=k.animate(h(k),f);K.play(),K.finished.then(()=>{k.style.removeProperty("display")})}function oe(w){j.push(w),o.practiceMode&&j.length===l.value.length&&r("practiceDone"),o.practiceMode&&o.autoHint&&j.length<l.value.length&&J()}function F(){y.value=!1,j.splice(0,j.length)}function Q(){for(const w of a)w.cancel();a.splice(0,a.length),_.value=!1;for(const w of l.value)for(const k of w.getAnimations())k.cancel()}function se(){if(j.length===0){u.value=!1;return}j.length<l.value.length&&(y.value=!0)}return Y(u,w=>{y.value=!1,w?Q():F()}),Y(()=>o.autoHint,w=>{w&&requestAnimationFrame(async()=>{await Ie(d).toBe(!1),J(0)})},{immediate:!0}),Y(()=>o.kanji.codepoint,(w,k)=>{w!==k&&(F(),Q(),y.value=!1,u.value!==o.practiceMode&&(u.value=o.practiceMode))},{immediate:!0}),t({clearPracticeStrokes:F,maybeShowAnswer:se}),(w,k)=>(p(),v("section",null,[b("h2",null,[k[10]||(k[10]=M(" Strokes ")),!w.practiceMode&&l.value.length>0?(p(),v(S,{key:0},[M(" ("+B(l.value.length)+") ",1)],64)):P("",!0)]),b("figure",Dt,[x(c)?(p(),v("svg",{key:0,ref_key:"svgEl",ref:s,class:le(["svg",{practicing:u.value}]),viewBox:x(i),onTouchstart:k[1]||(k[1]=K=>{u.value&&K.preventDefault()})},[I(kt,{viewBox:x(i)},null,8,["viewBox"]),I(we,{strokes:x(c),class:le(["strokes",{comparing:m.value||y.value||l.value.length<=x(j).length,practicing:u.value}])},null,8,["strokes","class"]),u.value?(p(),z(Vt,{key:0,"practice-strokes":x(j),animate:m.value,"animate-pause":_.value,onStroke:k[0]||(k[0]=K=>oe(K))},null,8,["practice-strokes","animate","animate-pause"])):P("",!0)],42,Et)):P("",!0),b("figcaption",Lt,[m.value?(p(),v(S,{key:0},[_.value?(p(),z(O,{key:0,"aria-label":"Play",onClick:k[2]||(k[2]=K=>V())},{default:E(()=>[I(T,{icon:"play"})]),_:1})):(p(),z(O,{key:1,"aria-label":"Pause",onClick:k[3]||(k[3]=K=>A())},{default:E(()=>[I(T,{icon:"pause"})]),_:1}))],64)):(p(),v(S,{key:1},[u.value&&x(j).length<l.value.length?(p(),z(O,{key:0,"aria-label":"Show Hint",onClick:k[4]||(k[4]=K=>J())},{default:E(()=>[I(T,{icon:"help-circle"})]),_:1})):(p(),z(O,{key:1,"aria-label":"Animate Stroke Order",onClick:k[5]||(k[5]=K=>g())},{default:E(()=>[I(T,{icon:"play"})]),_:1}))],64)),w.practiceMode?P("",!0):(p(),z(O,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${u.value}`,filled:u.value,onClick:k[6]||(k[6]=K=>u.value=!u.value)},{default:E(()=>[I(T,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),u.value?(p(),v(S,{key:3},[k[11]||(k[11]=b("hr",{class:"rule"},null,-1)),I(O,{"aria-label":"Start Over",disabled:x(j).length===0,onClick:k[7]||(k[7]=K=>x(j).splice(0,x(j).length))},{default:E(()=>[I(T,{icon:"rotate-left"})]),_:1},8,["disabled"]),I(O,{"aria-label":"Skip Backward",disabled:x(j).length===0,onClick:k[8]||(k[8]=K=>x(j).pop())},{default:E(()=>[I(T,{icon:"skip-backward"})]),_:1},8,["disabled"]),I(O,{"aria-label":"Skip Backward",disabled:x(j).length===l.value.length,onClick:k[9]||(k[9]=K=>H())},{default:E(()=>[I(T,{icon:"skip-forward"})]),_:1},8,["disabled"])],64)):P("",!0)])])]))}}),ln=q(Nt,[["__scopeId","data-v-7dda416c"]]),Rt={class:"kanji-title"},Gt={class:"main-meaning meaning"},qt={class:"labels"},Ot={key:0,class:"label freq"},Tt=["data-r"],zt=["data-r"],Xt={key:0,class:"additional-meanings"},Yt=G({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const t=e,n=C(()=>{const{freq:i}=t.kanji;return i?i<=50?50:i<=100?100:i<=200?200:i<=500?500:i<=1e3?1e3:null:null}),{result:o}=Ve(C(()=>{const i=t.kanji.codepoint;return async()=>(await ge).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(i))})),r=C(()=>o.value?.filter(({active:i})=>i)),s=Ee(()=>t.kanji.codepoint);function c(i){return typeof i=="string"?"poor":i>.9?"good":i>.7?"fair":"poor"}return(i,d)=>{const l=ye("RouterLink");return p(),v("header",Rt,[te(b("h2",{class:"literal",lang:"ja"},B(i.kanji.literal),513),[[ie,!i.hideLiteral]]),te(b("p",Gt,[b("strong",null,B(i.kanji.meanings?.at(0)),1)],512),[[ie,!i.hideMeaning]]),b("aside",qt,[n.value&&!r.value?.some(({name:a})=>a===`news-top-${n.value}`)?(p(),v("span",Ot," Top "+B(n.value),1)):P("",!0),r.value?(p(!0),v(S,{key:1},R(r.value,a=>(p(),z(l,{key:a.name,to:{name:x(Me),query:{deck:a.name}},class:"label deck"},{default:E(()=>[M(B(x(De)(a)),1)]),_:2},1032,["to"]))),128)):P("",!0),x(s)?.write?(p(),v("span",{key:2,class:"label retrievability",title:"Writing Retrievability","data-r":c(x(s).write)},[d[0]||(d[0]=M(" 書 ")),typeof x(s).write=="string"?(p(),v(S,{key:0},[M(B(x(s).write),1)],64)):(p(),v(S,{key:1},[M(B(x(fe)(x(s).write)),1)],64))],8,Tt)):P("",!0),x(s)?.read?(p(),v("span",{key:3,class:"label retrievability",title:"Reading Retrievability","data-r":c(x(s).read)},[d[1]||(d[1]=M(" 読 ")),typeof x(s).read=="string"?(p(),v(S,{key:0},[M(B(x(s).read),1)],64)):(p(),v(S,{key:1},[M(B(x(fe)(x(s).read)),1)],64))],8,zt)):P("",!0)]),i.kanji.meanings?.length>1?te((p(),v("ul",Xt,[(p(!0),v(S,null,R(i.kanji.meanings.slice(1),a=>(p(),v("li",{key:a,class:"meaning"},B(a),1))),128))],512)),[[ie,!i.hideMeaning]]):P("",!0)])}}}),cn=q(Yt,[["__scopeId","data-v-cdbcdcce"]]),Ht={class:"kanji-word-list"},Wt=G({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const t=e,n=Ae(async()=>{const{words:i}=t.kanjiVocab,d=[],l=[],{store:a}=(await ge).transaction("bookmarked-words");for(const m of i)await a.count(m)?d.push(m):l.push(m);return{bookmarked:d,rest:l}},null),o=N(20),r=C(()=>{const i=o.value;if(n.value){const{bookmarked:d,rest:l}=n.value;return[d,l.slice(0,i)]}return[t.kanjiVocab.words.slice(0,i)]});function s(){o.value+=20}function c([{isIntersecting:i}]){i&&s()}return Y(()=>t.kanjiVocab.codepoint,(i,d)=>{i!==d&&(o.value=20)}),(i,d)=>(p(),v("section",null,[b("h2",null,"Words ("+B(i.kanjiVocab.words.length)+")",1),b("ul",Ht,[(p(!0),v(S,null,R(r.value,l=>(p(),v(S,null,[(p(!0),v(S,null,R(l,a=>(p(),v("li",{key:a},[I(Ne,{word:a,kanji:i.kanjiVocab.literal,"hide-kanji":i.hideKanji,"hide-reading":i.hideReading,"hide-meaning":i.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),o.value<i.kanjiVocab.words.length?te((p(),v("button",{key:0,class:"next-page-button",onClick:d[0]||(d[0]=l=>s())},d[1]||(d[1]=[M(" Load More ")]))),[[x(Le),c]]):P("",!0)]))}}),un=q(Wt,[["__scopeId","data-v-0daae353"]]);export{cn as K,rn as a,ln as b,sn as c,un as d,on as p};
