{"version":3,"file":"WordWritingSelect-ba5XybYn.js","sources":["../../node_modules/yta/src/sync/combinators/zip.js","../../src/helpers/words.ts","../../src/components/BookmarkWordButton.vue","../../src/helpers/sentences.ts","../../src/components/MaybeHideKanji.vue","../../src/components/VocabularyWordFurigana.vue","../../src/components/VocabularySentence.vue","../../src/components/PartOfSpeechTag.vue","../../src/components/VocabularyWordMeaning.vue","../../src/components/WordWritingSelect.vue"],"sourcesContent":["/**\n * Take any number of iterators, and zip them together into one iterator of\n * tuples. Closes after the shortest of the inputs closes.\n *\n * ```js\n * import { pipe } from \"yta\";\n * import { flatRepeat, of, range, toArray, zip } from \"yta/sync\";\n *\n * pipe(\n *   zip(\n *     of(\"a\", \"b\", \"c\"),\n *     range(),\n *     flatRepeat(() => of(true, false)),\n *   ),\n *   toArray(),\n * );\n * // => [[\"a\", 0, true], [\"b\", 1, false], [\"c\", 2, true]]\n * ```\n *\n * If you want to zip an iterator of iterators in a pipeline you can use them\n * spread opperator.\n *\n * ```js\n * import { pipe } from \"yta\";\n * import { flatRepeat, of, range, toArray, zip } from \"yta/sync\";\n *\n * pipe(\n *   of(\n *     of(\"a\", \"b\", \"c\"),\n *     range(),\n *     flatRepeat(() => of(true, false)),\n *   ),\n *   (iterables) => zip(...iterables),\n *   toArray(),\n * );\n * // => [[\"a\", 0, true], [\"b\", 1, false], [\"c\", 2, true]]\n * ```\n *\n * **See also:**\n *\n * - {@link zipLongest}\n *\n * @template {unknown[]} A - Tuple type with item type of each input iterator\n * @param {{ [K in keyof A]: Iterable<A[K]> }} items - The iterators to be zipped\n * @returns {Generator<A, void>}\n */\nexport default function* zip(...items) {\n  const iters = items.map((item) => item[Symbol.iterator]());\n\n  try {\n    let results = iters.map((iter) => iter.next());\n\n    while (!results.some(({ done }) => done)) {\n      yield /** @type {A} */ (results.map(({ value }) => value));\n\n      results = iters.map((iter) => iter.next());\n    }\n  } finally {\n    iters.forEach((iter) => {\n      if (typeof iter.return === \"function\") {\n        iter.return();\n      }\n    });\n  }\n}\n","import { computed, MaybeRefOrGetter, Ref, ref, toValue, watch } from \"vue\";\n\nimport { Word, WordReading, WordWriting } from \"../types.ts\";\nimport { useHighKanjiReadingProficiency } from \"./fsrs.ts\";\nimport { isKanji } from \"./text.ts\";\n\nexport function useWord(\n  wordId: MaybeRefOrGetter<number | null>,\n): Ref<Word | null> {\n  const wordInfo = ref<Word | null>(null);\n\n  watch(\n    () => toValue(wordId),\n    async (id) => {\n      if (!id) {\n        wordInfo.value = null;\n        return;\n      }\n\n      const response = await fetch(`/data/words-v1/${id}.json`);\n      const data = await response.json();\n\n      wordInfo.value = data;\n    },\n    { immediate: true },\n  );\n\n  return wordInfo;\n}\n\nexport function useWordSetenceIds(\n  wordId: MaybeRefOrGetter<number | null>,\n): Ref<number[]> {\n  const sentenceIds = ref<number[]>([]);\n\n  watch(\n    () => toValue(wordId),\n    async (id) => {\n      if (!id) {\n        sentenceIds.value = [];\n        return;\n      }\n\n      const response = await fetch(`/data/words-sentences-v1/${id}.json`);\n      const data = await response.json();\n\n      sentenceIds.value = data;\n    },\n    { immediate: true },\n  );\n\n  return sentenceIds;\n}\n\ntype UseWordFuriganaOptions = {\n  kanji?: MaybeRefOrGetter<string | null | undefined>;\n  forceReading?: MaybeRefOrGetter<boolean>;\n};\n\nfunction useWordWriting(\n  word: MaybeRefOrGetter<Word | null | undefined>,\n  options: UseWordFuriganaOptions = {},\n) {\n  return computed(() => {\n    const kanji = toValue(options.kanji);\n    const { writings } = toValue(word) ?? {};\n\n    if (!writings) {\n      return null;\n    }\n\n    let selected: WordWriting | null = null;\n\n    for (const writing of writings) {\n      if (!selected) {\n        selected = writing;\n        continue;\n      }\n\n      if (kanji) {\n        const hasKanji = writing.text.includes(kanji);\n\n        if (!hasKanji) {\n          continue;\n        }\n\n        if (!selected?.text.includes(kanji)) {\n          selected = writing;\n          continue;\n        }\n      }\n\n      if (\n        writing.priority?.freq &&\n        writing.priority.freq <\n          (selected.priority?.freq ?? Number.POSITIVE_INFINITY)\n      ) {\n        selected = writing;\n      }\n    }\n\n    return selected?.text;\n  });\n}\n\nfunction useWordReading(word: MaybeRefOrGetter<Word | null | undefined>) {\n  return computed(() => {\n    const { readings } = toValue(word) ?? {};\n\n    if (!readings) {\n      return null;\n    }\n\n    let selected: WordReading | null = null;\n\n    for (const reading of readings) {\n      if (!selected) {\n        selected = reading;\n        continue;\n      }\n\n      if (\n        reading.priority?.freq &&\n        reading.priority.freq <\n          (selected.priority?.freq ?? Number.POSITIVE_INFINITY)\n      ) {\n        selected = reading;\n      }\n    }\n\n    return selected?.text;\n  });\n}\n\nexport function useWordFurigana(\n  word: MaybeRefOrGetter<Word | null | undefined>,\n  options: UseWordFuriganaOptions = {},\n) {\n  const writing = useWordWriting(word, options);\n  const reading = useWordReading(word);\n\n  const proficientKanji = useHighKanjiReadingProficiency(() =>\n    toValue(word)\n      ?.writings?.map(({ text }) => text)\n      .join(\"\"),\n  );\n\n  const knowsRuby = computed(() => {\n    const forceReading = toValue(options.forceReading);\n    const targetKanji = toValue(options.kanji);\n\n    return (ruby: string): boolean => {\n      if (forceReading && targetKanji && ruby.includes(targetKanji)) {\n        return false;\n      }\n\n      for (const char of ruby) {\n        if (isKanji(char) && !proficientKanji.has(char)) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n  });\n\n  return computed(() => {\n    const { furigana } = toValue(word) ?? {};\n\n    let found;\n\n    if (!reading.value || !writing.value) {\n      found = furigana?.at(0);\n    } else {\n      found = furigana?.find(\n        (other) =>\n          other.writing === writing.value && other.reading === reading.value,\n      );\n    }\n\n    if (!found) {\n      found = furigana?.at(0);\n    }\n\n    const result = found?.furigana ?? [\n      { ruby: writing.value ?? reading.value ?? \"\" },\n    ];\n\n    let wasProficient = false;\n    return result.map(({ ruby, rt }) => {\n      const lastWasProficient = wasProficient;\n      wasProficient = false;\n\n      if (!rt) {\n        return { ruby };\n      }\n\n      if (ruby === \"々\" && lastWasProficient) {\n        return { ruby };\n      }\n\n      if (knowsRuby.value(ruby)) {\n        wasProficient = true;\n        return { ruby };\n      }\n\n      return { ruby, rt };\n    });\n  });\n}\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\nimport { db as openingDb } from \"../db/index.ts\";\nimport { addToSyncStaging } from \"../db/sync.ts\";\nimport { liveQueryBroadcaster } from \"../helpers/channels.ts\";\nimport { useLiveQuery } from \"../helpers/db.ts\";\nimport AppButton from \"./AppButton.vue\";\nimport AppIcon from \"./AppIcon.vue\";\n\nconst props = defineProps<{\n  wordId: number;\n  reading?: string | null;\n}>();\n\nconst { result: isBookmarked } = useLiveQuery(\n  computed(() => {\n    const id = props.wordId;\n\n    return async () => {\n      const db = await openingDb;\n      const count = await db.count(\"bookmarked-words\", id);\n\n      return count > 0;\n    };\n  }),\n);\n\nasync function toggleBookmark() {\n  const db = await openingDb;\n\n  if (isBookmarked.value) {\n    await db.delete(\"bookmarked-words\", props.wordId);\n    liveQueryBroadcaster.postMessage(\"word-unbookmarked\");\n    addToSyncStaging([\n      {\n        store: \"bookmarked-words\",\n        op: \"delete\",\n        key: props.wordId,\n      },\n    ]);\n\n    return;\n  }\n\n  const bookmark = {\n    wordId: props.wordId,\n    reading: props.reading,\n    bookmarkedAt: new Date(),\n  };\n\n  await db.add(\"bookmarked-words\", bookmark);\n  liveQueryBroadcaster.postMessage(\"word-bookmarked\");\n  addToSyncStaging([\n    {\n      store: \"bookmarked-words\",\n      op: \"add\",\n      key: props.wordId,\n    },\n  ]);\n}\n</script>\n\n<template>\n  <AppButton\n    :aria-pressed=\"isBookmarked\"\n    class=\"bookmark-button\"\n    @click=\"toggleBookmark()\"\n  >\n    <AppIcon :icon=\"isBookmarked ? 'star-filled' : 'star'\" />\n  </AppButton>\n</template>\n\n<style scoped>\n.bookmark-button {\n  background: none;\n  border: none;\n  padding: 0.2ex;\n  font-size: 1.5em;\n}\n</style>\n","import { MaybeRefOrGetter, Ref, ref, toValue, watch } from \"vue\";\n\nimport { Sentence } from \"../types.ts\";\n\nexport function useSentence(\n  id: MaybeRefOrGetter<number>,\n): Ref<Sentence | null> {\n  const sentenceInfo = ref(null);\n\n  watch(\n    () => toValue(id),\n    async (value) => {\n      const response = await fetch(`/data/sentences-v1/${value}.json`);\n      const data = await response.json();\n\n      sentenceInfo.value = data;\n    },\n    { immediate: true },\n  );\n\n  return sentenceInfo;\n}\n","<script setup lang=\"ts\">\nimport { isKanji } from \"../helpers/text.ts\";\nimport { kanjiRoute } from \"../router.ts\";\n\nwithDefaults(\n  defineProps<{\n    str: string;\n    kanji?: string | null;\n    hide?: boolean;\n    link?: boolean;\n  }>(),\n  {\n    kanji: null,\n    hide: false,\n    link: false,\n  },\n);\n</script>\n\n<template>\n  <template v-if=\"link\">\n    <template v-for=\"char of str\" :key=\"char\">\n      <RouterLink v-if=\"isKanji(char)\" :to=\"kanjiRoute(char)\" class=\"link\">\n        {{ char }}\n      </RouterLink>\n      <template v-else>\n        {{ char }}\n      </template>\n    </template>\n  </template>\n\n  <template v-else-if=\"!kanji || !hide\">\n    {{ str }}\n  </template>\n\n  <template v-else>\n    <template v-for=\"char of str\" :key=\"char\">\n      <span v-if=\"char === kanji\" class=\"placeholder\">◌</span>\n      <template v-else>\n        {{ char }}\n      </template>\n    </template>\n  </template>\n</template>\n\n<style scoped>\n.link {\n  color: inherit;\n  text-decoration: none;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { Furigana } from \"../types.ts\";\nimport MaybeHideKanji from \"./MaybeHideKanji.vue\";\n\nconst props = defineProps<{\n  furigana: Furigana;\n  kanji?: string | null;\n  hideKanji?: boolean;\n  hideReading?: boolean;\n  linkKanji?: boolean;\n}>();\n\nfunction hideAnnotation(ruby: string, index: number) {\n  if (!props.hideReading || !props.kanji) {\n    return false;\n  }\n\n  if (ruby === \"々\" && props.furigana.at(index - 1)?.ruby === props.kanji) {\n    return true;\n  }\n\n  return ruby.includes(props.kanji);\n}\n</script>\n\n<template>\n  <template v-for=\"({ ruby, rt }, i) of furigana\" :key=\"i\">\n    <template v-if=\"rt\">\n      <ruby\n        ><MaybeHideKanji\n          :hide=\"hideKanji\"\n          :kanji=\"kanji\"\n          :str=\"ruby\"\n          :link=\"linkKanji\"\n        /><rp>(</rp><rt v-if=\"hideAnnotation(ruby, i)\">◌</rt\n        ><rt v-else>{{ rt }}</rt\n        ><rp>)</rp></ruby\n      >\n    </template>\n    <MaybeHideKanji\n      v-else\n      :hide=\"hideKanji\"\n      :kanji=\"kanji\"\n      :str=\"ruby\"\n      :link=\"linkKanji\"\n    />\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\nimport { useHighKanjiReadingProficiency } from \"../helpers/fsrs.ts\";\nimport { useSentence } from \"../helpers/sentences.ts\";\nimport { isKanji } from \"../helpers/text.ts\";\nimport { wordRoute } from \"../router.ts\";\nimport { Furigana, SentenceWord } from \"../types.ts\";\nimport VocabularyWordFurigana from \"./VocabularyWordFurigana.vue\";\n\nconst props = defineProps<{\n  sentenceId: number;\n  hideKanji?: string | null;\n  hideReading?: string | null;\n  hideMeaning?: boolean;\n}>();\n\nconst sentence = useSentence(() => props.sentenceId);\n\nconst proficientKanji = useHighKanjiReadingProficiency(\n  () => sentence.value?.sentence,\n);\n\nconst knowsRuby = computed(() => {\n  return (ruby: string): boolean => {\n    if (props.hideKanji && ruby.includes(props.hideKanji)) {\n      // writing practice.\n      return false;\n    }\n\n    for (const char of ruby) {\n      if (isKanji(char) && !proficientKanji.has(char)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n});\n\nconst furigana = computed(() => {\n  return (word: SentenceWord): Furigana => {\n    let wasProficient = false;\n\n    return word.furigana.map(({ ruby, rt }) => {\n      const lastWasProficient = wasProficient;\n      wasProficient = false;\n\n      if (!rt) {\n        return { ruby };\n      }\n\n      if (ruby === \"々\" && lastWasProficient) {\n        return { ruby };\n      }\n\n      if (knowsRuby.value(ruby)) {\n        wasProficient = true;\n        return { ruby };\n      }\n\n      return { ruby, rt };\n    });\n  };\n});\n</script>\n\n<template>\n  <div v-if=\"sentence\" class=\"vocabulary-sentence\">\n    <p lang=\"ja\" class=\"sentence\">\n      <component\n        :is=\"word.word ? 'RouterLink' : 'span'\"\n        v-for=\"word of sentence.words\"\n        :key=\"word.word\"\n        :to=\"wordRoute(word.word)\"\n        class=\"word\"\n      >\n        <VocabularyWordFurigana\n          :furigana=\"furigana(word)\"\n          :hide-kanji=\"hideKanji ? true : false\"\n          :hide-reading=\"hideReading ? true : false\"\n          :kanji=\"hideKanji ?? hideReading\"\n        />\n      </component>\n    </p>\n\n    <p v-show=\"!hideMeaning\" lang=\"en\" class=\"translation\">\n      {{ sentence.meaning }}\n    </p>\n  </div>\n</template>\n\n<style scoped>\n.vocabulary-sentence {\n  font-size: 1rem;\n}\n\n.sentence,\n.translation {\n  margin: 0;\n}\n\n.word {\n  color: inherit;\n  text-decoration: none;\n}\n</style>\n","<script setup lang=\"ts\">\ndefineProps<{\n  tag: string;\n}>();\n</script>\n\n<template>\n  <span class=\"pos-tag\">\n    <template v-if=\"tag === 'adj-f'\"> noun or prenominal verb</template>\n    <template v-else-if=\"tag === 'adj-i'\">\n      <i lang=\"ja-Latn\">i</i> adjective</template\n    >\n    <template v-else-if=\"tag === 'adj-ix'\">\n      adjective – <i lang=\"ja-Latn\">yoi</i>/<i lang=\"ja-Latn\">ii</i>\n      class</template\n    >\n    <template v-else-if=\"tag === 'adj-na'\"> na adjective</template>\n    <template v-else-if=\"tag === 'adj-nari'\">\n      formal <i lang=\"ja-Latn\">na</i>-adjective</template\n    >\n    <template v-else-if=\"tag === 'adj-no'\">\n      noun w. <i>no</i> particle</template\n    >\n    <template v-else-if=\"tag === 'adj-pn'\"> pre-noun adjectival</template>\n    <template v-else-if=\"tag === 'adj-t'\">\n      <i lang=\"ja-Latn\">taru</i> adjective</template\n    >\n    <template v-else-if=\"tag === 'adv'\"> adverb</template>\n    <template v-else-if=\"tag === 'adv-to'\">\n      adverb w. <i lang=\"ja-Latn\">to</i> particle</template\n    >\n    <template v-else-if=\"tag === 'aux'\"> auxiliary</template>\n    <template v-else-if=\"tag === 'aux-adj'\"> auxiliary adjective</template>\n    <template v-else-if=\"tag === 'aux-v'\"> auxiliary verb</template>\n    <template v-else-if=\"tag === 'conj'\"> conjunction</template>\n    <template v-else-if=\"tag === 'cop'\"> copula</template>\n    <template v-else-if=\"tag === 'ctr'\"> counter</template>\n    <template v-else-if=\"tag === 'exp'\"> expressions</template>\n    <template v-else-if=\"tag === 'int'\"> interjection</template>\n    <template v-else-if=\"tag === 'n'\"> noun</template>\n    <template v-else-if=\"tag === 'n-adv'\"> adverbial noun</template>\n    <template v-else-if=\"tag === 'n-pr'\"> proper noun</template>\n    <template v-else-if=\"tag === 'n-pref'\"> noun, used as a prefix</template>\n    <template v-else-if=\"tag === 'n-suf'\"> noun, used as a suffix</template>\n    <template v-else-if=\"tag === 'n-t'\"> noun (temporal)</template>\n    <template v-else-if=\"tag === 'num'\"> numeric</template>\n    <template v-else-if=\"tag === 'pn'\"> pronoun</template>\n    <template v-else-if=\"tag === 'pref'\"> prefix</template>\n    <template v-else-if=\"tag === 'prt'\"> particle</template>\n    <template v-else-if=\"tag === 'suf'\"> suffix</template>\n    <template v-else-if=\"tag === 'uk'\"> Usually written with kana</template>\n    <template v-else-if=\"tag === 'v-unspec'\"> verb</template>\n    <template v-else-if=\"tag === 'v1'\"> Ichidan verb</template>\n    <template v-else-if=\"tag === 'v1-s'\">\n      Ichidan verb – <i lang=\"ja-Latn\">kureru</i></template\n    >\n    <template v-else-if=\"tag === 'v5aru'\">\n      Godan verb – <i lang=\"ja-Latn\">-aru</i></template\n    >\n    <template v-else-if=\"tag === 'v5b'\"> Godan verb</template>\n    <template v-else-if=\"tag === 'v5g'\"> Godan verb</template>\n    <template v-else-if=\"tag === 'v5k'\"> Godan verb</template>\n    <template v-else-if=\"tag === 'v5k-s'\">\n      Godan verb – <i lang=\"ja-Latn\">iku</i>/<i lang=\"ja-Latn\"\n        >yuku</i\n      ></template\n    >\n    <template v-else-if=\"tag === 'v5m'\"> Godan verb</template>\n    <template v-else-if=\"tag === 'v5n'\"> Godan verb</template>\n    <template v-else-if=\"tag === 'v5r'\">\n      Godan verb with <i lang=\"ja-Latn\">ru</i> ending</template\n    >\n    <template v-else-if=\"tag === 'v5r-i'\">\n      Godan verb with <i lang=\"ja-Latn\">ru</i> ending (irregular)</template\n    >\n    <template v-else-if=\"tag === 'v5s'\"> Godan verb</template>\n    <template v-else-if=\"tag === 'v5t'\"> Godan verb</template>\n    <template v-else-if=\"tag === 'v5u'\"> Godan verb</template>\n    <template v-else-if=\"tag === 'v5u-s'\">\n      Godan verb with <i lang=\"ja-Latn\">u</i> ending (special class)</template\n    >\n    <template v-else-if=\"tag === 'v5uru'\">\n      Godan verb – <i lang=\"ja-Latn\">Uru</i> old class verb</template\n    >\n    <template v-else-if=\"tag === 'vi'\"> intransitive verb</template>\n    <template v-else-if=\"tag === 'vk'\">\n      <i lang=\"ja-Latn\">Kuru</i> verb</template\n    >\n    <template v-else-if=\"tag === 'vn'\">\n      irregular <i lang=\"ja-Latn\">nu</i> verb</template\n    >\n    <template v-else-if=\"tag === 'vr'\">\n      irregular <i lang=\"ja-Latn\">ru</i> verb</template\n    >\n    <template v-else-if=\"tag === 'vs'\">\n      <i lang=\"ja-Latn\">suru</i> verb</template\n    >\n    <template v-else-if=\"tag === 'vs-c'\">\n      <i lang=\"ja-Latn\">su</i> verb—precursor to the modern\n      <i lang=\"ja-Latn\">suru</i></template\n    >\n    <template v-else-if=\"tag === 'vs-i'\">\n      <i lang=\"ja-Latn\">suru</i> verb – included</template\n    >\n    <template v-else-if=\"tag === 'vs-s'\">\n      <i lang=\"ja-Latn\">suru</i> verb – special class</template\n    >\n    <template v-else-if=\"tag === 'vt'\"> transitive verb</template>\n    <template v-else-if=\"tag === 'vz'\">\n      Ichidan verb – <i lang=\"ja-Latn\">zuru</i> verb</template\n    >\n  </span>\n</template>\n\n<style scoped>\n.pos-tag {\n  color: var(--medium-gray);\n  font-size: 0.8em;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { WordMeaning } from \"../types.ts\";\nimport PartOfSpeechTag from \"./PartOfSpeechTag.vue\";\n\ndefineProps<{\n  meaning: WordMeaning;\n}>();\n</script>\n\n<template>\n  <div class=\"vocabulary-word-meaning\">\n    <div class=\"meaning-pos\">\n      <PartOfSpeechTag v-for=\"pos of meaning.pos\" :key=\"pos\" :tag=\"pos\" />\n      <PartOfSpeechTag v-if=\"meaning.kanaPreferred\" tag=\"uk\" />\n    </div>\n    <div class=\"glossary\">\n      <span v-for=\"word of meaning.glossary\" :key=\"word\" class=\"glossary-word\">\n        {{ word }}</span\n      >\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.meaning-pos {\n  column-gap: 1ex;\n  display: flex;\n  flex-wrap: wrap;\n\n  & .pos-tag:not(:last-child)::after {\n    content: \",\";\n  }\n}\n\n.glossary {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.glossary-word:not(:last-child) {\n  padding-inline-end: 1ex;\n\n  &::after {\n    content: \";\";\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, ref, useId } from \"vue\";\nimport { zip } from \"yta/sync\";\n\nimport { Furigana, Word } from \"../types.ts\";\nimport VocabularyWordFurigana from \"./VocabularyWordFurigana.vue\";\n\ntype ModelValue = Furigana | string | null;\n\nconst props = defineProps<{\n  word: Word;\n  defaultFurigana: Furigana;\n  modelValue: ModelValue;\n}>();\n\ndefineEmits<{\n  \"update:modelValue\": [value: ModelValue];\n}>();\n\nconst id = useId();\nconst anchorName = `--${id}`.replace(\":\", \"-anchor-\");\n\nconst noopWritings = computed(\n  () =>\n    props.word.writings\n      ?.filter(\n        (writing) =>\n          writing.irregular || writing.outdated || writing.searchOnly,\n      )\n      .map(({ text }) => text) ?? [],\n);\nconst noopReadings = computed(\n  () =>\n    props.word.readings\n      ?.filter(\n        (reading) =>\n          reading.irregular || reading.outdated || reading.searchOnly,\n      )\n      .map(({ text }) => text) ?? [],\n);\n\nfunction furiganaEquals(aFurigana: Furigana, bFurigana: Furigana): boolean {\n  if (aFurigana.length !== bFurigana.length) {\n    return false;\n  }\n\n  for (const [a, b] of zip(aFurigana, bFurigana)) {\n    if (a.ruby !== b.ruby || a.rt !== b.rt) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nconst additionalFurigana = computed(\n  () =>\n    props.word.furigana?.filter(\n      (other) =>\n        !furiganaEquals(props.defaultFurigana, other.furigana) &&\n        !noopWritings.value.includes(other.writing) &&\n        !noopReadings.value.includes(other.reading),\n    ) ?? [],\n);\n\nconst additionalReadings = computed(\n  () =>\n    props.word.readings?.filter(\n      (reading) =>\n        !reading.irregular &&\n        !reading.outdated &&\n        !reading.searchOnly &&\n        !props.word.furigana?.some((other) => reading.text === other.reading),\n    ) ?? [],\n);\n\nconst toggleButton = ref<HTMLButtonElement | null>(null);\nconst popoverEl = ref<HTMLElement | null>(null);\nconst open = ref(false);\n\nfunction handleToggle(event: ToggleEvent) {\n  open.value = event.newState === \"open\";\n}\n\nfunction handleBeforeToggle(event: ToggleEvent) {\n  if (event.newState !== \"open\") {\n    return;\n  }\n\n  // Polyfill the anchor positioning\n  if (!(\"anchorName\" in document.documentElement.style)) {\n    const togglerBox = toggleButton.value?.getBoundingClientRect();\n    const style = popoverEl.value?.style;\n\n    if (style && togglerBox) {\n      style.insetBlockStart = `${togglerBox.bottom + window.scrollY}px`;\n      style.insetInlineEnd = `calc(100% - ${togglerBox.right}px)`;\n    }\n\n    // TODO: Apply fallback positions with an intersection observer.\n  }\n}\n</script>\n\n<template>\n  <div\n    v-if=\"additionalFurigana.length + additionalReadings.length > 0\"\n    class=\"word-writing-details popover-container\"\n  >\n    <button\n      ref=\"toggleButton\"\n      title=\"Additional Writings\"\n      class=\"toggle-button\"\n      :popovertarget=\"id\"\n    >\n      <span class=\"writing-select-icon\">か</span>\n      <small class=\"writing-select-count\"\n        >(+{{\n          additionalFurigana.length + additionalReadings.length + 1\n        }})</small\n      >\n    </button>\n\n    <ul\n      :id=\"id\"\n      ref=\"popoverEl\"\n      class=\"writing-list popover\"\n      popover\n      @beforetoggle=\"handleBeforeToggle\"\n      @toggle=\"handleToggle\"\n    >\n      <li>\n        <button\n          class=\"select-button\"\n          :disabled=\"modelValue === null\"\n          @click=\"$emit('update:modelValue', null)\"\n        >\n          <VocabularyWordFurigana :furigana=\"defaultFurigana\" />\n        </button>\n      </li>\n\n      <li\n        v-for=\"(furigana, i) of additionalFurigana\"\n        :key=\"i\"\n        class=\"additional-writing\"\n      >\n        <button\n          class=\"select-button\"\n          :disabled=\"modelValue === furigana.furigana\"\n          @click=\"$emit('update:modelValue', furigana.furigana)\"\n        >\n          <VocabularyWordFurigana :furigana=\"furigana.furigana\" />\n        </button>\n      </li>\n\n      <li v-for=\"(reading, i) of additionalReadings\" :key=\"i\">\n        <button\n          class=\"select-button\"\n          :disabled=\"modelValue === reading.text\"\n          @click=\"$emit('update:modelValue', reading.text)\"\n        >\n          {{ reading.text }}\n        </button>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style scoped>\n.toggle-button {\n  background: none;\n  border: none;\n  color: var(--text-light);\n  cursor: pointer;\n  font-size: 1em;\n  font-weight: 400;\n  margin: 0;\n  padding: 0;\n\n  .popover-container:has(:popover-open) & {\n    color: var(--accent-color);\n  }\n}\n\n.writing-select-icon {\n  font-weight: 700;\n}\n\n.writing-select-count {\n  margin-inline-start: 0.5ex;\n}\n\n.popover {\n  background: var(--background-strong);\n  border: 1px solid var(--accent-color);\n  border-radius: 0.5ex;\n  inline-size: max-content;\n  inset: auto;\n  margin-inline: 0;\n  max-inline-size: 15ch;\n  padding: 1ex;\n  position: absolute;\n}\n\n.writing-list {\n  list-style: none;\n  margin: 0;\n\n  & > li:not(:first-child) {\n    margin-block-start: 1ex;\n  }\n}\n\n.select-button {\n  background: none;\n  border: none;\n  color: var(--text-color);\n  cursor: pointer;\n  font-family: inherit;\n  padding-block: 0.2ex;\n  padding-inline: 0;\n\n  &:disabled {\n    color: var(--accent-color);\n  }\n}\n\n@supports (anchor-name: --app-menu-anchor) {\n  .toggle-button {\n    anchor-name: v-bind(anchorName);\n  }\n\n  .popover {\n    position-anchor: v-bind(anchorName);\n    position-area: block-end span-inline-start;\n    position-try:\n      flip-block,\n      flip-inline,\n      flip-block flip-inline;\n  }\n}\n</style>\n"],"names":["zip","items","iters","item","results","iter","done","value","useWord","wordId","wordInfo","ref","watch","toValue","id","data","useWordSetenceIds","sentenceIds","useWordWriting","word","options","computed","kanji","writings","selected","writing","useWordReading","readings","reading","useWordFurigana","proficientKanji","useHighKanjiReadingProficiency","text","knowsRuby","forceReading","targetKanji","ruby","char","isKanji","furigana","found","other","result","wasProficient","rt","lastWasProficient","props","__props","isBookmarked","useLiveQuery","openingDb","toggleBookmark","db","liveQueryBroadcaster","addToSyncStaging","bookmark","_createBlock","AppButton","_unref","_createVNode","AppIcon","useSentence","sentenceInfo","link","_createElementBlock","_Fragment","_renderList","str","_component_RouterLink","kanjiRoute","hide","_hoisted_1","hideAnnotation","index","_openBlock","i","MaybeHideKanji","hideKanji","linkKanji","_cache","_createElementVNode","sentence","_hoisted_2","_resolveDynamicComponent","wordRoute","VocabularyWordFurigana","hideReading","_toDisplayString","hideMeaning","tag","meaning","pos","PartOfSpeechTag","_hoisted_3","useId","anchorName","noopWritings","noopReadings","furiganaEquals","aFurigana","bFurigana","a","b","additionalFurigana","additionalReadings","toggleButton","popoverEl","open","handleToggle","event","handleBeforeToggle","togglerBox","style","modelValue","$emit","defaultFurigana","$event","_hoisted_7"],"mappings":"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","x_google_ignoreList":[0]}