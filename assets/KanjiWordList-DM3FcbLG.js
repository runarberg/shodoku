import{n as N,p as E,m as _,g as S,q as Se,s as re,l as ve,v as Ie,x as ae,d as M,y as Ke,c as o,o as a,_ as P,u as $,f as B,e as K,b as m,t as I,z as ye,F as c,a as g,i as L,h as A,w as Y,A as J,B as Z}from"./index-1Esrt7dj.js";import{A as z,a as X}from"./AppButton-CI0rVoMs.js";function ht(t){const n=N(null);return E(()=>_(t),async e=>{if(!e){n.value=null;return}const s=e.toString(16).padStart(5,"0"),u=await(await fetch(`/data/kanji-v1/${s}.json`)).json();n.value=u},{immediate:!0}),n}function wt(t){const n=N(null);return E(()=>_(t),async e=>{if(!e){n.value=null;return}const s=e.toString(16).padStart(5,"0"),u=await(await fetch(`/data/kanji-vocab-v1/${s}.json`)).json();n.value=u},{immediate:!0}),n}const ce="http://kanjivg.tagaini.net",ie=Symbol("kanjivg"),xe=new DOMParser;function Be(t){var s;const n=[];let e=t.closest("[data-position]");for(;e instanceof SVGElement;)n.push(e.dataset.position),e=((s=e.parentElement)==null?void 0:s.closest("[data-position]"))??null;return n}function bt(t){const n=N(null),e=N(null);E(()=>_(t),async r=>{if(!r)return;const v=await(await fetch(`/kanjivg/kanji/${r}.svg`)).text(),l=xe.parseFromString(v,"image/svg+xml");if(l.documentElement instanceof SVGSVGElement){const{x:d,y:i,width:y,height:k}=l.documentElement.viewBox.baseVal;e.value=`${d},${i},${y},${k}`}const p=l.getElementById(`kvg:${r}`);if(p){for(const d of[...p==null?void 0:p.querySelectorAll("*"),p])if(d instanceof SVGElement){for(const i of[...d.attributes])i.namespaceURI===ce&&(d.dataset[i.localName]=i.value,d.removeAttributeNS(ce,i.localName));d.removeAttribute("xmlns:kvg")}}n.value=p},{immediate:!0});const s=S(()=>{const r=n.value;if(!r)return new Map;const u=new Map,v={};function l(d){if(d.dataset.part&&Number.parseInt(d.dataset.part)>1)return;const i=d.dataset.element,y={element:i,original:d.dataset.original??null,position:Be(d),radical:d.dataset.radical??null};let k=u.get(i);k?k.push(y):(k=[y],u.set(i,k)),y.radical&&(v[y.radical]=i)}r.dataset.radical&&l(r);for(const d of r.querySelectorAll("g[data-element]"))l(d);const p=new Map;for(const d of["general","tradit","nelson"]){const i=v[d],y=u.get(i);y&&(p.set(i,y),u.delete(i))}for(const[d,i]of u)p.set(d,i);return p});Se(ie,{strokesEl:n,viewBox:e,components:s})}function ke(){const t=re(ie,null);return S(()=>{var e;return((e=t==null?void 0:t.strokesEl.value)==null?void 0:e.cloneNode(!0))??null})}function me(){const t=re(ie,null);return S(()=>(t==null?void 0:t.viewBox.value)??"0,0,109,109")}function Me(){const t=re(ie,null);return S(()=>(t==null?void 0:t.components.value)??new Map)}function*Ce(t){for(const n of t.split(`
`)){const[e,s,r,u,v]=n.split(",");if(!s)continue;const l={id:Number.parseInt(e),literal:s.at(0)??"",strokes:Number.parseInt(r),meaning:u,reading:v};for(const p of s)yield[p,l]}}const Le=Ie("radicals",()=>{const t=N(!1),n=N(null),e=ae(new Map);async function s(){if(!t.value){t.value=!0,n.value=null;try{const v=await(await fetch("/data/radicals.csv")).text();for(const[l,p]of Ce(v))e.set(l,p)}catch(u){n.value=u}finally{t.value=!1}}}async function r(u){const v=u.codePointAt(0);if(!v)return;const l=v==null?void 0:v.toString(16).padStart(5,"0"),d=await(await fetch(`/data/kanji-v1/${l}.json`)).json(),i=d.kunYomi.find(y=>!/[.-]/.test(y))??d.kunYomi.at(0)??"";e.set(u,{id:v,literal:u,strokes:d.strokeCount,meaning:d.meanings.at(0)??"",reading:i})}return s(),{radicals:e,sync:s,syncing:t,tryKanji:r}});function Pe(t){const n=Le();return ve(()=>{const e=_(t);e&&!n.syncing&&!n.radicals.has(e)&&n.tryKanji(e)}),S(()=>{const e=_(t);return e?n.radicals.get(e)??null:null})}const Ve=M({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(t){const n=t,e=N(null);function s(){var r;(r=e.value)==null||r.replaceChildren(n.strokes??"")}return E(()=>n.strokes,s),Ke(()=>{s()}),(r,u)=>(a(),o("g",{ref_key:"container",ref:e,class:"kanji-strokes"},null,512))}}),je=P(Ve,[["__scopeId","data-v-53c78976"]]),Ge={class:"kanji-component-item"},Ne=["viewBox"],Ae={class:"component-info"},De={class:"literal"},Ee={class:"meaning"},Re={key:0,lang:"ja"},qe=M({__name:"KanjiComponentItem",props:{literal:{},parts:{}},setup(t){const n=t,e=ke(),s=me(),r=S(()=>{for(const l of n.parts)if(l.radical)return l.radical;return null}),u=Pe(()=>n.literal);function v(l){return`oklch(from var(--accent-color) l c calc(h + ${l})`}return ve(()=>{const l=e.value;if(!l)return;l.dataset.element===n.literal&&(l.dataset.radical==="general"||l.dataset.radical==="tradit"?l.style.color="var(--green)":l.dataset.radical==="nelson"?l.style.color="var(--orange)":l.style.color=v(180));let p=-1;for(const d of l.querySelectorAll(`g[data-element="${n.literal}"]`)){if(d.dataset.radical==="general"||d.dataset.radical==="tradit"){d.style.color="var(--green)";continue}if(d.dataset.radical==="nelson"){d.style.color="var(--orange)";continue}(!d.dataset.part||d.dataset.part==="1")&&(p+=1),d.style.color=v(240+63*p)}}),(l,p)=>{var d,i;return a(),o("div",Ge,[$(e)?(a(),o("svg",{key:0,viewBox:$(s),class:"kanji-component-strokes"},[B(je,{class:"strokes-group",strokes:$(e)},null,8,["strokes"])],8,Ne)):K("",!0),m("div",Ae,[m("span",De,I(l.literal),1),m("p",Ee,[m("strong",null,I((d=$(u))==null?void 0:d.meaning),1),(i=$(u))!=null&&i.reading?(a(),o("span",Re," ("+I($(u).reading)+")",1)):K("",!0)]),r.value?(a(),o("span",{key:0,class:ye(["is-radical",{"is-nelson":r.value==="nelson"}])},[r.value==="nelson"?(a(),o(c,{key:0},[g("Nelson radical")],64)):(a(),o(c,{key:1},[g("Radical")],64))],2)):K("",!0)])])}}}),Oe=P(qe,[["__scopeId","data-v-bee0b5dd"]]),We={class:"component-list"},Te=M({__name:"KanjiComponents",setup(t){const n=Me();return(e,s)=>(a(),o("section",null,[m("h2",null,[s[0]||(s[0]=g(" Components ")),$(n).size>0?(a(),o(c,{key:0},[g(" ("+I($(n).size)+")",1)],64)):K("",!0)]),m("ul",We,[(a(!0),o(c,null,L($(n),([r,u])=>(a(),o("li",{key:r},[B(Oe,{literal:r,parts:u},null,8,["literal","parts"])]))),128))])]))}}),$t=P(Te,[["__scopeId","data-v-6768574a"]]),Ye={class:"kanji-readings"},ze={class:"dd-items"},Xe={class:"dd-items"},_e=M({__name:"KanjiReadings",props:{kanji:{}},setup(t){return(n,e)=>(a(),o("section",null,[e[2]||(e[2]=m("h2",null,"Readings",-1)),m("dl",Ye,[e[0]||(e[0]=m("dt",null,"Kun",-1)),m("div",ze,[(a(!0),o(c,null,L(n.kanji.kunYomi,s=>(a(),o("dd",null,I(s),1))),256))]),e[1]||(e[1]=m("dt",null,"On",-1)),m("div",Xe,[(a(!0),o(c,null,L(n.kanji.onYomi,s=>(a(),o("dd",null,I(s),1))),256))])])]))}}),St=P(_e,[["__scopeId","data-v-f6c59d96"]]),Fe={class:"kanji-strokes-background"},He=["x","y","width","height"],Ue=["x1","y1","x2","y2"],Je=["x1","y1","x2","y2"],Ze=["x1","y1","x2","y2"],Qe=["x1","y1","x2","y2"],en=["x1","y1","x2","y2"],nn=["x1","y1","x2","y2"],tn=M({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(t){const n=t,e=S(()=>{const[u,v,l,p]=n.viewBox.split(",");return{x:Number.parseInt(u),y:Number.parseInt(v),width:Number.parseInt(l),height:Number.parseInt(p)}}),s=S(()=>{const{x:u,width:v}=e.value;return u+v/2}),r=S(()=>{const{y:u,height:v}=e.value;return u+v/2});return(u,v)=>(a(),o("g",Fe,[m("rect",{class:"background",x:e.value.x,y:e.value.y,width:e.value.width,height:e.value.width,rx:"5"},null,8,He),m("line",{class:"midline",x1:e.value.x+1,y1:r.value,x2:e.value.x+e.value.width-1,y2:r.value},null,8,Ue),m("line",{class:"midline",x1:s.value,y1:e.value.y+1,x2:s.value,y2:e.value.y+e.value.height-1},null,8,Je),m("line",{class:"quartline",x1:s.value/2,y1:e.value.y+1,x2:s.value/2,y2:e.value.y+e.value.height-1},null,8,Ze),m("line",{class:"quartline",x1:3*s.value/2,y1:e.value.y+1,x2:3*s.value/2,y2:e.value.y+e.value.height-1},null,8,Qe),m("line",{class:"quartline",x1:e.value.x+1,y1:r.value/2,x2:e.value.x+e.value.width-1,y2:r.value/2},null,8,en),m("line",{class:"quartline",x1:e.value.x+1,y1:3*r.value/2,x2:e.value.x+e.value.width-1,y2:3*r.value/2},null,8,nn)]))}}),an=P(tn,[["__scopeId","data-v-1b492e2c"]]),sn=1e-12,pe=112e-18,on=t=>t>=-pe&&t<=pe,he=(t,n)=>Math.sqrt(t*t+n*n),F=(t,n)=>({x:t,y:n}),rn=t=>he(t.x,t.y),ln=t=>F(-t.x,-t.y),Q=(t,n)=>F(t.x+n.x,t.y+n.y),G=(t,n)=>F(t.x-n.x,t.y-n.y),W=(t,n)=>F(t.x*n,t.y*n),D=(t,n)=>t.x*n.x+t.y*n.y,le=(t,n)=>he(t.x-n.x,t.y-n.y),O=(t,n=1)=>W(t,n/(rn(t)||1/0)),we=(t,n)=>({p:t,i:n}),un=(t,n,e)=>{n&&(t.unshift(t[t.length-1]),t.push(t[1]));const s=t.length;if(s===0)return[];const r=[we(t[0])];return oe(t,r,e,0,s-1,G(t[1],t[0]),G(t[s-2],t[s-1])),n&&(r.shift(),r.pop()),r},oe=(t,n,e,s,r,u,v)=>{if(r-s===1){const k=t[s],j=t[r],w=le(k,j)/3;fe(n,[k,Q(k,O(u,w)),Q(j,O(v,w)),j]);return}const l=fn(t,s,r);let p=Math.max(e,e*e),d,i=!0;for(let k=0;k<=4;k++){const j=dn(t,s,r,l,u,v),w=gn(t,s,r,j,l);if(w.error<e&&i){fe(n,j);return}if(d=w.index,w.error>=p)break;i=cn(t,s,r,l,j),p=w.error}const y=G(t[d-1],t[d+1]);oe(t,n,e,s,d,u,y),oe(t,n,e,d,r,ln(y),v)},fe=(t,n)=>{const e=t[t.length-1];e.o=G(n[1],n[0]),t.push(we(n[3],G(n[2],n[3])))},dn=(t,n,e,s,r,u)=>{const v=sn,l=Math.abs,p=t[n],d=t[e],i=[[0,0],[0,0]],y=[0,0];for(let b=0,V=e-n+1;b<V;b++){const R=s[b],q=1-R,H=3*R*q,U=q*q*q,T=H*q,ue=H*R,$e=R*R*R,ee=O(r,T),ne=O(u,ue),de=G(G(t[n+b],W(p,U+T)),W(d,ue+$e));i[0][0]+=D(ee,ee),i[0][1]+=D(ee,ne),i[1][0]=i[0][1],i[1][1]+=D(ne,ne),y[0]+=D(ee,de),y[1]+=D(ne,de)}const k=i[0][0]*i[1][1]-i[1][0]*i[0][1];let j,w;if(l(k)>v){const b=i[0][0]*y[1]-i[1][0]*y[0];j=(y[0]*i[1][1]-y[1]*i[0][1])/k,w=b/k}else{const b=i[0][0]+i[0][1],V=i[1][0]+i[1][1];j=w=l(b)>v?y[0]/b:l(V)>v?y[1]/V:0}const x=le(d,p),C=v*x;let f,h;if(j<C||w<C)j=w=x/3;else{const b=G(d,p);f=O(r,j),h=O(u,w),D(f,b)-D(h,b)>x*x&&(j=w=x/3,f=h=null)}return[p,Q(p,f||O(r,j)),Q(d,h||O(u,w)),d]},cn=(t,n,e,s,r)=>{for(let u=n;u<=e;u++)s[u-n]=pn(r,t[u],s[u-n]);for(let u=1,v=s.length;u<v;u++)if(s[u]<=s[u-1])return!1;return!0},pn=(t,n,e)=>{const s=[],r=[];for(let i=0;i<=2;i++)s[i]=W(G(t[i+1],t[i]),3);for(let i=0;i<=1;i++)r[i]=W(G(s[i+1],s[i]),2);const u=te(3,t,e),v=te(2,s,e),l=te(1,r,e),p=G(u,n),d=D(v,v)+D(p,l);return on(d)?e:e-D(p,v)/d},te=(t,n,e)=>{const s=n.slice();for(let r=1;r<=t;r++)for(let u=0;u<=t-r;u++)s[u]=Q(W(s[u],1-e),W(s[u+1],e));return s[0]},fn=(t,n,e)=>{const s=[0];for(let r=n+1;r<=e;r++)s[r-n]=s[r-n-1]+le(t[r],t[r-1]);for(let r=1,u=e-n;r<=u;r++)s[r]/=s[u];return s},gn=(t,n,e,s,r)=>{let u=Math.floor((e-n+1)/2),v=0;for(let l=n+1;l<e;l++){const p=te(3,s,r[l-n]),d=G(p,t[l]),i=d.x*d.x+d.y*d.y;i>=v&&(v=i,u=l)}return{error:v,index:u}},vn=(t,n,e)=>{const s=t.length,r=10**e,u=e<16?w=>Math.round(w*r)/r:w=>w,v=(w,x)=>u(w)+","+u(x);let l=!0,p,d,i,y;const k=[],j=(w,x)=>{var h,b,V,R;const C=w.p.x,f=w.p.y;if(l)k.push("M"+v(C,f)),l=!1;else{const q=C+(((h=w.i)==null?void 0:h.x)??0),H=f+(((b=w.i)==null?void 0:b.y)??0);if(q===C&&H===f&&i===p&&y===d){if(!x){const U=C-p,T=f-d;k.push(U===0?"v"+u(T):T===0?"h"+u(U):"l"+v(U,T))}}else k.push("c"+v(i-p,y-d)+" "+v(q-p,H-d)+" "+v(C-p,f-d))}p=C,d=f,i=C+(((V=w.o)==null?void 0:V.x)??0),y=f+(((R=w.o)==null?void 0:R.y)??0)};if(!s)return"";for(let w=0;w<s;w++)j(t[w]);return n&&s>0&&(j(t[0],!0),k.push("z")),k.join("")},yn=(t,n={})=>t.length===0?"":vn(un(t.map(typeof t[0].x=="number"?e=>F(e.x,e.y):e=>F(e[0],e[1])),n.closed,n.tolerance??2.5),n.closed,n.precision??5);function kn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var be={exports:{}};(function(t){(function(){function n(l,p){var d=l.x-p.x,i=l.y-p.y;return d*d+i*i}function e(l,p,d){var i=p.x,y=p.y,k=d.x-i,j=d.y-y;if(k!==0||j!==0){var w=((l.x-i)*k+(l.y-y)*j)/(k*k+j*j);w>1?(i=d.x,y=d.y):w>0&&(i+=k*w,y+=j*w)}return k=l.x-i,j=l.y-y,k*k+j*j}function s(l,p){for(var d=l[0],i=[d],y,k=1,j=l.length;k<j;k++)y=l[k],n(y,d)>p&&(i.push(y),d=y);return d!==y&&i.push(y),i}function r(l,p,d,i,y){for(var k=i,j,w=p+1;w<d;w++){var x=e(l[w],l[p],l[d]);x>k&&(j=w,k=x)}k>i&&(j-p>1&&r(l,p,j,i,y),y.push(l[j]),d-j>1&&r(l,j,d,i,y))}function u(l,p){var d=l.length-1,i=[l[0]];return r(l,0,d,p,i),i.push(l[d]),i}function v(l,p,d){if(l.length<=2)return l;var i=p!==void 0?p*p:1;return l=d?l:s(l,i),l=u(l,i),l}t.exports=v,t.exports.default=v})()})(be);var mn=be.exports;const jn=kn(mn),hn=["x","y","width","height"],wn=["d"],bn=["points"],$n=M({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(t,{emit:n}){const e=t,s=n,r=N(null),u=S(()=>{var f;return(f=r.value)==null?void 0:f.closest("svg")}),v=S(()=>{var f;return(f=u.value)==null?void 0:f.viewBox.baseVal}),l=ae([]);function p(f){var V;if(!u.value)return{x:f.x,y:f.y};const h=u.value.createSVGPoint();h.x=f.x,h.y=f.y;const b=h.matrixTransform((V=u.value.getScreenCTM())==null?void 0:V.inverse());return{x:b.x,y:b.y}}function d(f){l.push(p(f))}function i(f){var h;l.length!==0&&((h=r.value)==null||h.setPointerCapture(f.pointerId),l.push(p(f)))}function y(f){var h;s("stroke",yn(l)),(h=r.value)==null||h.releasePointerCapture(f.pointerId),l.splice(0,l.length)}function k(f){const h=f.getTotalLength();return[{strokeDasharray:h,strokeDashoffset:h},{strokeDasharray:h,strokeDashoffset:0}]}const j={duration:500,endDelay:100,easing:"ease-in-out"},w=[];function x(){var f;if(r.value){for(const h of(f=r.value)==null?void 0:f.querySelectorAll("path.stroke")){const b=h.animate(k(h),j);b.pause(),w.push(b)}C()}}async function C(){let f=w.at(0);for(;f;)f.play(),await f.finished,w.shift(),f=w.at(0)}return E(()=>e.animate,f=>{f&&x()}),E(()=>e.animatePause,f=>{var h,b;f?(h=w.at(0))==null||h.pause():(b=w.at(0))==null||b.play()}),(f,h)=>(a(),o("g",{ref_key:"el",ref:r,class:"kanji-strokes-practice-canvas canvas",onPointerdown:d,onPointermove:i,onPointerup:y},[v.value?(a(),o("rect",{key:0,class:"background",x:v.value.x,y:v.value.y,width:v.value.width,height:v.value.height},null,8,hn)):K("",!0),(a(!0),o(c,null,L(f.practiceStrokes,b=>(a(),o("path",{class:"stroke",d:b},null,8,wn))),256)),m("polyline",{class:"stroke current-stroke",points:$(jn)($(l)).map(({x:b,y:V})=>`${b},${V}`).join(" ")},null,8,bn)],544))}}),Sn=P($n,[["__scopeId","data-v-22a42ec0"]]),In={class:"strokes-figure"},Kn=["viewBox"],xn={class:"controls"},Bn=M({__name:"KanjiStrokes",props:{kanji:{},practiceMode:{type:Boolean,default:!1}},setup(t){const n=t,e=ke(),s=me(),r=S(()=>{var f;return((f=e.value)==null?void 0:f.querySelectorAll("path"))??[]}),u=ae([]),v=S(()=>u.length>0),l=N(!1),p=N(!1),d=ae([]);E(p,f=>{if(f){for(const h of u)h.cancel();u.splice(0,u.length),l.value=!1}else d.splice(0,d.length)}),E(()=>n.practiceMode,f=>{f!==p.value&&(p.value=f)},{immediate:!0});function i(f){const h=f.getTotalLength();return[{strokeDasharray:h,strokeDashoffset:h},{strokeDasharray:h,strokeDashoffset:0}]}const y={duration:500,endDelay:100,easing:"ease-in-out"};function k(){for(const f of r.value){const h=f.animate(i(f),y);h.pause(),u.push(h)}j()}async function j(){let f=u.at(0);for(;f;)f.play(),await f.finished,u.shift(),f=u.at(0)}function w(){var f;(f=u.at(0))==null||f.pause(),l.value=!0}function x(){var f;(f=u.at(0))==null||f.play(),l.value=!1}function C(){const f=r.value[d.length];if(!f)return;f.style.display="block",f.animate(i(f),y).finished.then(()=>{f.style.removeProperty("display")})}return(f,h)=>(a(),o("section",null,[m("h2",null,[h[6]||(h[6]=g(" Strokes ")),!f.practiceMode&&r.value.length>0?(a(),o(c,{key:0},[g(" ("+I(r.value.length)+") ",1)],64)):K("",!0)]),m("figure",In,[$(e)?(a(),o("svg",{key:0,viewBox:$(s),class:"svg"},[B(an,{viewBox:$(s)},null,8,["viewBox"]),B(je,{strokes:$(e),class:ye(["strokes",{comparing:v.value||r.value.length<=$(d).length,practicing:p.value}])},null,8,["strokes","class"]),p.value?(a(),A(Sn,{key:0,"practice-strokes":$(d),animate:v.value,"animate-pause":l.value,onStroke:h[0]||(h[0]=b=>$(d).push(b))},null,8,["practice-strokes","animate","animate-pause"])):K("",!0)],8,Kn)):K("",!0),m("figcaption",xn,[v.value?(a(),o(c,{key:0},[l.value?(a(),A(z,{key:0,"aria-label":"Play",onClick:h[1]||(h[1]=b=>x())},{default:Y(()=>[B(X,{icon:"play"})]),_:1})):(a(),A(z,{key:1,"aria-label":"Pause",onClick:h[2]||(h[2]=b=>w())},{default:Y(()=>[B(X,{icon:"pause"})]),_:1}))],64)):(a(),o(c,{key:1},[p.value&&$(d).length<r.value.length?(a(),A(z,{key:0,"aria-lable":"hint",onClick:C},{default:Y(()=>[B(X,{icon:"help-circle"})]),_:1})):(a(),A(z,{key:1,"aria-label":"Play Stroke Order",onClick:h[3]||(h[3]=b=>k())},{default:Y(()=>[B(X,{icon:"play"})]),_:1}))],64)),f.practiceMode?K("",!0):(a(),A(z,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${p.value}`,filled:p.value,onClick:h[4]||(h[4]=b=>p.value=!p.value)},{default:Y(()=>[B(X,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),p.value?(a(),o(c,{key:3},[h[7]||(h[7]=m("hr",{class:"rule"},null,-1)),B(z,{"aria-label":"Undo",onClick:h[5]||(h[5]=b=>$(d).pop())},{default:Y(()=>[B(X,{icon:"rotate-left"})]),_:1})],64)):K("",!0)])])]))}}),It=P(Bn,[["__scopeId","data-v-d91e3fc3"]]),Mn={class:"kanji-title"},Cn={class:"main-meaning meaning"},Ln={class:"labels"},Pn={key:0,class:"freq"},Vn={key:0,class:"additional-meanings"},Gn={class:"meaning"},Nn=M({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){const n=t,e=S(()=>{const{freq:s}=n.kanji;if(!s)return null;if(s<=50)return 50;if(s<=100)return 100;if(s<=200)return 200;if(s<=500)return 500;if(s<=1e3)return 1e3});return(s,r)=>{var u,v;return a(),o("header",Mn,[J(m("h2",{class:"literal",lang:"ja"},I(s.kanji.literal),513),[[Z,!s.hideLiteral]]),J(m("p",Cn,[m("strong",null,I((u=s.kanji.meanings)==null?void 0:u.at(0)),1)],512),[[Z,!s.hideMeaning]]),m("aside",Ln,[e.value?(a(),o("span",Pn,"Top "+I(e.value),1)):K("",!0)]),((v=s.kanji.meanings)==null?void 0:v.length)>1?J((a(),o("ul",Vn,[(a(!0),o(c,null,L(s.kanji.meanings.slice(1),l=>(a(),o("li",Gn,I(l),1))),256))],512)),[[Z,!s.hideMeaning]]):K("",!0)])}}}),Kt=P(Nn,[["__scopeId","data-v-955be1b2"]]);function An(t){const n=N(null);return E(()=>_(t),async e=>{const r=await(await fetch(`/data/sentences-v1/${e}.json`)).json();n.value=r},{immediate:!0}),n}const Dn={key:0,class:"placeholder"},se=M({__name:"MaybeHideKanji",props:{str:{},kanji:{default:null},hide:{type:Boolean,default:!1}},setup(t){return(n,e)=>!n.kanji||!n.hide?(a(),o(c,{key:0},[g(I(n.str),1)],64)):(a(!0),o(c,{key:1},L(n.str,s=>(a(),o(c,null,[s===n.kanji?(a(),o("span",Dn,"◌")):(a(),o(c,{key:1},[g(I(s),1)],64))],64))),256))}}),En={key:0},Rn={lang:"ja",class:"sentence"},qn={key:0},On={key:0},Wn={key:1},Tn=M({__name:"VocabularySentence",props:{sentenceId:{},hideKanji:{},hideReading:{},hideMeaning:{type:Boolean}},setup(t){const n=t,e=An(()=>n.sentenceId);function s(r){return n.hideReading&&r.includes(n.hideReading)}return(r,u)=>$(e)?(a(),o("div",En,[m("p",Rn,[(a(!0),o(c,null,L($(e).words,v=>(a(),o(c,null,[(a(!0),o(c,null,L(v.furigana,({ruby:l,rt:p})=>(a(),o(c,null,[p?(a(),o("ruby",qn,[B(se,{hide:r.hideKanji!=null,kanji:r.hideKanji,str:l},null,8,["hide","kanji","str"]),u[0]||(u[0]=m("rp",null,"(",-1)),s(l)?(a(),o("rt",On,"◌")):(a(),o("rt",Wn,I(p),1)),u[1]||(u[1]=m("rp",null,")",-1))])):(a(),A(se,{key:1,hide:r.hideKanji!=null,kanji:r.hideKanji,str:l},null,8,["hide","kanji","str"]))],64))),256))],64))),256))]),J(m("p",{lang:"en",class:"translation"},I($(e).meaning),513),[[Z,!r.hideMeaning]])])):K("",!0)}}),Yn=P(Tn,[["__scopeId","data-v-0af9cb09"]]),zn={class:"pos-tag"},Xn=M({__name:"PartOfSpeechTag",props:{tag:{}},setup(t){return(n,e)=>(a(),o("span",zn,[n.tag==="adj-f"?(a(),o(c,{key:0},[g(" noun or prenominal verb")],64)):n.tag==="adj-i"?(a(),o(c,{key:1},[e[0]||(e[0]=m("i",{lang:"ja-Latn"},"i",-1)),e[1]||(e[1]=g(" adjective"))],64)):n.tag==="adj-ix"?(a(),o(c,{key:2},[e[2]||(e[2]=g(" adjective – ")),e[3]||(e[3]=m("i",{lang:"ja-Latn"},"yoi",-1)),e[4]||(e[4]=g("/")),e[5]||(e[5]=m("i",{lang:"ja-Latn"},"ii",-1)),e[6]||(e[6]=g(" class"))],64)):n.tag==="adj-na"?(a(),o(c,{key:3},[g(" na adjective")],64)):n.tag==="adj-nari"?(a(),o(c,{key:4},[e[7]||(e[7]=g(" formal ")),e[8]||(e[8]=m("i",{lang:"ja-Latn"},"na",-1)),e[9]||(e[9]=g("-adjective"))],64)):n.tag==="adj-no"?(a(),o(c,{key:5},[e[10]||(e[10]=g(" noun w. ")),e[11]||(e[11]=m("i",null,"no",-1)),e[12]||(e[12]=g(" particle"))],64)):n.tag==="adj-pn"?(a(),o(c,{key:6},[g(" pre-noun adjectival")],64)):n.tag==="adj-t"?(a(),o(c,{key:7},[e[13]||(e[13]=m("i",{lang:"ja-Latn"},"taru",-1)),e[14]||(e[14]=g(" adjective"))],64)):n.tag==="adv"?(a(),o(c,{key:8},[g(" adverb")],64)):n.tag==="adv-to"?(a(),o(c,{key:9},[e[15]||(e[15]=g(" adverb w. ")),e[16]||(e[16]=m("i",{lang:"ja-Latn"},"to",-1)),e[17]||(e[17]=g(" particle"))],64)):n.tag==="aux"?(a(),o(c,{key:10},[g(" auxiliary")],64)):n.tag==="aux-adj"?(a(),o(c,{key:11},[g(" auxiliary adjective")],64)):n.tag==="aux-v"?(a(),o(c,{key:12},[g(" auxiliary verb")],64)):n.tag==="conj"?(a(),o(c,{key:13},[g(" conjunction")],64)):n.tag==="cop"?(a(),o(c,{key:14},[g(" copula")],64)):n.tag==="ctr"?(a(),o(c,{key:15},[g(" counter")],64)):n.tag==="exp"?(a(),o(c,{key:16},[g(" expressions")],64)):n.tag==="int"?(a(),o(c,{key:17},[g(" interjection")],64)):n.tag==="n"?(a(),o(c,{key:18},[g(" noun")],64)):n.tag==="n-adv"?(a(),o(c,{key:19},[g(" adverbial noun")],64)):n.tag==="n-pr"?(a(),o(c,{key:20},[g(" proper noun")],64)):n.tag==="n-pref"?(a(),o(c,{key:21},[g(" noun, used as a prefix")],64)):n.tag==="n-suf"?(a(),o(c,{key:22},[g(" noun, used as a suffix")],64)):n.tag==="n-t"?(a(),o(c,{key:23},[g(" noun (temporal)")],64)):n.tag==="num"?(a(),o(c,{key:24},[g(" numeric")],64)):n.tag==="pn"?(a(),o(c,{key:25},[g(" pronoun")],64)):n.tag==="pref"?(a(),o(c,{key:26},[g(" prefix")],64)):n.tag==="prt"?(a(),o(c,{key:27},[g(" particle")],64)):n.tag==="suf"?(a(),o(c,{key:28},[g(" suffix")],64)):n.tag==="v-unspec"?(a(),o(c,{key:29},[g(" verb")],64)):n.tag==="v1"?(a(),o(c,{key:30},[g(" Ichidan verb")],64)):n.tag==="v1-s"?(a(),o(c,{key:31},[e[18]||(e[18]=g(" Ichidan verb – ")),e[19]||(e[19]=m("i",{lang:"ja-Latn"},"kureru",-1))],64)):n.tag==="v5aru"?(a(),o(c,{key:32},[e[20]||(e[20]=g(" Godan verb – ")),e[21]||(e[21]=m("i",{lang:"ja-Latn"},"-aru",-1))],64)):n.tag==="v5b"?(a(),o(c,{key:33},[g(" Godan verb")],64)):n.tag==="v5g"?(a(),o(c,{key:34},[g(" Godan verb")],64)):n.tag==="v5k"?(a(),o(c,{key:35},[g(" Godan verb")],64)):n.tag==="v5k-s"?(a(),o(c,{key:36},[e[22]||(e[22]=g(" Godan verb – ")),e[23]||(e[23]=m("i",{lang:"ja-Latn"},"iku",-1)),e[24]||(e[24]=g("/")),e[25]||(e[25]=m("i",{lang:"ja-Latn"},"yuku",-1))],64)):n.tag==="v5m"?(a(),o(c,{key:37},[g(" Godan verb")],64)):n.tag==="v5n"?(a(),o(c,{key:38},[g(" Godan verb")],64)):n.tag==="v5r"?(a(),o(c,{key:39},[e[26]||(e[26]=g(" Godan verb with ")),e[27]||(e[27]=m("i",{lang:"ja-Latn"},"ru",-1)),e[28]||(e[28]=g(" ending"))],64)):n.tag==="v5r-i"?(a(),o(c,{key:40},[e[29]||(e[29]=g(" Godan verb with ")),e[30]||(e[30]=m("i",{lang:"ja-Latn"},"ru",-1)),e[31]||(e[31]=g(" ending (irregular)"))],64)):n.tag==="v5s"?(a(),o(c,{key:41},[g(" Godan verb")],64)):n.tag==="v5t"?(a(),o(c,{key:42},[g(" Godan verb")],64)):n.tag==="v5u"?(a(),o(c,{key:43},[g(" Godan verb")],64)):n.tag==="v5u-s"?(a(),o(c,{key:44},[e[32]||(e[32]=g(" Godan verb with ")),e[33]||(e[33]=m("i",{lang:"ja-Latn"},"u",-1)),e[34]||(e[34]=g(" ending (special class)"))],64)):n.tag==="v5uru"?(a(),o(c,{key:45},[e[35]||(e[35]=g(" Godan verb – ")),e[36]||(e[36]=m("i",{lang:"ja-Latn"},"Uru",-1)),e[37]||(e[37]=g(" old class verb"))],64)):n.tag==="vi"?(a(),o(c,{key:46},[g(" intransitive verb")],64)):n.tag==="vk"?(a(),o(c,{key:47},[e[38]||(e[38]=m("i",{lang:"ja-Latn"},"Kuru",-1)),e[39]||(e[39]=g(" verb"))],64)):n.tag==="vn"?(a(),o(c,{key:48},[e[40]||(e[40]=g(" irregular ")),e[41]||(e[41]=m("i",{lang:"ja-Latn"},"nu",-1)),e[42]||(e[42]=g(" verb"))],64)):n.tag==="vr"?(a(),o(c,{key:49},[e[43]||(e[43]=g(" irregular ")),e[44]||(e[44]=m("i",{lang:"ja-Latn"},"ru",-1)),e[45]||(e[45]=g(" verb"))],64)):n.tag==="vs"?(a(),o(c,{key:50},[e[46]||(e[46]=m("i",{lang:"ja-Latn"},"suru",-1)),e[47]||(e[47]=g(" verb"))],64)):n.tag==="vs-c"?(a(),o(c,{key:51},[e[48]||(e[48]=m("i",{lang:"ja-Latn"},"su",-1)),e[49]||(e[49]=g(" verb—precursor to the modern ")),e[50]||(e[50]=m("i",{lang:"ja-Latn"},"suru",-1))],64)):n.tag==="vs-i"?(a(),o(c,{key:52},[e[51]||(e[51]=m("i",{lang:"ja-Latn"},"suru",-1)),e[52]||(e[52]=g(" verb – included"))],64)):n.tag==="vs-s"?(a(),o(c,{key:53},[e[53]||(e[53]=m("i",{lang:"ja-Latn"},"suru",-1)),e[54]||(e[54]=g(" verb – special class"))],64)):n.tag==="vt"?(a(),o(c,{key:54},[g(" transitive verb")],64)):n.tag==="vz"?(a(),o(c,{key:55},[e[55]||(e[55]=g(" Ichidan verb – ")),e[56]||(e[56]=m("i",{lang:"ja-Latn"},"zuru",-1)),e[57]||(e[57]=g(" verb"))],64)):K("",!0)]))}}),_n=P(Xn,[["__scopeId","data-v-a8a9d510"]]),Fn={class:"vocabulary-word-meaning"},Hn={class:"meaning-pos"},Un={class:"glossary"},Jn={class:"glossary-word"},Zn=M({__name:"VocabularyWordMeaning",props:{meaning:{}},setup(t){return(n,e)=>(a(),o("div",Fn,[m("div",Hn,[(a(!0),o(c,null,L(n.meaning.pos,s=>(a(),A(_n,{tag:s},null,8,["tag"]))),256))]),m("div",Un,[(a(!0),o(c,null,L(n.meaning.glossary,s=>(a(),o("span",Jn,I(s),1))),256))])]))}}),ge=P(Zn,[["__scopeId","data-v-a1fc931c"]]),Qn={class:"vocabulary-word"},et={key:0,class:"word",lang:"ja"},nt={key:0},tt={key:0},at={key:1},st={key:1,class:"word",lang:"ja"},it={class:"meaning"},ot={key:1,class:"additional-meanings-details"},rt={class:"additional-meanings"},lt={class:"additional-meaning-item"},ut=M({__name:"VocabularyWord",props:{word:{},kanji:{default:null},hideKanji:{type:Boolean,default:!1},hideReading:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1}},setup(t){const n=t,e=new RegExp("\\p{Script=Han}","u"),s=S(()=>{const{kanji:i,word:y}=n;return y.meanings?i?y.meanings.filter(k=>k.info&&k.info.startsWith("esp. ")&&e.test(k.info)?k.info.includes(i):k.useWithWriting?k.useWithWriting.some(j=>j.includes(i)):!0):y.meanings:[]}),r=S(()=>{var y,k;if(!n.word.writings)return null;let i=null;for(const j of n.word.writings){if(!i){i=j;continue}n.kanji&&!j.text.includes(n.kanji)||(y=j.priority)!=null&&y.freq&&j.priority.freq<(((k=i.priority)==null?void 0:k.freq)??Number.POSITIVE_INFINITY)&&(i=j)}return i==null?void 0:i.text}),u=S(()=>{var y,k;if(!n.word.readings)return null;let i=null;for(const j of n.word.readings){if(!i){i=j;continue}(y=j.priority)!=null&&y.freq&&j.priority.freq<(((k=i.priority)==null?void 0:k.freq)??Number.POSITIVE_INFINITY)&&(i=j)}return i==null?void 0:i.text}),v=S(()=>{var y,k,j;let i;return!u.value||!r.value?i=(y=n.word.furigana)==null?void 0:y.at(0):i=(k=n.word.furigana)==null?void 0:k.find(w=>w.writing===r.value&&w.reading===u.value),i||(i=(j=n.word.furigana)==null?void 0:j.at(0)),(i==null?void 0:i.furigana)??null}),l=S(()=>s.value.at(0));function p(i){return!n.hideReading||!n.kanji?!1:i.includes(n.kanji)}const d=S(()=>s.value.slice(1));return(i,y)=>(a(),o("div",Qn,[v.value?(a(),o("p",et,[(a(!0),o(c,null,L(v.value,({ruby:k,rt:j})=>(a(),o(c,null,[j?(a(),o("ruby",nt,[B(se,{hide:i.hideKanji,kanji:i.kanji,str:k},null,8,["hide","kanji","str"]),y[0]||(y[0]=m("rp",null," (",-1)),p(k)?(a(),o("rt",tt,"◌")):(a(),o("rt",at,I(j),1)),y[1]||(y[1]=m("rp",null,")",-1))])):(a(),A(se,{key:1,hide:i.hideKanji,kanji:i.kanji,str:k},null,8,["hide","kanji","str"]))],64))),256))])):(a(),o("p",st,I(r.value),1)),J(m("div",it,[l.value?(a(),A(ge,{key:0,meaning:l.value},null,8,["meaning"])):K("",!0),d.value.length>0?(a(),o("details",ot,[m("summary",null,I(d.value.length)+" more",1),m("ul",rt,[(a(!0),o(c,null,L(d.value,k=>(a(),o("li",lt,[B(ge,{meaning:k},null,8,["meaning"])]))),256))])])):K("",!0)],512),[[Z,!i.hideMeaning]])]))}}),dt=P(ut,[["__scopeId","data-v-cd0b4803"]]),ct={class:"word-list-item"},pt={key:1,"aria-label":"Sentences"},ft={class:"sentences"},gt=M({__name:"WordListItem",props:{word:{},kanji:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){const n=t,e=N(null);return E(()=>n.word,async({word:s})=>{const u=await(await fetch(`/data/words-v1/${s}.json`)).json();e.value=u},{immediate:!0}),(s,r)=>(a(),o("article",ct,[e.value?(a(),A(dt,{key:0,word:e.value,kanji:s.kanji,"hide-kanji":s.hideKanji,"hide-reading":s.hideReading,"hide-meaning":s.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])):K("",!0),s.word.sentences?(a(),o("section",pt,[m("ul",ft,[(a(!0),o(c,null,L(s.word.sentences,u=>(a(),o("li",{key:u,class:"sentence-item"},[B(Yn,{"sentence-id":u,"hide-kanji":s.hideKanji?s.kanji:null,"hide-reading":s.hideReading?s.kanji:null,"hide-meaning":s.hideMeaning},null,8,["sentence-id","hide-kanji","hide-reading","hide-meaning"])]))),128))])])):K("",!0)]))}}),vt=P(gt,[["__scopeId","data-v-4a1e7cc1"]]),yt={class:"kanji-word-list"},kt=M({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(t){return(n,e)=>(a(),o("section",null,[m("h2",null,"Words ("+I(n.kanjiVocab.words.length)+")",1),m("ul",yt,[(a(!0),o(c,null,L(n.kanjiVocab.words,s=>(a(),o("li",{key:s.word},[B(vt,{word:s,kanji:n.kanjiVocab.literal,"hide-kanji":n.hideKanji,"hide-reading":n.hideReading,"hide-meaning":n.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))])]))}}),xt=P(kt,[["__scopeId","data-v-f556788b"]]);export{Kt as K,wt as a,St as b,It as c,xt as d,$t as e,bt as p,ht as u};
