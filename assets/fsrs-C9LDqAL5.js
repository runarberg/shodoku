import{g as d,f as w,i as g,S as m}from"./index-CZZIk45U.js";import{u as p,d as c}from"./db-D-l1LJxU.js";import{d as v}from"./reviews-Cd2z_uA7.js";import{c as u,C as f,H as b,z as y}from"./index-C4O8d0Wk.js";function l(){return u(()=>{const s=d({enable_fuzz:v.value});return w(s)})}function S(s){const r=l(),{result:i}=p(u(()=>{const a=f(s);return async()=>{const n=(await c).transaction("progress").store,e=await n.get([a,"kanji-read"]),o=await n.get([a,"kanji-write"]),t=new Date;return{read:e?r.value.get_retrievability(e.fsrs,t,!1):null,write:o?r.value.get_retrievability(o.fsrs,t,!1):null}}}));return i}function _(s){const r=l(),i=b(new Set);return y(()=>f(s),async a=>{if(!a)return;const n=new Date;for(const e of a)if(g(e)){const o=e.codePointAt(0)??0,t=await(await c).get("progress",[o,"kanji-read"]);if(t){if(t.fsrs.state!==m.Review)continue;r.value.get_retrievability(t.fsrs,n,!1)>.99&&i.add(e)}}},{immediate:!0}),i}export{S as a,_ as b,l as u};
