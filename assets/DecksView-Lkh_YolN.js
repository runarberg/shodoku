import{u as I,A as B}from"./index-xwVy6i7n.js";import{d as D,c as d,p as S,o as n,f as V,w as j,g as p,t as v,u as o,q as K,_ as b,a as r,F as C,j as q,e as _,H as E,m as F,b as i,h as w,i as x}from"./index-jUm0nxGk.js";import{u as P,a as Q}from"./decks-JzdS7pEY.js";import{d as Y}from"./decks-huPVwMnz.js";import{u as H,d as T}from"./db-C8CERaXs.js";import{f as R}from"./formats-CxjEYhKc.js";const z=D({__name:"DeckKanjiCardItem",props:{codepoint:{}},setup(m){const a=m,u=d(()=>String.fromCodePoint(a.codepoint)),{result:e}=H(async()=>{const{codepoint:t}=a,c=(await T).transaction("progress").store,k=await c.get([t,"kanji-read"]),L=await c.get([t,"kanji-write"]);return{read:k,write:L}});function f(t){return t?t.state===I.New?"new":t.state===I.Learning||t.state===I.Relearning||t.due<new Date?"due":"review":null}const l=d(()=>{var t,c;return f((c=(t=e.value)==null?void 0:t.read)==null?void 0:c.fsrs)}),y=d(()=>{var t,c;return f((c=(t=e.value)==null?void 0:t.write)==null?void 0:c.fsrs)});return(t,c)=>{const k=S("RouterLink");return n(),V(k,{to:o(K)(u.value),class:"kanji","data-read":l.value,"data-write":y.value},{default:j(()=>[p(v(u.value),1)]),_:1},8,["to","data-read","data-write"])}}}),G=b(z,[["__scopeId","data-v-e4571695"]]),J={class:"kanji-list"},M=D({__name:"DeckKanjiCards",props:{kanji:{}},setup(m){return(a,u)=>(n(),r("ol",J,[(n(!0),r(C,null,q(a.kanji,e=>(n(),r("li",{key:e,class:"kanji"},[_(G,{codepoint:e},null,8,["codepoint"])]))),128))]))}}),O=b(M,[["__scopeId","data-v-951da1ce"]]),U=["aria-labelledby"],W=["id"],X={class:"status"},Z={class:"count total-count"},ee={key:0,class:"count due-count"},te={key:1,class:"count review-count"},se={key:2,class:"count new-count"},ne=D({__name:"DeckListItem",props:{deck:{}},setup(m){const a=m,u=E(),e=F(),f=d(()=>Y(a.deck));function l(s){return s?typeof s=="string"?[s]:s:[]}const y=d(()=>l(e.query.deck).includes(a.deck.name)),t=d(()=>{const{name:s}=a.deck,g=l(e.query.deck),h=y.value?g.filter(N=>N!==s):[...g,s];return{query:{...e.query,deck:h}}}),c=P(()=>a.deck.name);function k(s){if(!c.value)return 0;const{"kanji-read":g,"kanji-write":h}=c.value;return(g[s]+h[s])/2}const L=d(()=>k("new")),$=d(()=>k("due")),A=d(()=>k("review"));return(s,g)=>{const h=S("RouterLink");return n(),r("article",{class:"deck-list-item","aria-labelledby":o(u)},[i("strong",{id:o(u),class:"label"},[_(h,{to:t.value,"aria-pressed":y.value,replace:""},{default:j(()=>[p(v(f.value),1)]),_:1},8,["to","aria-pressed"])],8,W),i("div",X,[i("span",Z,v(s.deck.cards.length)+" cards",1),o(c)?(n(),r(C,{key:0},[$.value>0?(n(),r("span",ee,v(o(R)($.value/s.deck.cards.length))+" due ",1)):w("",!0),A.value>0?(n(),r("span",te,v(o(R)(A.value/s.deck.cards.length))+" learning ",1)):w("",!0),L.value>0?(n(),r("span",se,v(o(R)(L.value/s.deck.cards.length))+" remaining ",1)):w("",!0)],64)):w("",!0)]),y.value?(n(),V(O,{key:0,kanji:s.deck.cards,class:"cards"},null,8,["kanji"])):w("",!0)],8,U)}}}),ae=b(ne,[["__scopeId","data-v-b92856c6"]]),oe={key:0,class:"deck-list"},re=D({__name:"DeckList",setup(m){const a=Q();return(u,e)=>{const f=S("RouterLink");return n(),r("section",null,[e[4]||(e[4]=i("p",null," Decks allow you do keep track of your practice, such that you know which kanji you already know, which you should learn next, and which you need to review. ",-1)),o(a)&&o(a).length>0?(n(),r("ol",oe,[(n(!0),r(C,null,q(o(a),l=>(n(),r("li",{key:l.name,class:"deck-list-item"},[_(ae,{deck:l},null,8,["deck"])]))),128))])):o(a)?(n(),r(C,{key:1},[i("p",null,[e[1]||(e[1]=p(" You donâ€˜t have any decks. ")),_(f,{to:o(x)},{default:j(()=>e[0]||(e[0]=[p("Add your first deck")])),_:1},8,["to"]),e[2]||(e[2]=p(" by clicking the button below. "))]),_(B,{to:o(x),"prefix-icon":"plus"},{default:j(()=>e[3]||(e[3]=[p("Add Deck")])),_:1},8,["to"])],64)):w("",!0)])}}}),ce=b(re,[["__scopeId","data-v-ebf17603"]]),ue={class:"article-header"},de={class:"actions"},ie=D({__name:"DecksView",setup(m){return(a,u)=>(n(),r("article",null,[i("header",ue,[u[1]||(u[1]=i("h2",{class:"title"},"Your Decks",-1)),i("div",de,[_(B,{to:o(x),"prefix-icon":"plus"},{default:j(()=>u[0]||(u[0]=[p(" Add another deck ")])),_:1},8,["to"])])]),_(ce)]))}}),ve=b(ie,[["__scopeId","data-v-bfa8fe01"]]);export{ve as default};
