import{A}from"./index-xwVy6i7n.js";import{A as N,u as P,d as R}from"./db-C8CERaXs.js";import{b as x,c as J,d as V,e as F,f as H}from"./decks-JzdS7pEY.js";import{d as y,o as n,f as w,w as L,_ as v,k as b,H as T,c as B,l as S,p as q,a as i,b as r,u as g,t as j,e as k,F as f,j as I,g as m,q as E,h as G,I as Q}from"./index-jUm0nxGk.js";import{A as z}from"./AppLoading-D_zhGJN7.js";const K=y({__name:"DeckAddButton",props:{added:{type:Boolean,default:!1},adding:{type:Boolean,default:!1}},emits:["add","remove"],setup(u,{emit:t}){const e=u,c=t;function d(){e.added?c("remove"):c("add")}return(s,_)=>(n(),w(A,{"aria-label":s.added?"Remove Deck":"Add Deck",class:"add-button",filled:s.added,disabled:s.adding,onClick:d},{default:L(()=>[s.adding?(n(),w(z,{key:0})):(n(),w(N,{key:1,icon:"plus"}))]),_:1},8,["aria-label","filled","disabled"]))}}),$=v(K,[["__scopeId","data-v-c7124ed3"]]),M=["aria-labelledby"],O={class:"controls"},U=["id"],W={class:"kanji-list"},X=y({__name:"DeckBrowserItem",props:{deck:{},contentPath:{},addingCategory:{type:Boolean}},setup(u){const t=u,e=b(!1),c=T(),d=b(null);async function s(){if(!d.value)return;const l=d.value.map(a=>a.codePointAt(0)??NaN);e.value=!0;try{await J({...t.deck,cards:l})}catch(a){console.error(a)}finally{e.value=!1}}async function _(){e.value=!0;try{await V(t.deck.name)}catch(l){console.error(l)}finally{e.value=!1}}const h=x(()=>t.deck.name),D=B(()=>h.value!=null);return S(()=>t.contentPath,async l=>{const p=await(await fetch(l)).text();d.value=p.split(`
`).filter(o=>o)},{immediate:!0}),(l,a)=>{const p=q("RouterLink");return n(),i("article",{"aria-labelledby":g(c)},[r("div",O,[r("strong",{id:g(c)},j(l.deck.label),9,U),k($,{adding:e.value||l.addingCategory,added:D.value,onAdd:s,onRemove:_},null,8,["adding","added"])]),r("ol",W,[(n(!0),i(f,null,I(d.value,o=>(n(),i("li",{key:o,class:"kanji"},[k(p,{to:g(E)(o)},{default:L(()=>[m(j(o),1)]),_:2},1032,["to"])]))),128))])],8,M)}}}),Y=v(X,[["__scopeId","data-v-444c5444"]]),Z=["aria-labelledby"],ee={class:"controls"},ae=["id"],te={key:0,class:"deck-list"},ne=y({__name:"DeckBrowserCategory",props:{title:{},category:{},deckTemplates:{}},setup(u){const t=u,e=b(!1),c=T(),{result:d}=P(B(()=>{const{category:a}=t;return async()=>(await R).transaction("decks").store.index("category").count(a)})),s=b(!1),_=B(()=>(d.value??0)>=t.deckTemplates.length);async function h(){s.value=!0;try{await F(t.category,t.deckTemplates)}catch(a){console.error(a)}finally{s.value=!1}}async function D(){s.value=!0;try{await H(t.category)}catch(a){console.error(a)}finally{s.value=!1}}function l({name:a,label:p,priority:o}){return{name:a,label:p,priority:o,category:t.category}}return(a,p)=>(n(),i("article",{"aria-labelledby":g(c)},[r("div",ee,[r("strong",{id:g(c),class:"title"},j(a.title),9,ae),k($,{adding:s.value,added:_.value,onAdd:h,onRemove:D},null,8,["adding","added"])]),k(A,{class:"expand-button","aria-pressed":e.value,onClick:p[0]||(p[0]=o=>e.value=!e.value)},{default:L(()=>[e.value?(n(),i(f,{key:0},[m("Hide ")],64)):(n(),i(f,{key:1},[m("Show ")],64)),m(" ("+j(a.deckTemplates.length)+" decks) ",1)]),_:1},8,["aria-pressed"]),e.value?(n(),i("ol",te,[(n(!0),i(f,null,I(a.deckTemplates,o=>(n(),i("li",{key:o.name},[k(Y,{deck:l(o),"content-path":o.content,"adding-category":s.value},null,8,["deck","content-path","adding-category"])]))),128))])):G("",!0)],8,Z))}}),C=v(ne,[["__scopeId","data-v-caf77e95"]]),se={class:"categories"},oe=y({__name:"DeckBrowser",setup(u){const t=[{name:"jlpt-n5",label:"JLPT N5",priority:5,content:"/data/kanji-lists/jlpt-n5.csv"},{name:"jlpt-n4",label:"JLPT N4",priority:15,content:"/data/kanji-lists/jlpt-n4.csv"},{name:"jlpt-n3",label:"JLPT N3",priority:30,content:"/data/kanji-lists/jlpt-n3.csv"},{name:"jlpt-n2",label:"JLPT N2",priority:50,content:"/data/kanji-lists/jlpt-n2.csv"},{name:"jlpt-n1",label:"JLPT N1",priority:100,content:"/data/kanji-lists/jlpt-n1.csv"}],e=[{name:"genki-03",label:"Leasson 3",priority:1,content:"/data/kanji-lists/genki-03.csv"},{name:"genki-04",label:"Leasson 4",priority:2,content:"/data/kanji-lists/genki-04.csv"},{name:"genki-05",label:"Leasson 5",priority:3,content:"/data/kanji-lists/genki-05.csv"},{name:"genki-06",label:"Leasson 6",priority:4,content:"/data/kanji-lists/genki-06.csv"},{name:"genki-07",label:"Leasson 7",priority:5,content:"/data/kanji-lists/genki-07.csv"},{name:"genki-08",label:"Leasson 8",priority:6,content:"/data/kanji-lists/genki-08.csv"},{name:"genki-09",label:"Leasson 9",priority:7,content:"/data/kanji-lists/genki-09.csv"},{name:"genki-10",label:"Leasson 10",priority:8,content:"/data/kanji-lists/genki-10.csv"},{name:"genki-11",label:"Leasson 11",priority:9,content:"/data/kanji-lists/genki-11.csv"},{name:"genki-12",label:"Leasson 12",priority:10,content:"/data/kanji-lists/genki-12.csv"},{name:"genki-13",label:"Leasson 13",priority:11,content:"/data/kanji-lists/genki-13.csv"},{name:"genki-14",label:"Leasson 14",priority:12,content:"/data/kanji-lists/genki-14.csv"},{name:"genki-15",label:"Leasson 15",priority:13,content:"/data/kanji-lists/genki-15.csv"},{name:"genki-16",label:"Leasson 16",priority:14,content:"/data/kanji-lists/genki-16.csv"},{name:"genki-17",label:"Leasson 17",priority:15,content:"/data/kanji-lists/genki-17.csv"},{name:"genki-18",label:"Leasson 18",priority:16,content:"/data/kanji-lists/genki-18.csv"},{name:"genki-19",label:"Leasson 19",priority:17,content:"/data/kanji-lists/genki-19.csv"},{name:"genki-20",label:"Leasson 20",priority:18,content:"/data/kanji-lists/genki-20.csv"},{name:"genki-21",label:"Leasson 21",priority:19,content:"/data/kanji-lists/genki-21.csv"},{name:"genki-22",label:"Leasson 22",priority:20,content:"/data/kanji-lists/genki-22.csv"},{name:"genki-23",label:"Leasson 23",priority:21,content:"/data/kanji-lists/genki-23.csv"}];return(c,d)=>(n(),i("ul",se,[r("li",null,[k(C,{title:"JLPT",category:"jlpt","deck-templates":t})]),r("li",null,[k(C,{title:"Genki",category:"genki","deck-templates":e})])]))}}),ie=v(oe,[["__scopeId","data-v-bd179681"]]),le={class:"article-header"},re={class:"actions"},ce=y({__name:"DeckBrowserView",setup(u){return(t,e)=>(n(),i("article",null,[r("header",le,[e[1]||(e[1]=r("h2",{class:"title"},"Add Decks",-1)),r("div",re,[k(A,{to:g(Q),"prefix-icon":"arrow-left"},{default:L(()=>e[0]||(e[0]=[m(" Back to your decks ")])),_:1},8,["to"])])]),k(ie)]))}}),me=v(ce,[["__scopeId","data-v-5a4e95e0"]]);export{me as default};
