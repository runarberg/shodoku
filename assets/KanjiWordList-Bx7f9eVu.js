import{p as $e,c as Se}from"./index-YgSYzKX4.js";import{u as pe}from"./kanji-components-DtSJmMhd.js";import{m as D,y as Y,c as S,z as ae,B as Ce,C as Be,d as G,D as Pe,a as k,o as v,_ as q,p as Ke,i as z,w as E,g as B,e as j,u as x,b as I,t as K,q as le,F as C,h as N,E as Ie,v as ke,l as R,G as ce,A as O,H as T,I as te,J as ie,K as Me}from"./index-DjqtGQe7.js";import{s as ge}from"./reviews-Apodrl4I.js";import{u as Ae}from"./index-B6QifWP2.js";import{u as Ve,d as ye}from"./db-Bphf5mU1.js";import{d as Ee}from"./decks-CfOZF5PQ.js";import{a as Le}from"./fsrs-CHu1uaRe.js";import{f as fe}from"./formats-CxjEYhKc.js";import{v as De}from"./index-CSypVdA7.js";import{W as Ne}from"./WordListItem-BclamTxs.js";function Re(e){return t=>{const n=new Map;for(const a of t){const o=e(a);let i=n.get(o);i||(i=[],n.set(o,i)),i.push(a)}return n}}const ve="http://kanjivg.tagaini.net",ee=Symbol("kanjivg"),re=["general","tradit","nelson"],Ge=new DOMParser;function qe(e){const t=[];let n=e.closest("[data-position]");for(;n instanceof SVGElement;)t.push(n.dataset.position),n=n.parentElement?.closest("[data-position]")??null;return t}function ln(e){const t=D(null),n=D(null),a=D(!1);Y(()=>Ce(e),async i=>{if(i){a.value=!0;try{const u=await(await fetch(`/kanjivg/kanji/${i}.svg`)).text(),f=Ge.parseFromString(u,"image/svg+xml");if(f.documentElement instanceof SVGSVGElement){const{x:s,y:m,width:y,height:g}=f.documentElement.viewBox.baseVal;n.value=`${s},${m},${y},${g}`}const l=f.getElementById(`kvg:${i}`);if(l){for(const s of[...l?.querySelectorAll("*"),l])if(s instanceof SVGElement){for(const m of[...s.attributes])m.namespaceURI===ve&&(s.dataset[m.localName]=m.value,s.removeAttributeNS(ve,m.localName));s.removeAttribute("xmlns:kvg")}}t.value=l}finally{a.value=!1}}},{immediate:!0});const o=S(()=>{const i=t.value;if(!i)return new Map;const r=new Map,u={};function f(s){if(s.dataset.part&&Number.parseInt(s.dataset.part)>1)return;const m=s.dataset.element,y={element:m,original:s.dataset.original??null,position:qe(s),radical:s.dataset.radical??null,phon:s.dataset.phon??null};let g=r.get(m);g?g.push(y):(g=[y],r.set(m,g)),y.radical&&(u[y.radical]=m)}i.dataset.radical&&f(i);for(const s of i.querySelectorAll("g[data-element]"))f(s);const l=new Map;for(const s of re){const m=u[s],y=r.get(m);y&&(y.sort((g,d)=>g.radical?d.radical?re.indexOf(g.radical)-re.indexOf(d.radical):-1:d.radical?-1:0),l.set(m,y),r.delete(m))}for(const[s,m]of r)l.set(s,m);return l});Be(ee,{strokesEl:t,viewBox:n,components:o,syncing:a})}function _e(){const e=ae(ee,null);return S(()=>e?.strokesEl.value?.cloneNode(!0)??null)}function xe(){const e=ae(ee,null);return S(()=>e?.viewBox.value??"0,0,109,109")}function Oe(){const e=ae(ee,null);return S(()=>e?.components.value??new Map)}function Te(){const e=ae(ee,null);return S(()=>e?.syncing.value??!1)}const ze=G({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(e){const t=e,n=D(null);function a(){n.value?.replaceChildren(t.strokes??"")}return Y(()=>t.strokes,a),Pe(()=>{a()}),(o,i)=>(v(),k("g",{ref_key:"container",ref:n,class:"kanji-strokes"},null,512))}}),je=q(ze,[["__scopeId","data-v-53c78976"]]),Xe=["viewBox"],Ye={class:"component-info"},He={class:"literal"},Je={class:"meaning"},We={key:0,class:"original",lang:"ja"},Fe={key:1,lang:"ja"},Ue={class:"tags"},Qe={key:1,class:"is-phonetic"},Ze=G({__name:"KanjiComponentItem",props:{literal:{},original:{},parts:{}},setup(e){const t=e,n=_e(),a=xe(),o=S(()=>{for(const p of t.parts)if(p.radical)return p.radical;return null}),i=S(()=>{for(const p of t.parts)if(p.phon)return p.phon}),r=pe(()=>t.literal),u=S(()=>t.parts.at(0)?.original),f=pe(u),l=S(()=>f.value?.radical?.en??f.value?.meaning??r.value?.radical?.en??r?.value?.meaning),s=S(()=>f.value?.radical?.jp??f.value?.reading??r.value?.radical?.jp??r?.value?.reading),m=S(()=>f.value?.radical?.number??r.value?.radical?.number),y=[["彐","⺕"],["犭","⺨"],["阝","⻖"]];function g(p){for(const[b,c]of y)if(p===b)return c;return p}function d(p){return`oklch(from var(--accent-color) l c ${p+3})`}return Ke(()=>{const p=n.value;if(!p)return;p.dataset.element===t.literal&&(!t.original||t.original===p.dataset.original)&&(p.dataset.radical==="general"||p.dataset.radical==="tradit"?p.style.color="var(--green)":p.dataset.radical==="nelson"||p.dataset.radical==="jis"?p.style.color="var(--bluegreen)":p.dataset.phon===t.literal?p.style.color="var(--gold)":p.style.color=d(180));let b=-1;for(const c of p.querySelectorAll(`g[data-element="${t.literal}"]`))if(!(t.original&&t.original!==c.dataset.original)){if(c.dataset.radical==="general"||c.dataset.radical==="tradit"){c.style.color="var(--green)";continue}if(c.dataset.radical==="nelson"||c.dataset.radical==="jis"){c.style.color="var(--bluegreen)";continue}if(c.dataset.phon){c.style.color="var(--gold)";continue}(!c.dataset.part||c.dataset.part==="1")&&(b+=1),c.style.color=d(240+63*b)}}),(p,b)=>{const c=ke("RouterLink");return v(),z(c,{to:x(Ie)(g(p.literal)),class:"kanji-component-item"},{default:E(()=>[x(n)?(v(),k("svg",{key:0,viewBox:x(a),class:"kanji-component-strokes"},[I(je,{class:"strokes-group",strokes:x(n)},null,8,["strokes"])],8,Xe)):B("",!0),j("div",Ye,[j("span",He,K(p.literal),1),j("p",Je,[j("strong",null,K(l.value),1),u.value?(v(),k("span",We,K(u.value),1)):B("",!0),s.value?(v(),k("span",Fe," ("+K(s.value)+")",1)):B("",!0)]),j("div",Ue,[o.value?(v(),k("span",{key:0,class:le(["is-radical",{"is-nelson":o.value==="nelson","is-jis":o.value==="jis"}])},[o.value==="nelson"?(v(),k(C,{key:0},[N("Nelson radical")],64)):o.value==="jis"?(v(),k(C,{key:1},[N("JIS radical")],64)):(v(),k(C,{key:2},[N("Radical")],64)),m.value?(v(),k(C,{key:3},[N(" "+K(m.value),1)],64)):B("",!0)],2)):B("",!0),i.value?(v(),k("span",Qe,"Phonetic")):B("",!0)])])]),_:1},8,["to"])}}}),et=q(Ze,[["__scopeId","data-v-a13e7aab"]]),tt={class:"component-list"},nt=G({__name:"KanjiComponents",setup(e){const t=Oe();function n(a){return $e(a,Re(o=>o.original||null))}return(a,o)=>(v(),k("section",null,[j("h2",null,[o[0]||(o[0]=N(" Components ")),x(t).size>0?(v(),k(C,{key:0},[N(" ("+K(x(t).size)+")",1)],64)):B("",!0)]),j("ul",tt,[(v(!0),k(C,null,R(x(t),([i,r])=>(v(),k(C,{key:i},[(v(!0),k(C,null,R(n(r),([u,f])=>(v(),k("li",{key:u??0},[I(et,{literal:i,parts:f,original:u},null,8,["literal","parts","original"])]))),128))],64))),128))])]))}}),cn=q(nt,[["__scopeId","data-v-d3ced49e"]]),at={class:"kanji-readings"},ot={class:"dd-items"},st={class:"dd-items"},it=G({__name:"KanjiReadings",props:{kanji:{}},setup(e){return(t,n)=>(v(),k("section",null,[n[2]||(n[2]=j("h2",null,"Readings",-1)),j("dl",at,[n[0]||(n[0]=j("dt",null,"Kun",-1)),j("div",ot,[(v(!0),k(C,null,R(t.kanji.kunYomi,a=>(v(),k("dd",null,K(a),1))),256))]),n[1]||(n[1]=j("dt",null,"On",-1)),j("div",st,[(v(!0),k(C,null,R(t.kanji.onYomi,a=>(v(),k("dd",null,K(a),1))),256))])])]))}}),un=q(it,[["__scopeId","data-v-f6c59d96"]]),rt={class:"kanji-strokes-background"},lt=["x","y","width","height"],ct=["x1","y1","x2","y2"],ut=["x1","y1","x2","y2"],dt=["x1","y1","x2","y2"],pt=["x1","y1","x2","y2"],ft=["x1","y1","x2","y2"],vt=["x1","y1","x2","y2"],mt=G({__name:"KanjiStrokesBackground",props:{viewBox:{}},setup(e){const t=e,n=S(()=>{const[i,r,u,f]=t.viewBox.split(",");return{x:Number.parseInt(i),y:Number.parseInt(r),width:Number.parseInt(u),height:Number.parseInt(f)}}),a=S(()=>{const{x:i,width:r}=n.value;return i+r/2}),o=S(()=>{const{y:i,height:r}=n.value;return i+r/2});return(i,r)=>(v(),k("g",rt,[j("rect",{class:"background",x:n.value.x,y:n.value.y,width:n.value.width,height:n.value.width,rx:"5"},null,8,lt),j("line",{class:"midline",x1:n.value.x+1,y1:o.value,x2:n.value.x+n.value.width-1,y2:o.value},null,8,ct),j("line",{class:"midline",x1:a.value,y1:n.value.y+1,x2:a.value,y2:n.value.y+n.value.height-1},null,8,ut),j("line",{class:"quartline",x1:a.value/2,y1:n.value.y+1,x2:a.value/2,y2:n.value.y+n.value.height-1},null,8,dt),j("line",{class:"quartline",x1:3*a.value/2,y1:n.value.y+1,x2:3*a.value/2,y2:n.value.y+n.value.height-1},null,8,pt),j("line",{class:"quartline",x1:n.value.x+1,y1:o.value/2,x2:n.value.x+n.value.width-1,y2:o.value/2},null,8,ft),j("line",{class:"quartline",x1:n.value.x+1,y1:3*o.value/2,x2:n.value.x+n.value.width-1,y2:3*o.value/2},null,8,vt)]))}}),ht=q(mt,[["__scopeId","data-v-1b492e2c"]]),kt=1e-12,me=112e-18,gt=e=>e>=-me&&e<=me,we=(e,t)=>Math.sqrt(e*e+t*t),U=(e,t)=>({x:e,y:t}),yt=e=>we(e.x,e.y),_t=e=>U(-e.x,-e.y),Z=(e,t)=>U(e.x+t.x,e.y+t.y),V=(e,t)=>U(e.x-t.x,e.y-t.y),J=(e,t)=>U(e.x*t,e.y*t),L=(e,t)=>e.x*t.x+e.y*t.y,de=(e,t)=>we(e.x-t.x,e.y-t.y),X=(e,t=1)=>J(e,t/(yt(e)||1/0)),be=(e,t)=>({p:e,i:t}),xt=(e,t,n)=>{t&&(e.unshift(e[e.length-1]),e.push(e[1]));const a=e.length;if(a===0)return[];const o=[be(e[0])];return ue(e,o,n,0,a-1,V(e[1],e[0]),V(e[a-2],e[a-1])),t&&(o.shift(),o.pop()),o},ue=(e,t,n,a,o,i,r)=>{if(o-a===1){const y=e[a],g=e[o],d=de(y,g)/3;he(t,[y,Z(y,X(i,d)),Z(g,X(r,d)),g]);return}const u=$t(e,a,o);let f=Math.max(n,n*n),l,s=!0;for(let y=0;y<=4;y++){const g=jt(e,a,o,u,i,r),d=St(e,a,o,g,u);if(d.error<n&&s){he(t,g);return}if(l=d.index,d.error>=f)break;s=wt(e,a,o,u,g),f=d.error}const m=V(e[l-1],e[l+1]);ue(e,t,n,a,l,i,m),ue(e,t,n,l,o,_t(m),r)},he=(e,t)=>{const n=e[e.length-1];n.o=V(t[1],t[0]),e.push(be(t[3],V(t[2],t[3])))},jt=(e,t,n,a,o,i)=>{const r=kt,u=Math.abs,f=e[t],l=e[n],s=[[0,0],[0,0]],m=[0,0];for(let w=0,M=n-t+1;w<M;w++){const A=a[w],H=1-A,W=3*A*H,oe=H*H*H,F=W*H,Q=W*A,se=A*A*A,_=X(o,F),h=X(i,Q),P=V(V(e[t+w],J(f,oe+F)),J(l,Q+se));s[0][0]+=L(_,_),s[0][1]+=L(_,h),s[1][0]=s[0][1],s[1][1]+=L(h,h),m[0]+=L(_,P),m[1]+=L(h,P)}const y=s[0][0]*s[1][1]-s[1][0]*s[0][1];let g,d;if(u(y)>r){const w=s[0][0]*m[1]-s[1][0]*m[0];g=(m[0]*s[1][1]-m[1]*s[0][1])/y,d=w/y}else{const w=s[0][0]+s[0][1],M=s[1][0]+s[1][1];g=d=u(w)>r?m[0]/w:u(M)>r?m[1]/M:0}const p=de(l,f),b=r*p;let c,$;if(g<b||d<b)g=d=p/3;else{const w=V(l,f);c=X(o,g),$=X(i,d),L(c,w)-L($,w)>p*p&&(g=d=p/3,c=$=null)}return[f,Z(f,c||X(o,g)),Z(l,$||X(i,d)),l]},wt=(e,t,n,a,o)=>{for(let i=t;i<=n;i++)a[i-t]=bt(o,e[i],a[i-t]);for(let i=1,r=a.length;i<r;i++)if(a[i]<=a[i-1])return!1;return!0},bt=(e,t,n)=>{const a=[],o=[];for(let s=0;s<=2;s++)a[s]=J(V(e[s+1],e[s]),3);for(let s=0;s<=1;s++)o[s]=J(V(a[s+1],a[s]),2);const i=ne(3,e,n),r=ne(2,a,n),u=ne(1,o,n),f=V(i,t),l=L(r,r)+L(f,u);return gt(l)?n:n-L(f,r)/l},ne=(e,t,n)=>{const a=t.slice();for(let o=1;o<=e;o++)for(let i=0;i<=e-o;i++)a[i]=Z(J(a[i],1-n),J(a[i+1],n));return a[0]},$t=(e,t,n)=>{const a=[0];for(let o=t+1;o<=n;o++)a[o-t]=a[o-t-1]+de(e[o],e[o-1]);for(let o=1,i=n-t;o<=i;o++)a[o]/=a[i];return a},St=(e,t,n,a,o)=>{let i=Math.floor((n-t+1)/2),r=0;for(let u=t+1;u<n;u++){const f=ne(3,a,o[u-t]),l=V(f,e[u]),s=l.x*l.x+l.y*l.y;s>=r&&(r=s,i=u)}return{error:r,index:i}},Ct=(e,t,n)=>{const a=e.length,o=10**n,i=n<16?d=>Math.round(d*o)/o:d=>d,r=(d,p)=>i(d)+","+i(p);let u=!0,f,l,s,m;const y=[],g=(d,p)=>{const b=d.p.x,c=d.p.y;if(u)y.push("M"+r(b,c)),u=!1;else{const $=b+(d.i?.x??0),w=c+(d.i?.y??0);if($===b&&w===c&&s===f&&m===l){if(!p){const M=b-f,A=c-l;y.push(M===0?"v"+i(A):A===0?"h"+i(M):"l"+r(M,A))}}else y.push("c"+r(s-f,m-l)+" "+r($-f,w-l)+" "+r(b-f,c-l))}f=b,l=c,s=b+(d.o?.x??0),m=c+(d.o?.y??0)};if(!a)return"";for(let d=0;d<a;d++)g(e[d]);return t&&a>0&&(g(e[0],!0),y.push("z")),y.join("")},Bt=(e,t={})=>e.length===0?"":Ct(xt(e.map(typeof e[0].x=="number"?n=>U(n.x,n.y):n=>U(n[0],n[1])),t.closed,t.tolerance??2.5),t.closed,t.precision??5),Pt=["x","y","width","height"],Kt={class:"practice-strokes"},It=["d"],Mt=["points"],At=G({__name:"KanjiStrokesPracticeCanvas",props:{practiceStrokes:{},animate:{type:Boolean},animatePause:{type:Boolean}},emits:["stroke"],setup(e,{emit:t}){const n=e,a=t,o=D(null),i=S(()=>o.value?.closest("svg")),r=S(()=>i.value?.viewBox.baseVal),u=ce([]);function f(c){if(!i.value)return{x:c.x,y:c.y};const $=i.value.createSVGPoint();$.x=c.x,$.y=c.y;const w=$.matrixTransform(i.value.getScreenCTM()?.inverse());return{x:w.x,y:w.y}}function l(c){c.isPrimary&&(c.preventDefault(),o.value?.setPointerCapture(c.pointerId),u.push(f(c)))}function s(c){u.length===0||!c.isPrimary||u.push(f(c))}function m(c){c.isPrimary&&(u.length>1&&a("stroke",Bt(u)),o.value?.releasePointerCapture(c.pointerId),u.splice(0,u.length),i.value?.parentElement?.click())}function y(c){const $=c.getTotalLength();return[{strokeDasharray:$,strokeDashoffset:$},{strokeDasharray:$,strokeDashoffset:0}]}const g={duration:500,easing:"ease-in-out"},d=[];function p(){if(o.value){for(const c of o.value?.querySelectorAll("path.stroke")){const $=c.animate(y(c),g);$.pause(),d.push($)}b()}}async function b(){let c=d.at(0);for(;c;)c.play(),await c.finished,d.shift(),c=d.at(0),c&&await ge(100)}return Y(()=>n.animate,c=>{c&&p()}),Y(()=>n.animatePause,c=>{c?d.at(0)?.pause():d.at(0)?.play()}),(c,$)=>(v(),k("g",{ref_key:"el",ref:o,class:"kanji-strokes-practice-canvas canvas",onPointerdown:l,onPointermove:s,onPointerup:m},[r.value?(v(),k("rect",{key:0,class:"background",x:r.value.x,y:r.value.y,width:r.value.width,height:r.value.height},null,8,Pt)):B("",!0),j("g",Kt,[(v(!0),k(C,null,R(c.practiceStrokes,(w,M)=>(v(),k("path",{class:"stroke practice-stroke",key:M,d:w},null,8,It))),128))]),j("polyline",{class:"stroke current-stroke",points:x(u).map(({x:w,y:M})=>`${w},${M}`).join(" ")},null,8,Mt)],544))}}),Vt=q(At,[["__scopeId","data-v-afa29600"]]),Et={class:"strokes-figure"},Lt=["viewBox"],Dt={class:"controls"},Nt=G({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean,default:!1},practiceMode:{type:Boolean,default:!1}},emits:["practiceDone"],setup(e,{expose:t,emit:n}){const a=e,o=n,i=D(null),r=_e(),u=xe(),f=Te(),l=S(()=>r.value?.querySelectorAll("path")??[]),s=ce([]),m=S(()=>s.length>0),y=D(!1),g=D(!1),d=D(!1),p=ce([]);function b(_){const h=_.getTotalLength();return[{strokeDasharray:h,strokeDashoffset:h},{strokeDasharray:h,strokeDashoffset:0}]}const c={duration:500,easing:"ease-in-out"};function $(){for(const _ of l.value){const h=_.animate(b(_),c);h.pause(),s.push(h)}w()}async function w(){let _=s.at(0);for(;_;)_.play(),await _.finished,s.shift(),_=s.at(0),_&&await ge(100)}function M(){s.at(0)?.pause(),y.value=!0}function A(){s.at(0)?.play(),y.value=!1}function H(){const _=l.value[p.length]?.getAttribute("d");_&&p.push(_)}function W(_=p.length){const h=l.value[_];if(!h)return;h.style.display="block";const P=h.animate(b(h),c);P.play(),P.finished.then(()=>{h.style.removeProperty("display")})}function oe(_){p.push(_),a.practiceMode&&p.length===l.value.length&&o("practiceDone"),a.practiceMode&&a.autoHint&&p.length<l.value.length&&W()}function F(){g.value=!1,p.splice(0,p.length)}function Q(){for(const _ of s)_.cancel();s.splice(0,s.length),y.value=!1;for(const _ of l.value)for(const h of _.getAnimations())h.cancel()}function se(){if(p.length===0){d.value=!1;return}p.length<l.value.length&&(g.value=!0)}return Y(d,_=>{g.value=!1,_?Q():F()}),Y(()=>a.autoHint,_=>{_&&requestAnimationFrame(async()=>{await Ae(f).toBe(!1),W(0)})},{immediate:!0}),Y(()=>a.kanji.codepoint,(_,h)=>{_!==h&&(F(),Q(),g.value=!1,d.value!==a.practiceMode&&(d.value=a.practiceMode))},{immediate:!0}),t({clearPracticeStrokes:F,maybeShowAnswer:se}),(_,h)=>(v(),k("section",null,[j("h2",null,[h[10]||(h[10]=N(" Strokes ")),!_.practiceMode&&l.value.length>0?(v(),k(C,{key:0},[N(" ("+K(l.value.length)+") ",1)],64)):B("",!0)]),j("figure",Et,[x(r)?(v(),k("svg",{key:0,ref_key:"svgEl",ref:i,class:le(["svg",{practicing:d.value}]),viewBox:x(u),onTouchstart:h[1]||(h[1]=P=>{d.value&&P.preventDefault()})},[I(ht,{viewBox:x(u)},null,8,["viewBox"]),I(je,{strokes:x(r),class:le(["strokes",{comparing:m.value||g.value||l.value.length<=x(p).length,practicing:d.value}])},null,8,["strokes","class"]),d.value?(v(),z(Vt,{key:0,"practice-strokes":x(p),animate:m.value,"animate-pause":y.value,onStroke:h[0]||(h[0]=P=>oe(P))},null,8,["practice-strokes","animate","animate-pause"])):B("",!0)],42,Lt)):B("",!0),j("figcaption",Dt,[m.value?(v(),k(C,{key:0},[y.value?(v(),z(O,{key:0,"aria-label":"Play",onClick:h[2]||(h[2]=P=>A())},{default:E(()=>[I(T,{icon:"play"})]),_:1})):(v(),z(O,{key:1,"aria-label":"Pause",onClick:h[3]||(h[3]=P=>M())},{default:E(()=>[I(T,{icon:"pause"})]),_:1}))],64)):(v(),k(C,{key:1},[d.value&&x(p).length<l.value.length?(v(),z(O,{key:0,"aria-label":"Show Hint",onClick:h[4]||(h[4]=P=>W())},{default:E(()=>[I(T,{icon:"help-circle"})]),_:1})):(v(),z(O,{key:1,"aria-label":"Animate Stroke Order",onClick:h[5]||(h[5]=P=>$())},{default:E(()=>[I(T,{icon:"play"})]),_:1}))],64)),_.practiceMode?B("",!0):(v(),z(O,{key:2,"aria-lable":"Practice Drawing","aria-pressed":`${d.value}`,filled:d.value,onClick:h[6]||(h[6]=P=>d.value=!d.value)},{default:E(()=>[I(T,{icon:"draw"})]),_:1},8,["aria-pressed","filled"])),d.value?(v(),k(C,{key:3},[h[11]||(h[11]=j("hr",{class:"rule"},null,-1)),I(O,{"aria-label":"Start Over",disabled:x(p).length===0,onClick:h[7]||(h[7]=P=>x(p).splice(0,x(p).length))},{default:E(()=>[I(T,{icon:"rotate-left"})]),_:1},8,["disabled"]),I(O,{"aria-label":"Skip Backward",disabled:x(p).length===0,onClick:h[8]||(h[8]=P=>x(p).pop())},{default:E(()=>[I(T,{icon:"skip-backward"})]),_:1},8,["disabled"]),I(O,{"aria-label":"Skip Backward",disabled:x(p).length===l.value.length,onClick:h[9]||(h[9]=P=>H())},{default:E(()=>[I(T,{icon:"skip-forward"})]),_:1},8,["disabled"])],64)):B("",!0)])])]))}}),dn=q(Nt,[["__scopeId","data-v-c1ee03ff"]]),Rt={class:"kanji-title"},Gt={class:"main-meaning meaning"},qt={class:"labels"},Ot={key:0,class:"label freq"},Tt=["data-r"],zt=["data-r"],Xt={key:0,class:"additional-meanings"},Yt={class:"meaning"},Ht=G({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const t=e,n=S(()=>{const{freq:r}=t.kanji;if(!r)return null;if(r<=50)return 50;if(r<=100)return 100;if(r<=200)return 200;if(r<=500)return 500;if(r<=1e3)return 1e3}),{result:a}=Ve(S(()=>{const r=t.kanji.codepoint;return async()=>(await ye).transaction("decks").store.index("cards").getAll(IDBKeyRange.only(r))})),o=Le(()=>t.kanji.codepoint);function i(r){return r>.9?"good":r>.7?"fair":"poor"}return(r,u)=>{const f=ke("RouterLink");return v(),k("header",Rt,[te(j("h2",{class:"literal",lang:"ja"},K(r.kanji.literal),513),[[ie,!r.hideLiteral]]),te(j("p",Gt,[j("strong",null,K(r.kanji.meanings?.at(0)),1)],512),[[ie,!r.hideMeaning]]),j("aside",qt,[n.value&&!x(a)?.some(({name:l})=>l===`news-top-${n.value}`)?(v(),k("span",Ot," Top "+K(n.value),1)):B("",!0),x(a)?(v(!0),k(C,{key:1},R(x(a),l=>(v(),z(f,{to:{name:x(Me),query:{deck:l.name}},key:l.name,class:"label deck"},{default:E(()=>[N(K(x(Ee)(l)),1)]),_:2},1032,["to"]))),128)):B("",!0),x(o)?.write?(v(),k("span",{key:2,class:"label retrievability",title:"Writing Retrievability","data-r":i(x(o).write)}," 書 "+K(x(fe)(x(o).write)),9,Tt)):B("",!0),x(o)?.read?(v(),k("span",{key:3,class:"label retrievability",title:"Reading Retrievability","data-r":i(x(o).read)}," 読 "+K(x(fe)(x(o).read)),9,zt)):B("",!0)]),r.kanji.meanings?.length>1?te((v(),k("ul",Xt,[(v(!0),k(C,null,R(r.kanji.meanings.slice(1),l=>(v(),k("li",Yt,K(l),1))),256))],512)),[[ie,!r.hideMeaning]]):B("",!0)])}}}),pn=q(Ht,[["__scopeId","data-v-0758661b"]]),Jt={class:"kanji-word-list"},Wt=G({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(e){const t=e,n=Se(async()=>{const{words:u}=t.kanjiVocab,f=[],l=[],{store:s}=(await ye).transaction("bookmarked-words");for(const m of u)await s.count(m)?f.push(m):l.push(m);return{bookmarked:f,rest:l}},null),a=D(20),o=S(()=>{const u=a.value;if(n.value){const{bookmarked:f,rest:l}=n.value;return[f,l.slice(0,u)]}return[t.kanjiVocab.words.slice(0,u)]});function i(){a.value+=20}function r([{isIntersecting:u}]){u&&i()}return Y(()=>t.kanjiVocab.codepoint,(u,f)=>{u!==f&&(a.value=20)}),(u,f)=>(v(),k("section",null,[j("h2",null,"Words ("+K(u.kanjiVocab.words.length)+")",1),j("ul",Jt,[(v(!0),k(C,null,R(o.value,l=>(v(),k(C,null,[(v(!0),k(C,null,R(l,s=>(v(),k("li",{key:s},[I(Ne,{word:s,kanji:u.kanjiVocab.literal,"hide-kanji":u.hideKanji,"hide-reading":u.hideReading,"hide-meaning":u.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),a.value<u.kanjiVocab.words.length?te((v(),k("button",{key:0,class:"next-page-button",onClick:f[0]||(f[0]=l=>i())},f[1]||(f[1]=[N(" Load More ")]))),[[x(De),r]]):B("",!0)]))}}),fn=q(Wt,[["__scopeId","data-v-db833710"]]);export{pn as K,un as a,dn as b,cn as c,fn as d,ln as p};
