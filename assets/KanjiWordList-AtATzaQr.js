import{p as H}from"./reviews-BjQG9Nhh.js";import{g as J}from"./WordWritingSelect-DjvD8_58.js";import{u as q,a as W,b as U,c as Y,S as Q,A as N,C as P}from"./CardRetrievabilityLabel-BgFlRhxu.js";import{d as w,q as M,I as D,Q as X,a,o as e,_ as C,c as _,v as Z,i as B,w as V,g as p,u as c,e as k,t as f,y as x,F as g,h,S as ee,z,l as b,A as ae,b as $,U as S,V as L,D as ne,E as te,n as oe}from"./index-sZE7bAWT.js";import{u as E}from"./kanji-components-0bMHtblv.js";import{A as se}from"./AppLoading-30x4pa5-.js";import{d as ie}from"./decks-BkI394ym.js";import{a as re}from"./fsrs-BAHU2VgB.js";import{u as le}from"./formats-B8hr5_5_.js";import{v as ue}from"./index-caO2MYO7.js";import{d as ce}from"./db-CaAx7W_9.js";import{W as de}from"./WordListItem-9iMVk-v2.js";const pe=w({__name:"KanjiStrokesGroup",props:{strokes:{}},setup(j){const n=j,i=M(null);function l(){i.value?.replaceChildren(n.strokes??"")}return D(()=>n.strokes,l),X(()=>{l()}),(u,t)=>(e(),a("g",{ref_key:"container",ref:i,class:"kanji-strokes"},null,512))}}),ke=C(pe,[["__scopeId","data-v-53c78976"]]),me=["viewBox"],fe={key:1,class:"component-info"},ge={key:0,class:"literal"},ve={class:"meaning"},he={key:0,class:"original",lang:"ja"},je={key:1,lang:"ja"},_e={class:"tags"},ye={key:1,class:"is-phonetic"},be=w({__name:"KanjiComponentItem",props:{literal:{},original:{},parts:{},hide:{type:Boolean}},setup(j){const n=j,i=q(),l=W(),u=_(()=>{for(const o of n.parts)if(o.radical)return o.radical;return null}),t=_(()=>{for(const o of n.parts)if(o.phon)return o.phon;return null}),d=E(()=>n.literal),r=_(()=>n.parts.at(0)?.original),s=E(r),v=_(()=>s.value?.radical?.en??s.value?.meaning??d.value?.radical?.en??d?.value?.meaning),y=_(()=>s.value?.radical?.jp??s.value?.reading??d.value?.radical?.jp??d?.value?.reading),K=_(()=>s.value?.radical?.number??d.value?.radical?.number),O=_(()=>n.literal.startsWith("CDP-")),T=[["彐","⺕"],["犭","⺨"],["阝","⻖"]];function F(o){for(const[R,m]of T)if(o===R)return m;return o}function G(o){return`oklch(from var(--accent-color) l c ${o+3})`}return Z(()=>{const o=i.value;if(!o)return;o.dataset.element===n.literal&&(!n.original||n.original===o.dataset.original)&&(o.dataset.radical==="general"||o.dataset.radical==="tradit"?o.style.color="var(--green)":o.dataset.radical==="nelson"||o.dataset.radical==="jis"?o.style.color="var(--bluegreen)":o.dataset.phon===n.literal?o.style.color="var(--gold)":o.style.color=G(180));let R=-1;for(const m of o.querySelectorAll(`g[data-element="${n.literal}"]`))if(!(n.original&&n.original!==m.dataset.original)){if(m.dataset.radical==="general"||m.dataset.radical==="tradit"){m.style.color="var(--green)";continue}if(m.dataset.radical==="nelson"||m.dataset.radical==="jis"){m.style.color="var(--bluegreen)";continue}if(m.dataset.phon){m.style.color="var(--gold)";continue}(!m.dataset.part||m.dataset.part==="1")&&(R+=1),m.style.color=G(240+63*R)}}),(o,R)=>{const m=z("RouterLink");return e(),B(m,{to:c(ee)(F(o.literal)),class:"kanji-component-item"},{default:V(()=>[c(i)?(e(),a("svg",{key:0,viewBox:c(l),class:"kanji-component-strokes"},[o.hide?p("",!0):(e(),B(ke,{key:0,class:"strokes-group",strokes:c(i)},null,8,["strokes"]))],8,me)):p("",!0),o.hide?p("",!0):(e(),a("div",fe,[O.value?p("",!0):(e(),a("span",ge,f(o.literal),1)),k("p",ve,[k("strong",null,f(v.value),1),r.value?(e(),a("span",he,f(r.value),1)):p("",!0),y.value?(e(),a("span",je," ("+f(y.value)+")",1)):p("",!0)]),k("div",_e,[u.value?(e(),a("span",{key:0,class:x(["is-radical",{"is-nelson":u.value==="nelson","is-jis":u.value==="jis"}])},[u.value==="nelson"?(e(),a(g,{key:0},[h("Nelson radical")],64)):u.value==="jis"?(e(),a(g,{key:1},[h("JIS radical")],64)):(e(),a(g,{key:2},[h("Radical")],64)),K.value?(e(),a(g,{key:3},[h(" "+f(K.value),1)],64)):p("",!0)],2)):p("",!0),t.value?(e(),a("span",ye,"Phonetic")):p("",!0)])]))]),_:1},8,["to"])}}}),we=C(be,[["__scopeId","data-v-6ab455ef"]]),Ce={class:"component-list"},I=4,Ke=w({__name:"KanjiComponents",props:{hide:{type:Boolean}},setup(j){const n=U(),i=M(!1);function l(u){return H(u,J(t=>t.original||null))}return D(n,()=>{i.value=!1}),(u,t)=>(e(),a("section",null,[k("h2",null,[t[1]||(t[1]=h(" Components ",-1)),!u.hide&&c(n).size>0?(e(),a(g,{key:0},[h(" ("+f(c(n).size)+") ",1)],64)):p("",!0)]),k("ul",Ce,[(e(!0),a(g,null,b(c(n),([d,r],s)=>(e(),a(g,{key:d},[i.value||s<I?(e(!0),a(g,{key:0},b(l(r),([v,y])=>(e(),a("li",{key:v??0},[$(we,{literal:d,parts:y,original:v,hide:u.hide},null,8,["literal","parts","original","hide"])]))),128)):p("",!0)],64))),128))]),!u.hide&&!i.value&&c(n).size>I?(e(),B(ae,{key:0,class:"show-more-button",inline:"",onClick:t[0]||(t[0]=d=>i.value=!0)},{default:V(()=>[h(" show "+f(c(n).size-I)+" more ",1)]),_:1})):p("",!0)]))}}),Ze=C(Ke,[["__scopeId","data-v-ad616a9a"]]),$e={class:"kanji-readings"},Be=["data-blur"],Re=["data-blur"],Ve=w({__name:"KanjiReadings",props:{kanji:{},hideReadings:{type:Boolean}},setup(j){return(n,i)=>(e(),a("section",null,[i[2]||(i[2]=k("h2",null,"Readings",-1)),k("dl",$e,[i[0]||(i[0]=k("dt",null,"Kun",-1)),k("div",{class:"dd-items","data-blur":n.hideReadings?!0:null},[(e(!0),a(g,null,b(n.kanji.kunYomi,l=>(e(),a("dd",{key:l},f(l),1))),128))],8,Be),i[1]||(i[1]=k("dt",null,"On",-1)),k("div",{class:"dd-items","data-blur":n.hideReadings?!0:null},[(e(!0),a(g,null,b(n.kanji.onYomi,l=>(e(),a("dd",{key:l},f(l),1))),128))],8,Re)])]))}}),xe=C(Ve,[["__scopeId","data-v-eb203917"]]),Se={key:1,class:"loading-container"},Le=w({__name:"KanjiStrokes",props:{kanji:{},autoHint:{type:Boolean},practiceMode:{type:Boolean}},emits:["practiceDone"],setup(j){const n=q(),i=W(),l=Y(),u=_(()=>{const t=[];for(const d of n.value?.querySelectorAll("path")??[]){const r=d.getAttribute("d");r&&t.push(r)}return[t]});return(t,d)=>(e(),a("section",null,[k("h2",null,[d[1]||(d[1]=h(" Strokes ",-1)),!t.practiceMode&&!c(l)&&u.value[0].length>0?(e(),a(g,{key:0},[h(" ("+f(u.value[0].length)+") ",1)],64)):p("",!0)]),u.value&&!c(l)?(e(),B(Q,{key:0,"view-box":c(i),"char-strokes":u.value,"practice-mode":t.practiceMode,"auto-hint":t.autoHint,onPracticeDone:d[0]||(d[0]=r=>t.$emit("practiceDone"))},null,8,["view-box","char-strokes","practice-mode","auto-hint"])):c(l)?(e(),a("div",Se,[$(se,{class:"loading"})])):p("",!0)]))}}),ea=C(Le,[["__scopeId","data-v-38632d97"]]),Ie={class:"kanji-title"},Ae={class:"main-meaning meaning"},Me={class:"labels"},De={key:0,class:"additional-meanings"},Ge={key:1,class:"actions"},Ne=w({__name:"KanjiTitle",props:{kanji:{},hideLiteral:{type:Boolean,default:!1},hideMeaning:{type:Boolean,default:!1},actions:{default:"explore"}},setup(j){const n=j,i=_(()=>{const{freq:t}=n.kanji;return t?t<=50?50:t<=100?100:t<=200?200:t<=500?500:t<=1e3?1e3:null:null}),l=le(()=>n.kanji.codepoint),u=re(()=>n.kanji.codepoint,["kanji-write","kanji-read"]);return(t,d)=>{const r=z("RouterLink");return e(),a("header",Ie,[S(k("h2",{class:"literal",lang:"ja"},f(t.kanji.literal),513),[[L,!t.hideLiteral]]),S(k("p",Ae,[k("strong",null,f(t.kanji.meanings?.at(0)),1)],512),[[L,!t.hideMeaning]]),k("aside",Me,[i.value&&!c(l).some(({name:s})=>s===`news-top-${i.value}`)?(e(),B(N,{key:0,class:"freq-label"},{default:V(()=>[h(" Top "+f(i.value),1)]),_:1})):p("",!0),(e(!0),a(g,null,b(c(l),s=>(e(),B(r,{key:s.name,to:{name:c(te),query:{deck:s.name}},class:"deck-label"},{default:V(()=>[$(N,null,{default:V(()=>[h(f(c(ie)(s)),1)]),_:2},1024)]),_:2},1032,["to"]))),128)),$(P,{r:c(u).get("kanji-write"),label:"書"},null,8,["r"]),$(P,{r:c(u).get("kanji-read"),label:"読"},null,8,["r"])]),t.kanji.meanings?.length>1?S((e(),a("ul",De,[(e(!0),a(g,null,b(t.kanji.meanings.slice(1),s=>(e(),a("li",{key:s,class:"meaning"},f(s),1))),128))],512)),[[L,!t.hideMeaning]]):p("",!0),t.$slots.actions?(e(),a("nav",Ge,[ne(t.$slots,"actions",{},void 0,!0)])):p("",!0)])}}}),aa=C(Ne,[["__scopeId","data-v-b9498ee6"]]),Pe={class:"kanji-word-list"},A=10,Ee=w({__name:"KanjiWordList",props:{kanjiVocab:{},hideKanji:{type:Boolean},hideReading:{type:Boolean},hideMeaning:{type:Boolean}},setup(j){const n=j,i=oe(async()=>{const{words:r}=n.kanjiVocab,s=[],v=[],{store:y}=(await ce).transaction("bookmarked-words");for(const K of r)await y.count(K)?s.push(K):v.push(K);return{bookmarked:s,rest:v}},null),l=M(A),u=_(()=>{const r=l.value;if(i.value){const{bookmarked:s,rest:v}=i.value;return[s,v.slice(0,r)]}return[n.kanjiVocab.words.slice(0,r)]});function t(){l.value+=A}function d([{isIntersecting:r}]){r&&t()}return D(()=>n.kanjiVocab.codepoint,(r,s)=>{r!==s&&(l.value=A)}),(r,s)=>(e(),a("section",null,[k("h2",null,"Words ("+f(r.kanjiVocab.words.length)+")",1),k("ul",Pe,[(e(!0),a(g,null,b(u.value,v=>(e(),a(g,null,[(e(!0),a(g,null,b(v,y=>(e(),a("li",{key:y},[$(de,{word:y,kanji:r.kanjiVocab.literal,"hide-kanji":r.hideKanji,"hide-reading":r.hideReading,"hide-meaning":r.hideMeaning},null,8,["word","kanji","hide-kanji","hide-reading","hide-meaning"])]))),128))],64))),256))]),l.value<r.kanjiVocab.words.length?S((e(),a("button",{key:0,class:"next-page-button",onClick:s[0]||(s[0]=v=>t())},[...s[1]||(s[1]=[h(" Load More ",-1)])])),[[c(ue),d]]):p("",!0)]))}}),na=C(Ee,[["__scopeId","data-v-e2dbf567"]]);export{aa as K,xe as a,ea as b,Ze as c,na as d};
//# sourceMappingURL=KanjiWordList-AtATzaQr.js.map
